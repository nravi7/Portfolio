function YU(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function B_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function qU(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var gC={exports:{}},jg={},vC={exports:{}},It={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kd=Symbol.for("react.element"),ZU=Symbol.for("react.portal"),JU=Symbol.for("react.fragment"),QU=Symbol.for("react.strict_mode"),KU=Symbol.for("react.profiler"),$U=Symbol.for("react.provider"),eN=Symbol.for("react.context"),tN=Symbol.for("react.forward_ref"),nN=Symbol.for("react.suspense"),iN=Symbol.for("react.memo"),rN=Symbol.for("react.lazy"),TE=Symbol.iterator;function sN(n){return n===null||typeof n!="object"?null:(n=TE&&n[TE]||n["@@iterator"],typeof n=="function"?n:null)}var yC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xC=Object.assign,_C={};function Ac(n,e,t){this.props=n,this.context=e,this.refs=_C,this.updater=t||yC}Ac.prototype.isReactComponent={};Ac.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Ac.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function SC(){}SC.prototype=Ac.prototype;function z_(n,e,t){this.props=n,this.context=e,this.refs=_C,this.updater=t||yC}var V_=z_.prototype=new SC;V_.constructor=z_;xC(V_,Ac.prototype);V_.isPureReactComponent=!0;var bE=Array.isArray,wC=Object.prototype.hasOwnProperty,G_={current:null},MC={key:!0,ref:!0,__self:!0,__source:!0};function EC(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)wC.call(e,i)&&!MC.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Kd,type:n,key:s,ref:o,props:r,_owner:G_.current}}function oN(n,e){return{$$typeof:Kd,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function H_(n){return typeof n=="object"&&n!==null&&n.$$typeof===Kd}function aN(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var CE=/\/+/g;function Xv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?aN(""+n.key):e.toString(36)}function Dm(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Kd:case ZU:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Xv(o,0):i,bE(r)?(t="",n!=null&&(t=n.replace(CE,"$&/")+"/"),Dm(r,e,t,"",function(u){return u})):r!=null&&(H_(r)&&(r=oN(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(CE,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",bE(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+Xv(s,a);o+=Dm(s,e,t,l,r)}else if(l=sN(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+Xv(s,a++),o+=Dm(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dp(n,e,t){if(n==null)return n;var i=[],r=0;return Dm(n,i,"","",function(s){return e.call(t,s,r++)}),i}function lN(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Vi={current:null},Um={transition:null},uN={ReactCurrentDispatcher:Vi,ReactCurrentBatchConfig:Um,ReactCurrentOwner:G_};It.Children={map:dp,forEach:function(n,e,t){dp(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return dp(n,function(){e++}),e},toArray:function(n){return dp(n,function(e){return e})||[]},only:function(n){if(!H_(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};It.Component=Ac;It.Fragment=JU;It.Profiler=KU;It.PureComponent=z_;It.StrictMode=QU;It.Suspense=nN;It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uN;It.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=xC({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=G_.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)wC.call(e,l)&&!MC.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:Kd,type:n.type,key:r,ref:s,props:i,_owner:o}};It.createContext=function(n){return n={$$typeof:eN,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:$U,_context:n},n.Consumer=n};It.createElement=EC;It.createFactory=function(n){var e=EC.bind(null,n);return e.type=n,e};It.createRef=function(){return{current:null}};It.forwardRef=function(n){return{$$typeof:tN,render:n}};It.isValidElement=H_;It.lazy=function(n){return{$$typeof:rN,_payload:{_status:-1,_result:n},_init:lN}};It.memo=function(n,e){return{$$typeof:iN,type:n,compare:e===void 0?null:e}};It.startTransition=function(n){var e=Um.transition;Um.transition={};try{n()}finally{Um.transition=e}};It.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};It.useCallback=function(n,e){return Vi.current.useCallback(n,e)};It.useContext=function(n){return Vi.current.useContext(n)};It.useDebugValue=function(){};It.useDeferredValue=function(n){return Vi.current.useDeferredValue(n)};It.useEffect=function(n,e){return Vi.current.useEffect(n,e)};It.useId=function(){return Vi.current.useId()};It.useImperativeHandle=function(n,e,t){return Vi.current.useImperativeHandle(n,e,t)};It.useInsertionEffect=function(n,e){return Vi.current.useInsertionEffect(n,e)};It.useLayoutEffect=function(n,e){return Vi.current.useLayoutEffect(n,e)};It.useMemo=function(n,e){return Vi.current.useMemo(n,e)};It.useReducer=function(n,e,t){return Vi.current.useReducer(n,e,t)};It.useRef=function(n){return Vi.current.useRef(n)};It.useState=function(n){return Vi.current.useState(n)};It.useSyncExternalStore=function(n,e,t){return Vi.current.useSyncExternalStore(n,e,t)};It.useTransition=function(){return Vi.current.useTransition()};It.version="18.2.0";vC.exports=It;var X=vC.exports;const $d=B_(X),cN=YU({__proto__:null,default:$d},[X]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fN=X,dN=Symbol.for("react.element"),hN=Symbol.for("react.fragment"),pN=Object.prototype.hasOwnProperty,mN=fN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gN={key:!0,ref:!0,__self:!0,__source:!0};function AC(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)pN.call(e,i)&&!gN.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:dN,type:n,key:s,ref:o,props:r,_owner:mN.current}}jg.Fragment=hN;jg.jsx=AC;jg.jsxs=AC;gC.exports=jg;var te=gC.exports,P1={},TC={exports:{}},Rr={},bC={exports:{}},CC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,O){var V=N.length;N.push(O);e:for(;0<V;){var L=V-1>>>1,k=N[L];if(0<r(k,O))N[L]=O,N[V]=k,V=L;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var O=N[0],V=N.pop();if(V!==O){N[0]=V;e:for(var L=0,k=N.length,K=k>>>1;L<K;){var ie=2*(L+1)-1,$=N[ie],le=ie+1,oe=N[le];if(0>r($,V))le<k&&0>r(oe,$)?(N[L]=oe,N[le]=V,L=le):(N[L]=$,N[ie]=V,L=ie);else if(le<k&&0>r(oe,V))N[L]=oe,N[le]=V,L=le;else break e}}return O}function r(N,O){var V=N.sortIndex-O.sortIndex;return V!==0?V:N.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,h=null,p=3,m=!1,v=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(N){for(var O=t(u);O!==null;){if(O.callback===null)i(u);else if(O.startTime<=N)i(u),O.sortIndex=O.expirationTime,e(l,O);else break;O=t(u)}}function E(N){if(w=!1,S(N),!v)if(t(l)!==null)v=!0,J(T);else{var O=t(u);O!==null&&ne(E,O.startTime-N)}}function T(N,O){v=!1,w&&(w=!1,g(I),I=-1),m=!0;var V=p;try{for(S(O),h=t(l);h!==null&&(!(h.expirationTime>O)||N&&!H());){var L=h.callback;if(typeof L=="function"){h.callback=null,p=h.priorityLevel;var k=L(h.expirationTime<=O);O=n.unstable_now(),typeof k=="function"?h.callback=k:h===t(l)&&i(l),S(O)}else i(l);h=t(l)}if(h!==null)var K=!0;else{var ie=t(u);ie!==null&&ne(E,ie.startTime-O),K=!1}return K}finally{h=null,p=V,m=!1}}var b=!1,P=null,I=-1,C=5,D=-1;function H(){return!(n.unstable_now()-D<C)}function G(){if(P!==null){var N=n.unstable_now();D=N;var O=!0;try{O=P(!0,N)}finally{O?Z():(b=!1,P=null)}}else b=!1}var Z;if(typeof x=="function")Z=function(){x(G)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,q=z.port2;z.port1.onmessage=G,Z=function(){q.postMessage(null)}}else Z=function(){_(G,0)};function J(N){P=N,b||(b=!0,Z())}function ne(N,O){I=_(function(){N(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,J(T))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var V=p;p=O;try{return N()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,O){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var V=p;p=N;try{return O()}finally{p=V}},n.unstable_scheduleCallback=function(N,O,V){var L=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?L+V:L):V=L,N){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=V+k,N={id:f++,callback:O,priorityLevel:N,startTime:V,expirationTime:k,sortIndex:-1},V>L?(N.sortIndex=V,e(u,N),t(l)===null&&N===t(u)&&(w?(g(I),I=-1):w=!0,ne(E,V-L))):(N.sortIndex=k,e(l,N),v||m||(v=!0,J(T))),N},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(N){var O=p;return function(){var V=p;p=O;try{return N.apply(this,arguments)}finally{p=V}}}})(CC);bC.exports=CC;var vN=bC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PC=X,Cr=vN;function Ge(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var RC=new Set,ad={};function kl(n,e){dc(n,e),dc(n+"Capture",e)}function dc(n,e){for(ad[n]=e,n=0;n<e.length;n++)RC.add(e[n])}var vo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),R1=Object.prototype.hasOwnProperty,yN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PE={},RE={};function xN(n){return R1.call(RE,n)?!0:R1.call(PE,n)?!1:yN.test(n)?RE[n]=!0:(PE[n]=!0,!1)}function _N(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function SN(n,e,t,i){if(e===null||typeof e>"u"||_N(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gi(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var di={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){di[n]=new Gi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];di[e]=new Gi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){di[n]=new Gi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){di[n]=new Gi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){di[n]=new Gi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){di[n]=new Gi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){di[n]=new Gi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){di[n]=new Gi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){di[n]=new Gi(n,5,!1,n.toLowerCase(),null,!1,!1)});var W_=/[\-:]([a-z])/g;function j_(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(W_,j_);di[e]=new Gi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(W_,j_);di[e]=new Gi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(W_,j_);di[e]=new Gi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){di[n]=new Gi(n,1,!1,n.toLowerCase(),null,!1,!1)});di.xlinkHref=new Gi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){di[n]=new Gi(n,1,!1,n.toLowerCase(),null,!0,!0)});function X_(n,e,t,i){var r=di.hasOwnProperty(e)?di[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SN(e,t,r,i)&&(t=null),i||r===null?xN(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Eo=PC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hp=Symbol.for("react.element"),Du=Symbol.for("react.portal"),Uu=Symbol.for("react.fragment"),Y_=Symbol.for("react.strict_mode"),L1=Symbol.for("react.profiler"),LC=Symbol.for("react.provider"),IC=Symbol.for("react.context"),q_=Symbol.for("react.forward_ref"),I1=Symbol.for("react.suspense"),D1=Symbol.for("react.suspense_list"),Z_=Symbol.for("react.memo"),Yo=Symbol.for("react.lazy"),DC=Symbol.for("react.offscreen"),LE=Symbol.iterator;function of(n){return n===null||typeof n!="object"?null:(n=LE&&n[LE]||n["@@iterator"],typeof n=="function"?n:null)}var xn=Object.assign,Yv;function Df(n){if(Yv===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Yv=e&&e[1]||""}return`
`+Yv+n}var qv=!1;function Zv(n,e){if(!n||qv)return"";qv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{qv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Df(n):""}function wN(n){switch(n.tag){case 5:return Df(n.type);case 16:return Df("Lazy");case 13:return Df("Suspense");case 19:return Df("SuspenseList");case 0:case 2:case 15:return n=Zv(n.type,!1),n;case 11:return n=Zv(n.type.render,!1),n;case 1:return n=Zv(n.type,!0),n;default:return""}}function U1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Uu:return"Fragment";case Du:return"Portal";case L1:return"Profiler";case Y_:return"StrictMode";case I1:return"Suspense";case D1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case IC:return(n.displayName||"Context")+".Consumer";case LC:return(n._context.displayName||"Context")+".Provider";case q_:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Z_:return e=n.displayName||null,e!==null?e:U1(n.type)||"Memo";case Yo:e=n._payload,n=n._init;try{return U1(n(e))}catch{}}return null}function MN(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U1(e);case 8:return e===Y_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ma(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function UC(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function EN(n){var e=UC(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function pp(n){n._valueTracker||(n._valueTracker=EN(n))}function NC(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=UC(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function ng(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function N1(n,e){var t=e.checked;return xn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function IE(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ma(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function OC(n,e){e=e.checked,e!=null&&X_(n,"checked",e,!1)}function O1(n,e){OC(n,e);var t=ma(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?F1(n,e.type,t):e.hasOwnProperty("defaultValue")&&F1(n,e.type,ma(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function DE(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function F1(n,e,t){(e!=="number"||ng(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Uf=Array.isArray;function nc(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ma(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function k1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ge(91));return xn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function UE(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ge(92));if(Uf(t)){if(1<t.length)throw Error(Ge(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ma(t)}}function FC(n,e){var t=ma(e.value),i=ma(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function NE(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function kC(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function B1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?kC(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var mp,BC=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(mp=mp||document.createElement("div"),mp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function ld(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var zf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AN=["Webkit","ms","Moz","O"];Object.keys(zf).forEach(function(n){AN.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),zf[e]=zf[n]})});function zC(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||zf.hasOwnProperty(n)&&zf[n]?(""+e).trim():e+"px"}function VC(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=zC(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var TN=xn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function z1(n,e){if(e){if(TN[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ge(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ge(62))}}function V1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var G1=null;function J_(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var H1=null,ic=null,rc=null;function OE(n){if(n=nh(n)){if(typeof H1!="function")throw Error(Ge(280));var e=n.stateNode;e&&(e=Jg(e),H1(n.stateNode,n.type,e))}}function GC(n){ic?rc?rc.push(n):rc=[n]:ic=n}function HC(){if(ic){var n=ic,e=rc;if(rc=ic=null,OE(n),e)for(n=0;n<e.length;n++)OE(e[n])}}function WC(n,e){return n(e)}function jC(){}var Jv=!1;function XC(n,e,t){if(Jv)return n(e,t);Jv=!0;try{return WC(n,e,t)}finally{Jv=!1,(ic!==null||rc!==null)&&(jC(),HC())}}function ud(n,e){var t=n.stateNode;if(t===null)return null;var i=Jg(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ge(231,e,typeof t));return t}var W1=!1;if(vo)try{var af={};Object.defineProperty(af,"passive",{get:function(){W1=!0}}),window.addEventListener("test",af,af),window.removeEventListener("test",af,af)}catch{W1=!1}function bN(n,e,t,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(f){this.onError(f)}}var Vf=!1,ig=null,rg=!1,j1=null,CN={onError:function(n){Vf=!0,ig=n}};function PN(n,e,t,i,r,s,o,a,l){Vf=!1,ig=null,bN.apply(CN,arguments)}function RN(n,e,t,i,r,s,o,a,l){if(PN.apply(this,arguments),Vf){if(Vf){var u=ig;Vf=!1,ig=null}else throw Error(Ge(198));rg||(rg=!0,j1=u)}}function Bl(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function YC(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function FE(n){if(Bl(n)!==n)throw Error(Ge(188))}function LN(n){var e=n.alternate;if(!e){if(e=Bl(n),e===null)throw Error(Ge(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return FE(r),n;if(s===i)return FE(r),e;s=s.sibling}throw Error(Ge(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Ge(189))}}if(t.alternate!==i)throw Error(Ge(190))}if(t.tag!==3)throw Error(Ge(188));return t.stateNode.current===t?n:e}function qC(n){return n=LN(n),n!==null?ZC(n):null}function ZC(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=ZC(n);if(e!==null)return e;n=n.sibling}return null}var JC=Cr.unstable_scheduleCallback,kE=Cr.unstable_cancelCallback,IN=Cr.unstable_shouldYield,DN=Cr.unstable_requestPaint,In=Cr.unstable_now,UN=Cr.unstable_getCurrentPriorityLevel,Q_=Cr.unstable_ImmediatePriority,QC=Cr.unstable_UserBlockingPriority,sg=Cr.unstable_NormalPriority,NN=Cr.unstable_LowPriority,KC=Cr.unstable_IdlePriority,Xg=null,Is=null;function ON(n){if(Is&&typeof Is.onCommitFiberRoot=="function")try{Is.onCommitFiberRoot(Xg,n,void 0,(n.current.flags&128)===128)}catch{}}var as=Math.clz32?Math.clz32:BN,FN=Math.log,kN=Math.LN2;function BN(n){return n>>>=0,n===0?32:31-(FN(n)/kN|0)|0}var gp=64,vp=4194304;function Nf(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function og(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Nf(a):(s&=o,s!==0&&(i=Nf(s)))}else o=t&~r,o!==0?i=Nf(o):s!==0&&(i=Nf(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-as(e),r=1<<t,i|=n[t],e&=~r;return i}function zN(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VN(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-as(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=zN(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function X1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function $C(){var n=gp;return gp<<=1,!(gp&4194240)&&(gp=64),n}function Qv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function eh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-as(e),n[e]=t}function GN(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-as(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function K_(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-as(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Wt=0;function eP(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var tP,$_,nP,iP,rP,Y1=!1,yp=[],na=null,ia=null,ra=null,cd=new Map,fd=new Map,Qo=[],HN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function BE(n,e){switch(n){case"focusin":case"focusout":na=null;break;case"dragenter":case"dragleave":ia=null;break;case"mouseover":case"mouseout":ra=null;break;case"pointerover":case"pointerout":cd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fd.delete(e.pointerId)}}function lf(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=nh(e),e!==null&&$_(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function WN(n,e,t,i,r){switch(e){case"focusin":return na=lf(na,n,e,t,i,r),!0;case"dragenter":return ia=lf(ia,n,e,t,i,r),!0;case"mouseover":return ra=lf(ra,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return cd.set(s,lf(cd.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,fd.set(s,lf(fd.get(s)||null,n,e,t,i,r)),!0}return!1}function sP(n){var e=fl(n.target);if(e!==null){var t=Bl(e);if(t!==null){if(e=t.tag,e===13){if(e=YC(t),e!==null){n.blockedOn=e,rP(n.priority,function(){nP(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Nm(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=q1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);G1=i,t.target.dispatchEvent(i),G1=null}else return e=nh(t),e!==null&&$_(e),n.blockedOn=t,!1;e.shift()}return!0}function zE(n,e,t){Nm(n)&&t.delete(e)}function jN(){Y1=!1,na!==null&&Nm(na)&&(na=null),ia!==null&&Nm(ia)&&(ia=null),ra!==null&&Nm(ra)&&(ra=null),cd.forEach(zE),fd.forEach(zE)}function uf(n,e){n.blockedOn===e&&(n.blockedOn=null,Y1||(Y1=!0,Cr.unstable_scheduleCallback(Cr.unstable_NormalPriority,jN)))}function dd(n){function e(r){return uf(r,n)}if(0<yp.length){uf(yp[0],n);for(var t=1;t<yp.length;t++){var i=yp[t];i.blockedOn===n&&(i.blockedOn=null)}}for(na!==null&&uf(na,n),ia!==null&&uf(ia,n),ra!==null&&uf(ra,n),cd.forEach(e),fd.forEach(e),t=0;t<Qo.length;t++)i=Qo[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Qo.length&&(t=Qo[0],t.blockedOn===null);)sP(t),t.blockedOn===null&&Qo.shift()}var sc=Eo.ReactCurrentBatchConfig,ag=!0;function XN(n,e,t,i){var r=Wt,s=sc.transition;sc.transition=null;try{Wt=1,eS(n,e,t,i)}finally{Wt=r,sc.transition=s}}function YN(n,e,t,i){var r=Wt,s=sc.transition;sc.transition=null;try{Wt=4,eS(n,e,t,i)}finally{Wt=r,sc.transition=s}}function eS(n,e,t,i){if(ag){var r=q1(n,e,t,i);if(r===null)ay(n,e,i,lg,t),BE(n,i);else if(WN(r,n,e,t,i))i.stopPropagation();else if(BE(n,i),e&4&&-1<HN.indexOf(n)){for(;r!==null;){var s=nh(r);if(s!==null&&tP(s),s=q1(n,e,t,i),s===null&&ay(n,e,i,lg,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else ay(n,e,i,null,t)}}var lg=null;function q1(n,e,t,i){if(lg=null,n=J_(i),n=fl(n),n!==null)if(e=Bl(n),e===null)n=null;else if(t=e.tag,t===13){if(n=YC(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return lg=n,null}function oP(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UN()){case Q_:return 1;case QC:return 4;case sg:case NN:return 16;case KC:return 536870912;default:return 16}default:return 16}}var ea=null,tS=null,Om=null;function aP(){if(Om)return Om;var n,e=tS,t=e.length,i,r="value"in ea?ea.value:ea.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Om=r.slice(n,1<i?1-i:void 0)}function Fm(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function xp(){return!0}function VE(){return!1}function Lr(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xp:VE,this.isPropagationStopped=VE,this}return xn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=xp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=xp)},persist:function(){},isPersistent:xp}),e}var Tc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nS=Lr(Tc),th=xn({},Tc,{view:0,detail:0}),qN=Lr(th),Kv,$v,cf,Yg=xn({},th,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iS,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==cf&&(cf&&n.type==="mousemove"?(Kv=n.screenX-cf.screenX,$v=n.screenY-cf.screenY):$v=Kv=0,cf=n),Kv)},movementY:function(n){return"movementY"in n?n.movementY:$v}}),GE=Lr(Yg),ZN=xn({},Yg,{dataTransfer:0}),JN=Lr(ZN),QN=xn({},th,{relatedTarget:0}),ey=Lr(QN),KN=xn({},Tc,{animationName:0,elapsedTime:0,pseudoElement:0}),$N=Lr(KN),eO=xn({},Tc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),tO=Lr(eO),nO=xn({},Tc,{data:0}),HE=Lr(nO),iO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oO(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=sO[n])?!!e[n]:!1}function iS(){return oO}var aO=xn({},th,{key:function(n){if(n.key){var e=iO[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Fm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?rO[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iS,charCode:function(n){return n.type==="keypress"?Fm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Fm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),lO=Lr(aO),uO=xn({},Yg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),WE=Lr(uO),cO=xn({},th,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iS}),fO=Lr(cO),dO=xn({},Tc,{propertyName:0,elapsedTime:0,pseudoElement:0}),hO=Lr(dO),pO=xn({},Yg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),mO=Lr(pO),gO=[9,13,27,32],rS=vo&&"CompositionEvent"in window,Gf=null;vo&&"documentMode"in document&&(Gf=document.documentMode);var vO=vo&&"TextEvent"in window&&!Gf,lP=vo&&(!rS||Gf&&8<Gf&&11>=Gf),jE=String.fromCharCode(32),XE=!1;function uP(n,e){switch(n){case"keyup":return gO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cP(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Nu=!1;function yO(n,e){switch(n){case"compositionend":return cP(e);case"keypress":return e.which!==32?null:(XE=!0,jE);case"textInput":return n=e.data,n===jE&&XE?null:n;default:return null}}function xO(n,e){if(Nu)return n==="compositionend"||!rS&&uP(n,e)?(n=aP(),Om=tS=ea=null,Nu=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lP&&e.locale!=="ko"?null:e.data;default:return null}}var _O={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function YE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!_O[n.type]:e==="textarea"}function fP(n,e,t,i){GC(i),e=ug(e,"onChange"),0<e.length&&(t=new nS("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Hf=null,hd=null;function SO(n){wP(n,0)}function qg(n){var e=ku(n);if(NC(e))return n}function wO(n,e){if(n==="change")return e}var dP=!1;if(vo){var ty;if(vo){var ny="oninput"in document;if(!ny){var qE=document.createElement("div");qE.setAttribute("oninput","return;"),ny=typeof qE.oninput=="function"}ty=ny}else ty=!1;dP=ty&&(!document.documentMode||9<document.documentMode)}function ZE(){Hf&&(Hf.detachEvent("onpropertychange",hP),hd=Hf=null)}function hP(n){if(n.propertyName==="value"&&qg(hd)){var e=[];fP(e,hd,n,J_(n)),XC(SO,e)}}function MO(n,e,t){n==="focusin"?(ZE(),Hf=e,hd=t,Hf.attachEvent("onpropertychange",hP)):n==="focusout"&&ZE()}function EO(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return qg(hd)}function AO(n,e){if(n==="click")return qg(e)}function TO(n,e){if(n==="input"||n==="change")return qg(e)}function bO(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var cs=typeof Object.is=="function"?Object.is:bO;function pd(n,e){if(cs(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!R1.call(e,r)||!cs(n[r],e[r]))return!1}return!0}function JE(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function QE(n,e){var t=JE(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=JE(t)}}function pP(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?pP(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function mP(){for(var n=window,e=ng();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=ng(n.document)}return e}function sS(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function CO(n){var e=mP(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&pP(t.ownerDocument.documentElement,t)){if(i!==null&&sS(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=QE(t,s);var o=QE(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var PO=vo&&"documentMode"in document&&11>=document.documentMode,Ou=null,Z1=null,Wf=null,J1=!1;function KE(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;J1||Ou==null||Ou!==ng(i)||(i=Ou,"selectionStart"in i&&sS(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Wf&&pd(Wf,i)||(Wf=i,i=ug(Z1,"onSelect"),0<i.length&&(e=new nS("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Ou)))}function _p(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Fu={animationend:_p("Animation","AnimationEnd"),animationiteration:_p("Animation","AnimationIteration"),animationstart:_p("Animation","AnimationStart"),transitionend:_p("Transition","TransitionEnd")},iy={},gP={};vo&&(gP=document.createElement("div").style,"AnimationEvent"in window||(delete Fu.animationend.animation,delete Fu.animationiteration.animation,delete Fu.animationstart.animation),"TransitionEvent"in window||delete Fu.transitionend.transition);function Zg(n){if(iy[n])return iy[n];if(!Fu[n])return n;var e=Fu[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in gP)return iy[n]=e[t];return n}var vP=Zg("animationend"),yP=Zg("animationiteration"),xP=Zg("animationstart"),_P=Zg("transitionend"),SP=new Map,$E="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wa(n,e){SP.set(n,e),kl(e,[n])}for(var ry=0;ry<$E.length;ry++){var sy=$E[ry],RO=sy.toLowerCase(),LO=sy[0].toUpperCase()+sy.slice(1);wa(RO,"on"+LO)}wa(vP,"onAnimationEnd");wa(yP,"onAnimationIteration");wa(xP,"onAnimationStart");wa("dblclick","onDoubleClick");wa("focusin","onFocus");wa("focusout","onBlur");wa(_P,"onTransitionEnd");dc("onMouseEnter",["mouseout","mouseover"]);dc("onMouseLeave",["mouseout","mouseover"]);dc("onPointerEnter",["pointerout","pointerover"]);dc("onPointerLeave",["pointerout","pointerover"]);kl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));kl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));kl("onBeforeInput",["compositionend","keypress","textInput","paste"]);kl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));kl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));kl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Of));function eA(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,RN(i,e,void 0,n),n.currentTarget=null}function wP(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;eA(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;eA(r,a,u),s=l}}}if(rg)throw n=j1,rg=!1,j1=null,n}function tn(n,e){var t=e[tx];t===void 0&&(t=e[tx]=new Set);var i=n+"__bubble";t.has(i)||(MP(e,n,2,!1),t.add(i))}function oy(n,e,t){var i=0;e&&(i|=4),MP(t,n,i,e)}var Sp="_reactListening"+Math.random().toString(36).slice(2);function md(n){if(!n[Sp]){n[Sp]=!0,RC.forEach(function(t){t!=="selectionchange"&&(IO.has(t)||oy(t,!1,n),oy(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Sp]||(e[Sp]=!0,oy("selectionchange",!1,e))}}function MP(n,e,t,i){switch(oP(e)){case 1:var r=XN;break;case 4:r=YN;break;default:r=eS}t=r.bind(null,e,t,n),r=void 0,!W1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function ay(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=fl(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}XC(function(){var u=s,f=J_(t),h=[];e:{var p=SP.get(n);if(p!==void 0){var m=nS,v=n;switch(n){case"keypress":if(Fm(t)===0)break e;case"keydown":case"keyup":m=lO;break;case"focusin":v="focus",m=ey;break;case"focusout":v="blur",m=ey;break;case"beforeblur":case"afterblur":m=ey;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=GE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=JN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=fO;break;case vP:case yP:case xP:m=$N;break;case _P:m=hO;break;case"scroll":m=qN;break;case"wheel":m=mO;break;case"copy":case"cut":case"paste":m=tO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=WE}var w=(e&4)!==0,_=!w&&n==="scroll",g=w?p!==null?p+"Capture":null:p;w=[];for(var x=u,S;x!==null;){S=x;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,g!==null&&(E=ud(x,g),E!=null&&w.push(gd(x,E,S)))),_)break;x=x.return}0<w.length&&(p=new m(p,v,null,t,f),h.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==G1&&(v=t.relatedTarget||t.fromElement)&&(fl(v)||v[yo]))break e;if((m||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=u,v=v?fl(v):null,v!==null&&(_=Bl(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(w=GE,E="onMouseLeave",g="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(w=WE,E="onPointerLeave",g="onPointerEnter",x="pointer"),_=m==null?p:ku(m),S=v==null?p:ku(v),p=new w(E,x+"leave",m,t,f),p.target=_,p.relatedTarget=S,E=null,fl(f)===u&&(w=new w(g,x+"enter",v,t,f),w.target=S,w.relatedTarget=_,E=w),_=E,m&&v)t:{for(w=m,g=v,x=0,S=w;S;S=au(S))x++;for(S=0,E=g;E;E=au(E))S++;for(;0<x-S;)w=au(w),x--;for(;0<S-x;)g=au(g),S--;for(;x--;){if(w===g||g!==null&&w===g.alternate)break t;w=au(w),g=au(g)}w=null}else w=null;m!==null&&tA(h,p,m,w,!1),v!==null&&_!==null&&tA(h,_,v,w,!0)}}e:{if(p=u?ku(u):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var T=wO;else if(YE(p))if(dP)T=TO;else{T=EO;var b=MO}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=AO);if(T&&(T=T(n,u))){fP(h,T,t,f);break e}b&&b(n,p,u),n==="focusout"&&(b=p._wrapperState)&&b.controlled&&p.type==="number"&&F1(p,"number",p.value)}switch(b=u?ku(u):window,n){case"focusin":(YE(b)||b.contentEditable==="true")&&(Ou=b,Z1=u,Wf=null);break;case"focusout":Wf=Z1=Ou=null;break;case"mousedown":J1=!0;break;case"contextmenu":case"mouseup":case"dragend":J1=!1,KE(h,t,f);break;case"selectionchange":if(PO)break;case"keydown":case"keyup":KE(h,t,f)}var P;if(rS)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Nu?uP(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(lP&&t.locale!=="ko"&&(Nu||I!=="onCompositionStart"?I==="onCompositionEnd"&&Nu&&(P=aP()):(ea=f,tS="value"in ea?ea.value:ea.textContent,Nu=!0)),b=ug(u,I),0<b.length&&(I=new HE(I,n,null,t,f),h.push({event:I,listeners:b}),P?I.data=P:(P=cP(t),P!==null&&(I.data=P)))),(P=vO?yO(n,t):xO(n,t))&&(u=ug(u,"onBeforeInput"),0<u.length&&(f=new HE("onBeforeInput","beforeinput",null,t,f),h.push({event:f,listeners:u}),f.data=P))}wP(h,e)})}function gd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function ug(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=ud(n,t),s!=null&&i.unshift(gd(n,s,r)),s=ud(n,e),s!=null&&i.push(gd(n,s,r))),n=n.return}return i}function au(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function tA(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=ud(t,s),l!=null&&o.unshift(gd(t,l,a))):r||(l=ud(t,s),l!=null&&o.push(gd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var DO=/\r\n?/g,UO=/\u0000|\uFFFD/g;function nA(n){return(typeof n=="string"?n:""+n).replace(DO,`
`).replace(UO,"")}function wp(n,e,t){if(e=nA(e),nA(n)!==e&&t)throw Error(Ge(425))}function cg(){}var Q1=null,K1=null;function $1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ex=typeof setTimeout=="function"?setTimeout:void 0,NO=typeof clearTimeout=="function"?clearTimeout:void 0,iA=typeof Promise=="function"?Promise:void 0,OO=typeof queueMicrotask=="function"?queueMicrotask:typeof iA<"u"?function(n){return iA.resolve(null).then(n).catch(FO)}:ex;function FO(n){setTimeout(function(){throw n})}function ly(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),dd(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);dd(e)}function sa(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function rA(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var bc=Math.random().toString(36).slice(2),Cs="__reactFiber$"+bc,vd="__reactProps$"+bc,yo="__reactContainer$"+bc,tx="__reactEvents$"+bc,kO="__reactListeners$"+bc,BO="__reactHandles$"+bc;function fl(n){var e=n[Cs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[yo]||t[Cs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=rA(n);n!==null;){if(t=n[Cs])return t;n=rA(n)}return e}n=t,t=n.parentNode}return null}function nh(n){return n=n[Cs]||n[yo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ku(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ge(33))}function Jg(n){return n[vd]||null}var nx=[],Bu=-1;function Ma(n){return{current:n}}function nn(n){0>Bu||(n.current=nx[Bu],nx[Bu]=null,Bu--)}function Kt(n,e){Bu++,nx[Bu]=n.current,n.current=e}var ga={},Ti=Ma(ga),tr=Ma(!1),Pl=ga;function hc(n,e){var t=n.type.contextTypes;if(!t)return ga;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function nr(n){return n=n.childContextTypes,n!=null}function fg(){nn(tr),nn(Ti)}function sA(n,e,t){if(Ti.current!==ga)throw Error(Ge(168));Kt(Ti,e),Kt(tr,t)}function EP(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ge(108,MN(n)||"Unknown",r));return xn({},t,i)}function dg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ga,Pl=Ti.current,Kt(Ti,n),Kt(tr,tr.current),!0}function oA(n,e,t){var i=n.stateNode;if(!i)throw Error(Ge(169));t?(n=EP(n,e,Pl),i.__reactInternalMemoizedMergedChildContext=n,nn(tr),nn(Ti),Kt(Ti,n)):nn(tr),Kt(tr,t)}var oo=null,Qg=!1,uy=!1;function AP(n){oo===null?oo=[n]:oo.push(n)}function zO(n){Qg=!0,AP(n)}function Ea(){if(!uy&&oo!==null){uy=!0;var n=0,e=Wt;try{var t=oo;for(Wt=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}oo=null,Qg=!1}catch(r){throw oo!==null&&(oo=oo.slice(n+1)),JC(Q_,Ea),r}finally{Wt=e,uy=!1}}return null}var zu=[],Vu=0,hg=null,pg=0,Hr=[],Wr=0,Rl=null,lo=1,uo="";function rl(n,e){zu[Vu++]=pg,zu[Vu++]=hg,hg=n,pg=e}function TP(n,e,t){Hr[Wr++]=lo,Hr[Wr++]=uo,Hr[Wr++]=Rl,Rl=n;var i=lo;n=uo;var r=32-as(i)-1;i&=~(1<<r),t+=1;var s=32-as(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,lo=1<<32-as(e)+r|t<<r|i,uo=s+n}else lo=1<<s|t<<r|i,uo=n}function oS(n){n.return!==null&&(rl(n,1),TP(n,1,0))}function aS(n){for(;n===hg;)hg=zu[--Vu],zu[Vu]=null,pg=zu[--Vu],zu[Vu]=null;for(;n===Rl;)Rl=Hr[--Wr],Hr[Wr]=null,uo=Hr[--Wr],Hr[Wr]=null,lo=Hr[--Wr],Hr[Wr]=null}var Tr=null,Er=null,ln=!1,ss=null;function bP(n,e){var t=jr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function aA(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Tr=n,Er=sa(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Tr=n,Er=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Rl!==null?{id:lo,overflow:uo}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=jr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Tr=n,Er=null,!0):!1;default:return!1}}function ix(n){return(n.mode&1)!==0&&(n.flags&128)===0}function rx(n){if(ln){var e=Er;if(e){var t=e;if(!aA(n,e)){if(ix(n))throw Error(Ge(418));e=sa(t.nextSibling);var i=Tr;e&&aA(n,e)?bP(i,t):(n.flags=n.flags&-4097|2,ln=!1,Tr=n)}}else{if(ix(n))throw Error(Ge(418));n.flags=n.flags&-4097|2,ln=!1,Tr=n}}}function lA(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Tr=n}function Mp(n){if(n!==Tr)return!1;if(!ln)return lA(n),ln=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!$1(n.type,n.memoizedProps)),e&&(e=Er)){if(ix(n))throw CP(),Error(Ge(418));for(;e;)bP(n,e),e=sa(e.nextSibling)}if(lA(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ge(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Er=sa(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Er=null}}else Er=Tr?sa(n.stateNode.nextSibling):null;return!0}function CP(){for(var n=Er;n;)n=sa(n.nextSibling)}function pc(){Er=Tr=null,ln=!1}function lS(n){ss===null?ss=[n]:ss.push(n)}var VO=Eo.ReactCurrentBatchConfig;function ns(n,e){if(n&&n.defaultProps){e=xn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var mg=Ma(null),gg=null,Gu=null,uS=null;function cS(){uS=Gu=gg=null}function fS(n){var e=mg.current;nn(mg),n._currentValue=e}function sx(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function oc(n,e){gg=n,uS=Gu=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(er=!0),n.firstContext=null)}function Yr(n){var e=n._currentValue;if(uS!==n)if(n={context:n,memoizedValue:e,next:null},Gu===null){if(gg===null)throw Error(Ge(308));Gu=n,gg.dependencies={lanes:0,firstContext:n}}else Gu=Gu.next=n;return e}var dl=null;function dS(n){dl===null?dl=[n]:dl.push(n)}function PP(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,dS(e)):(t.next=r.next,r.next=t),e.interleaved=t,xo(n,i)}function xo(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var qo=!1;function hS(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RP(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function ho(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function oa(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Ot&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,xo(n,t)}return r=i.interleaved,r===null?(e.next=e,dS(i)):(e.next=r.next,r.next=e),i.interleaved=e,xo(n,t)}function km(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,K_(n,t)}}function uA(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function vg(n,e,t,i){var r=n.updateQueue;qo=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var f=n.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,f=u=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){f!==null&&(f=f.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,w=a;switch(p=e,m=t,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(m,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,p=typeof v=="function"?v.call(m,h,p):v,p==null)break e;h=xn({},h,p);break e;case 2:qo=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=m,l=h):f=f.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(f===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Il|=o,n.lanes=o,n.memoizedState=h}}function cA(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Ge(191,r));r.call(i)}}}var LP=new PC.Component().refs;function ox(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:xn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Kg={isMounted:function(n){return(n=n._reactInternals)?Bl(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Bi(),r=la(n),s=ho(i,r);s.payload=e,t!=null&&(s.callback=t),e=oa(n,s,r),e!==null&&(ls(e,n,r,i),km(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Bi(),r=la(n),s=ho(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=oa(n,s,r),e!==null&&(ls(e,n,r,i),km(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Bi(),i=la(n),r=ho(t,i);r.tag=2,e!=null&&(r.callback=e),e=oa(n,r,i),e!==null&&(ls(e,n,i,t),km(e,n,i))}};function fA(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!pd(t,i)||!pd(r,s):!0}function IP(n,e,t){var i=!1,r=ga,s=e.contextType;return typeof s=="object"&&s!==null?s=Yr(s):(r=nr(e)?Pl:Ti.current,i=e.contextTypes,s=(i=i!=null)?hc(n,r):ga),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kg,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function dA(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Kg.enqueueReplaceState(e,e.state,null)}function ax(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=LP,hS(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Yr(s):(s=nr(e)?Pl:Ti.current,r.context=hc(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ox(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Kg.enqueueReplaceState(r,r.state,null),vg(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function ff(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ge(309));var i=t.stateNode}if(!i)throw Error(Ge(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===LP&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ge(284));if(!t._owner)throw Error(Ge(290,n))}return n}function Ep(n,e){throw n=Object.prototype.toString.call(e),Error(Ge(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function hA(n){var e=n._init;return e(n._payload)}function DP(n){function e(g,x){if(n){var S=g.deletions;S===null?(g.deletions=[x],g.flags|=16):S.push(x)}}function t(g,x){if(!n)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function i(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function r(g,x){return g=ua(g,x),g.index=0,g.sibling=null,g}function s(g,x,S){return g.index=S,n?(S=g.alternate,S!==null?(S=S.index,S<x?(g.flags|=2,x):S):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,x,S,E){return x===null||x.tag!==6?(x=gy(S,g.mode,E),x.return=g,x):(x=r(x,S),x.return=g,x)}function l(g,x,S,E){var T=S.type;return T===Uu?f(g,x,S.props.children,E,S.key):x!==null&&(x.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Yo&&hA(T)===x.type)?(E=r(x,S.props),E.ref=ff(g,x,S),E.return=g,E):(E=Wm(S.type,S.key,S.props,null,g.mode,E),E.ref=ff(g,x,S),E.return=g,E)}function u(g,x,S,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=vy(S,g.mode,E),x.return=g,x):(x=r(x,S.children||[]),x.return=g,x)}function f(g,x,S,E,T){return x===null||x.tag!==7?(x=Sl(S,g.mode,E,T),x.return=g,x):(x=r(x,S),x.return=g,x)}function h(g,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=gy(""+x,g.mode,S),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case hp:return S=Wm(x.type,x.key,x.props,null,g.mode,S),S.ref=ff(g,null,x),S.return=g,S;case Du:return x=vy(x,g.mode,S),x.return=g,x;case Yo:var E=x._init;return h(g,E(x._payload),S)}if(Uf(x)||of(x))return x=Sl(x,g.mode,S,null),x.return=g,x;Ep(g,x)}return null}function p(g,x,S,E){var T=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return T!==null?null:a(g,x,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case hp:return S.key===T?l(g,x,S,E):null;case Du:return S.key===T?u(g,x,S,E):null;case Yo:return T=S._init,p(g,x,T(S._payload),E)}if(Uf(S)||of(S))return T!==null?null:f(g,x,S,E,null);Ep(g,S)}return null}function m(g,x,S,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(S)||null,a(x,g,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case hp:return g=g.get(E.key===null?S:E.key)||null,l(x,g,E,T);case Du:return g=g.get(E.key===null?S:E.key)||null,u(x,g,E,T);case Yo:var b=E._init;return m(g,x,S,b(E._payload),T)}if(Uf(E)||of(E))return g=g.get(S)||null,f(x,g,E,T,null);Ep(x,E)}return null}function v(g,x,S,E){for(var T=null,b=null,P=x,I=x=0,C=null;P!==null&&I<S.length;I++){P.index>I?(C=P,P=null):C=P.sibling;var D=p(g,P,S[I],E);if(D===null){P===null&&(P=C);break}n&&P&&D.alternate===null&&e(g,P),x=s(D,x,I),b===null?T=D:b.sibling=D,b=D,P=C}if(I===S.length)return t(g,P),ln&&rl(g,I),T;if(P===null){for(;I<S.length;I++)P=h(g,S[I],E),P!==null&&(x=s(P,x,I),b===null?T=P:b.sibling=P,b=P);return ln&&rl(g,I),T}for(P=i(g,P);I<S.length;I++)C=m(P,g,I,S[I],E),C!==null&&(n&&C.alternate!==null&&P.delete(C.key===null?I:C.key),x=s(C,x,I),b===null?T=C:b.sibling=C,b=C);return n&&P.forEach(function(H){return e(g,H)}),ln&&rl(g,I),T}function w(g,x,S,E){var T=of(S);if(typeof T!="function")throw Error(Ge(150));if(S=T.call(S),S==null)throw Error(Ge(151));for(var b=T=null,P=x,I=x=0,C=null,D=S.next();P!==null&&!D.done;I++,D=S.next()){P.index>I?(C=P,P=null):C=P.sibling;var H=p(g,P,D.value,E);if(H===null){P===null&&(P=C);break}n&&P&&H.alternate===null&&e(g,P),x=s(H,x,I),b===null?T=H:b.sibling=H,b=H,P=C}if(D.done)return t(g,P),ln&&rl(g,I),T;if(P===null){for(;!D.done;I++,D=S.next())D=h(g,D.value,E),D!==null&&(x=s(D,x,I),b===null?T=D:b.sibling=D,b=D);return ln&&rl(g,I),T}for(P=i(g,P);!D.done;I++,D=S.next())D=m(P,g,I,D.value,E),D!==null&&(n&&D.alternate!==null&&P.delete(D.key===null?I:D.key),x=s(D,x,I),b===null?T=D:b.sibling=D,b=D);return n&&P.forEach(function(G){return e(g,G)}),ln&&rl(g,I),T}function _(g,x,S,E){if(typeof S=="object"&&S!==null&&S.type===Uu&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case hp:e:{for(var T=S.key,b=x;b!==null;){if(b.key===T){if(T=S.type,T===Uu){if(b.tag===7){t(g,b.sibling),x=r(b,S.props.children),x.return=g,g=x;break e}}else if(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Yo&&hA(T)===b.type){t(g,b.sibling),x=r(b,S.props),x.ref=ff(g,b,S),x.return=g,g=x;break e}t(g,b);break}else e(g,b);b=b.sibling}S.type===Uu?(x=Sl(S.props.children,g.mode,E,S.key),x.return=g,g=x):(E=Wm(S.type,S.key,S.props,null,g.mode,E),E.ref=ff(g,x,S),E.return=g,g=E)}return o(g);case Du:e:{for(b=S.key;x!==null;){if(x.key===b)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){t(g,x.sibling),x=r(x,S.children||[]),x.return=g,g=x;break e}else{t(g,x);break}else e(g,x);x=x.sibling}x=vy(S,g.mode,E),x.return=g,g=x}return o(g);case Yo:return b=S._init,_(g,x,b(S._payload),E)}if(Uf(S))return v(g,x,S,E);if(of(S))return w(g,x,S,E);Ep(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(t(g,x.sibling),x=r(x,S),x.return=g,g=x):(t(g,x),x=gy(S,g.mode,E),x.return=g,g=x),o(g)):t(g,x)}return _}var mc=DP(!0),UP=DP(!1),ih={},Ds=Ma(ih),yd=Ma(ih),xd=Ma(ih);function hl(n){if(n===ih)throw Error(Ge(174));return n}function pS(n,e){switch(Kt(xd,e),Kt(yd,n),Kt(Ds,ih),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:B1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=B1(e,n)}nn(Ds),Kt(Ds,e)}function gc(){nn(Ds),nn(yd),nn(xd)}function NP(n){hl(xd.current);var e=hl(Ds.current),t=B1(e,n.type);e!==t&&(Kt(yd,n),Kt(Ds,t))}function mS(n){yd.current===n&&(nn(Ds),nn(yd))}var hn=Ma(0);function yg(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var cy=[];function gS(){for(var n=0;n<cy.length;n++)cy[n]._workInProgressVersionPrimary=null;cy.length=0}var Bm=Eo.ReactCurrentDispatcher,fy=Eo.ReactCurrentBatchConfig,Ll=0,vn=null,Wn=null,ni=null,xg=!1,jf=!1,_d=0,GO=0;function yi(){throw Error(Ge(321))}function vS(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!cs(n[t],e[t]))return!1;return!0}function yS(n,e,t,i,r,s){if(Ll=s,vn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bm.current=n===null||n.memoizedState===null?XO:YO,n=t(i,r),jf){s=0;do{if(jf=!1,_d=0,25<=s)throw Error(Ge(301));s+=1,ni=Wn=null,e.updateQueue=null,Bm.current=qO,n=t(i,r)}while(jf)}if(Bm.current=_g,e=Wn!==null&&Wn.next!==null,Ll=0,ni=Wn=vn=null,xg=!1,e)throw Error(Ge(300));return n}function xS(){var n=_d!==0;return _d=0,n}function Ts(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ni===null?vn.memoizedState=ni=n:ni=ni.next=n,ni}function qr(){if(Wn===null){var n=vn.alternate;n=n!==null?n.memoizedState:null}else n=Wn.next;var e=ni===null?vn.memoizedState:ni.next;if(e!==null)ni=e,Wn=n;else{if(n===null)throw Error(Ge(310));Wn=n,n={memoizedState:Wn.memoizedState,baseState:Wn.baseState,baseQueue:Wn.baseQueue,queue:Wn.queue,next:null},ni===null?vn.memoizedState=ni=n:ni=ni.next=n}return ni}function Sd(n,e){return typeof e=="function"?e(n):e}function dy(n){var e=qr(),t=e.queue;if(t===null)throw Error(Ge(311));t.lastRenderedReducer=n;var i=Wn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var f=u.lane;if((Ll&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var h={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,vn.lanes|=f,Il|=f}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,cs(i,e.memoizedState)||(er=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,vn.lanes|=s,Il|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function hy(n){var e=qr(),t=e.queue;if(t===null)throw Error(Ge(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);cs(s,e.memoizedState)||(er=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function OP(){}function FP(n,e){var t=vn,i=qr(),r=e(),s=!cs(i.memoizedState,r);if(s&&(i.memoizedState=r,er=!0),i=i.queue,_S(zP.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||ni!==null&&ni.memoizedState.tag&1){if(t.flags|=2048,wd(9,BP.bind(null,t,i,r,e),void 0,null),ii===null)throw Error(Ge(349));Ll&30||kP(t,e,r)}return r}function kP(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=vn.updateQueue,e===null?(e={lastEffect:null,stores:null},vn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function BP(n,e,t,i){e.value=t,e.getSnapshot=i,VP(e)&&GP(n)}function zP(n,e,t){return t(function(){VP(e)&&GP(n)})}function VP(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!cs(n,t)}catch{return!0}}function GP(n){var e=xo(n,1);e!==null&&ls(e,n,1,-1)}function pA(n){var e=Ts();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sd,lastRenderedState:n},e.queue=n,n=n.dispatch=jO.bind(null,vn,n),[e.memoizedState,n]}function wd(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=vn.updateQueue,e===null?(e={lastEffect:null,stores:null},vn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function HP(){return qr().memoizedState}function zm(n,e,t,i){var r=Ts();vn.flags|=n,r.memoizedState=wd(1|e,t,void 0,i===void 0?null:i)}function $g(n,e,t,i){var r=qr();i=i===void 0?null:i;var s=void 0;if(Wn!==null){var o=Wn.memoizedState;if(s=o.destroy,i!==null&&vS(i,o.deps)){r.memoizedState=wd(e,t,s,i);return}}vn.flags|=n,r.memoizedState=wd(1|e,t,s,i)}function mA(n,e){return zm(8390656,8,n,e)}function _S(n,e){return $g(2048,8,n,e)}function WP(n,e){return $g(4,2,n,e)}function jP(n,e){return $g(4,4,n,e)}function XP(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function YP(n,e,t){return t=t!=null?t.concat([n]):null,$g(4,4,XP.bind(null,e,n),t)}function SS(){}function qP(n,e){var t=qr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&vS(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function ZP(n,e){var t=qr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&vS(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function JP(n,e,t){return Ll&21?(cs(t,e)||(t=$C(),vn.lanes|=t,Il|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,er=!0),n.memoizedState=t)}function HO(n,e){var t=Wt;Wt=t!==0&&4>t?t:4,n(!0);var i=fy.transition;fy.transition={};try{n(!1),e()}finally{Wt=t,fy.transition=i}}function QP(){return qr().memoizedState}function WO(n,e,t){var i=la(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},KP(n))$P(e,t);else if(t=PP(n,e,t,i),t!==null){var r=Bi();ls(t,n,i,r),eR(t,e,i)}}function jO(n,e,t){var i=la(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(KP(n))$P(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,cs(a,o)){var l=e.interleaved;l===null?(r.next=r,dS(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=PP(n,e,r,i),t!==null&&(r=Bi(),ls(t,n,i,r),eR(t,e,i))}}function KP(n){var e=n.alternate;return n===vn||e!==null&&e===vn}function $P(n,e){jf=xg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function eR(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,K_(n,t)}}var _g={readContext:Yr,useCallback:yi,useContext:yi,useEffect:yi,useImperativeHandle:yi,useInsertionEffect:yi,useLayoutEffect:yi,useMemo:yi,useReducer:yi,useRef:yi,useState:yi,useDebugValue:yi,useDeferredValue:yi,useTransition:yi,useMutableSource:yi,useSyncExternalStore:yi,useId:yi,unstable_isNewReconciler:!1},XO={readContext:Yr,useCallback:function(n,e){return Ts().memoizedState=[n,e===void 0?null:e],n},useContext:Yr,useEffect:mA,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,zm(4194308,4,XP.bind(null,e,n),t)},useLayoutEffect:function(n,e){return zm(4194308,4,n,e)},useInsertionEffect:function(n,e){return zm(4,2,n,e)},useMemo:function(n,e){var t=Ts();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ts();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=WO.bind(null,vn,n),[i.memoizedState,n]},useRef:function(n){var e=Ts();return n={current:n},e.memoizedState=n},useState:pA,useDebugValue:SS,useDeferredValue:function(n){return Ts().memoizedState=n},useTransition:function(){var n=pA(!1),e=n[0];return n=HO.bind(null,n[1]),Ts().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=vn,r=Ts();if(ln){if(t===void 0)throw Error(Ge(407));t=t()}else{if(t=e(),ii===null)throw Error(Ge(349));Ll&30||kP(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,mA(zP.bind(null,i,s,n),[n]),i.flags|=2048,wd(9,BP.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Ts(),e=ii.identifierPrefix;if(ln){var t=uo,i=lo;t=(i&~(1<<32-as(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=_d++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=GO++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},YO={readContext:Yr,useCallback:qP,useContext:Yr,useEffect:_S,useImperativeHandle:YP,useInsertionEffect:WP,useLayoutEffect:jP,useMemo:ZP,useReducer:dy,useRef:HP,useState:function(){return dy(Sd)},useDebugValue:SS,useDeferredValue:function(n){var e=qr();return JP(e,Wn.memoizedState,n)},useTransition:function(){var n=dy(Sd)[0],e=qr().memoizedState;return[n,e]},useMutableSource:OP,useSyncExternalStore:FP,useId:QP,unstable_isNewReconciler:!1},qO={readContext:Yr,useCallback:qP,useContext:Yr,useEffect:_S,useImperativeHandle:YP,useInsertionEffect:WP,useLayoutEffect:jP,useMemo:ZP,useReducer:hy,useRef:HP,useState:function(){return hy(Sd)},useDebugValue:SS,useDeferredValue:function(n){var e=qr();return Wn===null?e.memoizedState=n:JP(e,Wn.memoizedState,n)},useTransition:function(){var n=hy(Sd)[0],e=qr().memoizedState;return[n,e]},useMutableSource:OP,useSyncExternalStore:FP,useId:QP,unstable_isNewReconciler:!1};function vc(n,e){try{var t="",i=e;do t+=wN(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function py(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function lx(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var ZO=typeof WeakMap=="function"?WeakMap:Map;function tR(n,e,t){t=ho(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){wg||(wg=!0,yx=i),lx(n,e)},t}function nR(n,e,t){t=ho(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){lx(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){lx(n,e),typeof i!="function"&&(aa===null?aa=new Set([this]):aa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function gA(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new ZO;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=uF.bind(null,n,e,t),e.then(n,n))}function vA(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function yA(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ho(-1,1),e.tag=2,oa(t,e,1))),t.lanes|=1),n)}var JO=Eo.ReactCurrentOwner,er=!1;function ki(n,e,t,i){e.child=n===null?UP(e,null,t,i):mc(e,n.child,t,i)}function xA(n,e,t,i,r){t=t.render;var s=e.ref;return oc(e,r),i=yS(n,e,t,i,s,r),t=xS(),n!==null&&!er?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,_o(n,e,r)):(ln&&t&&oS(e),e.flags|=1,ki(n,e,i,r),e.child)}function _A(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!PS(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,iR(n,e,s,i,r)):(n=Wm(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:pd,t(o,i)&&n.ref===e.ref)return _o(n,e,r)}return e.flags|=1,n=ua(s,i),n.ref=e.ref,n.return=e,e.child=n}function iR(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(pd(s,i)&&n.ref===e.ref)if(er=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(er=!0);else return e.lanes=n.lanes,_o(n,e,r)}return ux(n,e,t,i,r)}function rR(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kt(Wu,Sr),Sr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Kt(Wu,Sr),Sr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Kt(Wu,Sr),Sr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Kt(Wu,Sr),Sr|=i;return ki(n,e,r,t),e.child}function sR(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function ux(n,e,t,i,r){var s=nr(t)?Pl:Ti.current;return s=hc(e,s),oc(e,r),t=yS(n,e,t,i,s,r),i=xS(),n!==null&&!er?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,_o(n,e,r)):(ln&&i&&oS(e),e.flags|=1,ki(n,e,t,r),e.child)}function SA(n,e,t,i,r){if(nr(t)){var s=!0;dg(e)}else s=!1;if(oc(e,r),e.stateNode===null)Vm(n,e),IP(e,t,i),ax(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Yr(u):(u=nr(t)?Pl:Ti.current,u=hc(e,u));var f=t.getDerivedStateFromProps,h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&dA(e,o,i,u),qo=!1;var p=e.memoizedState;o.state=p,vg(e,i,o,r),l=e.memoizedState,a!==i||p!==l||tr.current||qo?(typeof f=="function"&&(ox(e,t,f,i),l=e.memoizedState),(a=qo||fA(e,t,a,i,p,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,RP(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:ns(e.type,a),o.props=u,h=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Yr(l):(l=nr(t)?Pl:Ti.current,l=hc(e,l));var m=t.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&dA(e,o,i,l),qo=!1,p=e.memoizedState,o.state=p,vg(e,i,o,r);var v=e.memoizedState;a!==h||p!==v||tr.current||qo?(typeof m=="function"&&(ox(e,t,m,i),v=e.memoizedState),(u=qo||fA(e,t,u,i,p,v,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return cx(n,e,t,i,s,r)}function cx(n,e,t,i,r,s){sR(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&oA(e,t,!1),_o(n,e,s);i=e.stateNode,JO.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=mc(e,n.child,null,s),e.child=mc(e,null,a,s)):ki(n,e,a,s),e.memoizedState=i.state,r&&oA(e,t,!0),e.child}function oR(n){var e=n.stateNode;e.pendingContext?sA(n,e.pendingContext,e.pendingContext!==e.context):e.context&&sA(n,e.context,!1),pS(n,e.containerInfo)}function wA(n,e,t,i,r){return pc(),lS(r),e.flags|=256,ki(n,e,t,i),e.child}var fx={dehydrated:null,treeContext:null,retryLane:0};function dx(n){return{baseLanes:n,cachePool:null,transitions:null}}function aR(n,e,t){var i=e.pendingProps,r=hn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Kt(hn,r&1),n===null)return rx(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=n0(o,i,0,null),n=Sl(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=dx(t),e.memoizedState=fx,n):wS(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return QO(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ua(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=ua(a,s):(s=Sl(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?dx(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=fx,i}return s=n.child,n=s.sibling,i=ua(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function wS(n,e){return e=n0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Ap(n,e,t,i){return i!==null&&lS(i),mc(e,n.child,null,t),n=wS(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function QO(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=py(Error(Ge(422))),Ap(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=n0({mode:"visible",children:i.children},r,0,null),s=Sl(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&mc(e,n.child,null,o),e.child.memoizedState=dx(o),e.memoizedState=fx,s);if(!(e.mode&1))return Ap(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Ge(419)),i=py(s,i,void 0),Ap(n,e,o,i)}if(a=(o&n.childLanes)!==0,er||a){if(i=ii,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,xo(n,r),ls(i,n,r,-1))}return CS(),i=py(Error(Ge(421))),Ap(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=cF.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Er=sa(r.nextSibling),Tr=e,ln=!0,ss=null,n!==null&&(Hr[Wr++]=lo,Hr[Wr++]=uo,Hr[Wr++]=Rl,lo=n.id,uo=n.overflow,Rl=e),e=wS(e,i.children),e.flags|=4096,e)}function MA(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),sx(n.return,e,t)}function my(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function lR(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(ki(n,e,i.children,t),i=hn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&MA(n,t,e);else if(n.tag===19)MA(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Kt(hn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&yg(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),my(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&yg(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}my(e,!0,t,null,s);break;case"together":my(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Vm(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function _o(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Il|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ge(153));if(e.child!==null){for(n=e.child,t=ua(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ua(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function KO(n,e,t){switch(e.tag){case 3:oR(e),pc();break;case 5:NP(e);break;case 1:nr(e.type)&&dg(e);break;case 4:pS(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Kt(mg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Kt(hn,hn.current&1),e.flags|=128,null):t&e.child.childLanes?aR(n,e,t):(Kt(hn,hn.current&1),n=_o(n,e,t),n!==null?n.sibling:null);Kt(hn,hn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return lR(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Kt(hn,hn.current),i)break;return null;case 22:case 23:return e.lanes=0,rR(n,e,t)}return _o(n,e,t)}var uR,hx,cR,fR;uR=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};hx=function(){};cR=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,hl(Ds.current);var s=null;switch(t){case"input":r=N1(n,r),i=N1(n,i),s=[];break;case"select":r=xn({},r,{value:void 0}),i=xn({},i,{value:void 0}),s=[];break;case"textarea":r=k1(n,r),i=k1(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=cg)}z1(t,i);var o;t=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ad.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ad.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&tn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};fR=function(n,e,t,i){t!==i&&(e.flags|=4)};function df(n,e){if(!ln)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function xi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function $O(n,e,t){var i=e.pendingProps;switch(aS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xi(e),null;case 1:return nr(e.type)&&fg(),xi(e),null;case 3:return i=e.stateNode,gc(),nn(tr),nn(Ti),gS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Mp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ss!==null&&(Sx(ss),ss=null))),hx(n,e),xi(e),null;case 5:mS(e);var r=hl(xd.current);if(t=e.type,n!==null&&e.stateNode!=null)cR(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ge(166));return xi(e),null}if(n=hl(Ds.current),Mp(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Cs]=e,i[vd]=s,n=(e.mode&1)!==0,t){case"dialog":tn("cancel",i),tn("close",i);break;case"iframe":case"object":case"embed":tn("load",i);break;case"video":case"audio":for(r=0;r<Of.length;r++)tn(Of[r],i);break;case"source":tn("error",i);break;case"img":case"image":case"link":tn("error",i),tn("load",i);break;case"details":tn("toggle",i);break;case"input":IE(i,s),tn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},tn("invalid",i);break;case"textarea":UE(i,s),tn("invalid",i)}z1(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&wp(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&wp(i.textContent,a,n),r=["children",""+a]):ad.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tn("scroll",i)}switch(t){case"input":pp(i),DE(i,s,!0);break;case"textarea":pp(i),NE(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=cg)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=kC(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Cs]=e,n[vd]=i,uR(n,e,!1,!1),e.stateNode=n;e:{switch(o=V1(t,i),t){case"dialog":tn("cancel",n),tn("close",n),r=i;break;case"iframe":case"object":case"embed":tn("load",n),r=i;break;case"video":case"audio":for(r=0;r<Of.length;r++)tn(Of[r],n);r=i;break;case"source":tn("error",n),r=i;break;case"img":case"image":case"link":tn("error",n),tn("load",n),r=i;break;case"details":tn("toggle",n),r=i;break;case"input":IE(n,i),r=N1(n,i),tn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=xn({},i,{value:void 0}),tn("invalid",n);break;case"textarea":UE(n,i),r=k1(n,i),tn("invalid",n);break;default:r=i}z1(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?VC(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&BC(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&ld(n,l):typeof l=="number"&&ld(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ad.hasOwnProperty(s)?l!=null&&s==="onScroll"&&tn("scroll",n):l!=null&&X_(n,s,l,o))}switch(t){case"input":pp(n),DE(n,i,!1);break;case"textarea":pp(n),NE(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ma(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?nc(n,!!i.multiple,s,!1):i.defaultValue!=null&&nc(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=cg)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xi(e),null;case 6:if(n&&e.stateNode!=null)fR(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ge(166));if(t=hl(xd.current),hl(Ds.current),Mp(e)){if(i=e.stateNode,t=e.memoizedProps,i[Cs]=e,(s=i.nodeValue!==t)&&(n=Tr,n!==null))switch(n.tag){case 3:wp(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&wp(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Cs]=e,e.stateNode=i}return xi(e),null;case 13:if(nn(hn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ln&&Er!==null&&e.mode&1&&!(e.flags&128))CP(),pc(),e.flags|=98560,s=!1;else if(s=Mp(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Ge(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ge(317));s[Cs]=e}else pc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xi(e),s=!1}else ss!==null&&(Sx(ss),ss=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||hn.current&1?Xn===0&&(Xn=3):CS())),e.updateQueue!==null&&(e.flags|=4),xi(e),null);case 4:return gc(),hx(n,e),n===null&&md(e.stateNode.containerInfo),xi(e),null;case 10:return fS(e.type._context),xi(e),null;case 17:return nr(e.type)&&fg(),xi(e),null;case 19:if(nn(hn),s=e.memoizedState,s===null)return xi(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)df(s,!1);else{if(Xn!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=yg(n),o!==null){for(e.flags|=128,df(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Kt(hn,hn.current&1|2),e.child}n=n.sibling}s.tail!==null&&In()>yc&&(e.flags|=128,i=!0,df(s,!1),e.lanes=4194304)}else{if(!i)if(n=yg(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),df(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ln)return xi(e),null}else 2*In()-s.renderingStartTime>yc&&t!==1073741824&&(e.flags|=128,i=!0,df(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=In(),e.sibling=null,t=hn.current,Kt(hn,i?t&1|2:t&1),e):(xi(e),null);case 22:case 23:return bS(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Sr&1073741824&&(xi(e),e.subtreeFlags&6&&(e.flags|=8192)):xi(e),null;case 24:return null;case 25:return null}throw Error(Ge(156,e.tag))}function eF(n,e){switch(aS(e),e.tag){case 1:return nr(e.type)&&fg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return gc(),nn(tr),nn(Ti),gS(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return mS(e),null;case 13:if(nn(hn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ge(340));pc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return nn(hn),null;case 4:return gc(),null;case 10:return fS(e.type._context),null;case 22:case 23:return bS(),null;case 24:return null;default:return null}}var Tp=!1,Mi=!1,tF=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Hu(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){En(n,e,i)}else t.current=null}function px(n,e,t){try{t()}catch(i){En(n,e,i)}}var EA=!1;function nF(n,e){if(Q1=ag,n=mP(),sS(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,f=0,h=n,p=null;t:for(;;){for(var m;h!==t||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===n)break t;if(p===t&&++u===r&&(a=o),p===s&&++f===i&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(K1={focusedElem:n,selectionRange:t},ag=!1,nt=e;nt!==null;)if(e=nt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,nt=n;else for(;nt!==null;){e=nt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,_=v.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:ns(e.type,w),_);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ge(163))}}catch(E){En(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,nt=n;break}nt=e.return}return v=EA,EA=!1,v}function Xf(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&px(e,t,s)}r=r.next}while(r!==i)}}function e0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function mx(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function dR(n){var e=n.alternate;e!==null&&(n.alternate=null,dR(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Cs],delete e[vd],delete e[tx],delete e[kO],delete e[BO])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function hR(n){return n.tag===5||n.tag===3||n.tag===4}function AA(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||hR(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function gx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=cg));else if(i!==4&&(n=n.child,n!==null))for(gx(n,e,t),n=n.sibling;n!==null;)gx(n,e,t),n=n.sibling}function vx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(vx(n,e,t),n=n.sibling;n!==null;)vx(n,e,t),n=n.sibling}var ci=null,rs=!1;function Fo(n,e,t){for(t=t.child;t!==null;)pR(n,e,t),t=t.sibling}function pR(n,e,t){if(Is&&typeof Is.onCommitFiberUnmount=="function")try{Is.onCommitFiberUnmount(Xg,t)}catch{}switch(t.tag){case 5:Mi||Hu(t,e);case 6:var i=ci,r=rs;ci=null,Fo(n,e,t),ci=i,rs=r,ci!==null&&(rs?(n=ci,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ci.removeChild(t.stateNode));break;case 18:ci!==null&&(rs?(n=ci,t=t.stateNode,n.nodeType===8?ly(n.parentNode,t):n.nodeType===1&&ly(n,t),dd(n)):ly(ci,t.stateNode));break;case 4:i=ci,r=rs,ci=t.stateNode.containerInfo,rs=!0,Fo(n,e,t),ci=i,rs=r;break;case 0:case 11:case 14:case 15:if(!Mi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&px(t,e,o),r=r.next}while(r!==i)}Fo(n,e,t);break;case 1:if(!Mi&&(Hu(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){En(t,e,a)}Fo(n,e,t);break;case 21:Fo(n,e,t);break;case 22:t.mode&1?(Mi=(i=Mi)||t.memoizedState!==null,Fo(n,e,t),Mi=i):Fo(n,e,t);break;default:Fo(n,e,t)}}function TA(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new tF),e.forEach(function(i){var r=fF.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Kr(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ci=a.stateNode,rs=!1;break e;case 3:ci=a.stateNode.containerInfo,rs=!0;break e;case 4:ci=a.stateNode.containerInfo,rs=!0;break e}a=a.return}if(ci===null)throw Error(Ge(160));pR(s,o,r),ci=null,rs=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){En(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mR(e,n),e=e.sibling}function mR(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Kr(e,n),Ms(n),i&4){try{Xf(3,n,n.return),e0(3,n)}catch(w){En(n,n.return,w)}try{Xf(5,n,n.return)}catch(w){En(n,n.return,w)}}break;case 1:Kr(e,n),Ms(n),i&512&&t!==null&&Hu(t,t.return);break;case 5:if(Kr(e,n),Ms(n),i&512&&t!==null&&Hu(t,t.return),n.flags&32){var r=n.stateNode;try{ld(r,"")}catch(w){En(n,n.return,w)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&OC(r,s),V1(a,o);var u=V1(a,s);for(o=0;o<l.length;o+=2){var f=l[o],h=l[o+1];f==="style"?VC(r,h):f==="dangerouslySetInnerHTML"?BC(r,h):f==="children"?ld(r,h):X_(r,f,h,u)}switch(a){case"input":O1(r,s);break;case"textarea":FC(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?nc(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?nc(r,!!s.multiple,s.defaultValue,!0):nc(r,!!s.multiple,s.multiple?[]:"",!1))}r[vd]=s}catch(w){En(n,n.return,w)}}break;case 6:if(Kr(e,n),Ms(n),i&4){if(n.stateNode===null)throw Error(Ge(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(w){En(n,n.return,w)}}break;case 3:if(Kr(e,n),Ms(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{dd(e.containerInfo)}catch(w){En(n,n.return,w)}break;case 4:Kr(e,n),Ms(n);break;case 13:Kr(e,n),Ms(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(AS=In())),i&4&&TA(n);break;case 22:if(f=t!==null&&t.memoizedState!==null,n.mode&1?(Mi=(u=Mi)||f,Kr(e,n),Mi=u):Kr(e,n),Ms(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!f&&n.mode&1)for(nt=n,f=n.child;f!==null;){for(h=nt=f;nt!==null;){switch(p=nt,m=p.child,p.tag){case 0:case 11:case 14:case 15:Xf(4,p,p.return);break;case 1:Hu(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){En(i,t,w)}}break;case 5:Hu(p,p.return);break;case 22:if(p.memoizedState!==null){CA(h);continue}}m!==null?(m.return=p,nt=m):CA(h)}f=f.sibling}e:for(f=null,h=n;;){if(h.tag===5){if(f===null){f=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=zC("display",o))}catch(w){En(n,n.return,w)}}}else if(h.tag===6){if(f===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){En(n,n.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Kr(e,n),Ms(n),i&4&&TA(n);break;case 21:break;default:Kr(e,n),Ms(n)}}function Ms(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(hR(t)){var i=t;break e}t=t.return}throw Error(Ge(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ld(r,""),i.flags&=-33);var s=AA(n);vx(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=AA(n);gx(n,a,o);break;default:throw Error(Ge(161))}}catch(l){En(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function iF(n,e,t){nt=n,gR(n)}function gR(n,e,t){for(var i=(n.mode&1)!==0;nt!==null;){var r=nt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Tp;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Mi;a=Tp;var u=Mi;if(Tp=o,(Mi=l)&&!u)for(nt=r;nt!==null;)o=nt,l=o.child,o.tag===22&&o.memoizedState!==null?PA(r):l!==null?(l.return=o,nt=l):PA(r);for(;s!==null;)nt=s,gR(s),s=s.sibling;nt=r,Tp=a,Mi=u}bA(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,nt=s):bA(n)}}function bA(n){for(;nt!==null;){var e=nt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mi||e0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Mi)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:ns(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&cA(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}cA(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var h=f.dehydrated;h!==null&&dd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ge(163))}Mi||e.flags&512&&mx(e)}catch(p){En(e,e.return,p)}}if(e===n){nt=null;break}if(t=e.sibling,t!==null){t.return=e.return,nt=t;break}nt=e.return}}function CA(n){for(;nt!==null;){var e=nt;if(e===n){nt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,nt=t;break}nt=e.return}}function PA(n){for(;nt!==null;){var e=nt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{e0(4,e)}catch(l){En(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){En(e,r,l)}}var s=e.return;try{mx(e)}catch(l){En(e,s,l)}break;case 5:var o=e.return;try{mx(e)}catch(l){En(e,o,l)}}}catch(l){En(e,e.return,l)}if(e===n){nt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,nt=a;break}nt=e.return}}var rF=Math.ceil,Sg=Eo.ReactCurrentDispatcher,MS=Eo.ReactCurrentOwner,Xr=Eo.ReactCurrentBatchConfig,Ot=0,ii=null,Vn=null,fi=0,Sr=0,Wu=Ma(0),Xn=0,Md=null,Il=0,t0=0,ES=0,Yf=null,Ji=null,AS=0,yc=1/0,so=null,wg=!1,yx=null,aa=null,bp=!1,ta=null,Mg=0,qf=0,xx=null,Gm=-1,Hm=0;function Bi(){return Ot&6?In():Gm!==-1?Gm:Gm=In()}function la(n){return n.mode&1?Ot&2&&fi!==0?fi&-fi:VO.transition!==null?(Hm===0&&(Hm=$C()),Hm):(n=Wt,n!==0||(n=window.event,n=n===void 0?16:oP(n.type)),n):1}function ls(n,e,t,i){if(50<qf)throw qf=0,xx=null,Error(Ge(185));eh(n,t,i),(!(Ot&2)||n!==ii)&&(n===ii&&(!(Ot&2)&&(t0|=t),Xn===4&&Ko(n,fi)),ir(n,i),t===1&&Ot===0&&!(e.mode&1)&&(yc=In()+500,Qg&&Ea()))}function ir(n,e){var t=n.callbackNode;VN(n,e);var i=og(n,n===ii?fi:0);if(i===0)t!==null&&kE(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&kE(t),e===1)n.tag===0?zO(RA.bind(null,n)):AP(RA.bind(null,n)),OO(function(){!(Ot&6)&&Ea()}),t=null;else{switch(eP(i)){case 1:t=Q_;break;case 4:t=QC;break;case 16:t=sg;break;case 536870912:t=KC;break;default:t=sg}t=ER(t,vR.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function vR(n,e){if(Gm=-1,Hm=0,Ot&6)throw Error(Ge(327));var t=n.callbackNode;if(ac()&&n.callbackNode!==t)return null;var i=og(n,n===ii?fi:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Eg(n,i);else{e=i;var r=Ot;Ot|=2;var s=xR();(ii!==n||fi!==e)&&(so=null,yc=In()+500,_l(n,e));do try{aF();break}catch(a){yR(n,a)}while(1);cS(),Sg.current=s,Ot=r,Vn!==null?e=0:(ii=null,fi=0,e=Xn)}if(e!==0){if(e===2&&(r=X1(n),r!==0&&(i=r,e=_x(n,r))),e===1)throw t=Md,_l(n,0),Ko(n,i),ir(n,In()),t;if(e===6)Ko(n,i);else{if(r=n.current.alternate,!(i&30)&&!sF(r)&&(e=Eg(n,i),e===2&&(s=X1(n),s!==0&&(i=s,e=_x(n,s))),e===1))throw t=Md,_l(n,0),Ko(n,i),ir(n,In()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Ge(345));case 2:sl(n,Ji,so);break;case 3:if(Ko(n,i),(i&130023424)===i&&(e=AS+500-In(),10<e)){if(og(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Bi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=ex(sl.bind(null,n,Ji,so),e);break}sl(n,Ji,so);break;case 4:if(Ko(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-as(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=In()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*rF(i/1960))-i,10<i){n.timeoutHandle=ex(sl.bind(null,n,Ji,so),i);break}sl(n,Ji,so);break;case 5:sl(n,Ji,so);break;default:throw Error(Ge(329))}}}return ir(n,In()),n.callbackNode===t?vR.bind(null,n):null}function _x(n,e){var t=Yf;return n.current.memoizedState.isDehydrated&&(_l(n,e).flags|=256),n=Eg(n,e),n!==2&&(e=Ji,Ji=t,e!==null&&Sx(e)),n}function Sx(n){Ji===null?Ji=n:Ji.push.apply(Ji,n)}function sF(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!cs(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ko(n,e){for(e&=~ES,e&=~t0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-as(e),i=1<<t;n[t]=-1,e&=~i}}function RA(n){if(Ot&6)throw Error(Ge(327));ac();var e=og(n,0);if(!(e&1))return ir(n,In()),null;var t=Eg(n,e);if(n.tag!==0&&t===2){var i=X1(n);i!==0&&(e=i,t=_x(n,i))}if(t===1)throw t=Md,_l(n,0),Ko(n,e),ir(n,In()),t;if(t===6)throw Error(Ge(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,sl(n,Ji,so),ir(n,In()),null}function TS(n,e){var t=Ot;Ot|=1;try{return n(e)}finally{Ot=t,Ot===0&&(yc=In()+500,Qg&&Ea())}}function Dl(n){ta!==null&&ta.tag===0&&!(Ot&6)&&ac();var e=Ot;Ot|=1;var t=Xr.transition,i=Wt;try{if(Xr.transition=null,Wt=1,n)return n()}finally{Wt=i,Xr.transition=t,Ot=e,!(Ot&6)&&Ea()}}function bS(){Sr=Wu.current,nn(Wu)}function _l(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,NO(t)),Vn!==null)for(t=Vn.return;t!==null;){var i=t;switch(aS(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&fg();break;case 3:gc(),nn(tr),nn(Ti),gS();break;case 5:mS(i);break;case 4:gc();break;case 13:nn(hn);break;case 19:nn(hn);break;case 10:fS(i.type._context);break;case 22:case 23:bS()}t=t.return}if(ii=n,Vn=n=ua(n.current,null),fi=Sr=e,Xn=0,Md=null,ES=t0=Il=0,Ji=Yf=null,dl!==null){for(e=0;e<dl.length;e++)if(t=dl[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}dl=null}return n}function yR(n,e){do{var t=Vn;try{if(cS(),Bm.current=_g,xg){for(var i=vn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}xg=!1}if(Ll=0,ni=Wn=vn=null,jf=!1,_d=0,MS.current=null,t===null||t.return===null){Xn=1,Md=e,Vn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=fi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=a,h=f.tag;if(!(f.mode&1)&&(h===0||h===11||h===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=vA(o);if(m!==null){m.flags&=-257,yA(m,o,a,s,e),m.mode&1&&gA(s,u,e),e=m,l=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){gA(s,u,e),CS();break e}l=Error(Ge(426))}}else if(ln&&a.mode&1){var _=vA(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),yA(_,o,a,s,e),lS(vc(l,a));break e}}s=l=vc(l,a),Xn!==4&&(Xn=2),Yf===null?Yf=[s]:Yf.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=tR(s,l,e);uA(s,g);break e;case 1:a=l;var x=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(aa===null||!aa.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=nR(s,a,e);uA(s,E);break e}}s=s.return}while(s!==null)}SR(t)}catch(T){e=T,Vn===t&&t!==null&&(Vn=t=t.return);continue}break}while(1)}function xR(){var n=Sg.current;return Sg.current=_g,n===null?_g:n}function CS(){(Xn===0||Xn===3||Xn===2)&&(Xn=4),ii===null||!(Il&268435455)&&!(t0&268435455)||Ko(ii,fi)}function Eg(n,e){var t=Ot;Ot|=2;var i=xR();(ii!==n||fi!==e)&&(so=null,_l(n,e));do try{oF();break}catch(r){yR(n,r)}while(1);if(cS(),Ot=t,Sg.current=i,Vn!==null)throw Error(Ge(261));return ii=null,fi=0,Xn}function oF(){for(;Vn!==null;)_R(Vn)}function aF(){for(;Vn!==null&&!IN();)_R(Vn)}function _R(n){var e=MR(n.alternate,n,Sr);n.memoizedProps=n.pendingProps,e===null?SR(n):Vn=e,MS.current=null}function SR(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=eF(t,e),t!==null){t.flags&=32767,Vn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Xn=6,Vn=null;return}}else if(t=$O(t,e,Sr),t!==null){Vn=t;return}if(e=e.sibling,e!==null){Vn=e;return}Vn=e=n}while(e!==null);Xn===0&&(Xn=5)}function sl(n,e,t){var i=Wt,r=Xr.transition;try{Xr.transition=null,Wt=1,lF(n,e,t,i)}finally{Xr.transition=r,Wt=i}return null}function lF(n,e,t,i){do ac();while(ta!==null);if(Ot&6)throw Error(Ge(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ge(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(GN(n,s),n===ii&&(Vn=ii=null,fi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||bp||(bp=!0,ER(sg,function(){return ac(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Xr.transition,Xr.transition=null;var o=Wt;Wt=1;var a=Ot;Ot|=4,MS.current=null,nF(n,t),mR(t,n),CO(K1),ag=!!Q1,K1=Q1=null,n.current=t,iF(t),DN(),Ot=a,Wt=o,Xr.transition=s}else n.current=t;if(bp&&(bp=!1,ta=n,Mg=r),s=n.pendingLanes,s===0&&(aa=null),ON(t.stateNode),ir(n,In()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(wg)throw wg=!1,n=yx,yx=null,n;return Mg&1&&n.tag!==0&&ac(),s=n.pendingLanes,s&1?n===xx?qf++:(qf=0,xx=n):qf=0,Ea(),null}function ac(){if(ta!==null){var n=eP(Mg),e=Xr.transition,t=Wt;try{if(Xr.transition=null,Wt=16>n?16:n,ta===null)var i=!1;else{if(n=ta,ta=null,Mg=0,Ot&6)throw Error(Ge(331));var r=Ot;for(Ot|=4,nt=n.current;nt!==null;){var s=nt,o=s.child;if(nt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(nt=u;nt!==null;){var f=nt;switch(f.tag){case 0:case 11:case 15:Xf(8,f,s)}var h=f.child;if(h!==null)h.return=f,nt=h;else for(;nt!==null;){f=nt;var p=f.sibling,m=f.return;if(dR(f),f===u){nt=null;break}if(p!==null){p.return=m,nt=p;break}nt=m}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var _=w.sibling;w.sibling=null,w=_}while(w!==null)}}nt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,nt=o;else e:for(;nt!==null;){if(s=nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Xf(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,nt=g;break e}nt=s.return}}var x=n.current;for(nt=x;nt!==null;){o=nt;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,nt=S;else e:for(o=x;nt!==null;){if(a=nt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:e0(9,a)}}catch(T){En(a,a.return,T)}if(a===o){nt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,nt=E;break e}nt=a.return}}if(Ot=r,Ea(),Is&&typeof Is.onPostCommitFiberRoot=="function")try{Is.onPostCommitFiberRoot(Xg,n)}catch{}i=!0}return i}finally{Wt=t,Xr.transition=e}}return!1}function LA(n,e,t){e=vc(t,e),e=tR(n,e,1),n=oa(n,e,1),e=Bi(),n!==null&&(eh(n,1,e),ir(n,e))}function En(n,e,t){if(n.tag===3)LA(n,n,t);else for(;e!==null;){if(e.tag===3){LA(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(aa===null||!aa.has(i))){n=vc(t,n),n=nR(e,n,1),e=oa(e,n,1),n=Bi(),e!==null&&(eh(e,1,n),ir(e,n));break}}e=e.return}}function uF(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Bi(),n.pingedLanes|=n.suspendedLanes&t,ii===n&&(fi&t)===t&&(Xn===4||Xn===3&&(fi&130023424)===fi&&500>In()-AS?_l(n,0):ES|=t),ir(n,e)}function wR(n,e){e===0&&(n.mode&1?(e=vp,vp<<=1,!(vp&130023424)&&(vp=4194304)):e=1);var t=Bi();n=xo(n,e),n!==null&&(eh(n,e,t),ir(n,t))}function cF(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),wR(n,t)}function fF(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ge(314))}i!==null&&i.delete(e),wR(n,t)}var MR;MR=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||tr.current)er=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return er=!1,KO(n,e,t);er=!!(n.flags&131072)}else er=!1,ln&&e.flags&1048576&&TP(e,pg,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Vm(n,e),n=e.pendingProps;var r=hc(e,Ti.current);oc(e,t),r=yS(null,e,i,n,r,t);var s=xS();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nr(i)?(s=!0,dg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,hS(e),r.updater=Kg,e.stateNode=r,r._reactInternals=e,ax(e,i,n,t),e=cx(null,e,i,!0,s,t)):(e.tag=0,ln&&s&&oS(e),ki(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Vm(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=hF(i),n=ns(i,n),r){case 0:e=ux(null,e,i,n,t);break e;case 1:e=SA(null,e,i,n,t);break e;case 11:e=xA(null,e,i,n,t);break e;case 14:e=_A(null,e,i,ns(i.type,n),t);break e}throw Error(Ge(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ns(i,r),ux(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ns(i,r),SA(n,e,i,r,t);case 3:e:{if(oR(e),n===null)throw Error(Ge(387));i=e.pendingProps,s=e.memoizedState,r=s.element,RP(n,e),vg(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=vc(Error(Ge(423)),e),e=wA(n,e,i,t,r);break e}else if(i!==r){r=vc(Error(Ge(424)),e),e=wA(n,e,i,t,r);break e}else for(Er=sa(e.stateNode.containerInfo.firstChild),Tr=e,ln=!0,ss=null,t=UP(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(pc(),i===r){e=_o(n,e,t);break e}ki(n,e,i,t)}e=e.child}return e;case 5:return NP(e),n===null&&rx(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,$1(i,r)?o=null:s!==null&&$1(i,s)&&(e.flags|=32),sR(n,e),ki(n,e,o,t),e.child;case 6:return n===null&&rx(e),null;case 13:return aR(n,e,t);case 4:return pS(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=mc(e,null,i,t):ki(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ns(i,r),xA(n,e,i,r,t);case 7:return ki(n,e,e.pendingProps,t),e.child;case 8:return ki(n,e,e.pendingProps.children,t),e.child;case 12:return ki(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Kt(mg,i._currentValue),i._currentValue=o,s!==null)if(cs(s.value,o)){if(s.children===r.children&&!tr.current){e=_o(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=ho(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),sx(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ge(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),sx(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ki(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,oc(e,t),r=Yr(r),i=i(r),e.flags|=1,ki(n,e,i,t),e.child;case 14:return i=e.type,r=ns(i,e.pendingProps),r=ns(i.type,r),_A(n,e,i,r,t);case 15:return iR(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ns(i,r),Vm(n,e),e.tag=1,nr(i)?(n=!0,dg(e)):n=!1,oc(e,t),IP(e,i,r),ax(e,i,r,t),cx(null,e,i,!0,n,t);case 19:return lR(n,e,t);case 22:return rR(n,e,t)}throw Error(Ge(156,e.tag))};function ER(n,e){return JC(n,e)}function dF(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jr(n,e,t,i){return new dF(n,e,t,i)}function PS(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hF(n){if(typeof n=="function")return PS(n)?1:0;if(n!=null){if(n=n.$$typeof,n===q_)return 11;if(n===Z_)return 14}return 2}function ua(n,e){var t=n.alternate;return t===null?(t=jr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Wm(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")PS(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Uu:return Sl(t.children,r,s,e);case Y_:o=8,r|=8;break;case L1:return n=jr(12,t,e,r|2),n.elementType=L1,n.lanes=s,n;case I1:return n=jr(13,t,e,r),n.elementType=I1,n.lanes=s,n;case D1:return n=jr(19,t,e,r),n.elementType=D1,n.lanes=s,n;case DC:return n0(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case LC:o=10;break e;case IC:o=9;break e;case q_:o=11;break e;case Z_:o=14;break e;case Yo:o=16,i=null;break e}throw Error(Ge(130,n==null?n:typeof n,""))}return e=jr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Sl(n,e,t,i){return n=jr(7,n,i,e),n.lanes=t,n}function n0(n,e,t,i){return n=jr(22,n,i,e),n.elementType=DC,n.lanes=t,n.stateNode={isHidden:!1},n}function gy(n,e,t){return n=jr(6,n,null,e),n.lanes=t,n}function vy(n,e,t){return e=jr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function pF(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qv(0),this.expirationTimes=Qv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qv(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function RS(n,e,t,i,r,s,o,a,l){return n=new pF(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=jr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},hS(s),n}function mF(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Du,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function AR(n){if(!n)return ga;n=n._reactInternals;e:{if(Bl(n)!==n||n.tag!==1)throw Error(Ge(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ge(171))}if(n.tag===1){var t=n.type;if(nr(t))return EP(n,t,e)}return e}function TR(n,e,t,i,r,s,o,a,l){return n=RS(t,i,!0,n,r,s,o,a,l),n.context=AR(null),t=n.current,i=Bi(),r=la(t),s=ho(i,r),s.callback=e??null,oa(t,s,r),n.current.lanes=r,eh(n,r,i),ir(n,i),n}function i0(n,e,t,i){var r=e.current,s=Bi(),o=la(r);return t=AR(t),e.context===null?e.context=t:e.pendingContext=t,e=ho(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=oa(r,e,o),n!==null&&(ls(n,r,o,s),km(n,r,o)),o}function Ag(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function IA(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function LS(n,e){IA(n,e),(n=n.alternate)&&IA(n,e)}function gF(){return null}var bR=typeof reportError=="function"?reportError:function(n){console.error(n)};function IS(n){this._internalRoot=n}r0.prototype.render=IS.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ge(409));i0(n,e,null,null)};r0.prototype.unmount=IS.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Dl(function(){i0(null,n,null,null)}),e[yo]=null}};function r0(n){this._internalRoot=n}r0.prototype.unstable_scheduleHydration=function(n){if(n){var e=iP();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Qo.length&&e!==0&&e<Qo[t].priority;t++);Qo.splice(t,0,n),t===0&&sP(n)}};function DS(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function s0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function DA(){}function vF(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Ag(o);s.call(u)}}var o=TR(e,i,n,0,null,!1,!1,"",DA);return n._reactRootContainer=o,n[yo]=o.current,md(n.nodeType===8?n.parentNode:n),Dl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Ag(l);a.call(u)}}var l=RS(n,0,!1,null,null,!1,!1,"",DA);return n._reactRootContainer=l,n[yo]=l.current,md(n.nodeType===8?n.parentNode:n),Dl(function(){i0(e,l,t,i)}),l}function o0(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Ag(o);a.call(l)}}i0(e,o,n,r)}else o=vF(t,e,n,r,i);return Ag(o)}tP=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Nf(e.pendingLanes);t!==0&&(K_(e,t|1),ir(e,In()),!(Ot&6)&&(yc=In()+500,Ea()))}break;case 13:Dl(function(){var i=xo(n,1);if(i!==null){var r=Bi();ls(i,n,1,r)}}),LS(n,1)}};$_=function(n){if(n.tag===13){var e=xo(n,134217728);if(e!==null){var t=Bi();ls(e,n,134217728,t)}LS(n,134217728)}};nP=function(n){if(n.tag===13){var e=la(n),t=xo(n,e);if(t!==null){var i=Bi();ls(t,n,e,i)}LS(n,e)}};iP=function(){return Wt};rP=function(n,e){var t=Wt;try{return Wt=n,e()}finally{Wt=t}};H1=function(n,e,t){switch(e){case"input":if(O1(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=Jg(i);if(!r)throw Error(Ge(90));NC(i),O1(i,r)}}}break;case"textarea":FC(n,t);break;case"select":e=t.value,e!=null&&nc(n,!!t.multiple,e,!1)}};WC=TS;jC=Dl;var yF={usingClientEntryPoint:!1,Events:[nh,ku,Jg,GC,HC,TS]},hf={findFiberByHostInstance:fl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},xF={bundleType:hf.bundleType,version:hf.version,rendererPackageName:hf.rendererPackageName,rendererConfig:hf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Eo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=qC(n),n===null?null:n.stateNode},findFiberByHostInstance:hf.findFiberByHostInstance||gF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cp.isDisabled&&Cp.supportsFiber)try{Xg=Cp.inject(xF),Is=Cp}catch{}}Rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yF;Rr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!DS(e))throw Error(Ge(200));return mF(n,e,null,t)};Rr.createRoot=function(n,e){if(!DS(n))throw Error(Ge(299));var t=!1,i="",r=bR;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=RS(n,1,!1,null,null,t,!1,i,r),n[yo]=e.current,md(n.nodeType===8?n.parentNode:n),new IS(e)};Rr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ge(188)):(n=Object.keys(n).join(","),Error(Ge(268,n)));return n=qC(e),n=n===null?null:n.stateNode,n};Rr.flushSync=function(n){return Dl(n)};Rr.hydrate=function(n,e,t){if(!s0(e))throw Error(Ge(200));return o0(null,n,e,!0,t)};Rr.hydrateRoot=function(n,e,t){if(!DS(n))throw Error(Ge(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=bR;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=TR(e,null,n,1,t??null,r,!1,s,o),n[yo]=e.current,md(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new r0(e)};Rr.render=function(n,e,t){if(!s0(e))throw Error(Ge(200));return o0(null,n,e,!1,t)};Rr.unmountComponentAtNode=function(n){if(!s0(n))throw Error(Ge(40));return n._reactRootContainer?(Dl(function(){o0(null,null,n,!1,function(){n._reactRootContainer=null,n[yo]=null})}),!0):!1};Rr.unstable_batchedUpdates=TS;Rr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!s0(t))throw Error(Ge(200));if(n==null||n._reactInternals===void 0)throw Error(Ge(38));return o0(n,e,t,!1,i)};Rr.version="18.2.0-next-9e3b772b8-20220608";function CR(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CR)}catch(n){console.error(n)}}CR(),TC.exports=Rr;var _F=TC.exports,PR,UA=_F;PR=P1.createRoot=UA.createRoot,P1.hydrateRoot=UA.hydrateRoot;/**
 * @remix-run/router v1.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ed(){return Ed=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ed.apply(this,arguments)}var pl;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(pl||(pl={}));const NA="popstate";function SF(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return wx("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Tg(r)}return MF(e,t,null,n)}function us(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wF(){return Math.random().toString(36).substr(2,8)}function OA(n,e){return{usr:n.state,key:n.key,idx:e}}function wx(n,e,t,i){return t===void 0&&(t=null),Ed({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?a0(e):e,{state:t,key:e&&e.key||i||wF()})}function Tg(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function a0(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function MF(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=pl.Pop,l=null,u=f();u==null&&(u=0,o.replaceState(Ed({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function h(){a=pl.Pop;let _=f(),g=_==null?null:_-u;u=_,l&&l({action:a,location:w.location,delta:g})}function p(_,g){a=pl.Push;let x=wx(w.location,_,g);t&&t(x,_),u=f()+1;let S=OA(x,u),E=w.createHref(x);try{o.pushState(S,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;r.location.assign(E)}s&&l&&l({action:a,location:w.location,delta:1})}function m(_,g){a=pl.Replace;let x=wx(w.location,_,g);t&&t(x,_),u=f();let S=OA(x,u),E=w.createHref(x);o.replaceState(S,"",E),s&&l&&l({action:a,location:w.location,delta:0})}function v(_){let g=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof _=="string"?_:Tg(_);return us(g,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,g)}let w={get action(){return a},get location(){return n(r,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(NA,h),l=_,()=>{r.removeEventListener(NA,h),l=null}},createHref(_){return e(r,_)},createURL:v,encodeLocation(_){let g=v(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(_){return o.go(_)}};return w}var FA;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(FA||(FA={}));function RR(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function EF(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?a0(n):n;return{pathname:t?t.startsWith("/")?t:AF(t,e):e,search:TF(i),hash:bF(r)}}function AF(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function yy(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function LR(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function IR(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=a0(n):(r=Ed({},n),us(!r.pathname||!r.pathname.includes("?"),yy("?","pathname","search",r)),us(!r.pathname||!r.pathname.includes("#"),yy("#","pathname","hash",r)),us(!r.search||!r.search.includes("#"),yy("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(i||o==null)a=t;else{let h=e.length-1;if(o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;r.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=EF(r,a),u=o&&o!=="/"&&o.endsWith("/"),f=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||f)&&(l.pathname+="/"),l}const DR=n=>n.join("/").replace(/\/\/+/g,"/"),TF=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,bF=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,UR=["post","put","patch","delete"];new Set(UR);const CF=["get",...UR];new Set(CF);/**
 * React Router v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mx(){return Mx=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Mx.apply(this,arguments)}const NR=X.createContext(null),rh=X.createContext(null),US=X.createContext(null),l0=X.createContext({outlet:null,matches:[],isDataRoute:!1});function PF(n,e){let{relative:t}=e===void 0?{}:e;u0()||us(!1);let{basename:i,navigator:r}=X.useContext(rh),{hash:s,pathname:o,search:a}=FR(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:DR([i,o])),r.createHref({pathname:l,search:a,hash:s})}function u0(){return X.useContext(US)!=null}function NS(){return u0()||us(!1),X.useContext(US).location}function OR(n){X.useContext(rh).static||X.useLayoutEffect(n)}function RF(){let{isDataRoute:n}=X.useContext(l0);return n?NF():LF()}function LF(){u0()||us(!1);let n=X.useContext(NR),{basename:e,navigator:t}=X.useContext(rh),{matches:i}=X.useContext(l0),{pathname:r}=NS(),s=JSON.stringify(LR(i).map(l=>l.pathnameBase)),o=X.useRef(!1);return OR(()=>{o.current=!0}),X.useCallback(function(l,u){if(u===void 0&&(u={}),!o.current)return;if(typeof l=="number"){t.go(l);return}let f=IR(l,JSON.parse(s),r,u.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:DR([e,f.pathname])),(u.replace?t.replace:t.push)(f,u.state,u)},[e,t,s,r,n])}function FR(n,e){let{relative:t}=e===void 0?{}:e,{matches:i}=X.useContext(l0),{pathname:r}=NS(),s=JSON.stringify(LR(i).map(o=>o.pathnameBase));return X.useMemo(()=>IR(n,JSON.parse(s),r,t==="path"),[n,s,r,t])}var kR=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(kR||{}),BR=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(BR||{});function IF(n){let e=X.useContext(NR);return e||us(!1),e}function DF(n){let e=X.useContext(l0);return e||us(!1),e}function UF(n){let e=DF(),t=e.matches[e.matches.length-1];return t.route.id||us(!1),t.route.id}function NF(){let{router:n}=IF(kR.UseNavigateStable),e=UF(BR.UseNavigateStable),t=X.useRef(!1);return OR(()=>{t.current=!0}),X.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,Mx({fromRouteId:e},s)))},[n,e])}function OF(n){let{basename:e="/",children:t=null,location:i,navigationType:r=pl.Pop,navigator:s,static:o=!1}=n;u0()&&us(!1);let a=e.replace(/^\/*/,"/"),l=X.useMemo(()=>({basename:a,navigator:s,static:o}),[a,s,o]);typeof i=="string"&&(i=a0(i));let{pathname:u="/",search:f="",hash:h="",state:p=null,key:m="default"}=i,v=X.useMemo(()=>{let w=RR(u,a);return w==null?null:{location:{pathname:w,search:f,hash:h,state:p,key:m},navigationType:r}},[a,u,f,h,p,m,r]);return v==null?null:X.createElement(rh.Provider,{value:l},X.createElement(US.Provider,{children:t,value:v}))}new Promise(()=>{});/**
 * React Router DOM v6.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ex(){return Ex=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Ex.apply(this,arguments)}function FF(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function kF(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function BF(n,e){return n.button===0&&(!e||e==="_self")&&!kF(n)}const zF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],VF="startTransition",kA=cN[VF];function GF(n){let{basename:e,children:t,future:i,window:r}=n,s=X.useRef();s.current==null&&(s.current=SF({window:r,v5Compat:!0}));let o=s.current,[a,l]=X.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},f=X.useCallback(h=>{u&&kA?kA(()=>l(h)):l(h)},[l,u]);return X.useLayoutEffect(()=>o.listen(f),[o,f]),X.createElement(OF,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o})}const HF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",WF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jF=X.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:f,unstable_viewTransition:h}=e,p=FF(e,zF),{basename:m}=X.useContext(rh),v,w=!1;if(typeof u=="string"&&WF.test(u)&&(v=u,HF))try{let S=new URL(window.location.href),E=u.startsWith("//")?new URL(S.protocol+u):new URL(u),T=RR(E.pathname,m);E.origin===S.origin&&T!=null?u=T+E.search+E.hash:w=!0}catch{}let _=PF(u,{relative:r}),g=XF(u,{replace:o,state:a,target:l,preventScrollReset:f,relative:r,unstable_viewTransition:h});function x(S){i&&i(S),S.defaultPrevented||g(S)}return X.createElement("a",Ex({},p,{href:v||_,onClick:w||s?i:x,ref:t,target:l}))});var BA;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(BA||(BA={}));var zA;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(zA||(zA={}));function XF(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=RF(),u=NS(),f=FR(n,{relative:o});return X.useCallback(h=>{if(BF(h,t)){h.preventDefault();let p=i!==void 0?i:Tg(u)===Tg(f);l(n,{replace:p,state:r,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,f,i,r,t,n,s,o,a])}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Cc="158",YF={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},qF={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},zR=0,Ax=1,VR=2,ZF=3,GR=0,c0=1,Zf=2,is=3,ks=0,Ai=1,wr=2,JF=2,po=0,wl=1,Tx=2,bx=3,Cx=4,HR=5,$o=100,WR=101,jR=102,Px=103,Rx=104,XR=200,YR=201,qR=202,ZR=203,bg=204,Cg=205,JR=206,QR=207,KR=208,$R=209,e3=210,t3=211,n3=212,i3=213,r3=214,s3=0,o3=1,a3=2,Ad=3,l3=4,u3=5,c3=6,f3=7,sh=0,d3=1,h3=2,Us=0,p3=1,m3=2,g3=3,OS=4,v3=5,Lx="attached",y3="detached",f0=300,So=301,va=302,Td=303,bd=304,Pc=306,Cd=1e3,Ei=1001,Pd=1002,Ln=1003,Pg=1004,QF=1004,Jf=1005,KF=1005,pn=1006,FS=1007,$F=1007,ya=1008,ek=1008,Ns=1009,x3=1010,_3=1011,d0=1012,kS=1013,co=1014,Rs=1015,xc=1016,BS=1017,zS=1018,ca=1020,S3=1021,Ki=1023,w3=1024,M3=1025,fa=1026,Ul=1027,E3=1028,VS=1029,A3=1030,GS=1031,HS=1033,jm=33776,Xm=33777,Ym=33778,qm=33779,Ix=35840,Dx=35841,Ux=35842,Nx=35843,T3=36196,Ox=37492,Fx=37496,kx=37808,Bx=37809,zx=37810,Vx=37811,Gx=37812,Hx=37813,Wx=37814,jx=37815,Xx=37816,Yx=37817,qx=37818,Zx=37819,Jx=37820,Qx=37821,Zm=36492,Kx=36494,$x=36495,b3=36283,e_=36284,t_=36285,n_=36286,C3=2200,P3=2201,R3=2202,Rd=2300,Ld=2301,Jm=2302,ml=2400,gl=2401,Id=2402,h0=2500,WS=2501,tk=0,nk=1,ik=2,jS=3e3,da=3001,L3=3200,XS=3201,Aa=0,I3=1,Mr="",jn="srgb",Bs="srgb-linear",p0="display-p3",oh="display-p3-linear",Dd="linear",Qt="srgb",Ud="rec709",Nd="p3",rk=0,ol=7680,sk=7681,ok=7682,ak=7683,lk=34055,uk=34056,ck=5386,fk=512,dk=513,hk=514,pk=515,mk=516,gk=517,vk=518,i_=519,D3=512,U3=513,N3=514,O3=515,F3=516,k3=517,B3=518,z3=519,Od=35044,Ml=35048,yk=35040,xk=35045,_k=35049,Sk=35041,wk=35046,Mk=35050,Ek=35042,Ak="100",r_="300 es",Rg=1035,Ls=2e3,Fd=2001;class Ao{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const _i=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let VA=1234567;const El=Math.PI/180,_c=180/Math.PI;function br(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(_i[n&255]+_i[n>>8&255]+_i[n>>16&255]+_i[n>>24&255]+"-"+_i[e&255]+_i[e>>8&255]+"-"+_i[e>>16&15|64]+_i[e>>24&255]+"-"+_i[t&63|128]+_i[t>>8&255]+"-"+_i[t>>16&255]+_i[t>>24&255]+_i[i&255]+_i[i>>8&255]+_i[i>>16&255]+_i[i>>24&255]).toLowerCase()}function An(n,e,t){return Math.max(e,Math.min(t,n))}function YS(n,e){return(n%e+e)%e}function Tk(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function bk(n,e,t){return n!==e?(t-n)/(e-n):0}function Qf(n,e,t){return(1-t)*n+t*e}function Ck(n,e,t,i){return Qf(n,e,1-Math.exp(-t*i))}function Pk(n,e=1){return e-Math.abs(YS(n,e*2)-e)}function Rk(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function Lk(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function Ik(n,e){return n+Math.floor(Math.random()*(e-n+1))}function Dk(n,e){return n+Math.random()*(e-n)}function Uk(n){return n*(.5-Math.random())}function Nk(n){n!==void 0&&(VA=n);let e=VA+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Ok(n){return n*El}function Fk(n){return n*_c}function s_(n){return(n&n-1)===0&&n!==0}function V3(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Lg(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function kk(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+i)/2),f=o((e+i)/2),h=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*f,l*h,l*p,a*u);break;case"YZY":n.set(l*p,a*f,l*h,a*u);break;case"ZXZ":n.set(l*h,l*p,a*f,a*u);break;case"XZX":n.set(a*f,l*v,l*m,a*u);break;case"YXY":n.set(l*m,a*f,l*v,a*u);break;case"ZYZ":n.set(l*v,l*m,a*f,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function $i(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function At(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const G3={DEG2RAD:El,RAD2DEG:_c,generateUUID:br,clamp:An,euclideanModulo:YS,mapLinear:Tk,inverseLerp:bk,lerp:Qf,damp:Ck,pingpong:Pk,smoothstep:Rk,smootherstep:Lk,randInt:Ik,randFloat:Dk,randFloatSpread:Uk,seededRandom:Nk,degToRad:Ok,radToDeg:Fk,isPowerOfTwo:s_,ceilPowerOfTwo:V3,floorPowerOfTwo:Lg,setQuaternionFromProperEuler:kk,normalize:At,denormalize:$i};class Re{constructor(e=0,t=0){Re.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(An(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Et{constructor(e,t,i,r,s,o,a,l,u){Et.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u)}set(e,t,i,r,s,o,a,l,u){const f=this.elements;return f[0]=e,f[1]=r,f[2]=a,f[3]=t,f[4]=s,f[5]=l,f[6]=i,f[7]=o,f[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],f=i[4],h=i[7],p=i[2],m=i[5],v=i[8],w=r[0],_=r[3],g=r[6],x=r[1],S=r[4],E=r[7],T=r[2],b=r[5],P=r[8];return s[0]=o*w+a*x+l*T,s[3]=o*_+a*S+l*b,s[6]=o*g+a*E+l*P,s[1]=u*w+f*x+h*T,s[4]=u*_+f*S+h*b,s[7]=u*g+f*E+h*P,s[2]=p*w+m*x+v*T,s[5]=p*_+m*S+v*b,s[8]=p*g+m*E+v*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8];return t*o*f-t*a*u-i*s*f+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8],h=f*o-a*u,p=a*l-f*s,m=u*s-o*l,v=t*h+i*p+r*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/v;return e[0]=h*w,e[1]=(r*u-f*i)*w,e[2]=(a*i-r*o)*w,e[3]=p*w,e[4]=(f*t-r*l)*w,e[5]=(r*s-a*t)*w,e[6]=m*w,e[7]=(i*l-u*t)*w,e[8]=(o*t-i*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(xy.makeScale(e,t)),this}rotate(e){return this.premultiply(xy.makeRotation(-e)),this}translate(e,t){return this.premultiply(xy.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const xy=new Et;function H3(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Bk={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ju(n,e){return new Bk[n](e)}function kd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function W3(){const n=kd("canvas");return n.style.display="block",n}const GA={};function Kf(n){n in GA||(GA[n]=!0,console.warn(n))}const HA=new Et().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),WA=new Et().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Pp={[Bs]:{transfer:Dd,primaries:Ud,toReference:n=>n,fromReference:n=>n},[jn]:{transfer:Qt,primaries:Ud,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[oh]:{transfer:Dd,primaries:Nd,toReference:n=>n.applyMatrix3(WA),fromReference:n=>n.applyMatrix3(HA)},[p0]:{transfer:Qt,primaries:Nd,toReference:n=>n.convertSRGBToLinear().applyMatrix3(WA),fromReference:n=>n.applyMatrix3(HA).convertLinearToSRGB()}},zk=new Set([Bs,oh]),Ht={enabled:!0,_workingColorSpace:Bs,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!zk.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=Pp[e].toReference,r=Pp[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return Pp[n].primaries},getTransfer:function(n){return n===Mr?Dd:Pp[n].transfer}};function lc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function _y(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let lu;class qS{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{lu===void 0&&(lu=kd("canvas")),lu.width=e.width,lu.height=e.height;const i=lu.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=lu}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=kd("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=lc(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(lc(t[i]/255)*255):t[i]=lc(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Vk=0;class vl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Vk++}),this.uuid=br(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(Sy(r[o].image)):s.push(Sy(r[o]))}else s=Sy(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function Sy(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?qS.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Gk=0;class yn extends Ao{constructor(e=yn.DEFAULT_IMAGE,t=yn.DEFAULT_MAPPING,i=Ei,r=Ei,s=pn,o=ya,a=Ki,l=Ns,u=yn.DEFAULT_ANISOTROPY,f=Mr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Gk++}),this.uuid=br(),this.name="",this.source=new vl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Re(0,0),this.repeat=new Re(1,1),this.center=new Re(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Et,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof f=="string"?this.colorSpace=f:(Kf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=f===da?jn:Mr),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==f0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Cd:e.x=e.x-Math.floor(e.x);break;case Ei:e.x=e.x<0?0:1;break;case Pd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Cd:e.y=e.y-Math.floor(e.y);break;case Ei:e.y=e.y<0?0:1;break;case Pd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Kf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===jn?da:jS}set encoding(e){Kf("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===da?jn:Mr}}yn.DEFAULT_IMAGE=null;yn.DEFAULT_MAPPING=f0;yn.DEFAULT_ANISOTROPY=1;class Dt{constructor(e=0,t=0,i=0,r=1){Dt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],f=l[4],h=l[8],p=l[1],m=l[5],v=l[9],w=l[2],_=l[6],g=l[10];if(Math.abs(f-p)<.01&&Math.abs(h-w)<.01&&Math.abs(v-_)<.01){if(Math.abs(f+p)<.1&&Math.abs(h+w)<.1&&Math.abs(v+_)<.1&&Math.abs(u+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const S=(u+1)/2,E=(m+1)/2,T=(g+1)/2,b=(f+p)/4,P=(h+w)/4,I=(v+_)/4;return S>E&&S>T?S<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(S),r=b/i,s=P/i):E>T?E<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(E),i=b/r,s=I/r):T<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(T),i=P/s,r=I/s),this.set(i,r,s,t),this}let x=Math.sqrt((_-v)*(_-v)+(h-w)*(h-w)+(p-f)*(p-f));return Math.abs(x)<.001&&(x=1),this.x=(_-v)/x,this.y=(h-w)/x,this.z=(p-f)/x,this.w=Math.acos((u+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class j3 extends Ao{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Dt(0,0,e,t),this.scissorTest=!1,this.viewport=new Dt(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(Kf("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===da?jn:Mr),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:pn,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new yn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new vl(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class fs extends j3{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class m0 extends yn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ln,this.minFilter=Ln,this.wrapR=Ei,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Hk extends fs{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new m0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class ZS extends yn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Ln,this.minFilter=Ln,this.wrapR=Ei,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Wk extends fs{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new ZS(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class jk extends fs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class rr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],u=i[r+1],f=i[r+2],h=i[r+3];const p=s[o+0],m=s[o+1],v=s[o+2],w=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=f,e[t+3]=h;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=v,e[t+3]=w;return}if(h!==w||l!==p||u!==m||f!==v){let _=1-a;const g=l*p+u*m+f*v+h*w,x=g>=0?1:-1,S=1-g*g;if(S>Number.EPSILON){const T=Math.sqrt(S),b=Math.atan2(T,g*x);_=Math.sin(_*b)/T,a=Math.sin(a*b)/T}const E=a*x;if(l=l*_+p*E,u=u*_+m*E,f=f*_+v*E,h=h*_+w*E,_===1-a){const T=1/Math.sqrt(l*l+u*u+f*f+h*h);l*=T,u*=T,f*=T,h*=T}}e[t]=l,e[t+1]=u,e[t+2]=f,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],f=i[r+3],h=s[o],p=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+f*h+l*m-u*p,e[t+1]=l*v+f*p+u*h-a*m,e[t+2]=u*v+f*m+a*p-l*h,e[t+3]=f*v-a*h-l*p-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),f=a(r/2),h=a(s/2),p=l(i/2),m=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=p*f*h+u*m*v,this._y=u*m*h-p*f*v,this._z=u*f*v+p*m*h,this._w=u*f*h-p*m*v;break;case"YXZ":this._x=p*f*h+u*m*v,this._y=u*m*h-p*f*v,this._z=u*f*v-p*m*h,this._w=u*f*h+p*m*v;break;case"ZXY":this._x=p*f*h-u*m*v,this._y=u*m*h+p*f*v,this._z=u*f*v+p*m*h,this._w=u*f*h-p*m*v;break;case"ZYX":this._x=p*f*h-u*m*v,this._y=u*m*h+p*f*v,this._z=u*f*v-p*m*h,this._w=u*f*h+p*m*v;break;case"YZX":this._x=p*f*h+u*m*v,this._y=u*m*h+p*f*v,this._z=u*f*v-p*m*h,this._w=u*f*h-p*m*v;break;case"XZY":this._x=p*f*h-u*m*v,this._y=u*m*h-p*f*v,this._z=u*f*v+p*m*h,this._w=u*f*h+p*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],f=t[6],h=t[10],p=i+a+h;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(f-l)*m,this._y=(s-u)*m,this._z=(o-r)*m}else if(i>a&&i>h){const m=2*Math.sqrt(1+i-a-h);this._w=(f-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+u)/m}else if(a>h){const m=2*Math.sqrt(1+a-i-h);this._w=(s-u)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+f)/m}else{const m=2*Math.sqrt(1+h-i-a);this._w=(o-r)/m,this._x=(s+u)/m,this._y=(l+f)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(An(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,f=t._w;return this._x=i*f+o*a+r*u-s*l,this._y=r*f+o*l+s*a-i*u,this._z=s*f+o*u+i*l-r*a,this._w=o*f-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),f=Math.atan2(u,a),h=Math.sin((1-t)*f)/u,p=Math.sin(t*f)/u;return this._w=o*h+this._w*p,this._x=i*h+this._x*p,this._y=r*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,i=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(jA.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(jA.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*i),f=2*(a*t-s*r),h=2*(s*i-o*t);return this.x=t+l*u+o*h-a*f,this.y=i+l*f+a*u-s*h,this.z=r+l*h+s*f-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return wy.copy(this).projectOnVector(e),this.sub(wy)}reflect(e){return this.sub(wy.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(An(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const wy=new j,jA=new rr;class ar{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint($r.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint($r.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=$r.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,$r):$r.fromBufferAttribute(s,o),$r.applyMatrix4(e.matrixWorld),this.expandByPoint($r);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Rp.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Rp.copy(i.boundingBox)),Rp.applyMatrix4(e.matrixWorld),this.union(Rp)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,$r),$r.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(pf),Lp.subVectors(this.max,pf),uu.subVectors(e.a,pf),cu.subVectors(e.b,pf),fu.subVectors(e.c,pf),ko.subVectors(cu,uu),Bo.subVectors(fu,cu),Xa.subVectors(uu,fu);let t=[0,-ko.z,ko.y,0,-Bo.z,Bo.y,0,-Xa.z,Xa.y,ko.z,0,-ko.x,Bo.z,0,-Bo.x,Xa.z,0,-Xa.x,-ko.y,ko.x,0,-Bo.y,Bo.x,0,-Xa.y,Xa.x,0];return!My(t,uu,cu,fu,Lp)||(t=[1,0,0,0,1,0,0,0,1],!My(t,uu,cu,fu,Lp))?!1:(Ip.crossVectors(ko,Bo),t=[Ip.x,Ip.y,Ip.z],My(t,uu,cu,fu,Lp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,$r).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize($r).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:($s[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$s[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$s[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$s[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$s[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$s[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$s[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$s[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($s),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const $s=[new j,new j,new j,new j,new j,new j,new j,new j],$r=new j,Rp=new ar,uu=new j,cu=new j,fu=new j,ko=new j,Bo=new j,Xa=new j,pf=new j,Lp=new j,Ip=new j,Ya=new j;function My(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Ya.fromArray(n,s);const a=r.x*Math.abs(Ya.x)+r.y*Math.abs(Ya.y)+r.z*Math.abs(Ya.z),l=e.dot(Ya),u=t.dot(Ya),f=i.dot(Ya);if(Math.max(-Math.max(l,u,f),Math.min(l,u,f))>a)return!1}return!0}const Xk=new ar,mf=new j,Ey=new j;let lr=class{constructor(e=new j,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Xk.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;mf.subVectors(e,this.center);const t=mf.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(mf,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Ey.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(mf.copy(e.center).add(Ey)),this.expandByPoint(mf.copy(e.center).sub(Ey))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const eo=new j,Ay=new j,Dp=new j,zo=new j,Ty=new j,Up=new j,by=new j;class Rc{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,eo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=eo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(eo.copy(this.origin).addScaledVector(this.direction,t),eo.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){Ay.copy(e).add(t).multiplyScalar(.5),Dp.copy(t).sub(e).normalize(),zo.copy(this.origin).sub(Ay);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Dp),a=zo.dot(this.direction),l=-zo.dot(Dp),u=zo.lengthSq(),f=Math.abs(1-o*o);let h,p,m,v;if(f>0)if(h=o*l-a,p=o*a-l,v=s*f,h>=0)if(p>=-v)if(p<=v){const w=1/f;h*=w,p*=w,m=h*(h+o*p+2*a)+p*(o*h+p+2*l)+u}else p=s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+u;else p=-s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+u;else p<=-v?(h=Math.max(0,-(-o*s+a)),p=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+u):p<=v?(h=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+u):(h=Math.max(0,-(o*s+a)),p=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+u);else p=o>0?-s:s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(Ay).addScaledVector(Dp,p),m}intersectSphere(e,t){eo.subVectors(e.center,this.origin);const i=eo.dot(this.direction),r=eo.dot(eo)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const u=1/this.direction.x,f=1/this.direction.y,h=1/this.direction.z,p=this.origin;return u>=0?(i=(e.min.x-p.x)*u,r=(e.max.x-p.x)*u):(i=(e.max.x-p.x)*u,r=(e.min.x-p.x)*u),f>=0?(s=(e.min.y-p.y)*f,o=(e.max.y-p.y)*f):(s=(e.max.y-p.y)*f,o=(e.min.y-p.y)*f),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,eo)!==null}intersectTriangle(e,t,i,r,s){Ty.subVectors(t,e),Up.subVectors(i,e),by.crossVectors(Ty,Up);let o=this.direction.dot(by),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;zo.subVectors(this.origin,e);const l=a*this.direction.dot(Up.crossVectors(zo,Up));if(l<0)return null;const u=a*this.direction.dot(Ty.cross(zo));if(u<0||l+u>o)return null;const f=-a*zo.dot(by);return f<0?null:this.at(f/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class _t{constructor(e,t,i,r,s,o,a,l,u,f,h,p,m,v,w,_){_t.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u,f,h,p,m,v,w,_)}set(e,t,i,r,s,o,a,l,u,f,h,p,m,v,w,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=u,g[6]=f,g[10]=h,g[14]=p,g[3]=m,g[7]=v,g[11]=w,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new _t().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/du.setFromMatrixColumn(e,0).length(),s=1/du.setFromMatrixColumn(e,1).length(),o=1/du.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),f=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const p=o*f,m=o*h,v=a*f,w=a*h;t[0]=l*f,t[4]=-l*h,t[8]=u,t[1]=m+v*u,t[5]=p-w*u,t[9]=-a*l,t[2]=w-p*u,t[6]=v+m*u,t[10]=o*l}else if(e.order==="YXZ"){const p=l*f,m=l*h,v=u*f,w=u*h;t[0]=p+w*a,t[4]=v*a-m,t[8]=o*u,t[1]=o*h,t[5]=o*f,t[9]=-a,t[2]=m*a-v,t[6]=w+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*f,m=l*h,v=u*f,w=u*h;t[0]=p-w*a,t[4]=-o*h,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*f,t[9]=w-p*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*f,m=o*h,v=a*f,w=a*h;t[0]=l*f,t[4]=v*u-m,t[8]=p*u+w,t[1]=l*h,t[5]=w*u+p,t[9]=m*u-v,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*u,v=a*l,w=a*u;t[0]=l*f,t[4]=w-p*h,t[8]=v*h+m,t[1]=h,t[5]=o*f,t[9]=-a*f,t[2]=-u*f,t[6]=m*h+v,t[10]=p-w*h}else if(e.order==="XZY"){const p=o*l,m=o*u,v=a*l,w=a*u;t[0]=l*f,t[4]=-h,t[8]=u*f,t[1]=p*h+w,t[5]=o*f,t[9]=m*h-v,t[2]=v*h-m,t[6]=a*f,t[10]=w*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Yk,e,qk)}lookAt(e,t,i){const r=this.elements;return xr.subVectors(e,t),xr.lengthSq()===0&&(xr.z=1),xr.normalize(),Vo.crossVectors(i,xr),Vo.lengthSq()===0&&(Math.abs(i.z)===1?xr.x+=1e-4:xr.z+=1e-4,xr.normalize(),Vo.crossVectors(i,xr)),Vo.normalize(),Np.crossVectors(xr,Vo),r[0]=Vo.x,r[4]=Np.x,r[8]=xr.x,r[1]=Vo.y,r[5]=Np.y,r[9]=xr.y,r[2]=Vo.z,r[6]=Np.z,r[10]=xr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],f=i[1],h=i[5],p=i[9],m=i[13],v=i[2],w=i[6],_=i[10],g=i[14],x=i[3],S=i[7],E=i[11],T=i[15],b=r[0],P=r[4],I=r[8],C=r[12],D=r[1],H=r[5],G=r[9],Z=r[13],z=r[2],q=r[6],J=r[10],ne=r[14],N=r[3],O=r[7],V=r[11],L=r[15];return s[0]=o*b+a*D+l*z+u*N,s[4]=o*P+a*H+l*q+u*O,s[8]=o*I+a*G+l*J+u*V,s[12]=o*C+a*Z+l*ne+u*L,s[1]=f*b+h*D+p*z+m*N,s[5]=f*P+h*H+p*q+m*O,s[9]=f*I+h*G+p*J+m*V,s[13]=f*C+h*Z+p*ne+m*L,s[2]=v*b+w*D+_*z+g*N,s[6]=v*P+w*H+_*q+g*O,s[10]=v*I+w*G+_*J+g*V,s[14]=v*C+w*Z+_*ne+g*L,s[3]=x*b+S*D+E*z+T*N,s[7]=x*P+S*H+E*q+T*O,s[11]=x*I+S*G+E*J+T*V,s[15]=x*C+S*Z+E*ne+T*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],f=e[2],h=e[6],p=e[10],m=e[14],v=e[3],w=e[7],_=e[11],g=e[15];return v*(+s*l*h-r*u*h-s*a*p+i*u*p+r*a*m-i*l*m)+w*(+t*l*m-t*u*p+s*o*p-r*o*m+r*u*f-s*l*f)+_*(+t*u*h-t*a*m-s*o*h+i*o*m+s*a*f-i*u*f)+g*(-r*a*f-t*l*h+t*a*p+r*o*h-i*o*p+i*l*f)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],f=e[8],h=e[9],p=e[10],m=e[11],v=e[12],w=e[13],_=e[14],g=e[15],x=h*_*u-w*p*u+w*l*m-a*_*m-h*l*g+a*p*g,S=v*p*u-f*_*u-v*l*m+o*_*m+f*l*g-o*p*g,E=f*w*u-v*h*u+v*a*m-o*w*m-f*a*g+o*h*g,T=v*h*l-f*w*l-v*a*p+o*w*p+f*a*_-o*h*_,b=t*x+i*S+r*E+s*T;if(b===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/b;return e[0]=x*P,e[1]=(w*p*s-h*_*s-w*r*m+i*_*m+h*r*g-i*p*g)*P,e[2]=(a*_*s-w*l*s+w*r*u-i*_*u-a*r*g+i*l*g)*P,e[3]=(h*l*s-a*p*s-h*r*u+i*p*u+a*r*m-i*l*m)*P,e[4]=S*P,e[5]=(f*_*s-v*p*s+v*r*m-t*_*m-f*r*g+t*p*g)*P,e[6]=(v*l*s-o*_*s-v*r*u+t*_*u+o*r*g-t*l*g)*P,e[7]=(o*p*s-f*l*s+f*r*u-t*p*u-o*r*m+t*l*m)*P,e[8]=E*P,e[9]=(v*h*s-f*w*s-v*i*m+t*w*m+f*i*g-t*h*g)*P,e[10]=(o*w*s-v*a*s+v*i*u-t*w*u-o*i*g+t*a*g)*P,e[11]=(f*a*s-o*h*s-f*i*u+t*h*u+o*i*m-t*a*m)*P,e[12]=T*P,e[13]=(f*w*r-v*h*r+v*i*p-t*w*p-f*i*_+t*h*_)*P,e[14]=(v*a*r-o*w*r-v*i*l+t*w*l+o*i*_-t*a*_)*P,e[15]=(o*h*r-f*a*r+f*i*l-t*h*l-o*i*p+t*a*p)*P,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,f=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,f*a+i,f*l-r*o,0,u*l-r*a,f*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,f=o+o,h=a+a,p=s*u,m=s*f,v=s*h,w=o*f,_=o*h,g=a*h,x=l*u,S=l*f,E=l*h,T=i.x,b=i.y,P=i.z;return r[0]=(1-(w+g))*T,r[1]=(m+E)*T,r[2]=(v-S)*T,r[3]=0,r[4]=(m-E)*b,r[5]=(1-(p+g))*b,r[6]=(_+x)*b,r[7]=0,r[8]=(v+S)*P,r[9]=(_-x)*P,r[10]=(1-(p+w))*P,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=du.set(r[0],r[1],r[2]).length();const o=du.set(r[4],r[5],r[6]).length(),a=du.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],es.copy(this);const u=1/s,f=1/o,h=1/a;return es.elements[0]*=u,es.elements[1]*=u,es.elements[2]*=u,es.elements[4]*=f,es.elements[5]*=f,es.elements[6]*=f,es.elements[8]*=h,es.elements[9]*=h,es.elements[10]*=h,t.setFromRotationMatrix(es),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Ls){const l=this.elements,u=2*s/(t-e),f=2*s/(i-r),h=(t+e)/(t-e),p=(i+r)/(i-r);let m,v;if(a===Ls)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===Fd)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=f,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Ls){const l=this.elements,u=1/(t-e),f=1/(i-r),h=1/(o-s),p=(t+e)*u,m=(i+r)*f;let v,w;if(a===Ls)v=(o+s)*h,w=-2*h;else if(a===Fd)v=s*h,w=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*f,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=w,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const du=new j,es=new _t,Yk=new j(0,0,0),qk=new j(1,1,1),Vo=new j,Np=new j,xr=new j,XA=new _t,YA=new rr;class ah{constructor(e=0,t=0,i=0,r=ah.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],f=r[9],h=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(An(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-f,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-An(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(An(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-An(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(An(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-An(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-f,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return XA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(XA,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return YA.setFromEuler(this),this.setFromQuaternion(YA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ah.DEFAULT_ORDER="XYZ";class Al{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Zk=0;const qA=new j,hu=new rr,to=new _t,Op=new j,gf=new j,Jk=new j,Qk=new rr,ZA=new j(1,0,0),JA=new j(0,1,0),QA=new j(0,0,1),Kk={type:"added"},$k={type:"removed"};class Bt extends Ao{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Zk++}),this.uuid=br(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bt.DEFAULT_UP.clone();const e=new j,t=new ah,i=new rr,r=new j(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new _t},normalMatrix:{value:new Et}}),this.matrix=new _t,this.matrixWorld=new _t,this.matrixAutoUpdate=Bt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Bt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Al,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return hu.setFromAxisAngle(e,t),this.quaternion.multiply(hu),this}rotateOnWorldAxis(e,t){return hu.setFromAxisAngle(e,t),this.quaternion.premultiply(hu),this}rotateX(e){return this.rotateOnAxis(ZA,e)}rotateY(e){return this.rotateOnAxis(JA,e)}rotateZ(e){return this.rotateOnAxis(QA,e)}translateOnAxis(e,t){return qA.copy(e).applyQuaternion(this.quaternion),this.position.add(qA.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ZA,e)}translateY(e){return this.translateOnAxis(JA,e)}translateZ(e){return this.translateOnAxis(QA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(to.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Op.copy(e):Op.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),gf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?to.lookAt(gf,Op,this.up):to.lookAt(Op,gf,this.up),this.quaternion.setFromRotationMatrix(to),r&&(to.extractRotation(r.matrixWorld),hu.setFromRotationMatrix(to),this.quaternion.premultiply(hu.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Kk)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent($k)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),to.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),to.multiply(e.parent.matrixWorld)),e.applyMatrix4(to),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const o=this.children[r].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gf,e,Jk),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(gf,Qk,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,f=l.length;u<f;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),f=o(e.images),h=o(e.shapes),p=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),f.length>0&&(i.images=f),h.length>0&&(i.shapes=h),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const l=[];for(const u in a){const f=a[u];delete f.metadata,l.push(f)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Bt.DEFAULT_UP=new j(0,1,0);Bt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Bt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ts=new j,no=new j,Cy=new j,io=new j,pu=new j,mu=new j,KA=new j,Py=new j,Ry=new j,Ly=new j;let Fp=!1;class Qi{constructor(e=new j,t=new j,i=new j){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ts.subVectors(e,t),r.cross(ts);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ts.subVectors(r,t),no.subVectors(i,t),Cy.subVectors(e,t);const o=ts.dot(ts),a=ts.dot(no),l=ts.dot(Cy),u=no.dot(no),f=no.dot(Cy),h=o*u-a*a;if(h===0)return s.set(-2,-1,-1);const p=1/h,m=(u*l-a*f)*p,v=(o*f-a*l)*p;return s.set(1-m-v,v,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,io),io.x>=0&&io.y>=0&&io.x+io.y<=1}static getUV(e,t,i,r,s,o,a,l){return Fp===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Fp=!0),this.getInterpolation(e,t,i,r,s,o,a,l)}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,io),l.setScalar(0),l.addScaledVector(s,io.x),l.addScaledVector(o,io.y),l.addScaledVector(a,io.z),l}static isFrontFacing(e,t,i,r){return ts.subVectors(i,t),no.subVectors(e,t),ts.cross(no).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ts.subVectors(this.c,this.b),no.subVectors(this.a,this.b),ts.cross(no).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Qi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Qi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Fp===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Fp=!0),Qi.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return Qi.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Qi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Qi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;pu.subVectors(r,i),mu.subVectors(s,i),Py.subVectors(e,i);const l=pu.dot(Py),u=mu.dot(Py);if(l<=0&&u<=0)return t.copy(i);Ry.subVectors(e,r);const f=pu.dot(Ry),h=mu.dot(Ry);if(f>=0&&h<=f)return t.copy(r);const p=l*h-f*u;if(p<=0&&l>=0&&f<=0)return o=l/(l-f),t.copy(i).addScaledVector(pu,o);Ly.subVectors(e,s);const m=pu.dot(Ly),v=mu.dot(Ly);if(v>=0&&m<=v)return t.copy(s);const w=m*u-l*v;if(w<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(i).addScaledVector(mu,a);const _=f*v-m*h;if(_<=0&&h-f>=0&&m-v>=0)return KA.subVectors(s,r),a=(h-f)/(h-f+(m-v)),t.copy(r).addScaledVector(KA,a);const g=1/(_+w+p);return o=w*g,a=p*g,t.copy(i).addScaledVector(pu,o).addScaledVector(mu,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const X3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Go={h:0,s:0,l:0},kp={h:0,s:0,l:0};function Iy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Ke{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=jn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ht.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Ht.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ht.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Ht.workingColorSpace){if(e=YS(e,1),t=An(t,0,1),i=An(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=Iy(o,s,e+1/3),this.g=Iy(o,s,e),this.b=Iy(o,s,e-1/3)}return Ht.toWorkingColorSpace(this,r),this}setStyle(e,t=jn){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=jn){const i=X3[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=lc(e.r),this.g=lc(e.g),this.b=lc(e.b),this}copyLinearToSRGB(e){return this.r=_y(e.r),this.g=_y(e.g),this.b=_y(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=jn){return Ht.fromWorkingColorSpace(Si.copy(this),e),Math.round(An(Si.r*255,0,255))*65536+Math.round(An(Si.g*255,0,255))*256+Math.round(An(Si.b*255,0,255))}getHexString(e=jn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ht.workingColorSpace){Ht.fromWorkingColorSpace(Si.copy(this),t);const i=Si.r,r=Si.g,s=Si.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const f=(a+o)/2;if(a===o)l=0,u=0;else{const h=o-a;switch(u=f<=.5?h/(o+a):h/(2-o-a),o){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=f,e}getRGB(e,t=Ht.workingColorSpace){return Ht.fromWorkingColorSpace(Si.copy(this),t),e.r=Si.r,e.g=Si.g,e.b=Si.b,e}getStyle(e=jn){Ht.fromWorkingColorSpace(Si.copy(this),e);const t=Si.r,i=Si.g,r=Si.b;return e!==jn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Go),this.setHSL(Go.h+e,Go.s+t,Go.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Go),e.getHSL(kp);const i=Qf(Go.h,kp.h,t),r=Qf(Go.s,kp.s,t),s=Qf(Go.l,kp.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Si=new Ke;Ke.NAMES=X3;let e4=0;class hi extends Ao{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:e4++}),this.uuid=br(),this.name="",this.type="Material",this.blending=wl,this.side=ks,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=bg,this.blendDst=Cg,this.blendEquation=$o,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ke(0,0,0),this.blendAlpha=0,this.depthFunc=Ad,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=i_,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ol,this.stencilZFail=ol,this.stencilZPass=ol,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==wl&&(i.blending=this.blending),this.side!==ks&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==bg&&(i.blendSrc=this.blendSrc),this.blendDst!==Cg&&(i.blendDst=this.blendDst),this.blendEquation!==$o&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ad&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==i_&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ol&&(i.stencilFail=this.stencilFail),this.stencilZFail!==ol&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==ol&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class To extends hi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=sh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ao=t4();function t4(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,f=0;for(;!(u&8388608);)u<<=1,f-=8388608;u&=-8388609,f+=947912704,s[l]=u|f}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Zi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=An(n,-65504,65504),ao.floatView[0]=n;const e=ao.uint32View[0],t=e>>23&511;return ao.baseTable[t]+((e&8388607)>>ao.shiftTable[t])}function Ff(n){const e=n>>10;return ao.uint32View[0]=ao.mantissaTable[ao.offsetTable[e]+(n&1023)]+ao.exponentTable[e],ao.floatView[0]}const n4={toHalfFloat:Zi,fromHalfFloat:Ff},kn=new j,Bp=new Re;class qt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Od,this.updateRange={offset:0,count:-1},this.gpuType=Rs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Bp.fromBufferAttribute(this,t),Bp.applyMatrix3(e),this.setXY(t,Bp.x,Bp.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyMatrix3(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyMatrix4(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.applyNormalMatrix(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)kn.fromBufferAttribute(this,t),kn.transformDirection(e),this.setXYZ(t,kn.x,kn.y,kn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=$i(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=At(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=$i(t,this.array)),t}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=$i(t,this.array)),t}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=$i(t,this.array)),t}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=$i(t,this.array)),t}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array),r=At(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array),r=At(r,this.array),s=At(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Od&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class i4 extends qt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class r4 extends qt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class s4 extends qt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class o4 extends qt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class JS extends qt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class a4 extends qt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class QS extends qt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class l4 extends qt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Ff(this.array[e*this.itemSize]);return this.normalized&&(t=$i(t,this.array)),t}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize]=Zi(t),this}getY(e){let t=Ff(this.array[e*this.itemSize+1]);return this.normalized&&(t=$i(t,this.array)),t}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+1]=Zi(t),this}getZ(e){let t=Ff(this.array[e*this.itemSize+2]);return this.normalized&&(t=$i(t,this.array)),t}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+2]=Zi(t),this}getW(e){let t=Ff(this.array[e*this.itemSize+3]);return this.normalized&&(t=$i(t,this.array)),t}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.array[e*this.itemSize+3]=Zi(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array)),this.array[e+0]=Zi(t),this.array[e+1]=Zi(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array),r=At(r,this.array)),this.array[e+0]=Zi(t),this.array[e+1]=Zi(i),this.array[e+2]=Zi(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=At(t,this.array),i=At(i,this.array),r=At(r,this.array),s=At(s,this.array)),this.array[e+0]=Zi(t),this.array[e+1]=Zi(i),this.array[e+2]=Zi(r),this.array[e+3]=Zi(s),this}}class ot extends qt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class u4 extends qt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let c4=0;const zr=new _t,Dy=new Bt,gu=new j,_r=new ar,vf=new ar,ei=new j;class Tt extends Ao{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:c4++}),this.uuid=br(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(H3(e)?QS:JS)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Et().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return zr.makeRotationFromQuaternion(e),this.applyMatrix4(zr),this}rotateX(e){return zr.makeRotationX(e),this.applyMatrix4(zr),this}rotateY(e){return zr.makeRotationY(e),this.applyMatrix4(zr),this}rotateZ(e){return zr.makeRotationZ(e),this.applyMatrix4(zr),this}translate(e,t,i){return zr.makeTranslation(e,t,i),this.applyMatrix4(zr),this}scale(e,t,i){return zr.makeScale(e,t,i),this.applyMatrix4(zr),this}lookAt(e){return Dy.lookAt(e),Dy.updateMatrix(),this.applyMatrix4(Dy.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(gu).negate(),this.translate(gu.x,gu.y,gu.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ot(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ar);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];_r.setFromBufferAttribute(s),this.morphTargetsRelative?(ei.addVectors(this.boundingBox.min,_r.min),this.boundingBox.expandByPoint(ei),ei.addVectors(this.boundingBox.max,_r.max),this.boundingBox.expandByPoint(ei)):(this.boundingBox.expandByPoint(_r.min),this.boundingBox.expandByPoint(_r.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new lr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new j,1/0);return}if(e){const i=this.boundingSphere.center;if(_r.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];vf.setFromBufferAttribute(a),this.morphTargetsRelative?(ei.addVectors(_r.min,vf.min),_r.expandByPoint(ei),ei.addVectors(_r.max,vf.max),_r.expandByPoint(ei)):(_r.expandByPoint(vf.min),_r.expandByPoint(vf.max))}_r.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)ei.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ei));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,f=a.count;u<f;u++)ei.fromBufferAttribute(a,u),l&&(gu.fromBufferAttribute(e,u),ei.add(gu)),r=Math.max(r,i.distanceToSquared(ei))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new qt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],f=[];for(let D=0;D<a;D++)u[D]=new j,f[D]=new j;const h=new j,p=new j,m=new j,v=new Re,w=new Re,_=new Re,g=new j,x=new j;function S(D,H,G){h.fromArray(r,D*3),p.fromArray(r,H*3),m.fromArray(r,G*3),v.fromArray(o,D*2),w.fromArray(o,H*2),_.fromArray(o,G*2),p.sub(h),m.sub(h),w.sub(v),_.sub(v);const Z=1/(w.x*_.y-_.x*w.y);isFinite(Z)&&(g.copy(p).multiplyScalar(_.y).addScaledVector(m,-w.y).multiplyScalar(Z),x.copy(m).multiplyScalar(w.x).addScaledVector(p,-_.x).multiplyScalar(Z),u[D].add(g),u[H].add(g),u[G].add(g),f[D].add(x),f[H].add(x),f[G].add(x))}let E=this.groups;E.length===0&&(E=[{start:0,count:i.length}]);for(let D=0,H=E.length;D<H;++D){const G=E[D],Z=G.start,z=G.count;for(let q=Z,J=Z+z;q<J;q+=3)S(i[q+0],i[q+1],i[q+2])}const T=new j,b=new j,P=new j,I=new j;function C(D){P.fromArray(s,D*3),I.copy(P);const H=u[D];T.copy(H),T.sub(P.multiplyScalar(P.dot(H))).normalize(),b.crossVectors(I,H);const Z=b.dot(f[D])<0?-1:1;l[D*4]=T.x,l[D*4+1]=T.y,l[D*4+2]=T.z,l[D*4+3]=Z}for(let D=0,H=E.length;D<H;++D){const G=E[D],Z=G.start,z=G.count;for(let q=Z,J=Z+z;q<J;q+=3)C(i[q+0]),C(i[q+1]),C(i[q+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new qt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new j,s=new j,o=new j,a=new j,l=new j,u=new j,f=new j,h=new j;if(e)for(let p=0,m=e.count;p<m;p+=3){const v=e.getX(p+0),w=e.getX(p+1),_=e.getX(p+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,_),f.subVectors(o,s),h.subVectors(r,s),f.cross(h),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,w),u.fromBufferAttribute(i,_),a.add(f),l.add(f),u.add(f),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(w,l.x,l.y,l.z),i.setXYZ(_,u.x,u.y,u.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),f.subVectors(o,s),h.subVectors(r,s),f.cross(h),i.setXYZ(p+0,f.x,f.y,f.z),i.setXYZ(p+1,f.x,f.y,f.z),i.setXYZ(p+2,f.x,f.y,f.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ei.fromBufferAttribute(e,t),ei.normalize(),e.setXYZ(t,ei.x,ei.y,ei.z)}toNonIndexed(){function e(a,l){const u=a.array,f=a.itemSize,h=a.normalized,p=new u.constructor(l.length*f);let m=0,v=0;for(let w=0,_=l.length;w<_;w++){a.isInterleavedBufferAttribute?m=l[w]*a.data.stride+a.offset:m=l[w]*f;for(let g=0;g<f;g++)p[v++]=u[m++]}return new qt(p,f,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Tt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let f=0,h=u.length;f<h;f++){const p=u[f],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],f=[];for(let h=0,p=u.length;h<p;h++){const m=u[h];f.push(m.toJSON(e.data))}f.length>0&&(r[l]=f,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const f=r[u];this.setAttribute(u,f.clone(t))}const s=e.morphAttributes;for(const u in s){const f=[],h=s[u];for(let p=0,m=h.length;p<m;p++)f.push(h[p].clone(t));this.morphAttributes[u]=f}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,f=o.length;u<f;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const $A=new _t,qa=new Rc,zp=new lr,eT=new j,vu=new j,yu=new j,xu=new j,Uy=new j,Vp=new j,Gp=new Re,Hp=new Re,Wp=new Re,tT=new j,nT=new j,iT=new j,jp=new j,Xp=new j;class Dn extends Bt{constructor(e=new Tt,t=new To){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Vp.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const f=a[l],h=s[l];f!==0&&(Uy.fromBufferAttribute(h,e),o?Vp.addScaledVector(Uy,f):Vp.addScaledVector(Uy.sub(t),f))}t.add(Vp)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),zp.copy(i.boundingSphere),zp.applyMatrix4(s),qa.copy(e.ray).recast(e.near),!(zp.containsPoint(qa.origin)===!1&&(qa.intersectSphere(zp,eT)===null||qa.origin.distanceToSquared(eT)>(e.far-e.near)**2))&&($A.copy(s).invert(),qa.copy(e.ray).applyMatrix4($A),!(i.boundingBox!==null&&qa.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,qa)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,f=s.attributes.uv1,h=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,w=p.length;v<w;v++){const _=p[v],g=o[_.materialIndex],x=Math.max(_.start,m.start),S=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let E=x,T=S;E<T;E+=3){const b=a.getX(E),P=a.getX(E+1),I=a.getX(E+2);r=Yp(this,g,e,i,u,f,h,b,P,I),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),w=Math.min(a.count,m.start+m.count);for(let _=v,g=w;_<g;_+=3){const x=a.getX(_),S=a.getX(_+1),E=a.getX(_+2);r=Yp(this,o,e,i,u,f,h,x,S,E),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,w=p.length;v<w;v++){const _=p[v],g=o[_.materialIndex],x=Math.max(_.start,m.start),S=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let E=x,T=S;E<T;E+=3){const b=E,P=E+1,I=E+2;r=Yp(this,g,e,i,u,f,h,b,P,I),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),w=Math.min(l.count,m.start+m.count);for(let _=v,g=w;_<g;_+=3){const x=_,S=_+1,E=_+2;r=Yp(this,o,e,i,u,f,h,x,S,E),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}}function f4(n,e,t,i,r,s,o,a){let l;if(e.side===Ai?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===ks,a),l===null)return null;Xp.copy(a),Xp.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Xp);return u<t.near||u>t.far?null:{distance:u,point:Xp.clone(),object:n}}function Yp(n,e,t,i,r,s,o,a,l,u){n.getVertexPosition(a,vu),n.getVertexPosition(l,yu),n.getVertexPosition(u,xu);const f=f4(n,e,t,i,vu,yu,xu,jp);if(f){r&&(Gp.fromBufferAttribute(r,a),Hp.fromBufferAttribute(r,l),Wp.fromBufferAttribute(r,u),f.uv=Qi.getInterpolation(jp,vu,yu,xu,Gp,Hp,Wp,new Re)),s&&(Gp.fromBufferAttribute(s,a),Hp.fromBufferAttribute(s,l),Wp.fromBufferAttribute(s,u),f.uv1=Qi.getInterpolation(jp,vu,yu,xu,Gp,Hp,Wp,new Re),f.uv2=f.uv1),o&&(tT.fromBufferAttribute(o,a),nT.fromBufferAttribute(o,l),iT.fromBufferAttribute(o,u),f.normal=Qi.getInterpolation(jp,vu,yu,xu,tT,nT,iT,new j),f.normal.dot(i.direction)>0&&f.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new j,materialIndex:0};Qi.getNormal(vu,yu,xu,h.normal),f.face=h}return f}class zl extends Tt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],f=[],h=[];let p=0,m=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new ot(u,3)),this.setAttribute("normal",new ot(f,3)),this.setAttribute("uv",new ot(h,2));function v(w,_,g,x,S,E,T,b,P,I,C){const D=E/P,H=T/I,G=E/2,Z=T/2,z=b/2,q=P+1,J=I+1;let ne=0,N=0;const O=new j;for(let V=0;V<J;V++){const L=V*H-Z;for(let k=0;k<q;k++){const K=k*D-G;O[w]=K*x,O[_]=L*S,O[g]=z,u.push(O.x,O.y,O.z),O[w]=0,O[_]=0,O[g]=b>0?1:-1,f.push(O.x,O.y,O.z),h.push(k/P),h.push(1-V/I),ne+=1}}for(let V=0;V<I;V++)for(let L=0;L<P;L++){const k=p+L+q*V,K=p+L+q*(V+1),ie=p+(L+1)+q*(V+1),$=p+(L+1)+q*V;l.push(k,K,$),l.push(K,ie,$),N+=6}a.addGroup(m,N,C),m+=N,p+=ne}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Sc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Oi(n){const e={};for(let t=0;t<n.length;t++){const i=Sc(n[t]);for(const r in i)e[r]=i[r]}return e}function d4(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Y3(n){return n.getRenderTarget()===null?n.outputColorSpace:Ht.workingColorSpace}const Bd={clone:Sc,merge:Oi};var h4=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,p4=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ds extends hi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=h4,this.fragmentShader=p4,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Sc(e.uniforms),this.uniformsGroups=d4(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class lh extends Bt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new _t,this.projectionMatrix=new _t,this.projectionMatrixInverse=new _t,this.coordinateSystem=Ls}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class zn extends lh{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=_c*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(El*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return _c*2*Math.atan(Math.tan(El*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(El*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const _u=-90,Su=1;class KS extends Bt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new zn(_u,Su,e,t);r.layers=this.layers,this.add(r);const s=new zn(_u,Su,e,t);s.layers=this.layers,this.add(s);const o=new zn(_u,Su,e,t);o.layers=this.layers,this.add(o);const a=new zn(_u,Su,e,t);a.layers=this.layers,this.add(a);const l=new zn(_u,Su,e,t);l.layers=this.layers,this.add(l);const u=new zn(_u,Su,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===Ls)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Fd)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,f]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const w=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=w,e.setRenderTarget(i,5,r),e.render(t,f),e.setRenderTarget(h,p,m),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class uh extends yn{constructor(e,t,i,r,s,o,a,l,u,f){e=e!==void 0?e:[],t=t!==void 0?t:So,super(e,t,i,r,s,o,a,l,u,f),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class $S extends fs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(Kf("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===da?jn:Mr),this.texture=new uh(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:pn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new zl(5,5,5),s=new ds({name:"CubemapFromEquirect",uniforms:Sc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ai,blending:po});s.uniforms.tEquirect.value=t;const o=new Dn(r,s),a=t.minFilter;return t.minFilter===ya&&(t.minFilter=pn),new KS(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const Ny=new j,m4=new j,g4=new Et;class Zo{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Ny.subVectors(i,t).cross(m4.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Ny),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||g4.getNormalMatrix(e),r=this.coplanarPoint(Ny).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Za=new lr,qp=new j;class g0{constructor(e=new Zo,t=new Zo,i=new Zo,r=new Zo,s=new Zo,o=new Zo){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ls){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],u=r[4],f=r[5],h=r[6],p=r[7],m=r[8],v=r[9],w=r[10],_=r[11],g=r[12],x=r[13],S=r[14],E=r[15];if(i[0].setComponents(l-s,p-u,_-m,E-g).normalize(),i[1].setComponents(l+s,p+u,_+m,E+g).normalize(),i[2].setComponents(l+o,p+f,_+v,E+x).normalize(),i[3].setComponents(l-o,p-f,_-v,E-x).normalize(),i[4].setComponents(l-a,p-h,_-w,E-S).normalize(),t===Ls)i[5].setComponents(l+a,p+h,_+w,E+S).normalize();else if(t===Fd)i[5].setComponents(a,h,w,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Za.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Za.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Za)}intersectsSprite(e){return Za.center.set(0,0,0),Za.radius=.7071067811865476,Za.applyMatrix4(e.matrixWorld),this.intersectsSphere(Za)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(qp.x=r.normal.x>0?e.max.x:e.min.x,qp.y=r.normal.y>0?e.max.y:e.min.y,qp.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(qp)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function q3(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function v4(n,e){const t=e.isWebGL2,i=new WeakMap;function r(u,f){const h=u.array,p=u.usage,m=n.createBuffer();n.bindBuffer(f,m),n.bufferData(f,h,p),u.onUploadCallback();let v;if(h instanceof Float32Array)v=n.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)v=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)v=n.SHORT;else if(h instanceof Uint32Array)v=n.UNSIGNED_INT;else if(h instanceof Int32Array)v=n.INT;else if(h instanceof Int8Array)v=n.BYTE;else if(h instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:m,type:v,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version}}function s(u,f,h){const p=f.array,m=f.updateRange;n.bindBuffer(h,u),m.count===-1?n.bufferSubData(h,0,p):(t?n.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),f.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const f=i.get(u);f&&(n.deleteBuffer(f.buffer),i.delete(u))}function l(u,f){if(u.isGLBufferAttribute){const p=i.get(u);(!p||p.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=i.get(u);h===void 0?i.set(u,r(u,f)):h.version<u.version&&(s(h.buffer,u,f),h.version=u.version)}return{get:o,remove:a,update:l}}class Ta extends Tt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,f=l+1,h=e/a,p=t/l,m=[],v=[],w=[],_=[];for(let g=0;g<f;g++){const x=g*p-o;for(let S=0;S<u;S++){const E=S*h-s;v.push(E,-x,0),w.push(0,0,1),_.push(S/a),_.push(1-g/l)}}for(let g=0;g<l;g++)for(let x=0;x<a;x++){const S=x+u*g,E=x+u*(g+1),T=x+1+u*(g+1),b=x+1+u*g;m.push(S,E,b),m.push(E,T,b)}this.setIndex(m),this.setAttribute("position",new ot(v,3)),this.setAttribute("normal",new ot(w,3)),this.setAttribute("uv",new ot(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ta(e.width,e.height,e.widthSegments,e.heightSegments)}}var y4=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,x4=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,_4=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,S4=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,w4=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,M4=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,E4=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,A4=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,T4=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,b4=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,C4=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,P4=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,R4=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,L4=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,I4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,D4=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,U4=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,N4=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,O4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,F4=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,k4=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,B4=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,z4=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,V4=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,G4=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,H4=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,W4=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,j4=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,X4="gl_FragColor = linearToOutputTexel( gl_FragColor );",Y4=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,q4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Z4=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,J4=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Q4=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,K4=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,$4=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,eB=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,tB=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,nB=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,iB=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,rB=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,sB=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,oB=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,aB=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lB=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,uB=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,cB=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,fB=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,dB=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,hB=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,pB=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,mB=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,gB=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,vB=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,yB=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,xB=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,_B=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,SB=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,wB=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,MB=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,EB=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,AB=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,TB=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bB=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,CB=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,PB=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,RB=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,LB=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,IB=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,DB=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,UB=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,NB=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,OB=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,FB=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,kB=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,BB=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,zB=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,VB=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,GB=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,HB=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,WB=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,jB=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,XB=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,YB=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,qB=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ZB=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,JB=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,QB=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,KB=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,$B=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,ez=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,tz=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,nz=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,iz=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,rz=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,sz=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,oz=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,az=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,lz=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,uz=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,cz=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,fz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,dz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,hz=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,pz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const mz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,gz=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yz=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,_z=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Sz=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,wz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Mz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Ez=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Az=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Tz=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bz=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Cz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Pz=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Rz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Lz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Iz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Dz=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Uz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Nz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Oz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Fz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Bz=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,zz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vz=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Gz=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Hz=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Wz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jz=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Xz=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Yz=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,qz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Mt={alphahash_fragment:y4,alphahash_pars_fragment:x4,alphamap_fragment:_4,alphamap_pars_fragment:S4,alphatest_fragment:w4,alphatest_pars_fragment:M4,aomap_fragment:E4,aomap_pars_fragment:A4,begin_vertex:T4,beginnormal_vertex:b4,bsdfs:C4,iridescence_fragment:P4,bumpmap_pars_fragment:R4,clipping_planes_fragment:L4,clipping_planes_pars_fragment:I4,clipping_planes_pars_vertex:D4,clipping_planes_vertex:U4,color_fragment:N4,color_pars_fragment:O4,color_pars_vertex:F4,color_vertex:k4,common:B4,cube_uv_reflection_fragment:z4,defaultnormal_vertex:V4,displacementmap_pars_vertex:G4,displacementmap_vertex:H4,emissivemap_fragment:W4,emissivemap_pars_fragment:j4,colorspace_fragment:X4,colorspace_pars_fragment:Y4,envmap_fragment:q4,envmap_common_pars_fragment:Z4,envmap_pars_fragment:J4,envmap_pars_vertex:Q4,envmap_physical_pars_fragment:uB,envmap_vertex:K4,fog_vertex:$4,fog_pars_vertex:eB,fog_fragment:tB,fog_pars_fragment:nB,gradientmap_pars_fragment:iB,lightmap_fragment:rB,lightmap_pars_fragment:sB,lights_lambert_fragment:oB,lights_lambert_pars_fragment:aB,lights_pars_begin:lB,lights_toon_fragment:cB,lights_toon_pars_fragment:fB,lights_phong_fragment:dB,lights_phong_pars_fragment:hB,lights_physical_fragment:pB,lights_physical_pars_fragment:mB,lights_fragment_begin:gB,lights_fragment_maps:vB,lights_fragment_end:yB,logdepthbuf_fragment:xB,logdepthbuf_pars_fragment:_B,logdepthbuf_pars_vertex:SB,logdepthbuf_vertex:wB,map_fragment:MB,map_pars_fragment:EB,map_particle_fragment:AB,map_particle_pars_fragment:TB,metalnessmap_fragment:bB,metalnessmap_pars_fragment:CB,morphcolor_vertex:PB,morphnormal_vertex:RB,morphtarget_pars_vertex:LB,morphtarget_vertex:IB,normal_fragment_begin:DB,normal_fragment_maps:UB,normal_pars_fragment:NB,normal_pars_vertex:OB,normal_vertex:FB,normalmap_pars_fragment:kB,clearcoat_normal_fragment_begin:BB,clearcoat_normal_fragment_maps:zB,clearcoat_pars_fragment:VB,iridescence_pars_fragment:GB,opaque_fragment:HB,packing:WB,premultiplied_alpha_fragment:jB,project_vertex:XB,dithering_fragment:YB,dithering_pars_fragment:qB,roughnessmap_fragment:ZB,roughnessmap_pars_fragment:JB,shadowmap_pars_fragment:QB,shadowmap_pars_vertex:KB,shadowmap_vertex:$B,shadowmask_pars_fragment:ez,skinbase_vertex:tz,skinning_pars_vertex:nz,skinning_vertex:iz,skinnormal_vertex:rz,specularmap_fragment:sz,specularmap_pars_fragment:oz,tonemapping_fragment:az,tonemapping_pars_fragment:lz,transmission_fragment:uz,transmission_pars_fragment:cz,uv_pars_fragment:fz,uv_pars_vertex:dz,uv_vertex:hz,worldpos_vertex:pz,background_vert:mz,background_frag:gz,backgroundCube_vert:vz,backgroundCube_frag:yz,cube_vert:xz,cube_frag:_z,depth_vert:Sz,depth_frag:wz,distanceRGBA_vert:Mz,distanceRGBA_frag:Ez,equirect_vert:Az,equirect_frag:Tz,linedashed_vert:bz,linedashed_frag:Cz,meshbasic_vert:Pz,meshbasic_frag:Rz,meshlambert_vert:Lz,meshlambert_frag:Iz,meshmatcap_vert:Dz,meshmatcap_frag:Uz,meshnormal_vert:Nz,meshnormal_frag:Oz,meshphong_vert:Fz,meshphong_frag:kz,meshphysical_vert:Bz,meshphysical_frag:zz,meshtoon_vert:Vz,meshtoon_frag:Gz,points_vert:Hz,points_frag:Wz,shadow_vert:jz,shadow_frag:Xz,sprite_vert:Yz,sprite_frag:qz},qe={common:{diffuse:{value:new Ke(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Et},alphaMap:{value:null},alphaMapTransform:{value:new Et},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Et}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Et}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Et}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Et},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Et},normalScale:{value:new Re(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Et},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Et}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Et}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Et}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ke(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ke(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Et},alphaTest:{value:0},uvTransform:{value:new Et}},sprite:{diffuse:{value:new Ke(16777215)},opacity:{value:1},center:{value:new Re(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Et},alphaMap:{value:null},alphaMapTransform:{value:new Et},alphaTest:{value:0}}},os={basic:{uniforms:Oi([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.fog]),vertexShader:Mt.meshbasic_vert,fragmentShader:Mt.meshbasic_frag},lambert:{uniforms:Oi([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,qe.lights,{emissive:{value:new Ke(0)}}]),vertexShader:Mt.meshlambert_vert,fragmentShader:Mt.meshlambert_frag},phong:{uniforms:Oi([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,qe.lights,{emissive:{value:new Ke(0)},specular:{value:new Ke(1118481)},shininess:{value:30}}]),vertexShader:Mt.meshphong_vert,fragmentShader:Mt.meshphong_frag},standard:{uniforms:Oi([qe.common,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.roughnessmap,qe.metalnessmap,qe.fog,qe.lights,{emissive:{value:new Ke(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mt.meshphysical_vert,fragmentShader:Mt.meshphysical_frag},toon:{uniforms:Oi([qe.common,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.gradientmap,qe.fog,qe.lights,{emissive:{value:new Ke(0)}}]),vertexShader:Mt.meshtoon_vert,fragmentShader:Mt.meshtoon_frag},matcap:{uniforms:Oi([qe.common,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,{matcap:{value:null}}]),vertexShader:Mt.meshmatcap_vert,fragmentShader:Mt.meshmatcap_frag},points:{uniforms:Oi([qe.points,qe.fog]),vertexShader:Mt.points_vert,fragmentShader:Mt.points_frag},dashed:{uniforms:Oi([qe.common,qe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mt.linedashed_vert,fragmentShader:Mt.linedashed_frag},depth:{uniforms:Oi([qe.common,qe.displacementmap]),vertexShader:Mt.depth_vert,fragmentShader:Mt.depth_frag},normal:{uniforms:Oi([qe.common,qe.bumpmap,qe.normalmap,qe.displacementmap,{opacity:{value:1}}]),vertexShader:Mt.meshnormal_vert,fragmentShader:Mt.meshnormal_frag},sprite:{uniforms:Oi([qe.sprite,qe.fog]),vertexShader:Mt.sprite_vert,fragmentShader:Mt.sprite_frag},background:{uniforms:{uvTransform:{value:new Et},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mt.background_vert,fragmentShader:Mt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Mt.backgroundCube_vert,fragmentShader:Mt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mt.cube_vert,fragmentShader:Mt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mt.equirect_vert,fragmentShader:Mt.equirect_frag},distanceRGBA:{uniforms:Oi([qe.common,qe.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mt.distanceRGBA_vert,fragmentShader:Mt.distanceRGBA_frag},shadow:{uniforms:Oi([qe.lights,qe.fog,{color:{value:new Ke(0)},opacity:{value:1}}]),vertexShader:Mt.shadow_vert,fragmentShader:Mt.shadow_frag}};os.physical={uniforms:Oi([os.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Et},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Et},clearcoatNormalScale:{value:new Re(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Et},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Et},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Et},sheen:{value:0},sheenColor:{value:new Ke(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Et},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Et},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Et},transmissionSamplerSize:{value:new Re},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Et},attenuationDistance:{value:0},attenuationColor:{value:new Ke(0)},specularColor:{value:new Ke(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Et},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Et},anisotropyVector:{value:new Re},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Et}}]),vertexShader:Mt.meshphysical_vert,fragmentShader:Mt.meshphysical_frag};const Zp={r:0,b:0,g:0};function Zz(n,e,t,i,r,s,o){const a=new Ke(0);let l=s===!0?0:1,u,f,h=null,p=0,m=null;function v(_,g){let x=!1,S=g.isScene===!0?g.background:null;S&&S.isTexture&&(S=(g.backgroundBlurriness>0?t:e).get(S)),S===null?w(a,l):S&&S.isColor&&(w(S,1),x=!0);const E=n.xr.getEnvironmentBlendMode();E==="additive"?i.buffers.color.setClear(0,0,0,1,o):E==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),S&&(S.isCubeTexture||S.mapping===Pc)?(f===void 0&&(f=new Dn(new zl(1,1,1),new ds({name:"BackgroundCubeMaterial",uniforms:Sc(os.backgroundCube.uniforms),vertexShader:os.backgroundCube.vertexShader,fragmentShader:os.backgroundCube.fragmentShader,side:Ai,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),f.geometry.deleteAttribute("uv"),f.onBeforeRender=function(T,b,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(f.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(f)),f.material.uniforms.envMap.value=S,f.material.uniforms.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,f.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,f.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,f.material.toneMapped=Ht.getTransfer(S.colorSpace)!==Qt,(h!==S||p!==S.version||m!==n.toneMapping)&&(f.material.needsUpdate=!0,h=S,p=S.version,m=n.toneMapping),f.layers.enableAll(),_.unshift(f,f.geometry,f.material,0,0,null)):S&&S.isTexture&&(u===void 0&&(u=new Dn(new Ta(2,2),new ds({name:"BackgroundMaterial",uniforms:Sc(os.background.uniforms),vertexShader:os.background.vertexShader,fragmentShader:os.background.fragmentShader,side:ks,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=S,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=Ht.getTransfer(S.colorSpace)!==Qt,S.matrixAutoUpdate===!0&&S.updateMatrix(),u.material.uniforms.uvTransform.value.copy(S.matrix),(h!==S||p!==S.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,h=S,p=S.version,m=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null))}function w(_,g){_.getRGB(Zp,Y3(n)),i.buffers.color.setClear(Zp.r,Zp.g,Zp.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(_,g=1){a.set(_),l=g,w(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,w(a,l)},render:v}}function Jz(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=_(null);let u=l,f=!1;function h(z,q,J,ne,N){let O=!1;if(o){const V=w(ne,J,q);u!==V&&(u=V,m(u.object)),O=g(z,ne,J,N),O&&x(z,ne,J,N)}else{const V=q.wireframe===!0;(u.geometry!==ne.id||u.program!==J.id||u.wireframe!==V)&&(u.geometry=ne.id,u.program=J.id,u.wireframe=V,O=!0)}N!==null&&t.update(N,n.ELEMENT_ARRAY_BUFFER),(O||f)&&(f=!1,I(z,q,J,ne),N!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(N).buffer))}function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(z){return i.isWebGL2?n.bindVertexArray(z):s.bindVertexArrayOES(z)}function v(z){return i.isWebGL2?n.deleteVertexArray(z):s.deleteVertexArrayOES(z)}function w(z,q,J){const ne=J.wireframe===!0;let N=a[z.id];N===void 0&&(N={},a[z.id]=N);let O=N[q.id];O===void 0&&(O={},N[q.id]=O);let V=O[ne];return V===void 0&&(V=_(p()),O[ne]=V),V}function _(z){const q=[],J=[],ne=[];for(let N=0;N<r;N++)q[N]=0,J[N]=0,ne[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:q,enabledAttributes:J,attributeDivisors:ne,object:z,attributes:{},index:null}}function g(z,q,J,ne){const N=u.attributes,O=q.attributes;let V=0;const L=J.getAttributes();for(const k in L)if(L[k].location>=0){const ie=N[k];let $=O[k];if($===void 0&&(k==="instanceMatrix"&&z.instanceMatrix&&($=z.instanceMatrix),k==="instanceColor"&&z.instanceColor&&($=z.instanceColor)),ie===void 0||ie.attribute!==$||$&&ie.data!==$.data)return!0;V++}return u.attributesNum!==V||u.index!==ne}function x(z,q,J,ne){const N={},O=q.attributes;let V=0;const L=J.getAttributes();for(const k in L)if(L[k].location>=0){let ie=O[k];ie===void 0&&(k==="instanceMatrix"&&z.instanceMatrix&&(ie=z.instanceMatrix),k==="instanceColor"&&z.instanceColor&&(ie=z.instanceColor));const $={};$.attribute=ie,ie&&ie.data&&($.data=ie.data),N[k]=$,V++}u.attributes=N,u.attributesNum=V,u.index=ne}function S(){const z=u.newAttributes;for(let q=0,J=z.length;q<J;q++)z[q]=0}function E(z){T(z,0)}function T(z,q){const J=u.newAttributes,ne=u.enabledAttributes,N=u.attributeDivisors;J[z]=1,ne[z]===0&&(n.enableVertexAttribArray(z),ne[z]=1),N[z]!==q&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,q),N[z]=q)}function b(){const z=u.newAttributes,q=u.enabledAttributes;for(let J=0,ne=q.length;J<ne;J++)q[J]!==z[J]&&(n.disableVertexAttribArray(J),q[J]=0)}function P(z,q,J,ne,N,O,V){V===!0?n.vertexAttribIPointer(z,q,J,N,O):n.vertexAttribPointer(z,q,J,ne,N,O)}function I(z,q,J,ne){if(i.isWebGL2===!1&&(z.isInstancedMesh||ne.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;S();const N=ne.attributes,O=J.getAttributes(),V=q.defaultAttributeValues;for(const L in O){const k=O[L];if(k.location>=0){let K=N[L];if(K===void 0&&(L==="instanceMatrix"&&z.instanceMatrix&&(K=z.instanceMatrix),L==="instanceColor"&&z.instanceColor&&(K=z.instanceColor)),K!==void 0){const ie=K.normalized,$=K.itemSize,le=t.get(K);if(le===void 0)continue;const oe=le.buffer,he=le.type,be=le.bytesPerElement,Ie=i.isWebGL2===!0&&(he===n.INT||he===n.UNSIGNED_INT||K.gpuType===kS);if(K.isInterleavedBufferAttribute){const ue=K.data,B=ue.stride,ye=K.offset;if(ue.isInstancedInterleavedBuffer){for(let ce=0;ce<k.locationSize;ce++)T(k.location+ce,ue.meshPerAttribute);z.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let ce=0;ce<k.locationSize;ce++)E(k.location+ce);n.bindBuffer(n.ARRAY_BUFFER,oe);for(let ce=0;ce<k.locationSize;ce++)P(k.location+ce,$/k.locationSize,he,ie,B*be,(ye+$/k.locationSize*ce)*be,Ie)}else{if(K.isInstancedBufferAttribute){for(let ue=0;ue<k.locationSize;ue++)T(k.location+ue,K.meshPerAttribute);z.isInstancedMesh!==!0&&ne._maxInstanceCount===void 0&&(ne._maxInstanceCount=K.meshPerAttribute*K.count)}else for(let ue=0;ue<k.locationSize;ue++)E(k.location+ue);n.bindBuffer(n.ARRAY_BUFFER,oe);for(let ue=0;ue<k.locationSize;ue++)P(k.location+ue,$/k.locationSize,he,ie,$*be,$/k.locationSize*ue*be,Ie)}}else if(V!==void 0){const ie=V[L];if(ie!==void 0)switch(ie.length){case 2:n.vertexAttrib2fv(k.location,ie);break;case 3:n.vertexAttrib3fv(k.location,ie);break;case 4:n.vertexAttrib4fv(k.location,ie);break;default:n.vertexAttrib1fv(k.location,ie)}}}}b()}function C(){G();for(const z in a){const q=a[z];for(const J in q){const ne=q[J];for(const N in ne)v(ne[N].object),delete ne[N];delete q[J]}delete a[z]}}function D(z){if(a[z.id]===void 0)return;const q=a[z.id];for(const J in q){const ne=q[J];for(const N in ne)v(ne[N].object),delete ne[N];delete q[J]}delete a[z.id]}function H(z){for(const q in a){const J=a[q];if(J[z.id]===void 0)continue;const ne=J[z.id];for(const N in ne)v(ne[N].object),delete ne[N];delete J[z.id]}}function G(){Z(),f=!0,u!==l&&(u=l,m(u.object))}function Z(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:G,resetDefaultState:Z,dispose:C,releaseStatesOfGeometry:D,releaseStatesOfProgram:H,initAttributes:S,enableAttribute:E,disableUnusedAttributes:b}}function Qz(n,e,t,i){const r=i.isWebGL2;let s;function o(u){s=u}function a(u,f){n.drawArrays(s,u,f),t.update(f,s,1)}function l(u,f,h){if(h===0)return;let p,m;if(r)p=n,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[m](s,u,f,h),t.update(f,s,h)}this.setMode=o,this.render=a,this.renderInstances=l}function Kz(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(P){if(P==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),f=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=p>0,E=o||e.has("OES_texture_float"),T=S&&E,b=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:f,maxTextures:h,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:v,maxAttributes:w,maxVertexUniforms:_,maxVaryings:g,maxFragmentUniforms:x,vertexTextures:S,floatFragmentTextures:E,floatVertexTextures:T,maxSamples:b}}function $z(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Zo,a=new Et,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const m=h.length!==0||p||i!==0||r;return r=p,i=h.length,m},this.beginShadows=function(){s=!0,f(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,p){t=f(h,p,0)},this.setState=function(h,p,m){const v=h.clippingPlanes,w=h.clipIntersection,_=h.clipShadows,g=n.get(h);if(!r||v===null||v.length===0||s&&!_)s?f(null):u();else{const x=s?0:i,S=x*4;let E=g.clippingState||null;l.value=E,E=f(v,p,S,m);for(let T=0;T!==S;++T)E[T]=t[T];g.clippingState=E,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=x}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function f(h,p,m,v){const w=h!==null?h.length:0;let _=null;if(w!==0){if(_=l.value,v!==!0||_===null){const g=m+w*4,x=p.matrixWorldInverse;a.getNormalMatrix(x),(_===null||_.length<g)&&(_=new Float32Array(g));for(let S=0,E=m;S!==w;++S,E+=4)o.copy(h[S]).applyMatrix4(x,a),o.normal.toArray(_,E),_[E+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,_}}function e5(n){let e=new WeakMap;function t(o,a){return a===Td?o.mapping=So:a===bd&&(o.mapping=va),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Td||a===bd)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new $S(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Vl extends lh{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=f*this.view.offsetY,l=a-f*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Xu=4,rT=[.125,.215,.35,.446,.526,.582],cl=20,Oy=new Vl,sT=new Ke;let Fy=null,ky=0,By=0;const al=(1+Math.sqrt(5))/2,wu=1/al,oT=[new j(1,1,1),new j(-1,1,1),new j(1,1,-1),new j(-1,1,-1),new j(0,al,wu),new j(0,al,-wu),new j(wu,0,al),new j(-wu,0,al),new j(al,wu,0),new j(-al,wu,0)];class o_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Fy=this._renderer.getRenderTarget(),ky=this._renderer.getActiveCubeFace(),By=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=uT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=lT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Fy,ky,By),e.scissorTest=!1,Jp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===So||e.mapping===va?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Fy=this._renderer.getRenderTarget(),ky=this._renderer.getActiveCubeFace(),By=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:pn,minFilter:pn,generateMipmaps:!1,type:xc,format:Ki,colorSpace:Bs,depthBuffer:!1},r=aT(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=aT(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=t5(s)),this._blurMaterial=n5(s,e,t)}return r}_compileMaterial(e){const t=new Dn(this._lodPlanes[0],e);this._renderer.compile(t,Oy)}_sceneToCubeUV(e,t,i,r){const a=new zn(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,h=f.autoClear,p=f.toneMapping;f.getClearColor(sT),f.toneMapping=Us,f.autoClear=!1;const m=new To({name:"PMREM.Background",side:Ai,depthWrite:!1,depthTest:!1}),v=new Dn(new zl,m);let w=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,w=!0):(m.color.copy(sT),w=!0);for(let g=0;g<6;g++){const x=g%3;x===0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):x===1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g]));const S=this._cubeSize;Jp(r,x*S,g>2?S:0,S,S),f.setRenderTarget(r),w&&f.render(v,a),f.render(e,a)}v.geometry.dispose(),v.material.dispose(),f.toneMapping=p,f.autoClear=h,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===So||e.mapping===va;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=uT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=lT());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Dn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Jp(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,Oy)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=oT[(r-1)%oT.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const f=3,h=new Dn(this._lodPlanes[r],u),p=u.uniforms,m=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*cl-1),w=s/v,_=isFinite(s)?1+Math.floor(f*w):cl;_>cl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${cl}`);const g=[];let x=0;for(let P=0;P<cl;++P){const I=P/w,C=Math.exp(-I*I/2);g.push(C),P===0?x+=C:P<_&&(x+=2*C)}for(let P=0;P<g.length;P++)g[P]=g[P]/x;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:S}=this;p.dTheta.value=v,p.mipInt.value=S-i;const E=this._sizeLods[r],T=3*E*(r>S-Xu?r-S+Xu:0),b=4*(this._cubeSize-E);Jp(t,T,b,3*E,2*E),l.setRenderTarget(t),l.render(h,Oy)}}function t5(n){const e=[],t=[],i=[];let r=n;const s=n-Xu+1+rT.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Xu?l=rT[o-n+Xu-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),f=-u,h=1+u,p=[f,f,h,f,h,h,f,f,h,h,f,h],m=6,v=6,w=3,_=2,g=1,x=new Float32Array(w*v*m),S=new Float32Array(_*v*m),E=new Float32Array(g*v*m);for(let b=0;b<m;b++){const P=b%3*2/3-1,I=b>2?0:-1,C=[P,I,0,P+2/3,I,0,P+2/3,I+1,0,P,I,0,P+2/3,I+1,0,P,I+1,0];x.set(C,w*v*b),S.set(p,_*v*b);const D=[b,b,b,b,b,b];E.set(D,g*v*b)}const T=new Tt;T.setAttribute("position",new qt(x,w)),T.setAttribute("uv",new qt(S,_)),T.setAttribute("faceIndex",new qt(E,g)),e.push(T),r>Xu&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function aT(n,e,t){const i=new fs(n,e,t);return i.texture.mapping=Pc,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Jp(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function n5(n,e,t){const i=new Float32Array(cl),r=new j(0,1,0);return new ds({name:"SphericalGaussianBlur",defines:{n:cl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:ew(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:po,depthTest:!1,depthWrite:!1})}function lT(){return new ds({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:ew(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:po,depthTest:!1,depthWrite:!1})}function uT(){return new ds({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:ew(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:po,depthTest:!1,depthWrite:!1})}function ew(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function i5(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===Td||l===bd,f=l===So||l===va;if(u||f)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new o_(n)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(u&&h&&h.height>0||f&&h&&r(h)){t===null&&(t=new o_(n));const p=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const u=6;for(let f=0;f<u;f++)a[f]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function r5(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function s5(n,e,t,i){const r={},s=new WeakMap;function o(h){const p=h.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);for(const v in p.morphAttributes){const w=p.morphAttributes[v];for(let _=0,g=w.length;_<g;_++)e.remove(w[_])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(h,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(h){const p=h.attributes;for(const v in p)e.update(p[v],n.ARRAY_BUFFER);const m=h.morphAttributes;for(const v in m){const w=m[v];for(let _=0,g=w.length;_<g;_++)e.update(w[_],n.ARRAY_BUFFER)}}function u(h){const p=[],m=h.index,v=h.attributes.position;let w=0;if(m!==null){const x=m.array;w=m.version;for(let S=0,E=x.length;S<E;S+=3){const T=x[S+0],b=x[S+1],P=x[S+2];p.push(T,b,b,P,P,T)}}else if(v!==void 0){const x=v.array;w=v.version;for(let S=0,E=x.length/3-1;S<E;S+=3){const T=S+0,b=S+1,P=S+2;p.push(T,b,b,P,P,T)}}else return;const _=new(H3(p)?QS:JS)(p,1);_.version=w;const g=s.get(h);g&&e.remove(g),s.set(h,_)}function f(h){const p=s.get(h);if(p){const m=h.index;m!==null&&p.version<m.version&&u(h)}else u(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:f}}function o5(n,e,t,i){const r=i.isWebGL2;let s;function o(p){s=p}let a,l;function u(p){a=p.type,l=p.bytesPerElement}function f(p,m){n.drawElements(s,m,a,p*l),t.update(m,s,1)}function h(p,m,v){if(v===0)return;let w,_;if(r)w=n,_="drawElementsInstanced";else if(w=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",w===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}w[_](s,m,a,p*l,v),t.update(m,s,v)}this.setMode=o,this.setIndex=u,this.render=f,this.renderInstances=h}function a5(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function l5(n,e){return n[0]-e[0]}function u5(n,e){return Math.abs(e[1])-Math.abs(n[1])}function c5(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Dt,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,f,h){const p=u.morphTargetInfluences;if(e.isWebGL2===!0){const v=f.morphAttributes.position||f.morphAttributes.normal||f.morphAttributes.color,w=v!==void 0?v.length:0;let _=s.get(f);if(_===void 0||_.count!==w){let q=function(){Z.dispose(),s.delete(f),f.removeEventListener("dispose",q)};var m=q;_!==void 0&&_.texture.dispose();const S=f.morphAttributes.position!==void 0,E=f.morphAttributes.normal!==void 0,T=f.morphAttributes.color!==void 0,b=f.morphAttributes.position||[],P=f.morphAttributes.normal||[],I=f.morphAttributes.color||[];let C=0;S===!0&&(C=1),E===!0&&(C=2),T===!0&&(C=3);let D=f.attributes.position.count*C,H=1;D>e.maxTextureSize&&(H=Math.ceil(D/e.maxTextureSize),D=e.maxTextureSize);const G=new Float32Array(D*H*4*w),Z=new m0(G,D,H,w);Z.type=Rs,Z.needsUpdate=!0;const z=C*4;for(let J=0;J<w;J++){const ne=b[J],N=P[J],O=I[J],V=D*H*4*J;for(let L=0;L<ne.count;L++){const k=L*z;S===!0&&(o.fromBufferAttribute(ne,L),G[V+k+0]=o.x,G[V+k+1]=o.y,G[V+k+2]=o.z,G[V+k+3]=0),E===!0&&(o.fromBufferAttribute(N,L),G[V+k+4]=o.x,G[V+k+5]=o.y,G[V+k+6]=o.z,G[V+k+7]=0),T===!0&&(o.fromBufferAttribute(O,L),G[V+k+8]=o.x,G[V+k+9]=o.y,G[V+k+10]=o.z,G[V+k+11]=O.itemSize===4?o.w:1)}}_={count:w,texture:Z,size:new Re(D,H)},s.set(f,_),f.addEventListener("dispose",q)}let g=0;for(let S=0;S<p.length;S++)g+=p[S];const x=f.morphTargetsRelative?1:1-g;h.getUniforms().setValue(n,"morphTargetBaseInfluence",x),h.getUniforms().setValue(n,"morphTargetInfluences",p),h.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const v=p===void 0?0:p.length;let w=i[f.id];if(w===void 0||w.length!==v){w=[];for(let E=0;E<v;E++)w[E]=[E,0];i[f.id]=w}for(let E=0;E<v;E++){const T=w[E];T[0]=E,T[1]=p[E]}w.sort(u5);for(let E=0;E<8;E++)E<v&&w[E][1]?(a[E][0]=w[E][0],a[E][1]=w[E][1]):(a[E][0]=Number.MAX_SAFE_INTEGER,a[E][1]=0);a.sort(l5);const _=f.morphAttributes.position,g=f.morphAttributes.normal;let x=0;for(let E=0;E<8;E++){const T=a[E],b=T[0],P=T[1];b!==Number.MAX_SAFE_INTEGER&&P?(_&&f.getAttribute("morphTarget"+E)!==_[b]&&f.setAttribute("morphTarget"+E,_[b]),g&&f.getAttribute("morphNormal"+E)!==g[b]&&f.setAttribute("morphNormal"+E,g[b]),r[E]=P,x+=P):(_&&f.hasAttribute("morphTarget"+E)===!0&&f.deleteAttribute("morphTarget"+E),g&&f.hasAttribute("morphNormal"+E)===!0&&f.deleteAttribute("morphNormal"+E),r[E]=0)}const S=f.morphTargetsRelative?1:1-x;h.getUniforms().setValue(n,"morphTargetBaseInfluence",S),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function f5(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,f=l.geometry,h=e.get(l,f);if(r.get(h)!==u&&(e.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==u&&(p.update(),r.set(p,u))}return h}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const Z3=new yn,J3=new m0,Q3=new ZS,K3=new uh,cT=[],fT=[],dT=new Float32Array(16),hT=new Float32Array(9),pT=new Float32Array(4);function Lc(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=cT[r];if(s===void 0&&(s=new Float32Array(r),cT[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Yn(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function qn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function v0(n,e){let t=fT[e];t===void 0&&(t=new Int32Array(e),fT[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function d5(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function h5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yn(t,e))return;n.uniform2fv(this.addr,e),qn(t,e)}}function p5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Yn(t,e))return;n.uniform3fv(this.addr,e),qn(t,e)}}function m5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yn(t,e))return;n.uniform4fv(this.addr,e),qn(t,e)}}function g5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Yn(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),qn(t,e)}else{if(Yn(t,i))return;pT.set(i),n.uniformMatrix2fv(this.addr,!1,pT),qn(t,i)}}function v5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Yn(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),qn(t,e)}else{if(Yn(t,i))return;hT.set(i),n.uniformMatrix3fv(this.addr,!1,hT),qn(t,i)}}function y5(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Yn(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),qn(t,e)}else{if(Yn(t,i))return;dT.set(i),n.uniformMatrix4fv(this.addr,!1,dT),qn(t,i)}}function x5(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function _5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yn(t,e))return;n.uniform2iv(this.addr,e),qn(t,e)}}function S5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Yn(t,e))return;n.uniform3iv(this.addr,e),qn(t,e)}}function w5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yn(t,e))return;n.uniform4iv(this.addr,e),qn(t,e)}}function M5(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function E5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yn(t,e))return;n.uniform2uiv(this.addr,e),qn(t,e)}}function A5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Yn(t,e))return;n.uniform3uiv(this.addr,e),qn(t,e)}}function T5(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yn(t,e))return;n.uniform4uiv(this.addr,e),qn(t,e)}}function b5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||Z3,r)}function C5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Q3,r)}function P5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||K3,r)}function R5(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||J3,r)}function L5(n){switch(n){case 5126:return d5;case 35664:return h5;case 35665:return p5;case 35666:return m5;case 35674:return g5;case 35675:return v5;case 35676:return y5;case 5124:case 35670:return x5;case 35667:case 35671:return _5;case 35668:case 35672:return S5;case 35669:case 35673:return w5;case 5125:return M5;case 36294:return E5;case 36295:return A5;case 36296:return T5;case 35678:case 36198:case 36298:case 36306:case 35682:return b5;case 35679:case 36299:case 36307:return C5;case 35680:case 36300:case 36308:case 36293:return P5;case 36289:case 36303:case 36311:case 36292:return R5}}function I5(n,e){n.uniform1fv(this.addr,e)}function D5(n,e){const t=Lc(e,this.size,2);n.uniform2fv(this.addr,t)}function U5(n,e){const t=Lc(e,this.size,3);n.uniform3fv(this.addr,t)}function N5(n,e){const t=Lc(e,this.size,4);n.uniform4fv(this.addr,t)}function O5(n,e){const t=Lc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function F5(n,e){const t=Lc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function k5(n,e){const t=Lc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function B5(n,e){n.uniform1iv(this.addr,e)}function z5(n,e){n.uniform2iv(this.addr,e)}function V5(n,e){n.uniform3iv(this.addr,e)}function G5(n,e){n.uniform4iv(this.addr,e)}function H5(n,e){n.uniform1uiv(this.addr,e)}function W5(n,e){n.uniform2uiv(this.addr,e)}function j5(n,e){n.uniform3uiv(this.addr,e)}function X5(n,e){n.uniform4uiv(this.addr,e)}function Y5(n,e,t){const i=this.cache,r=e.length,s=v0(t,r);Yn(i,s)||(n.uniform1iv(this.addr,s),qn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||Z3,s[o])}function q5(n,e,t){const i=this.cache,r=e.length,s=v0(t,r);Yn(i,s)||(n.uniform1iv(this.addr,s),qn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||Q3,s[o])}function Z5(n,e,t){const i=this.cache,r=e.length,s=v0(t,r);Yn(i,s)||(n.uniform1iv(this.addr,s),qn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||K3,s[o])}function J5(n,e,t){const i=this.cache,r=e.length,s=v0(t,r);Yn(i,s)||(n.uniform1iv(this.addr,s),qn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||J3,s[o])}function Q5(n){switch(n){case 5126:return I5;case 35664:return D5;case 35665:return U5;case 35666:return N5;case 35674:return O5;case 35675:return F5;case 35676:return k5;case 5124:case 35670:return B5;case 35667:case 35671:return z5;case 35668:case 35672:return V5;case 35669:case 35673:return G5;case 5125:return H5;case 36294:return W5;case 36295:return j5;case 36296:return X5;case 35678:case 36198:case 36298:case 36306:case 35682:return Y5;case 35679:case 36299:case 36307:return q5;case 35680:case 36300:case 36308:case 36293:return Z5;case 36289:case 36303:case 36311:case 36292:return J5}}class K5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=L5(t.type)}}class $5{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=Q5(t.type)}}class eV{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const zy=/(\w+)(\])?(\[|\.)?/g;function mT(n,e){n.seq.push(e),n.map[e.id]=e}function tV(n,e,t){const i=n.name,r=i.length;for(zy.lastIndex=0;;){const s=zy.exec(i),o=zy.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){mT(t,u===void 0?new K5(a,n,e):new $5(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new eV(a),mT(t,h)),t=h}}}class Qm{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);tV(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function gT(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const nV=37297;let iV=0;function rV(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function sV(n){const e=Ht.getPrimaries(Ht.workingColorSpace),t=Ht.getPrimaries(n);let i;switch(e===t?i="":e===Nd&&t===Ud?i="LinearDisplayP3ToLinearSRGB":e===Ud&&t===Nd&&(i="LinearSRGBToLinearDisplayP3"),n){case Bs:case oh:return[i,"LinearTransferOETF"];case jn:case p0:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function vT(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+rV(n.getShaderSource(e),o)}else return r}function oV(n,e){const t=sV(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function aV(n,e){let t;switch(e){case p3:t="Linear";break;case m3:t="Reinhard";break;case g3:t="OptimizedCineon";break;case OS:t="ACESFilmic";break;case v3:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function lV(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(kf).join(`
`)}function uV(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function cV(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function kf(n){return n!==""}function yT(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function xT(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const fV=/^[ \t]*#include +<([\w\d./]+)>/gm;function a_(n){return n.replace(fV,hV)}const dV=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function hV(n,e){let t=Mt[e];if(t===void 0){const i=dV.get(e);if(i!==void 0)t=Mt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return a_(t)}const pV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _T(n){return n.replace(pV,mV)}function mV(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function ST(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function gV(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===c0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Zf?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===is&&(e="SHADOWMAP_TYPE_VSM"),e}function vV(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case So:case va:e="ENVMAP_TYPE_CUBE";break;case Pc:e="ENVMAP_TYPE_CUBE_UV";break}return e}function yV(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case va:e="ENVMAP_MODE_REFRACTION";break}return e}function xV(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case sh:e="ENVMAP_BLENDING_MULTIPLY";break;case d3:e="ENVMAP_BLENDING_MIX";break;case h3:e="ENVMAP_BLENDING_ADD";break}return e}function _V(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function SV(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=gV(t),u=vV(t),f=yV(t),h=xV(t),p=_V(t),m=t.isWebGL2?"":lV(t),v=uV(s),w=r.createProgram();let _,g,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(kf).join(`
`),_.length>0&&(_+=`
`),g=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(kf).join(`
`),g.length>0&&(g+=`
`)):(_=[ST(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(kf).join(`
`),g=[m,ST(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Us?"#define TONE_MAPPING":"",t.toneMapping!==Us?Mt.tonemapping_pars_fragment:"",t.toneMapping!==Us?aV("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Mt.colorspace_pars_fragment,oV("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(kf).join(`
`)),o=a_(o),o=yT(o,t),o=xT(o,t),a=a_(a),a=yT(a,t),a=xT(a,t),o=_T(o),a=_T(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,g=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===r_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===r_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const S=x+_+o,E=x+g+a,T=gT(r,r.VERTEX_SHADER,S),b=gT(r,r.FRAGMENT_SHADER,E);r.attachShader(w,T),r.attachShader(w,b),t.index0AttributeName!==void 0?r.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(w,0,"position"),r.linkProgram(w);function P(H){if(n.debug.checkShaderErrors){const G=r.getProgramInfoLog(w).trim(),Z=r.getShaderInfoLog(T).trim(),z=r.getShaderInfoLog(b).trim();let q=!0,J=!0;if(r.getProgramParameter(w,r.LINK_STATUS)===!1)if(q=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,w,T,b);else{const ne=vT(r,T,"vertex"),N=vT(r,b,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(w,r.VALIDATE_STATUS)+`

Program Info Log: `+G+`
`+ne+`
`+N)}else G!==""?console.warn("THREE.WebGLProgram: Program Info Log:",G):(Z===""||z==="")&&(J=!1);J&&(H.diagnostics={runnable:q,programLog:G,vertexShader:{log:Z,prefix:_},fragmentShader:{log:z,prefix:g}})}r.deleteShader(T),r.deleteShader(b),I=new Qm(r,w),C=cV(r,w)}let I;this.getUniforms=function(){return I===void 0&&P(this),I};let C;this.getAttributes=function(){return C===void 0&&P(this),C};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=r.getProgramParameter(w,nV)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=iV++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=T,this.fragmentShader=b,this}let wV=0;class MV{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new EV(e),t.set(e,i)),i}}class EV{constructor(e){this.id=wV++,this.code=e,this.usedTimes=0}}function AV(n,e,t,i,r,s,o){const a=new Al,l=new MV,u=[],f=r.isWebGL2,h=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(C){return C===0?"uv":`uv${C}`}function _(C,D,H,G,Z){const z=G.fog,q=Z.geometry,J=C.isMeshStandardMaterial?G.environment:null,ne=(C.isMeshStandardMaterial?t:e).get(C.envMap||J),N=ne&&ne.mapping===Pc?ne.image.height:null,O=v[C.type];C.precision!==null&&(m=r.getMaxPrecision(C.precision),m!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",m,"instead."));const V=q.morphAttributes.position||q.morphAttributes.normal||q.morphAttributes.color,L=V!==void 0?V.length:0;let k=0;q.morphAttributes.position!==void 0&&(k=1),q.morphAttributes.normal!==void 0&&(k=2),q.morphAttributes.color!==void 0&&(k=3);let K,ie,$,le;if(O){const zt=os[O];K=zt.vertexShader,ie=zt.fragmentShader}else K=C.vertexShader,ie=C.fragmentShader,l.update(C),$=l.getVertexShaderID(C),le=l.getFragmentShaderID(C);const oe=n.getRenderTarget(),he=Z.isInstancedMesh===!0,be=!!C.map,Ie=!!C.matcap,ue=!!ne,B=!!C.aoMap,ye=!!C.lightMap,ce=!!C.bumpMap,me=!!C.normalMap,fe=!!C.displacementMap,ke=!!C.emissiveMap,de=!!C.metalnessMap,Ce=!!C.roughnessMap,Le=C.anisotropy>0,ve=C.clearcoat>0,We=C.iridescence>0,F=C.sheen>0,U=C.transmission>0,Q=Le&&!!C.anisotropyMap,Pe=ve&&!!C.clearcoatMap,xe=ve&&!!C.clearcoatNormalMap,_e=ve&&!!C.clearcoatRoughnessMap,Be=We&&!!C.iridescenceMap,De=We&&!!C.iridescenceThicknessMap,Oe=F&&!!C.sheenColorMap,ze=F&&!!C.sheenRoughnessMap,rt=!!C.specularMap,Ee=!!C.specularColorMap,Xe=!!C.specularIntensityMap,je=U&&!!C.transmissionMap,Ze=U&&!!C.thicknessMap,$e=!!C.gradientMap,Ue=!!C.alphaMap,lt=C.alphaTest>0,ee=!!C.alphaHash,Ye=!!C.extensions,Ve=!!q.attributes.uv1,Ae=!!q.attributes.uv2,Fe=!!q.attributes.uv3;let st=Us;return C.toneMapped&&(oe===null||oe.isXRRenderTarget===!0)&&(st=n.toneMapping),{isWebGL2:f,shaderID:O,shaderType:C.type,shaderName:C.name,vertexShader:K,fragmentShader:ie,defines:C.defines,customVertexShaderID:$,customFragmentShaderID:le,isRawShaderMaterial:C.isRawShaderMaterial===!0,glslVersion:C.glslVersion,precision:m,instancing:he,instancingColor:he&&Z.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:oe===null?n.outputColorSpace:oe.isXRRenderTarget===!0?oe.texture.colorSpace:Bs,map:be,matcap:Ie,envMap:ue,envMapMode:ue&&ne.mapping,envMapCubeUVHeight:N,aoMap:B,lightMap:ye,bumpMap:ce,normalMap:me,displacementMap:p&&fe,emissiveMap:ke,normalMapObjectSpace:me&&C.normalMapType===I3,normalMapTangentSpace:me&&C.normalMapType===Aa,metalnessMap:de,roughnessMap:Ce,anisotropy:Le,anisotropyMap:Q,clearcoat:ve,clearcoatMap:Pe,clearcoatNormalMap:xe,clearcoatRoughnessMap:_e,iridescence:We,iridescenceMap:Be,iridescenceThicknessMap:De,sheen:F,sheenColorMap:Oe,sheenRoughnessMap:ze,specularMap:rt,specularColorMap:Ee,specularIntensityMap:Xe,transmission:U,transmissionMap:je,thicknessMap:Ze,gradientMap:$e,opaque:C.transparent===!1&&C.blending===wl,alphaMap:Ue,alphaTest:lt,alphaHash:ee,combine:C.combine,mapUv:be&&w(C.map.channel),aoMapUv:B&&w(C.aoMap.channel),lightMapUv:ye&&w(C.lightMap.channel),bumpMapUv:ce&&w(C.bumpMap.channel),normalMapUv:me&&w(C.normalMap.channel),displacementMapUv:fe&&w(C.displacementMap.channel),emissiveMapUv:ke&&w(C.emissiveMap.channel),metalnessMapUv:de&&w(C.metalnessMap.channel),roughnessMapUv:Ce&&w(C.roughnessMap.channel),anisotropyMapUv:Q&&w(C.anisotropyMap.channel),clearcoatMapUv:Pe&&w(C.clearcoatMap.channel),clearcoatNormalMapUv:xe&&w(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:_e&&w(C.clearcoatRoughnessMap.channel),iridescenceMapUv:Be&&w(C.iridescenceMap.channel),iridescenceThicknessMapUv:De&&w(C.iridescenceThicknessMap.channel),sheenColorMapUv:Oe&&w(C.sheenColorMap.channel),sheenRoughnessMapUv:ze&&w(C.sheenRoughnessMap.channel),specularMapUv:rt&&w(C.specularMap.channel),specularColorMapUv:Ee&&w(C.specularColorMap.channel),specularIntensityMapUv:Xe&&w(C.specularIntensityMap.channel),transmissionMapUv:je&&w(C.transmissionMap.channel),thicknessMapUv:Ze&&w(C.thicknessMap.channel),alphaMapUv:Ue&&w(C.alphaMap.channel),vertexTangents:!!q.attributes.tangent&&(me||Le),vertexColors:C.vertexColors,vertexAlphas:C.vertexColors===!0&&!!q.attributes.color&&q.attributes.color.itemSize===4,vertexUv1s:Ve,vertexUv2s:Ae,vertexUv3s:Fe,pointsUvs:Z.isPoints===!0&&!!q.attributes.uv&&(be||Ue),fog:!!z,useFog:C.fog===!0,fogExp2:z&&z.isFogExp2,flatShading:C.flatShading===!0,sizeAttenuation:C.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:Z.isSkinnedMesh===!0,morphTargets:q.morphAttributes.position!==void 0,morphNormals:q.morphAttributes.normal!==void 0,morphColors:q.morphAttributes.color!==void 0,morphTargetsCount:L,morphTextureStride:k,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:n.shadowMap.enabled&&H.length>0,shadowMapType:n.shadowMap.type,toneMapping:st,useLegacyLights:n._useLegacyLights,decodeVideoTexture:be&&C.map.isVideoTexture===!0&&Ht.getTransfer(C.map.colorSpace)===Qt,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===wr,flipSided:C.side===Ai,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionDerivatives:Ye&&C.extensions.derivatives===!0,extensionFragDepth:Ye&&C.extensions.fragDepth===!0,extensionDrawBuffers:Ye&&C.extensions.drawBuffers===!0,extensionShaderTextureLOD:Ye&&C.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:f||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()}}function g(C){const D=[];if(C.shaderID?D.push(C.shaderID):(D.push(C.customVertexShaderID),D.push(C.customFragmentShaderID)),C.defines!==void 0)for(const H in C.defines)D.push(H),D.push(C.defines[H]);return C.isRawShaderMaterial===!1&&(x(D,C),S(D,C),D.push(n.outputColorSpace)),D.push(C.customProgramCacheKey),D.join()}function x(C,D){C.push(D.precision),C.push(D.outputColorSpace),C.push(D.envMapMode),C.push(D.envMapCubeUVHeight),C.push(D.mapUv),C.push(D.alphaMapUv),C.push(D.lightMapUv),C.push(D.aoMapUv),C.push(D.bumpMapUv),C.push(D.normalMapUv),C.push(D.displacementMapUv),C.push(D.emissiveMapUv),C.push(D.metalnessMapUv),C.push(D.roughnessMapUv),C.push(D.anisotropyMapUv),C.push(D.clearcoatMapUv),C.push(D.clearcoatNormalMapUv),C.push(D.clearcoatRoughnessMapUv),C.push(D.iridescenceMapUv),C.push(D.iridescenceThicknessMapUv),C.push(D.sheenColorMapUv),C.push(D.sheenRoughnessMapUv),C.push(D.specularMapUv),C.push(D.specularColorMapUv),C.push(D.specularIntensityMapUv),C.push(D.transmissionMapUv),C.push(D.thicknessMapUv),C.push(D.combine),C.push(D.fogExp2),C.push(D.sizeAttenuation),C.push(D.morphTargetsCount),C.push(D.morphAttributeCount),C.push(D.numDirLights),C.push(D.numPointLights),C.push(D.numSpotLights),C.push(D.numSpotLightMaps),C.push(D.numHemiLights),C.push(D.numRectAreaLights),C.push(D.numDirLightShadows),C.push(D.numPointLightShadows),C.push(D.numSpotLightShadows),C.push(D.numSpotLightShadowsWithMaps),C.push(D.numLightProbes),C.push(D.shadowMapType),C.push(D.toneMapping),C.push(D.numClippingPlanes),C.push(D.numClipIntersection),C.push(D.depthPacking)}function S(C,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),D.alphaHash&&a.enable(18),C.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.useLegacyLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),D.decodeVideoTexture&&a.enable(19),C.push(a.mask)}function E(C){const D=v[C.type];let H;if(D){const G=os[D];H=Bd.clone(G.uniforms)}else H=C.uniforms;return H}function T(C,D){let H;for(let G=0,Z=u.length;G<Z;G++){const z=u[G];if(z.cacheKey===D){H=z,++H.usedTimes;break}}return H===void 0&&(H=new SV(n,D,C,s),u.push(H)),H}function b(C){if(--C.usedTimes===0){const D=u.indexOf(C);u[D]=u[u.length-1],u.pop(),C.destroy()}}function P(C){l.remove(C)}function I(){l.dispose()}return{getParameters:_,getProgramCacheKey:g,getUniforms:E,acquireProgram:T,releaseProgram:b,releaseShaderCache:P,programs:u,dispose:I}}function TV(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function bV(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function wT(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function MT(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(h,p,m,v,w,_){let g=n[e];return g===void 0?(g={id:h.id,object:h,geometry:p,material:m,groupOrder:v,renderOrder:h.renderOrder,z:w,group:_},n[e]=g):(g.id=h.id,g.object=h,g.geometry=p,g.material=m,g.groupOrder=v,g.renderOrder=h.renderOrder,g.z=w,g.group=_),e++,g}function a(h,p,m,v,w,_){const g=o(h,p,m,v,w,_);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(h,p,m,v,w,_){const g=o(h,p,m,v,w,_);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function u(h,p){t.length>1&&t.sort(h||bV),i.length>1&&i.sort(p||wT),r.length>1&&r.sort(p||wT)}function f(){for(let h=e,p=n.length;h<p;h++){const m=n[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:f,sort:u}}function CV(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new MT,n.set(i,[o])):r>=s.length?(o=new MT,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function PV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new Ke};break;case"SpotLight":t={position:new j,direction:new j,color:new Ke,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new Ke,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new Ke,groundColor:new Ke};break;case"RectAreaLight":t={color:new Ke,position:new j,halfWidth:new j,halfHeight:new j};break}return n[e.id]=t,t}}}function RV(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Re,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let LV=0;function IV(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function DV(n,e){const t=new PV,i=RV(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let f=0;f<9;f++)r.probe.push(new j);const s=new j,o=new _t,a=new _t;function l(f,h){let p=0,m=0,v=0;for(let G=0;G<9;G++)r.probe[G].set(0,0,0);let w=0,_=0,g=0,x=0,S=0,E=0,T=0,b=0,P=0,I=0,C=0;f.sort(IV);const D=h===!0?Math.PI:1;for(let G=0,Z=f.length;G<Z;G++){const z=f[G],q=z.color,J=z.intensity,ne=z.distance,N=z.shadow&&z.shadow.map?z.shadow.map.texture:null;if(z.isAmbientLight)p+=q.r*J*D,m+=q.g*J*D,v+=q.b*J*D;else if(z.isLightProbe){for(let O=0;O<9;O++)r.probe[O].addScaledVector(z.sh.coefficients[O],J);C++}else if(z.isDirectionalLight){const O=t.get(z);if(O.color.copy(z.color).multiplyScalar(z.intensity*D),z.castShadow){const V=z.shadow,L=i.get(z);L.shadowBias=V.bias,L.shadowNormalBias=V.normalBias,L.shadowRadius=V.radius,L.shadowMapSize=V.mapSize,r.directionalShadow[w]=L,r.directionalShadowMap[w]=N,r.directionalShadowMatrix[w]=z.shadow.matrix,E++}r.directional[w]=O,w++}else if(z.isSpotLight){const O=t.get(z);O.position.setFromMatrixPosition(z.matrixWorld),O.color.copy(q).multiplyScalar(J*D),O.distance=ne,O.coneCos=Math.cos(z.angle),O.penumbraCos=Math.cos(z.angle*(1-z.penumbra)),O.decay=z.decay,r.spot[g]=O;const V=z.shadow;if(z.map&&(r.spotLightMap[P]=z.map,P++,V.updateMatrices(z),z.castShadow&&I++),r.spotLightMatrix[g]=V.matrix,z.castShadow){const L=i.get(z);L.shadowBias=V.bias,L.shadowNormalBias=V.normalBias,L.shadowRadius=V.radius,L.shadowMapSize=V.mapSize,r.spotShadow[g]=L,r.spotShadowMap[g]=N,b++}g++}else if(z.isRectAreaLight){const O=t.get(z);O.color.copy(q).multiplyScalar(J),O.halfWidth.set(z.width*.5,0,0),O.halfHeight.set(0,z.height*.5,0),r.rectArea[x]=O,x++}else if(z.isPointLight){const O=t.get(z);if(O.color.copy(z.color).multiplyScalar(z.intensity*D),O.distance=z.distance,O.decay=z.decay,z.castShadow){const V=z.shadow,L=i.get(z);L.shadowBias=V.bias,L.shadowNormalBias=V.normalBias,L.shadowRadius=V.radius,L.shadowMapSize=V.mapSize,L.shadowCameraNear=V.camera.near,L.shadowCameraFar=V.camera.far,r.pointShadow[_]=L,r.pointShadowMap[_]=N,r.pointShadowMatrix[_]=z.shadow.matrix,T++}r.point[_]=O,_++}else if(z.isHemisphereLight){const O=t.get(z);O.skyColor.copy(z.color).multiplyScalar(J*D),O.groundColor.copy(z.groundColor).multiplyScalar(J*D),r.hemi[S]=O,S++}}x>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=qe.LTC_FLOAT_1,r.rectAreaLTC2=qe.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=qe.LTC_HALF_1,r.rectAreaLTC2=qe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=v;const H=r.hash;(H.directionalLength!==w||H.pointLength!==_||H.spotLength!==g||H.rectAreaLength!==x||H.hemiLength!==S||H.numDirectionalShadows!==E||H.numPointShadows!==T||H.numSpotShadows!==b||H.numSpotMaps!==P||H.numLightProbes!==C)&&(r.directional.length=w,r.spot.length=g,r.rectArea.length=x,r.point.length=_,r.hemi.length=S,r.directionalShadow.length=E,r.directionalShadowMap.length=E,r.pointShadow.length=T,r.pointShadowMap.length=T,r.spotShadow.length=b,r.spotShadowMap.length=b,r.directionalShadowMatrix.length=E,r.pointShadowMatrix.length=T,r.spotLightMatrix.length=b+P-I,r.spotLightMap.length=P,r.numSpotLightShadowsWithMaps=I,r.numLightProbes=C,H.directionalLength=w,H.pointLength=_,H.spotLength=g,H.rectAreaLength=x,H.hemiLength=S,H.numDirectionalShadows=E,H.numPointShadows=T,H.numSpotShadows=b,H.numSpotMaps=P,H.numLightProbes=C,r.version=LV++)}function u(f,h){let p=0,m=0,v=0,w=0,_=0;const g=h.matrixWorldInverse;for(let x=0,S=f.length;x<S;x++){const E=f[x];if(E.isDirectionalLight){const T=r.directional[p];T.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(g),p++}else if(E.isSpotLight){const T=r.spot[v];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(g),T.direction.setFromMatrixPosition(E.matrixWorld),s.setFromMatrixPosition(E.target.matrixWorld),T.direction.sub(s),T.direction.transformDirection(g),v++}else if(E.isRectAreaLight){const T=r.rectArea[w];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(g),a.identity(),o.copy(E.matrixWorld),o.premultiply(g),a.extractRotation(o),T.halfWidth.set(E.width*.5,0,0),T.halfHeight.set(0,E.height*.5,0),T.halfWidth.applyMatrix4(a),T.halfHeight.applyMatrix4(a),w++}else if(E.isPointLight){const T=r.point[m];T.position.setFromMatrixPosition(E.matrixWorld),T.position.applyMatrix4(g),m++}else if(E.isHemisphereLight){const T=r.hemi[_];T.direction.setFromMatrixPosition(E.matrixWorld),T.direction.transformDirection(g),_++}}}return{setup:l,setupView:u,state:r}}function ET(n,e){const t=new DV(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(h){i.push(h)}function a(h){r.push(h)}function l(h){t.setup(i,h)}function u(h){t.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function UV(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new ET(n,e),t.set(s,[l])):o>=a.length?(l=new ET(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class y0 extends hi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=L3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class x0 extends hi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const NV=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,OV=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function FV(n,e,t){let i=new g0;const r=new Re,s=new Re,o=new Dt,a=new y0({depthPacking:XS}),l=new x0,u={},f=t.maxTextureSize,h={[ks]:Ai,[Ai]:ks,[wr]:wr},p=new ds({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Re},radius:{value:4}},vertexShader:NV,fragmentShader:OV}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const v=new Tt;v.setAttribute("position",new qt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new Dn(v,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=c0;let g=this.type;this.render=function(T,b,P){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||T.length===0)return;const I=n.getRenderTarget(),C=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),H=n.state;H.setBlending(po),H.buffers.color.setClear(1,1,1,1),H.buffers.depth.setTest(!0),H.setScissorTest(!1);const G=g!==is&&this.type===is,Z=g===is&&this.type!==is;for(let z=0,q=T.length;z<q;z++){const J=T[z],ne=J.shadow;if(ne===void 0){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if(ne.autoUpdate===!1&&ne.needsUpdate===!1)continue;r.copy(ne.mapSize);const N=ne.getFrameExtents();if(r.multiply(N),s.copy(ne.mapSize),(r.x>f||r.y>f)&&(r.x>f&&(s.x=Math.floor(f/N.x),r.x=s.x*N.x,ne.mapSize.x=s.x),r.y>f&&(s.y=Math.floor(f/N.y),r.y=s.y*N.y,ne.mapSize.y=s.y)),ne.map===null||G===!0||Z===!0){const V=this.type!==is?{minFilter:Ln,magFilter:Ln}:{};ne.map!==null&&ne.map.dispose(),ne.map=new fs(r.x,r.y,V),ne.map.texture.name=J.name+".shadowMap",ne.camera.updateProjectionMatrix()}n.setRenderTarget(ne.map),n.clear();const O=ne.getViewportCount();for(let V=0;V<O;V++){const L=ne.getViewport(V);o.set(s.x*L.x,s.y*L.y,s.x*L.z,s.y*L.w),H.viewport(o),ne.updateMatrices(J,V),i=ne.getFrustum(),E(b,P,ne.camera,J,this.type)}ne.isPointLightShadow!==!0&&this.type===is&&x(ne,P),ne.needsUpdate=!1}g=this.type,_.needsUpdate=!1,n.setRenderTarget(I,C,D)};function x(T,b){const P=e.update(w);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),T.mapPass===null&&(T.mapPass=new fs(r.x,r.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,n.setRenderTarget(T.mapPass),n.clear(),n.renderBufferDirect(b,null,P,p,w,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,n.setRenderTarget(T.map),n.clear(),n.renderBufferDirect(b,null,P,m,w,null)}function S(T,b,P,I){let C=null;const D=P.isPointLight===!0?T.customDistanceMaterial:T.customDepthMaterial;if(D!==void 0)C=D;else if(C=P.isPointLight===!0?l:a,n.localClippingEnabled&&b.clipShadows===!0&&Array.isArray(b.clippingPlanes)&&b.clippingPlanes.length!==0||b.displacementMap&&b.displacementScale!==0||b.alphaMap&&b.alphaTest>0||b.map&&b.alphaTest>0){const H=C.uuid,G=b.uuid;let Z=u[H];Z===void 0&&(Z={},u[H]=Z);let z=Z[G];z===void 0&&(z=C.clone(),Z[G]=z),C=z}if(C.visible=b.visible,C.wireframe=b.wireframe,I===is?C.side=b.shadowSide!==null?b.shadowSide:b.side:C.side=b.shadowSide!==null?b.shadowSide:h[b.side],C.alphaMap=b.alphaMap,C.alphaTest=b.alphaTest,C.map=b.map,C.clipShadows=b.clipShadows,C.clippingPlanes=b.clippingPlanes,C.clipIntersection=b.clipIntersection,C.displacementMap=b.displacementMap,C.displacementScale=b.displacementScale,C.displacementBias=b.displacementBias,C.wireframeLinewidth=b.wireframeLinewidth,C.linewidth=b.linewidth,P.isPointLight===!0&&C.isMeshDistanceMaterial===!0){const H=n.properties.get(C);H.light=P}return C}function E(T,b,P,I,C){if(T.visible===!1)return;if(T.layers.test(b.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&C===is)&&(!T.frustumCulled||i.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,T.matrixWorld);const G=e.update(T),Z=T.material;if(Array.isArray(Z)){const z=G.groups;for(let q=0,J=z.length;q<J;q++){const ne=z[q],N=Z[ne.materialIndex];if(N&&N.visible){const O=S(T,N,I,C);n.renderBufferDirect(P,null,G,O,T,ne)}}}else if(Z.visible){const z=S(T,Z,I,C);n.renderBufferDirect(P,null,G,z,T,null)}}const H=T.children;for(let G=0,Z=H.length;G<Z;G++)E(H[G],b,P,I,C)}}function kV(n,e,t){const i=t.isWebGL2;function r(){let ee=!1;const Ye=new Dt;let Ve=null;const Ae=new Dt(0,0,0,0);return{setMask:function(Fe){Ve!==Fe&&!ee&&(n.colorMask(Fe,Fe,Fe,Fe),Ve=Fe)},setLocked:function(Fe){ee=Fe},setClear:function(Fe,st,ct,zt,Lt){Lt===!0&&(Fe*=zt,st*=zt,ct*=zt),Ye.set(Fe,st,ct,zt),Ae.equals(Ye)===!1&&(n.clearColor(Fe,st,ct,zt),Ae.copy(Ye))},reset:function(){ee=!1,Ve=null,Ae.set(-1,0,0,0)}}}function s(){let ee=!1,Ye=null,Ve=null,Ae=null;return{setTest:function(Fe){Fe?be(n.DEPTH_TEST):Ie(n.DEPTH_TEST)},setMask:function(Fe){Ye!==Fe&&!ee&&(n.depthMask(Fe),Ye=Fe)},setFunc:function(Fe){if(Ve!==Fe){switch(Fe){case s3:n.depthFunc(n.NEVER);break;case o3:n.depthFunc(n.ALWAYS);break;case a3:n.depthFunc(n.LESS);break;case Ad:n.depthFunc(n.LEQUAL);break;case l3:n.depthFunc(n.EQUAL);break;case u3:n.depthFunc(n.GEQUAL);break;case c3:n.depthFunc(n.GREATER);break;case f3:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ve=Fe}},setLocked:function(Fe){ee=Fe},setClear:function(Fe){Ae!==Fe&&(n.clearDepth(Fe),Ae=Fe)},reset:function(){ee=!1,Ye=null,Ve=null,Ae=null}}}function o(){let ee=!1,Ye=null,Ve=null,Ae=null,Fe=null,st=null,ct=null,zt=null,Lt=null;return{setTest:function(gt){ee||(gt?be(n.STENCIL_TEST):Ie(n.STENCIL_TEST))},setMask:function(gt){Ye!==gt&&!ee&&(n.stencilMask(gt),Ye=gt)},setFunc:function(gt,Vt,Zt){(Ve!==gt||Ae!==Vt||Fe!==Zt)&&(n.stencilFunc(gt,Vt,Zt),Ve=gt,Ae=Vt,Fe=Zt)},setOp:function(gt,Vt,Zt){(st!==gt||ct!==Vt||zt!==Zt)&&(n.stencilOp(gt,Vt,Zt),st=gt,ct=Vt,zt=Zt)},setLocked:function(gt){ee=gt},setClear:function(gt){Lt!==gt&&(n.clearStencil(gt),Lt=gt)},reset:function(){ee=!1,Ye=null,Ve=null,Ae=null,Fe=null,st=null,ct=null,zt=null,Lt=null}}}const a=new r,l=new s,u=new o,f=new WeakMap,h=new WeakMap;let p={},m={},v=new WeakMap,w=[],_=null,g=!1,x=null,S=null,E=null,T=null,b=null,P=null,I=null,C=new Ke(0,0,0),D=0,H=!1,G=null,Z=null,z=null,q=null,J=null;const ne=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let N=!1,O=0;const V=n.getParameter(n.VERSION);V.indexOf("WebGL")!==-1?(O=parseFloat(/^WebGL (\d)/.exec(V)[1]),N=O>=1):V.indexOf("OpenGL ES")!==-1&&(O=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),N=O>=2);let L=null,k={};const K=n.getParameter(n.SCISSOR_BOX),ie=n.getParameter(n.VIEWPORT),$=new Dt().fromArray(K),le=new Dt().fromArray(ie);function oe(ee,Ye,Ve,Ae){const Fe=new Uint8Array(4),st=n.createTexture();n.bindTexture(ee,st),n.texParameteri(ee,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ee,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ct=0;ct<Ve;ct++)i&&(ee===n.TEXTURE_3D||ee===n.TEXTURE_2D_ARRAY)?n.texImage3D(Ye,0,n.RGBA,1,1,Ae,0,n.RGBA,n.UNSIGNED_BYTE,Fe):n.texImage2D(Ye+ct,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Fe);return st}const he={};he[n.TEXTURE_2D]=oe(n.TEXTURE_2D,n.TEXTURE_2D,1),he[n.TEXTURE_CUBE_MAP]=oe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(he[n.TEXTURE_2D_ARRAY]=oe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),he[n.TEXTURE_3D]=oe(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),be(n.DEPTH_TEST),l.setFunc(Ad),de(!1),Ce(Ax),be(n.CULL_FACE),fe(po);function be(ee){p[ee]!==!0&&(n.enable(ee),p[ee]=!0)}function Ie(ee){p[ee]!==!1&&(n.disable(ee),p[ee]=!1)}function ue(ee,Ye){return m[ee]!==Ye?(n.bindFramebuffer(ee,Ye),m[ee]=Ye,i&&(ee===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Ye),ee===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Ye)),!0):!1}function B(ee,Ye){let Ve=w,Ae=!1;if(ee)if(Ve=v.get(Ye),Ve===void 0&&(Ve=[],v.set(Ye,Ve)),ee.isWebGLMultipleRenderTargets){const Fe=ee.texture;if(Ve.length!==Fe.length||Ve[0]!==n.COLOR_ATTACHMENT0){for(let st=0,ct=Fe.length;st<ct;st++)Ve[st]=n.COLOR_ATTACHMENT0+st;Ve.length=Fe.length,Ae=!0}}else Ve[0]!==n.COLOR_ATTACHMENT0&&(Ve[0]=n.COLOR_ATTACHMENT0,Ae=!0);else Ve[0]!==n.BACK&&(Ve[0]=n.BACK,Ae=!0);Ae&&(t.isWebGL2?n.drawBuffers(Ve):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ve))}function ye(ee){return _!==ee?(n.useProgram(ee),_=ee,!0):!1}const ce={[$o]:n.FUNC_ADD,[WR]:n.FUNC_SUBTRACT,[jR]:n.FUNC_REVERSE_SUBTRACT};if(i)ce[Px]=n.MIN,ce[Rx]=n.MAX;else{const ee=e.get("EXT_blend_minmax");ee!==null&&(ce[Px]=ee.MIN_EXT,ce[Rx]=ee.MAX_EXT)}const me={[XR]:n.ZERO,[YR]:n.ONE,[qR]:n.SRC_COLOR,[bg]:n.SRC_ALPHA,[e3]:n.SRC_ALPHA_SATURATE,[KR]:n.DST_COLOR,[JR]:n.DST_ALPHA,[ZR]:n.ONE_MINUS_SRC_COLOR,[Cg]:n.ONE_MINUS_SRC_ALPHA,[$R]:n.ONE_MINUS_DST_COLOR,[QR]:n.ONE_MINUS_DST_ALPHA,[t3]:n.CONSTANT_COLOR,[n3]:n.ONE_MINUS_CONSTANT_COLOR,[i3]:n.CONSTANT_ALPHA,[r3]:n.ONE_MINUS_CONSTANT_ALPHA};function fe(ee,Ye,Ve,Ae,Fe,st,ct,zt,Lt,gt){if(ee===po){g===!0&&(Ie(n.BLEND),g=!1);return}if(g===!1&&(be(n.BLEND),g=!0),ee!==HR){if(ee!==x||gt!==H){if((S!==$o||b!==$o)&&(n.blendEquation(n.FUNC_ADD),S=$o,b=$o),gt)switch(ee){case wl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Tx:n.blendFunc(n.ONE,n.ONE);break;case bx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Cx:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}else switch(ee){case wl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Tx:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case bx:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case Cx:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}E=null,T=null,P=null,I=null,C.set(0,0,0),D=0,x=ee,H=gt}return}Fe=Fe||Ye,st=st||Ve,ct=ct||Ae,(Ye!==S||Fe!==b)&&(n.blendEquationSeparate(ce[Ye],ce[Fe]),S=Ye,b=Fe),(Ve!==E||Ae!==T||st!==P||ct!==I)&&(n.blendFuncSeparate(me[Ve],me[Ae],me[st],me[ct]),E=Ve,T=Ae,P=st,I=ct),(zt.equals(C)===!1||Lt!==D)&&(n.blendColor(zt.r,zt.g,zt.b,Lt),C.copy(zt),D=Lt),x=ee,H=!1}function ke(ee,Ye){ee.side===wr?Ie(n.CULL_FACE):be(n.CULL_FACE);let Ve=ee.side===Ai;Ye&&(Ve=!Ve),de(Ve),ee.blending===wl&&ee.transparent===!1?fe(po):fe(ee.blending,ee.blendEquation,ee.blendSrc,ee.blendDst,ee.blendEquationAlpha,ee.blendSrcAlpha,ee.blendDstAlpha,ee.blendColor,ee.blendAlpha,ee.premultipliedAlpha),l.setFunc(ee.depthFunc),l.setTest(ee.depthTest),l.setMask(ee.depthWrite),a.setMask(ee.colorWrite);const Ae=ee.stencilWrite;u.setTest(Ae),Ae&&(u.setMask(ee.stencilWriteMask),u.setFunc(ee.stencilFunc,ee.stencilRef,ee.stencilFuncMask),u.setOp(ee.stencilFail,ee.stencilZFail,ee.stencilZPass)),ve(ee.polygonOffset,ee.polygonOffsetFactor,ee.polygonOffsetUnits),ee.alphaToCoverage===!0?be(n.SAMPLE_ALPHA_TO_COVERAGE):Ie(n.SAMPLE_ALPHA_TO_COVERAGE)}function de(ee){G!==ee&&(ee?n.frontFace(n.CW):n.frontFace(n.CCW),G=ee)}function Ce(ee){ee!==zR?(be(n.CULL_FACE),ee!==Z&&(ee===Ax?n.cullFace(n.BACK):ee===VR?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ie(n.CULL_FACE),Z=ee}function Le(ee){ee!==z&&(N&&n.lineWidth(ee),z=ee)}function ve(ee,Ye,Ve){ee?(be(n.POLYGON_OFFSET_FILL),(q!==Ye||J!==Ve)&&(n.polygonOffset(Ye,Ve),q=Ye,J=Ve)):Ie(n.POLYGON_OFFSET_FILL)}function We(ee){ee?be(n.SCISSOR_TEST):Ie(n.SCISSOR_TEST)}function F(ee){ee===void 0&&(ee=n.TEXTURE0+ne-1),L!==ee&&(n.activeTexture(ee),L=ee)}function U(ee,Ye,Ve){Ve===void 0&&(L===null?Ve=n.TEXTURE0+ne-1:Ve=L);let Ae=k[Ve];Ae===void 0&&(Ae={type:void 0,texture:void 0},k[Ve]=Ae),(Ae.type!==ee||Ae.texture!==Ye)&&(L!==Ve&&(n.activeTexture(Ve),L=Ve),n.bindTexture(ee,Ye||he[ee]),Ae.type=ee,Ae.texture=Ye)}function Q(){const ee=k[L];ee!==void 0&&ee.type!==void 0&&(n.bindTexture(ee.type,null),ee.type=void 0,ee.texture=void 0)}function Pe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function xe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function _e(){try{n.texSubImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Be(){try{n.texSubImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function De(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Oe(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function ze(){try{n.texStorage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function rt(){try{n.texStorage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ee(){try{n.texImage2D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Xe(){try{n.texImage3D.apply(n,arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function je(ee){$.equals(ee)===!1&&(n.scissor(ee.x,ee.y,ee.z,ee.w),$.copy(ee))}function Ze(ee){le.equals(ee)===!1&&(n.viewport(ee.x,ee.y,ee.z,ee.w),le.copy(ee))}function $e(ee,Ye){let Ve=h.get(Ye);Ve===void 0&&(Ve=new WeakMap,h.set(Ye,Ve));let Ae=Ve.get(ee);Ae===void 0&&(Ae=n.getUniformBlockIndex(Ye,ee.name),Ve.set(ee,Ae))}function Ue(ee,Ye){const Ae=h.get(Ye).get(ee);f.get(Ye)!==Ae&&(n.uniformBlockBinding(Ye,Ae,ee.__bindingPointIndex),f.set(Ye,Ae))}function lt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},L=null,k={},m={},v=new WeakMap,w=[],_=null,g=!1,x=null,S=null,E=null,T=null,b=null,P=null,I=null,C=new Ke(0,0,0),D=0,H=!1,G=null,Z=null,z=null,q=null,J=null,$.set(0,0,n.canvas.width,n.canvas.height),le.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:be,disable:Ie,bindFramebuffer:ue,drawBuffers:B,useProgram:ye,setBlending:fe,setMaterial:ke,setFlipSided:de,setCullFace:Ce,setLineWidth:Le,setPolygonOffset:ve,setScissorTest:We,activeTexture:F,bindTexture:U,unbindTexture:Q,compressedTexImage2D:Pe,compressedTexImage3D:xe,texImage2D:Ee,texImage3D:Xe,updateUBOMapping:$e,uniformBlockBinding:Ue,texStorage2D:ze,texStorage3D:rt,texSubImage2D:_e,texSubImage3D:Be,compressedTexSubImage2D:De,compressedTexSubImage3D:Oe,scissor:je,viewport:Ze,reset:lt}}function BV(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,f=r.maxTextureSize,h=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let w;const _=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(F,U){return g?new OffscreenCanvas(F,U):kd("canvas")}function S(F,U,Q,Pe){let xe=1;if((F.width>Pe||F.height>Pe)&&(xe=Pe/Math.max(F.width,F.height)),xe<1||U===!0)if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const _e=U?Lg:Math.floor,Be=_e(xe*F.width),De=_e(xe*F.height);w===void 0&&(w=x(Be,De));const Oe=Q?x(Be,De):w;return Oe.width=Be,Oe.height=De,Oe.getContext("2d").drawImage(F,0,0,Be,De),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Be+"x"+De+")."),Oe}else return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F;return F}function E(F){return s_(F.width)&&s_(F.height)}function T(F){return a?!1:F.wrapS!==Ei||F.wrapT!==Ei||F.minFilter!==Ln&&F.minFilter!==pn}function b(F,U){return F.generateMipmaps&&U&&F.minFilter!==Ln&&F.minFilter!==pn}function P(F){n.generateMipmap(F)}function I(F,U,Q,Pe,xe=!1){if(a===!1)return U;if(F!==null){if(n[F]!==void 0)return n[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let _e=U;if(U===n.RED&&(Q===n.FLOAT&&(_e=n.R32F),Q===n.HALF_FLOAT&&(_e=n.R16F),Q===n.UNSIGNED_BYTE&&(_e=n.R8)),U===n.RED_INTEGER&&(Q===n.UNSIGNED_BYTE&&(_e=n.R8UI),Q===n.UNSIGNED_SHORT&&(_e=n.R16UI),Q===n.UNSIGNED_INT&&(_e=n.R32UI),Q===n.BYTE&&(_e=n.R8I),Q===n.SHORT&&(_e=n.R16I),Q===n.INT&&(_e=n.R32I)),U===n.RG&&(Q===n.FLOAT&&(_e=n.RG32F),Q===n.HALF_FLOAT&&(_e=n.RG16F),Q===n.UNSIGNED_BYTE&&(_e=n.RG8)),U===n.RGBA){const Be=xe?Dd:Ht.getTransfer(Pe);Q===n.FLOAT&&(_e=n.RGBA32F),Q===n.HALF_FLOAT&&(_e=n.RGBA16F),Q===n.UNSIGNED_BYTE&&(_e=Be===Qt?n.SRGB8_ALPHA8:n.RGBA8),Q===n.UNSIGNED_SHORT_4_4_4_4&&(_e=n.RGBA4),Q===n.UNSIGNED_SHORT_5_5_5_1&&(_e=n.RGB5_A1)}return(_e===n.R16F||_e===n.R32F||_e===n.RG16F||_e===n.RG32F||_e===n.RGBA16F||_e===n.RGBA32F)&&e.get("EXT_color_buffer_float"),_e}function C(F,U,Q){return b(F,Q)===!0||F.isFramebufferTexture&&F.minFilter!==Ln&&F.minFilter!==pn?Math.log2(Math.max(U.width,U.height))+1:F.mipmaps!==void 0&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?U.mipmaps.length:1}function D(F){return F===Ln||F===Pg||F===Jf?n.NEAREST:n.LINEAR}function H(F){const U=F.target;U.removeEventListener("dispose",H),Z(U),U.isVideoTexture&&v.delete(U)}function G(F){const U=F.target;U.removeEventListener("dispose",G),q(U)}function Z(F){const U=i.get(F);if(U.__webglInit===void 0)return;const Q=F.source,Pe=_.get(Q);if(Pe){const xe=Pe[U.__cacheKey];xe.usedTimes--,xe.usedTimes===0&&z(F),Object.keys(Pe).length===0&&_.delete(Q)}i.remove(F)}function z(F){const U=i.get(F);n.deleteTexture(U.__webglTexture);const Q=F.source,Pe=_.get(Q);delete Pe[U.__cacheKey],o.memory.textures--}function q(F){const U=F.texture,Q=i.get(F),Pe=i.get(U);if(Pe.__webglTexture!==void 0&&(n.deleteTexture(Pe.__webglTexture),o.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let xe=0;xe<6;xe++){if(Array.isArray(Q.__webglFramebuffer[xe]))for(let _e=0;_e<Q.__webglFramebuffer[xe].length;_e++)n.deleteFramebuffer(Q.__webglFramebuffer[xe][_e]);else n.deleteFramebuffer(Q.__webglFramebuffer[xe]);Q.__webglDepthbuffer&&n.deleteRenderbuffer(Q.__webglDepthbuffer[xe])}else{if(Array.isArray(Q.__webglFramebuffer))for(let xe=0;xe<Q.__webglFramebuffer.length;xe++)n.deleteFramebuffer(Q.__webglFramebuffer[xe]);else n.deleteFramebuffer(Q.__webglFramebuffer);if(Q.__webglDepthbuffer&&n.deleteRenderbuffer(Q.__webglDepthbuffer),Q.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Q.__webglMultisampledFramebuffer),Q.__webglColorRenderbuffer)for(let xe=0;xe<Q.__webglColorRenderbuffer.length;xe++)Q.__webglColorRenderbuffer[xe]&&n.deleteRenderbuffer(Q.__webglColorRenderbuffer[xe]);Q.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Q.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let xe=0,_e=U.length;xe<_e;xe++){const Be=i.get(U[xe]);Be.__webglTexture&&(n.deleteTexture(Be.__webglTexture),o.memory.textures--),i.remove(U[xe])}i.remove(U),i.remove(F)}let J=0;function ne(){J=0}function N(){const F=J;return F>=l&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+l),J+=1,F}function O(F){const U=[];return U.push(F.wrapS),U.push(F.wrapT),U.push(F.wrapR||0),U.push(F.magFilter),U.push(F.minFilter),U.push(F.anisotropy),U.push(F.internalFormat),U.push(F.format),U.push(F.type),U.push(F.generateMipmaps),U.push(F.premultiplyAlpha),U.push(F.flipY),U.push(F.unpackAlignment),U.push(F.colorSpace),U.join()}function V(F,U){const Q=i.get(F);if(F.isVideoTexture&&ve(F),F.isRenderTargetTexture===!1&&F.version>0&&Q.__version!==F.version){const Pe=F.image;if(Pe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Pe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{be(Q,F,U);return}}t.bindTexture(n.TEXTURE_2D,Q.__webglTexture,n.TEXTURE0+U)}function L(F,U){const Q=i.get(F);if(F.version>0&&Q.__version!==F.version){be(Q,F,U);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Q.__webglTexture,n.TEXTURE0+U)}function k(F,U){const Q=i.get(F);if(F.version>0&&Q.__version!==F.version){be(Q,F,U);return}t.bindTexture(n.TEXTURE_3D,Q.__webglTexture,n.TEXTURE0+U)}function K(F,U){const Q=i.get(F);if(F.version>0&&Q.__version!==F.version){Ie(Q,F,U);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Q.__webglTexture,n.TEXTURE0+U)}const ie={[Cd]:n.REPEAT,[Ei]:n.CLAMP_TO_EDGE,[Pd]:n.MIRRORED_REPEAT},$={[Ln]:n.NEAREST,[Pg]:n.NEAREST_MIPMAP_NEAREST,[Jf]:n.NEAREST_MIPMAP_LINEAR,[pn]:n.LINEAR,[FS]:n.LINEAR_MIPMAP_NEAREST,[ya]:n.LINEAR_MIPMAP_LINEAR},le={[D3]:n.NEVER,[z3]:n.ALWAYS,[U3]:n.LESS,[O3]:n.LEQUAL,[N3]:n.EQUAL,[B3]:n.GEQUAL,[F3]:n.GREATER,[k3]:n.NOTEQUAL};function oe(F,U,Q){if(Q?(n.texParameteri(F,n.TEXTURE_WRAP_S,ie[U.wrapS]),n.texParameteri(F,n.TEXTURE_WRAP_T,ie[U.wrapT]),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,ie[U.wrapR]),n.texParameteri(F,n.TEXTURE_MAG_FILTER,$[U.magFilter]),n.texParameteri(F,n.TEXTURE_MIN_FILTER,$[U.minFilter])):(n.texParameteri(F,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(F,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(F===n.TEXTURE_3D||F===n.TEXTURE_2D_ARRAY)&&n.texParameteri(F,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(U.wrapS!==Ei||U.wrapT!==Ei)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(F,n.TEXTURE_MAG_FILTER,D(U.magFilter)),n.texParameteri(F,n.TEXTURE_MIN_FILTER,D(U.minFilter)),U.minFilter!==Ln&&U.minFilter!==pn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),U.compareFunction&&(n.texParameteri(F,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(F,n.TEXTURE_COMPARE_FUNC,le[U.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Pe=e.get("EXT_texture_filter_anisotropic");if(U.magFilter===Ln||U.minFilter!==Jf&&U.minFilter!==ya||U.type===Rs&&e.has("OES_texture_float_linear")===!1||a===!1&&U.type===xc&&e.has("OES_texture_half_float_linear")===!1)return;(U.anisotropy>1||i.get(U).__currentAnisotropy)&&(n.texParameterf(F,Pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(U.anisotropy,r.getMaxAnisotropy())),i.get(U).__currentAnisotropy=U.anisotropy)}}function he(F,U){let Q=!1;F.__webglInit===void 0&&(F.__webglInit=!0,U.addEventListener("dispose",H));const Pe=U.source;let xe=_.get(Pe);xe===void 0&&(xe={},_.set(Pe,xe));const _e=O(U);if(_e!==F.__cacheKey){xe[_e]===void 0&&(xe[_e]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Q=!0),xe[_e].usedTimes++;const Be=xe[F.__cacheKey];Be!==void 0&&(xe[F.__cacheKey].usedTimes--,Be.usedTimes===0&&z(U)),F.__cacheKey=_e,F.__webglTexture=xe[_e].texture}return Q}function be(F,U,Q){let Pe=n.TEXTURE_2D;(U.isDataArrayTexture||U.isCompressedArrayTexture)&&(Pe=n.TEXTURE_2D_ARRAY),U.isData3DTexture&&(Pe=n.TEXTURE_3D);const xe=he(F,U),_e=U.source;t.bindTexture(Pe,F.__webglTexture,n.TEXTURE0+Q);const Be=i.get(_e);if(_e.version!==Be.__version||xe===!0){t.activeTexture(n.TEXTURE0+Q);const De=Ht.getPrimaries(Ht.workingColorSpace),Oe=U.colorSpace===Mr?null:Ht.getPrimaries(U.colorSpace),ze=U.colorSpace===Mr||De===Oe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ze);const rt=T(U)&&E(U.image)===!1;let Ee=S(U.image,rt,!1,f);Ee=We(U,Ee);const Xe=E(Ee)||a,je=s.convert(U.format,U.colorSpace);let Ze=s.convert(U.type),$e=I(U.internalFormat,je,Ze,U.colorSpace,U.isVideoTexture);oe(Pe,U,Xe);let Ue;const lt=U.mipmaps,ee=a&&U.isVideoTexture!==!0,Ye=Be.__version===void 0||xe===!0,Ve=C(U,Ee,Xe);if(U.isDepthTexture)$e=n.DEPTH_COMPONENT,a?U.type===Rs?$e=n.DEPTH_COMPONENT32F:U.type===co?$e=n.DEPTH_COMPONENT24:U.type===ca?$e=n.DEPTH24_STENCIL8:$e=n.DEPTH_COMPONENT16:U.type===Rs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),U.format===fa&&$e===n.DEPTH_COMPONENT&&U.type!==d0&&U.type!==co&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),U.type=co,Ze=s.convert(U.type)),U.format===Ul&&$e===n.DEPTH_COMPONENT&&($e=n.DEPTH_STENCIL,U.type!==ca&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),U.type=ca,Ze=s.convert(U.type))),Ye&&(ee?t.texStorage2D(n.TEXTURE_2D,1,$e,Ee.width,Ee.height):t.texImage2D(n.TEXTURE_2D,0,$e,Ee.width,Ee.height,0,je,Ze,null));else if(U.isDataTexture)if(lt.length>0&&Xe){ee&&Ye&&t.texStorage2D(n.TEXTURE_2D,Ve,$e,lt[0].width,lt[0].height);for(let Ae=0,Fe=lt.length;Ae<Fe;Ae++)Ue=lt[Ae],ee?t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,Ue.width,Ue.height,je,Ze,Ue.data):t.texImage2D(n.TEXTURE_2D,Ae,$e,Ue.width,Ue.height,0,je,Ze,Ue.data);U.generateMipmaps=!1}else ee?(Ye&&t.texStorage2D(n.TEXTURE_2D,Ve,$e,Ee.width,Ee.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ee.width,Ee.height,je,Ze,Ee.data)):t.texImage2D(n.TEXTURE_2D,0,$e,Ee.width,Ee.height,0,je,Ze,Ee.data);else if(U.isCompressedTexture)if(U.isCompressedArrayTexture){ee&&Ye&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ve,$e,lt[0].width,lt[0].height,Ee.depth);for(let Ae=0,Fe=lt.length;Ae<Fe;Ae++)Ue=lt[Ae],U.format!==Ki?je!==null?ee?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,0,Ue.width,Ue.height,Ee.depth,je,Ue.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ae,$e,Ue.width,Ue.height,Ee.depth,0,Ue.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ee?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ae,0,0,0,Ue.width,Ue.height,Ee.depth,je,Ze,Ue.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ae,$e,Ue.width,Ue.height,Ee.depth,0,je,Ze,Ue.data)}else{ee&&Ye&&t.texStorage2D(n.TEXTURE_2D,Ve,$e,lt[0].width,lt[0].height);for(let Ae=0,Fe=lt.length;Ae<Fe;Ae++)Ue=lt[Ae],U.format!==Ki?je!==null?ee?t.compressedTexSubImage2D(n.TEXTURE_2D,Ae,0,0,Ue.width,Ue.height,je,Ue.data):t.compressedTexImage2D(n.TEXTURE_2D,Ae,$e,Ue.width,Ue.height,0,Ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ee?t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,Ue.width,Ue.height,je,Ze,Ue.data):t.texImage2D(n.TEXTURE_2D,Ae,$e,Ue.width,Ue.height,0,je,Ze,Ue.data)}else if(U.isDataArrayTexture)ee?(Ye&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ve,$e,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Ee.width,Ee.height,Ee.depth,je,Ze,Ee.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,$e,Ee.width,Ee.height,Ee.depth,0,je,Ze,Ee.data);else if(U.isData3DTexture)ee?(Ye&&t.texStorage3D(n.TEXTURE_3D,Ve,$e,Ee.width,Ee.height,Ee.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Ee.width,Ee.height,Ee.depth,je,Ze,Ee.data)):t.texImage3D(n.TEXTURE_3D,0,$e,Ee.width,Ee.height,Ee.depth,0,je,Ze,Ee.data);else if(U.isFramebufferTexture){if(Ye)if(ee)t.texStorage2D(n.TEXTURE_2D,Ve,$e,Ee.width,Ee.height);else{let Ae=Ee.width,Fe=Ee.height;for(let st=0;st<Ve;st++)t.texImage2D(n.TEXTURE_2D,st,$e,Ae,Fe,0,je,Ze,null),Ae>>=1,Fe>>=1}}else if(lt.length>0&&Xe){ee&&Ye&&t.texStorage2D(n.TEXTURE_2D,Ve,$e,lt[0].width,lt[0].height);for(let Ae=0,Fe=lt.length;Ae<Fe;Ae++)Ue=lt[Ae],ee?t.texSubImage2D(n.TEXTURE_2D,Ae,0,0,je,Ze,Ue):t.texImage2D(n.TEXTURE_2D,Ae,$e,je,Ze,Ue);U.generateMipmaps=!1}else ee?(Ye&&t.texStorage2D(n.TEXTURE_2D,Ve,$e,Ee.width,Ee.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,je,Ze,Ee)):t.texImage2D(n.TEXTURE_2D,0,$e,je,Ze,Ee);b(U,Xe)&&P(Pe),Be.__version=_e.version,U.onUpdate&&U.onUpdate(U)}F.__version=U.version}function Ie(F,U,Q){if(U.image.length!==6)return;const Pe=he(F,U),xe=U.source;t.bindTexture(n.TEXTURE_CUBE_MAP,F.__webglTexture,n.TEXTURE0+Q);const _e=i.get(xe);if(xe.version!==_e.__version||Pe===!0){t.activeTexture(n.TEXTURE0+Q);const Be=Ht.getPrimaries(Ht.workingColorSpace),De=U.colorSpace===Mr?null:Ht.getPrimaries(U.colorSpace),Oe=U.colorSpace===Mr||Be===De?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,U.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,U.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,U.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Oe);const ze=U.isCompressedTexture||U.image[0].isCompressedTexture,rt=U.image[0]&&U.image[0].isDataTexture,Ee=[];for(let Ae=0;Ae<6;Ae++)!ze&&!rt?Ee[Ae]=S(U.image[Ae],!1,!0,u):Ee[Ae]=rt?U.image[Ae].image:U.image[Ae],Ee[Ae]=We(U,Ee[Ae]);const Xe=Ee[0],je=E(Xe)||a,Ze=s.convert(U.format,U.colorSpace),$e=s.convert(U.type),Ue=I(U.internalFormat,Ze,$e,U.colorSpace),lt=a&&U.isVideoTexture!==!0,ee=_e.__version===void 0||Pe===!0;let Ye=C(U,Xe,je);oe(n.TEXTURE_CUBE_MAP,U,je);let Ve;if(ze){lt&&ee&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ye,Ue,Xe.width,Xe.height);for(let Ae=0;Ae<6;Ae++){Ve=Ee[Ae].mipmaps;for(let Fe=0;Fe<Ve.length;Fe++){const st=Ve[Fe];U.format!==Ki?Ze!==null?lt?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe,0,0,st.width,st.height,Ze,st.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe,Ue,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):lt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe,0,0,st.width,st.height,Ze,$e,st.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe,Ue,st.width,st.height,0,Ze,$e,st.data)}}}else{Ve=U.mipmaps,lt&&ee&&(Ve.length>0&&Ye++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Ye,Ue,Ee[0].width,Ee[0].height));for(let Ae=0;Ae<6;Ae++)if(rt){lt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,0,0,Ee[Ae].width,Ee[Ae].height,Ze,$e,Ee[Ae].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,Ue,Ee[Ae].width,Ee[Ae].height,0,Ze,$e,Ee[Ae].data);for(let Fe=0;Fe<Ve.length;Fe++){const ct=Ve[Fe].image[Ae].image;lt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe+1,0,0,ct.width,ct.height,Ze,$e,ct.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe+1,Ue,ct.width,ct.height,0,Ze,$e,ct.data)}}else{lt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,0,0,Ze,$e,Ee[Ae]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,Ue,Ze,$e,Ee[Ae]);for(let Fe=0;Fe<Ve.length;Fe++){const st=Ve[Fe];lt?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe+1,0,0,Ze,$e,st.image[Ae]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,Fe+1,Ue,Ze,$e,st.image[Ae])}}}b(U,je)&&P(n.TEXTURE_CUBE_MAP),_e.__version=xe.version,U.onUpdate&&U.onUpdate(U)}F.__version=U.version}function ue(F,U,Q,Pe,xe,_e){const Be=s.convert(Q.format,Q.colorSpace),De=s.convert(Q.type),Oe=I(Q.internalFormat,Be,De,Q.colorSpace);if(!i.get(U).__hasExternalTextures){const rt=Math.max(1,U.width>>_e),Ee=Math.max(1,U.height>>_e);xe===n.TEXTURE_3D||xe===n.TEXTURE_2D_ARRAY?t.texImage3D(xe,_e,Oe,rt,Ee,U.depth,0,Be,De,null):t.texImage2D(xe,_e,Oe,rt,Ee,0,Be,De,null)}t.bindFramebuffer(n.FRAMEBUFFER,F),Le(U)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Pe,xe,i.get(Q).__webglTexture,0,Ce(U)):(xe===n.TEXTURE_2D||xe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&xe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Pe,xe,i.get(Q).__webglTexture,_e),t.bindFramebuffer(n.FRAMEBUFFER,null)}function B(F,U,Q){if(n.bindRenderbuffer(n.RENDERBUFFER,F),U.depthBuffer&&!U.stencilBuffer){let Pe=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(Q||Le(U)){const xe=U.depthTexture;xe&&xe.isDepthTexture&&(xe.type===Rs?Pe=n.DEPTH_COMPONENT32F:xe.type===co&&(Pe=n.DEPTH_COMPONENT24));const _e=Ce(U);Le(U)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,_e,Pe,U.width,U.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,_e,Pe,U.width,U.height)}else n.renderbufferStorage(n.RENDERBUFFER,Pe,U.width,U.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,F)}else if(U.depthBuffer&&U.stencilBuffer){const Pe=Ce(U);Q&&Le(U)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Pe,n.DEPTH24_STENCIL8,U.width,U.height):Le(U)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pe,n.DEPTH24_STENCIL8,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,U.width,U.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,F)}else{const Pe=U.isWebGLMultipleRenderTargets===!0?U.texture:[U.texture];for(let xe=0;xe<Pe.length;xe++){const _e=Pe[xe],Be=s.convert(_e.format,_e.colorSpace),De=s.convert(_e.type),Oe=I(_e.internalFormat,Be,De,_e.colorSpace),ze=Ce(U);Q&&Le(U)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ze,Oe,U.width,U.height):Le(U)?p.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ze,Oe,U.width,U.height):n.renderbufferStorage(n.RENDERBUFFER,Oe,U.width,U.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ye(F,U){if(U&&U.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,F),!(U.depthTexture&&U.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(U.depthTexture).__webglTexture||U.depthTexture.image.width!==U.width||U.depthTexture.image.height!==U.height)&&(U.depthTexture.image.width=U.width,U.depthTexture.image.height=U.height,U.depthTexture.needsUpdate=!0),V(U.depthTexture,0);const Pe=i.get(U.depthTexture).__webglTexture,xe=Ce(U);if(U.depthTexture.format===fa)Le(U)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0);else if(U.depthTexture.format===Ul)Le(U)?p.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0);else throw new Error("Unknown depthTexture format")}function ce(F){const U=i.get(F),Q=F.isWebGLCubeRenderTarget===!0;if(F.depthTexture&&!U.__autoAllocateDepthBuffer){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");ye(U.__webglFramebuffer,F)}else if(Q){U.__webglDepthbuffer=[];for(let Pe=0;Pe<6;Pe++)t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer[Pe]),U.__webglDepthbuffer[Pe]=n.createRenderbuffer(),B(U.__webglDepthbuffer[Pe],F,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,U.__webglFramebuffer),U.__webglDepthbuffer=n.createRenderbuffer(),B(U.__webglDepthbuffer,F,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function me(F,U,Q){const Pe=i.get(F);U!==void 0&&ue(Pe.__webglFramebuffer,F,F.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Q!==void 0&&ce(F)}function fe(F){const U=F.texture,Q=i.get(F),Pe=i.get(U);F.addEventListener("dispose",G),F.isWebGLMultipleRenderTargets!==!0&&(Pe.__webglTexture===void 0&&(Pe.__webglTexture=n.createTexture()),Pe.__version=U.version,o.memory.textures++);const xe=F.isWebGLCubeRenderTarget===!0,_e=F.isWebGLMultipleRenderTargets===!0,Be=E(F)||a;if(xe){Q.__webglFramebuffer=[];for(let De=0;De<6;De++)if(a&&U.mipmaps&&U.mipmaps.length>0){Q.__webglFramebuffer[De]=[];for(let Oe=0;Oe<U.mipmaps.length;Oe++)Q.__webglFramebuffer[De][Oe]=n.createFramebuffer()}else Q.__webglFramebuffer[De]=n.createFramebuffer()}else{if(a&&U.mipmaps&&U.mipmaps.length>0){Q.__webglFramebuffer=[];for(let De=0;De<U.mipmaps.length;De++)Q.__webglFramebuffer[De]=n.createFramebuffer()}else Q.__webglFramebuffer=n.createFramebuffer();if(_e)if(r.drawBuffers){const De=F.texture;for(let Oe=0,ze=De.length;Oe<ze;Oe++){const rt=i.get(De[Oe]);rt.__webglTexture===void 0&&(rt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&F.samples>0&&Le(F)===!1){const De=_e?U:[U];Q.__webglMultisampledFramebuffer=n.createFramebuffer(),Q.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Q.__webglMultisampledFramebuffer);for(let Oe=0;Oe<De.length;Oe++){const ze=De[Oe];Q.__webglColorRenderbuffer[Oe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Q.__webglColorRenderbuffer[Oe]);const rt=s.convert(ze.format,ze.colorSpace),Ee=s.convert(ze.type),Xe=I(ze.internalFormat,rt,Ee,ze.colorSpace,F.isXRRenderTarget===!0),je=Ce(F);n.renderbufferStorageMultisample(n.RENDERBUFFER,je,Xe,F.width,F.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Oe,n.RENDERBUFFER,Q.__webglColorRenderbuffer[Oe])}n.bindRenderbuffer(n.RENDERBUFFER,null),F.depthBuffer&&(Q.__webglDepthRenderbuffer=n.createRenderbuffer(),B(Q.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(xe){t.bindTexture(n.TEXTURE_CUBE_MAP,Pe.__webglTexture),oe(n.TEXTURE_CUBE_MAP,U,Be);for(let De=0;De<6;De++)if(a&&U.mipmaps&&U.mipmaps.length>0)for(let Oe=0;Oe<U.mipmaps.length;Oe++)ue(Q.__webglFramebuffer[De][Oe],F,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+De,Oe);else ue(Q.__webglFramebuffer[De],F,U,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+De,0);b(U,Be)&&P(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(_e){const De=F.texture;for(let Oe=0,ze=De.length;Oe<ze;Oe++){const rt=De[Oe],Ee=i.get(rt);t.bindTexture(n.TEXTURE_2D,Ee.__webglTexture),oe(n.TEXTURE_2D,rt,Be),ue(Q.__webglFramebuffer,F,rt,n.COLOR_ATTACHMENT0+Oe,n.TEXTURE_2D,0),b(rt,Be)&&P(n.TEXTURE_2D)}t.unbindTexture()}else{let De=n.TEXTURE_2D;if((F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(a?De=F.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(De,Pe.__webglTexture),oe(De,U,Be),a&&U.mipmaps&&U.mipmaps.length>0)for(let Oe=0;Oe<U.mipmaps.length;Oe++)ue(Q.__webglFramebuffer[Oe],F,U,n.COLOR_ATTACHMENT0,De,Oe);else ue(Q.__webglFramebuffer,F,U,n.COLOR_ATTACHMENT0,De,0);b(U,Be)&&P(De),t.unbindTexture()}F.depthBuffer&&ce(F)}function ke(F){const U=E(F)||a,Q=F.isWebGLMultipleRenderTargets===!0?F.texture:[F.texture];for(let Pe=0,xe=Q.length;Pe<xe;Pe++){const _e=Q[Pe];if(b(_e,U)){const Be=F.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,De=i.get(_e).__webglTexture;t.bindTexture(Be,De),P(Be),t.unbindTexture()}}}function de(F){if(a&&F.samples>0&&Le(F)===!1){const U=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],Q=F.width,Pe=F.height;let xe=n.COLOR_BUFFER_BIT;const _e=[],Be=F.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,De=i.get(F),Oe=F.isWebGLMultipleRenderTargets===!0;if(Oe)for(let ze=0;ze<U.length;ze++)t.bindFramebuffer(n.FRAMEBUFFER,De.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,De.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,De.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,De.__webglFramebuffer);for(let ze=0;ze<U.length;ze++){_e.push(n.COLOR_ATTACHMENT0+ze),F.depthBuffer&&_e.push(Be);const rt=De.__ignoreDepthValues!==void 0?De.__ignoreDepthValues:!1;if(rt===!1&&(F.depthBuffer&&(xe|=n.DEPTH_BUFFER_BIT),F.stencilBuffer&&(xe|=n.STENCIL_BUFFER_BIT)),Oe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,De.__webglColorRenderbuffer[ze]),rt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Be]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Be])),Oe){const Ee=i.get(U[ze]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ee,0)}n.blitFramebuffer(0,0,Q,Pe,0,0,Q,Pe,xe,n.NEAREST),m&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,_e)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Oe)for(let ze=0;ze<U.length;ze++){t.bindFramebuffer(n.FRAMEBUFFER,De.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.RENDERBUFFER,De.__webglColorRenderbuffer[ze]);const rt=i.get(U[ze]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,De.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ze,n.TEXTURE_2D,rt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,De.__webglMultisampledFramebuffer)}}function Ce(F){return Math.min(h,F.samples)}function Le(F){const U=i.get(F);return a&&F.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&U.__useRenderToTexture!==!1}function ve(F){const U=o.render.frame;v.get(F)!==U&&(v.set(F,U),F.update())}function We(F,U){const Q=F.colorSpace,Pe=F.format,xe=F.type;return F.isCompressedTexture===!0||F.isVideoTexture===!0||F.format===Rg||Q!==Bs&&Q!==Mr&&(Ht.getTransfer(Q)===Qt?a===!1?e.has("EXT_sRGB")===!0&&Pe===Ki?(F.format=Rg,F.minFilter=pn,F.generateMipmaps=!1):U=qS.sRGBToLinear(U):(Pe!==Ki||xe!==Ns)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Q)),U}this.allocateTextureUnit=N,this.resetTextureUnits=ne,this.setTexture2D=V,this.setTexture2DArray=L,this.setTexture3D=k,this.setTextureCube=K,this.rebindTextures=me,this.setupRenderTarget=fe,this.updateRenderTargetMipmap=ke,this.updateMultisampleRenderTarget=de,this.setupDepthRenderbuffer=ce,this.setupFrameBufferTexture=ue,this.useMultisampledRTT=Le}function $3(n,e,t){const i=t.isWebGL2;function r(s,o=Mr){let a;const l=Ht.getTransfer(o);if(s===Ns)return n.UNSIGNED_BYTE;if(s===BS)return n.UNSIGNED_SHORT_4_4_4_4;if(s===zS)return n.UNSIGNED_SHORT_5_5_5_1;if(s===x3)return n.BYTE;if(s===_3)return n.SHORT;if(s===d0)return n.UNSIGNED_SHORT;if(s===kS)return n.INT;if(s===co)return n.UNSIGNED_INT;if(s===Rs)return n.FLOAT;if(s===xc)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===S3)return n.ALPHA;if(s===Ki)return n.RGBA;if(s===w3)return n.LUMINANCE;if(s===M3)return n.LUMINANCE_ALPHA;if(s===fa)return n.DEPTH_COMPONENT;if(s===Ul)return n.DEPTH_STENCIL;if(s===Rg)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===E3)return n.RED;if(s===VS)return n.RED_INTEGER;if(s===A3)return n.RG;if(s===GS)return n.RG_INTEGER;if(s===HS)return n.RGBA_INTEGER;if(s===jm||s===Xm||s===Ym||s===qm)if(l===Qt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===jm)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Xm)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Ym)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===qm)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===jm)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Xm)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Ym)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===qm)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Ix||s===Dx||s===Ux||s===Nx)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===Ix)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Dx)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Ux)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Nx)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===T3)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Ox||s===Fx)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===Ox)return l===Qt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===Fx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===kx||s===Bx||s===zx||s===Vx||s===Gx||s===Hx||s===Wx||s===jx||s===Xx||s===Yx||s===qx||s===Zx||s===Jx||s===Qx)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===kx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Bx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===zx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Vx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Gx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Hx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Wx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===jx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Xx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Yx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===qx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Zx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Jx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Qx)return l===Qt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Zm||s===Kx||s===$x)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Zm)return l===Qt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===Kx)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===$x)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===b3||s===e_||s===t_||s===n_)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Zm)return a.COMPRESSED_RED_RGTC1_EXT;if(s===e_)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===t_)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===n_)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===ca?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class eL extends zn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Yu extends Bt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const zV={type:"move"};class Vy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Yu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Yu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Yu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const w of e.hand.values()){const _=t.getJointPose(w,i),g=this._getHandJoint(u,w);_!==null&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=_.radius),g.visible=_!==null}const f=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],p=f.position.distanceTo(h.position),m=.02,v=.005;u.inputState.pinching&&p>m+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=m-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(zV)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Yu;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class tL extends yn{constructor(e,t,i,r,s,o,a,l,u,f){if(f=f!==void 0?f:fa,f!==fa&&f!==Ul)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&f===fa&&(i=co),i===void 0&&f===Ul&&(i=ca),super(null,r,s,o,a,l,f,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ln,this.minFilter=l!==void 0?l:Ln,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class VV extends Ao{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,f=null,h=null,p=null,m=null,v=null;const w=t.getContextAttributes();let _=null,g=null;const x=[],S=[],E=new zn;E.layers.enable(1),E.viewport=new Dt;const T=new zn;T.layers.enable(2),T.viewport=new Dt;const b=[E,T],P=new eL;P.layers.enable(1),P.layers.enable(2);let I=null,C=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(L){let k=x[L];return k===void 0&&(k=new Vy,x[L]=k),k.getTargetRaySpace()},this.getControllerGrip=function(L){let k=x[L];return k===void 0&&(k=new Vy,x[L]=k),k.getGripSpace()},this.getHand=function(L){let k=x[L];return k===void 0&&(k=new Vy,x[L]=k),k.getHandSpace()};function D(L){const k=S.indexOf(L.inputSource);if(k===-1)return;const K=x[k];K!==void 0&&(K.update(L.inputSource,L.frame,u||o),K.dispatchEvent({type:L.type,data:L.inputSource}))}function H(){r.removeEventListener("select",D),r.removeEventListener("selectstart",D),r.removeEventListener("selectend",D),r.removeEventListener("squeeze",D),r.removeEventListener("squeezestart",D),r.removeEventListener("squeezeend",D),r.removeEventListener("end",H),r.removeEventListener("inputsourceschange",G);for(let L=0;L<x.length;L++){const k=S[L];k!==null&&(S[L]=null,x[L].disconnect(k))}I=null,C=null,e.setRenderTarget(_),m=null,p=null,h=null,r=null,g=null,V.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(L){s=L,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(L){a=L,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(L){u=L},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(L){if(r=L,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",D),r.addEventListener("selectstart",D),r.addEventListener("selectend",D),r.addEventListener("squeeze",D),r.addEventListener("squeezestart",D),r.addEventListener("squeezeend",D),r.addEventListener("end",H),r.addEventListener("inputsourceschange",G),w.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const k={antialias:r.renderState.layers===void 0?w.antialias:!0,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,k),r.updateRenderState({baseLayer:m}),g=new fs(m.framebufferWidth,m.framebufferHeight,{format:Ki,type:Ns,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let k=null,K=null,ie=null;w.depth&&(ie=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,k=w.stencil?Ul:fa,K=w.stencil?ca:co);const $={colorFormat:t.RGBA8,depthFormat:ie,scaleFactor:s};h=new XRWebGLBinding(r,t),p=h.createProjectionLayer($),r.updateRenderState({layers:[p]}),g=new fs(p.textureWidth,p.textureHeight,{format:Ki,type:Ns,depthTexture:new tL(p.textureWidth,p.textureHeight,K,void 0,void 0,void 0,void 0,void 0,void 0,k),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0});const le=e.properties.get(g);le.__ignoreDepthValues=p.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),V.setContext(r),V.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function G(L){for(let k=0;k<L.removed.length;k++){const K=L.removed[k],ie=S.indexOf(K);ie>=0&&(S[ie]=null,x[ie].disconnect(K))}for(let k=0;k<L.added.length;k++){const K=L.added[k];let ie=S.indexOf(K);if(ie===-1){for(let le=0;le<x.length;le++)if(le>=S.length){S.push(K),ie=le;break}else if(S[le]===null){S[le]=K,ie=le;break}if(ie===-1)break}const $=x[ie];$&&$.connect(K)}}const Z=new j,z=new j;function q(L,k,K){Z.setFromMatrixPosition(k.matrixWorld),z.setFromMatrixPosition(K.matrixWorld);const ie=Z.distanceTo(z),$=k.projectionMatrix.elements,le=K.projectionMatrix.elements,oe=$[14]/($[10]-1),he=$[14]/($[10]+1),be=($[9]+1)/$[5],Ie=($[9]-1)/$[5],ue=($[8]-1)/$[0],B=(le[8]+1)/le[0],ye=oe*ue,ce=oe*B,me=ie/(-ue+B),fe=me*-ue;k.matrixWorld.decompose(L.position,L.quaternion,L.scale),L.translateX(fe),L.translateZ(me),L.matrixWorld.compose(L.position,L.quaternion,L.scale),L.matrixWorldInverse.copy(L.matrixWorld).invert();const ke=oe+me,de=he+me,Ce=ye-fe,Le=ce+(ie-fe),ve=be*he/de*ke,We=Ie*he/de*ke;L.projectionMatrix.makePerspective(Ce,Le,ve,We,ke,de),L.projectionMatrixInverse.copy(L.projectionMatrix).invert()}function J(L,k){k===null?L.matrixWorld.copy(L.matrix):L.matrixWorld.multiplyMatrices(k.matrixWorld,L.matrix),L.matrixWorldInverse.copy(L.matrixWorld).invert()}this.updateCamera=function(L){if(r===null)return;P.near=T.near=E.near=L.near,P.far=T.far=E.far=L.far,(I!==P.near||C!==P.far)&&(r.updateRenderState({depthNear:P.near,depthFar:P.far}),I=P.near,C=P.far);const k=L.parent,K=P.cameras;J(P,k);for(let ie=0;ie<K.length;ie++)J(K[ie],k);K.length===2?q(P,E,T):P.projectionMatrix.copy(E.projectionMatrix),ne(L,P,k)};function ne(L,k,K){K===null?L.matrix.copy(k.matrixWorld):(L.matrix.copy(K.matrixWorld),L.matrix.invert(),L.matrix.multiply(k.matrixWorld)),L.matrix.decompose(L.position,L.quaternion,L.scale),L.updateMatrixWorld(!0),L.projectionMatrix.copy(k.projectionMatrix),L.projectionMatrixInverse.copy(k.projectionMatrixInverse),L.isPerspectiveCamera&&(L.fov=_c*2*Math.atan(1/L.projectionMatrix.elements[5]),L.zoom=1)}this.getCamera=function(){return P},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(L){l=L,p!==null&&(p.fixedFoveation=L),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=L)};let N=null;function O(L,k){if(f=k.getViewerPose(u||o),v=k,f!==null){const K=f.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let ie=!1;K.length!==P.cameras.length&&(P.cameras.length=0,ie=!0);for(let $=0;$<K.length;$++){const le=K[$];let oe=null;if(m!==null)oe=m.getViewport(le);else{const be=h.getViewSubImage(p,le);oe=be.viewport,$===0&&(e.setRenderTargetTextures(g,be.colorTexture,p.ignoreDepthValues?void 0:be.depthStencilTexture),e.setRenderTarget(g))}let he=b[$];he===void 0&&(he=new zn,he.layers.enable($),he.viewport=new Dt,b[$]=he),he.matrix.fromArray(le.transform.matrix),he.matrix.decompose(he.position,he.quaternion,he.scale),he.projectionMatrix.fromArray(le.projectionMatrix),he.projectionMatrixInverse.copy(he.projectionMatrix).invert(),he.viewport.set(oe.x,oe.y,oe.width,oe.height),$===0&&(P.matrix.copy(he.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),ie===!0&&P.cameras.push(he)}}for(let K=0;K<x.length;K++){const ie=S[K],$=x[K];ie!==null&&$!==void 0&&$.update(ie,k,u||o)}N&&N(L,k),k.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:k}),v=null}const V=new q3;V.setAnimationLoop(O),this.setAnimationLoop=function(L){N=L},this.dispose=function(){}}}function GV(n,e){function t(_,g){_.matrixAutoUpdate===!0&&_.updateMatrix(),g.value.copy(_.matrix)}function i(_,g){g.color.getRGB(_.fogColor.value,Y3(n)),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function r(_,g,x,S,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(_,g):g.isMeshToonMaterial?(s(_,g),h(_,g)):g.isMeshPhongMaterial?(s(_,g),f(_,g)):g.isMeshStandardMaterial?(s(_,g),p(_,g),g.isMeshPhysicalMaterial&&m(_,g,E)):g.isMeshMatcapMaterial?(s(_,g),v(_,g)):g.isMeshDepthMaterial?s(_,g):g.isMeshDistanceMaterial?(s(_,g),w(_,g)):g.isMeshNormalMaterial?s(_,g):g.isLineBasicMaterial?(o(_,g),g.isLineDashedMaterial&&a(_,g)):g.isPointsMaterial?l(_,g,x,S):g.isSpriteMaterial?u(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.bumpMap&&(_.bumpMap.value=g.bumpMap,t(g.bumpMap,_.bumpMapTransform),_.bumpScale.value=g.bumpScale,g.side===Ai&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,t(g.normalMap,_.normalMapTransform),_.normalScale.value.copy(g.normalScale),g.side===Ai&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,t(g.displacementMap,_.displacementMapTransform),_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,_.emissiveMapTransform)),g.specularMap&&(_.specularMap.value=g.specularMap,t(g.specularMap,_.specularMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest);const x=e.get(g).envMap;if(x&&(_.envMap.value=x,_.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=g.reflectivity,_.ior.value=g.ior,_.refractionRatio.value=g.refractionRatio),g.lightMap){_.lightMap.value=g.lightMap;const S=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=g.lightMapIntensity*S,t(g.lightMap,_.lightMapTransform)}g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,_.aoMapTransform))}function o(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform))}function a(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function l(_,g,x,S){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*x,_.scale.value=S*.5,g.map&&(_.map.value=g.map,t(g.map,_.uvTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function u(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function f(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4)}function h(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap)}function p(_,g){_.metalness.value=g.metalness,g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,_.metalnessMapTransform)),_.roughness.value=g.roughness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,_.roughnessMapTransform)),e.get(g).envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function m(_,g,x){_.ior.value=g.ior,g.sheen>0&&(_.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),_.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(_.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,_.sheenColorMapTransform)),g.sheenRoughnessMap&&(_.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,_.sheenRoughnessMapTransform))),g.clearcoat>0&&(_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,_.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(_.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Ai&&_.clearcoatNormalScale.value.negate())),g.iridescence>0&&(_.iridescence.value=g.iridescence,_.iridescenceIOR.value=g.iridescenceIOR,_.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(_.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,_.iridescenceMapTransform)),g.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),g.transmission>0&&(_.transmission.value=g.transmission,_.transmissionSamplerMap.value=x.texture,_.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,_.transmissionMapTransform)),_.thickness.value=g.thickness,g.thicknessMap&&(_.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=g.attenuationDistance,_.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(_.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(_.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=g.specularIntensity,_.specularColor.value.copy(g.specularColor),g.specularColorMap&&(_.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,_.specularColorMapTransform)),g.specularIntensityMap&&(_.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,_.specularIntensityMapTransform))}function v(_,g){g.matcap&&(_.matcap.value=g.matcap)}function w(_,g){const x=e.get(g).light;_.referencePosition.value.setFromMatrixPosition(x.matrixWorld),_.nearDistance.value=x.shadow.camera.near,_.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function HV(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,S){const E=S.program;i.uniformBlockBinding(x,E)}function u(x,S){let E=r[x.id];E===void 0&&(v(x),E=f(x),r[x.id]=E,x.addEventListener("dispose",_));const T=S.program;i.updateUBOMapping(x,T);const b=e.render.frame;s[x.id]!==b&&(p(x),s[x.id]=b)}function f(x){const S=h();x.__bindingPointIndex=S;const E=n.createBuffer(),T=x.__size,b=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,T,b),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,S,E),E}function h(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(x){const S=r[x.id],E=x.uniforms,T=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,S);for(let b=0,P=E.length;b<P;b++){const I=E[b];if(m(I,b,T)===!0){const C=I.__offset,D=Array.isArray(I.value)?I.value:[I.value];let H=0;for(let G=0;G<D.length;G++){const Z=D[G],z=w(Z);typeof Z=="number"?(I.__data[0]=Z,n.bufferSubData(n.UNIFORM_BUFFER,C+H,I.__data)):Z.isMatrix3?(I.__data[0]=Z.elements[0],I.__data[1]=Z.elements[1],I.__data[2]=Z.elements[2],I.__data[3]=Z.elements[0],I.__data[4]=Z.elements[3],I.__data[5]=Z.elements[4],I.__data[6]=Z.elements[5],I.__data[7]=Z.elements[0],I.__data[8]=Z.elements[6],I.__data[9]=Z.elements[7],I.__data[10]=Z.elements[8],I.__data[11]=Z.elements[0]):(Z.toArray(I.__data,H),H+=z.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,C,I.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(x,S,E){const T=x.value;if(E[S]===void 0){if(typeof T=="number")E[S]=T;else{const b=Array.isArray(T)?T:[T],P=[];for(let I=0;I<b.length;I++)P.push(b[I].clone());E[S]=P}return!0}else if(typeof T=="number"){if(E[S]!==T)return E[S]=T,!0}else{const b=Array.isArray(E[S])?E[S]:[E[S]],P=Array.isArray(T)?T:[T];for(let I=0;I<b.length;I++){const C=b[I];if(C.equals(P[I])===!1)return C.copy(P[I]),!0}}return!1}function v(x){const S=x.uniforms;let E=0;const T=16;let b=0;for(let P=0,I=S.length;P<I;P++){const C=S[P],D={boundary:0,storage:0},H=Array.isArray(C.value)?C.value:[C.value];for(let G=0,Z=H.length;G<Z;G++){const z=H[G],q=w(z);D.boundary+=q.boundary,D.storage+=q.storage}if(C.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),C.__offset=E,P>0){b=E%T;const G=T-b;b!==0&&G-D.boundary<0&&(E+=T-b,C.__offset=E)}E+=D.storage}return b=E%T,b>0&&(E+=T-b),x.__size=E,x.__cache={},this}function w(x){const S={boundary:0,storage:0};return typeof x=="number"?(S.boundary=4,S.storage=4):x.isVector2?(S.boundary=8,S.storage=8):x.isVector3||x.isColor?(S.boundary=16,S.storage=12):x.isVector4?(S.boundary=16,S.storage=16):x.isMatrix3?(S.boundary=48,S.storage=48):x.isMatrix4?(S.boundary=64,S.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),S}function _(x){const S=x.target;S.removeEventListener("dispose",_);const E=o.indexOf(S.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(r[S.id]),delete r[S.id],delete s[S.id]}function g(){for(const x in r)n.deleteBuffer(r[x]);o=[],r={},s={}}return{bind:l,update:u,dispose:g}}class tw{constructor(e={}){const{canvas:t=W3(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:f="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let p;i!==null?p=i.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),v=new Int32Array(4);let w=null,_=null;const g=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=jn,this._useLegacyLights=!1,this.toneMapping=Us,this.toneMappingExposure=1;const S=this;let E=!1,T=0,b=0,P=null,I=-1,C=null;const D=new Dt,H=new Dt;let G=null;const Z=new Ke(0);let z=0,q=t.width,J=t.height,ne=1,N=null,O=null;const V=new Dt(0,0,q,J),L=new Dt(0,0,q,J);let k=!1;const K=new g0;let ie=!1,$=!1,le=null;const oe=new _t,he=new Re,be=new j,Ie={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ue(){return P===null?ne:1}let B=i;function ye(W,ae){for(let ge=0;ge<W.length;ge++){const Se=W[ge],we=t.getContext(Se,ae);if(we!==null)return we}return null}try{const W={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:f,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Cc}`),t.addEventListener("webglcontextlost",lt,!1),t.addEventListener("webglcontextrestored",ee,!1),t.addEventListener("webglcontextcreationerror",Ye,!1),B===null){const ae=["webgl2","webgl","experimental-webgl"];if(S.isWebGL1Renderer===!0&&ae.shift(),B=ye(ae,W),B===null)throw ye(ae)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&B instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),B.getShaderPrecisionFormat===void 0&&(B.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(W){throw console.error("THREE.WebGLRenderer: "+W.message),W}let ce,me,fe,ke,de,Ce,Le,ve,We,F,U,Q,Pe,xe,_e,Be,De,Oe,ze,rt,Ee,Xe,je,Ze;function $e(){ce=new r5(B),me=new Kz(B,ce,e),ce.init(me),Xe=new $3(B,ce,me),fe=new kV(B,ce,me),ke=new a5(B),de=new TV,Ce=new BV(B,ce,fe,de,me,Xe,ke),Le=new e5(S),ve=new i5(S),We=new v4(B,me),je=new Jz(B,ce,We,me),F=new s5(B,We,ke,je),U=new f5(B,F,We,ke),ze=new c5(B,me,Ce),Be=new $z(de),Q=new AV(S,Le,ve,ce,me,je,Be),Pe=new GV(S,de),xe=new CV,_e=new UV(ce,me),Oe=new Zz(S,Le,ve,fe,U,p,l),De=new FV(S,U,me),Ze=new HV(B,ke,me,fe),rt=new Qz(B,ce,ke,me),Ee=new o5(B,ce,ke,me),ke.programs=Q.programs,S.capabilities=me,S.extensions=ce,S.properties=de,S.renderLists=xe,S.shadowMap=De,S.state=fe,S.info=ke}$e();const Ue=new VV(S,B);this.xr=Ue,this.getContext=function(){return B},this.getContextAttributes=function(){return B.getContextAttributes()},this.forceContextLoss=function(){const W=ce.get("WEBGL_lose_context");W&&W.loseContext()},this.forceContextRestore=function(){const W=ce.get("WEBGL_lose_context");W&&W.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(W){W!==void 0&&(ne=W,this.setSize(q,J,!1))},this.getSize=function(W){return W.set(q,J)},this.setSize=function(W,ae,ge=!0){if(Ue.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}q=W,J=ae,t.width=Math.floor(W*ne),t.height=Math.floor(ae*ne),ge===!0&&(t.style.width=W+"px",t.style.height=ae+"px"),this.setViewport(0,0,W,ae)},this.getDrawingBufferSize=function(W){return W.set(q*ne,J*ne).floor()},this.setDrawingBufferSize=function(W,ae,ge){q=W,J=ae,ne=ge,t.width=Math.floor(W*ge),t.height=Math.floor(ae*ge),this.setViewport(0,0,W,ae)},this.getCurrentViewport=function(W){return W.copy(D)},this.getViewport=function(W){return W.copy(V)},this.setViewport=function(W,ae,ge,Se){W.isVector4?V.set(W.x,W.y,W.z,W.w):V.set(W,ae,ge,Se),fe.viewport(D.copy(V).multiplyScalar(ne).floor())},this.getScissor=function(W){return W.copy(L)},this.setScissor=function(W,ae,ge,Se){W.isVector4?L.set(W.x,W.y,W.z,W.w):L.set(W,ae,ge,Se),fe.scissor(H.copy(L).multiplyScalar(ne).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(W){fe.setScissorTest(k=W)},this.setOpaqueSort=function(W){N=W},this.setTransparentSort=function(W){O=W},this.getClearColor=function(W){return W.copy(Oe.getClearColor())},this.setClearColor=function(){Oe.setClearColor.apply(Oe,arguments)},this.getClearAlpha=function(){return Oe.getClearAlpha()},this.setClearAlpha=function(){Oe.setClearAlpha.apply(Oe,arguments)},this.clear=function(W=!0,ae=!0,ge=!0){let Se=0;if(W){let we=!1;if(P!==null){const Je=P.texture.format;we=Je===HS||Je===GS||Je===VS}if(we){const Je=P.texture.type,at=Je===Ns||Je===co||Je===d0||Je===ca||Je===BS||Je===zS,dt=Oe.getClearColor(),Ne=Oe.getClearAlpha(),vt=dt.r,xt=dt.g,pt=dt.b;at?(m[0]=vt,m[1]=xt,m[2]=pt,m[3]=Ne,B.clearBufferuiv(B.COLOR,0,m)):(v[0]=vt,v[1]=xt,v[2]=pt,v[3]=Ne,B.clearBufferiv(B.COLOR,0,v))}else Se|=B.COLOR_BUFFER_BIT}ae&&(Se|=B.DEPTH_BUFFER_BIT),ge&&(Se|=B.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),B.clear(Se)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",lt,!1),t.removeEventListener("webglcontextrestored",ee,!1),t.removeEventListener("webglcontextcreationerror",Ye,!1),xe.dispose(),_e.dispose(),de.dispose(),Le.dispose(),ve.dispose(),U.dispose(),je.dispose(),Ze.dispose(),Q.dispose(),Ue.dispose(),Ue.removeEventListener("sessionstart",Lt),Ue.removeEventListener("sessionend",gt),le&&(le.dispose(),le=null),Vt.stop()};function lt(W){W.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function ee(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const W=ke.autoReset,ae=De.enabled,ge=De.autoUpdate,Se=De.needsUpdate,we=De.type;$e(),ke.autoReset=W,De.enabled=ae,De.autoUpdate=ge,De.needsUpdate=Se,De.type=we}function Ye(W){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",W.statusMessage)}function Ve(W){const ae=W.target;ae.removeEventListener("dispose",Ve),Ae(ae)}function Ae(W){Fe(W),de.remove(W)}function Fe(W){const ae=de.get(W).programs;ae!==void 0&&(ae.forEach(function(ge){Q.releaseProgram(ge)}),W.isShaderMaterial&&Q.releaseShaderCache(W))}this.renderBufferDirect=function(W,ae,ge,Se,we,Je){ae===null&&(ae=Ie);const at=we.isMesh&&we.matrixWorld.determinant()<0,dt=bi(W,ae,ge,Se,we);fe.setMaterial(Se,at);let Ne=ge.index,vt=1;if(Se.wireframe===!0){if(Ne=F.getWireframeAttribute(ge),Ne===void 0)return;vt=2}const xt=ge.drawRange,pt=ge.attributes.position;let jt=xt.start*vt,Nn=(xt.start+xt.count)*vt;Je!==null&&(jt=Math.max(jt,Je.start*vt),Nn=Math.min(Nn,(Je.start+Je.count)*vt)),Ne!==null?(jt=Math.max(jt,0),Nn=Math.min(Nn,Ne.count)):pt!=null&&(jt=Math.max(jt,0),Nn=Math.min(Nn,pt.count));const Gt=Nn-jt;if(Gt<0||Gt===1/0)return;je.setup(we,Se,dt,ge,Ne);let cn,ht=rt;if(Ne!==null&&(cn=We.get(Ne),ht=Ee,ht.setIndex(cn)),we.isMesh)Se.wireframe===!0?(fe.setLineWidth(Se.wireframeLinewidth*ue()),ht.setMode(B.LINES)):ht.setMode(B.TRIANGLES);else if(we.isLine){let tt=Se.linewidth;tt===void 0&&(tt=1),fe.setLineWidth(tt*ue()),we.isLineSegments?ht.setMode(B.LINES):we.isLineLoop?ht.setMode(B.LINE_LOOP):ht.setMode(B.LINE_STRIP)}else we.isPoints?ht.setMode(B.POINTS):we.isSprite&&ht.setMode(B.TRIANGLES);if(we.isInstancedMesh)ht.renderInstances(jt,Gt,we.count);else if(ge.isInstancedBufferGeometry){const tt=ge._maxInstanceCount!==void 0?ge._maxInstanceCount:1/0,ri=Math.min(ge.instanceCount,tt);ht.renderInstances(jt,Gt,ri)}else ht.render(jt,Gt)};function st(W,ae,ge){W.transparent===!0&&W.side===wr&&W.forceSinglePass===!1?(W.side=Ai,W.needsUpdate=!0,en(W,ae,ge),W.side=ks,W.needsUpdate=!0,en(W,ae,ge),W.side=wr):en(W,ae,ge)}this.compile=function(W,ae,ge=null){ge===null&&(ge=W),_=_e.get(ge),_.init(),x.push(_),ge.traverseVisible(function(we){we.isLight&&we.layers.test(ae.layers)&&(_.pushLight(we),we.castShadow&&_.pushShadow(we))}),W!==ge&&W.traverseVisible(function(we){we.isLight&&we.layers.test(ae.layers)&&(_.pushLight(we),we.castShadow&&_.pushShadow(we))}),_.setupLights(S._useLegacyLights);const Se=new Set;return W.traverse(function(we){const Je=we.material;if(Je)if(Array.isArray(Je))for(let at=0;at<Je.length;at++){const dt=Je[at];st(dt,ge,we),Se.add(dt)}else st(Je,ge,we),Se.add(Je)}),x.pop(),_=null,Se},this.compileAsync=function(W,ae,ge=null){const Se=this.compile(W,ae,ge);return new Promise(we=>{function Je(){if(Se.forEach(function(at){de.get(at).currentProgram.isReady()&&Se.delete(at)}),Se.size===0){we(W);return}setTimeout(Je,10)}ce.get("KHR_parallel_shader_compile")!==null?Je():setTimeout(Je,10)})};let ct=null;function zt(W){ct&&ct(W)}function Lt(){Vt.stop()}function gt(){Vt.start()}const Vt=new q3;Vt.setAnimationLoop(zt),typeof self<"u"&&Vt.setContext(self),this.setAnimationLoop=function(W){ct=W,Ue.setAnimationLoop(W),W===null?Vt.stop():Vt.start()},Ue.addEventListener("sessionstart",Lt),Ue.addEventListener("sessionend",gt),this.render=function(W,ae){if(ae!==void 0&&ae.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;W.matrixWorldAutoUpdate===!0&&W.updateMatrixWorld(),ae.parent===null&&ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),Ue.enabled===!0&&Ue.isPresenting===!0&&(Ue.cameraAutoUpdate===!0&&Ue.updateCamera(ae),ae=Ue.getCamera()),W.isScene===!0&&W.onBeforeRender(S,W,ae,P),_=_e.get(W,x.length),_.init(),x.push(_),oe.multiplyMatrices(ae.projectionMatrix,ae.matrixWorldInverse),K.setFromProjectionMatrix(oe),$=this.localClippingEnabled,ie=Be.init(this.clippingPlanes,$),w=xe.get(W,g.length),w.init(),g.push(w),Zt(W,ae,0,S.sortObjects),w.finish(),S.sortObjects===!0&&w.sort(N,O),this.info.render.frame++,ie===!0&&Be.beginShadows();const ge=_.state.shadowsArray;if(De.render(ge,W,ae),ie===!0&&Be.endShadows(),this.info.autoReset===!0&&this.info.reset(),Oe.render(w,W),_.setupLights(S._useLegacyLights),ae.isArrayCamera){const Se=ae.cameras;for(let we=0,Je=Se.length;we<Je;we++){const at=Se[we];Ut(w,W,at,at.viewport)}}else Ut(w,W,ae);P!==null&&(Ce.updateMultisampleRenderTarget(P),Ce.updateRenderTargetMipmap(P)),W.isScene===!0&&W.onAfterRender(S,W,ae),je.resetDefaultState(),I=-1,C=null,x.pop(),x.length>0?_=x[x.length-1]:_=null,g.pop(),g.length>0?w=g[g.length-1]:w=null};function Zt(W,ae,ge,Se){if(W.visible===!1)return;if(W.layers.test(ae.layers)){if(W.isGroup)ge=W.renderOrder;else if(W.isLOD)W.autoUpdate===!0&&W.update(ae);else if(W.isLight)_.pushLight(W),W.castShadow&&_.pushShadow(W);else if(W.isSprite){if(!W.frustumCulled||K.intersectsSprite(W)){Se&&be.setFromMatrixPosition(W.matrixWorld).applyMatrix4(oe);const at=U.update(W),dt=W.material;dt.visible&&w.push(W,at,dt,ge,be.z,null)}}else if((W.isMesh||W.isLine||W.isPoints)&&(!W.frustumCulled||K.intersectsObject(W))){const at=U.update(W),dt=W.material;if(Se&&(W.boundingSphere!==void 0?(W.boundingSphere===null&&W.computeBoundingSphere(),be.copy(W.boundingSphere.center)):(at.boundingSphere===null&&at.computeBoundingSphere(),be.copy(at.boundingSphere.center)),be.applyMatrix4(W.matrixWorld).applyMatrix4(oe)),Array.isArray(dt)){const Ne=at.groups;for(let vt=0,xt=Ne.length;vt<xt;vt++){const pt=Ne[vt],jt=dt[pt.materialIndex];jt&&jt.visible&&w.push(W,at,jt,ge,be.z,pt)}}else dt.visible&&w.push(W,at,dt,ge,be.z,null)}}const Je=W.children;for(let at=0,dt=Je.length;at<dt;at++)Zt(Je[at],ae,ge,Se)}function Ut(W,ae,ge,Se){const we=W.opaque,Je=W.transmissive,at=W.transparent;_.setupLightsView(ge),ie===!0&&Be.setGlobalState(S.clippingPlanes,ge),Je.length>0&&un(we,Je,ae,ge),Se&&fe.viewport(D.copy(Se)),we.length>0&&Gn(we,ae,ge),Je.length>0&&Gn(Je,ae,ge),at.length>0&&Gn(at,ae,ge),fe.buffers.depth.setTest(!0),fe.buffers.depth.setMask(!0),fe.buffers.color.setMask(!0),fe.setPolygonOffset(!1)}function un(W,ae,ge,Se){if((ge.isScene===!0?ge.overrideMaterial:null)!==null)return;const Je=me.isWebGL2;le===null&&(le=new fs(1,1,{generateMipmaps:!0,type:ce.has("EXT_color_buffer_half_float")?xc:Ns,minFilter:ya,samples:Je?4:0})),S.getDrawingBufferSize(he),Je?le.setSize(he.x,he.y):le.setSize(Lg(he.x),Lg(he.y));const at=S.getRenderTarget();S.setRenderTarget(le),S.getClearColor(Z),z=S.getClearAlpha(),z<1&&S.setClearColor(16777215,.5),S.clear();const dt=S.toneMapping;S.toneMapping=Us,Gn(W,ge,Se),Ce.updateMultisampleRenderTarget(le),Ce.updateRenderTargetMipmap(le);let Ne=!1;for(let vt=0,xt=ae.length;vt<xt;vt++){const pt=ae[vt],jt=pt.object,Nn=pt.geometry,Gt=pt.material,cn=pt.group;if(Gt.side===wr&&jt.layers.test(Se.layers)){const ht=Gt.side;Gt.side=Ai,Gt.needsUpdate=!0,$t(jt,ge,Se,Nn,Gt,cn),Gt.side=ht,Gt.needsUpdate=!0,Ne=!0}}Ne===!0&&(Ce.updateMultisampleRenderTarget(le),Ce.updateRenderTargetMipmap(le)),S.setRenderTarget(at),S.setClearColor(Z,z),S.toneMapping=dt}function Gn(W,ae,ge){const Se=ae.isScene===!0?ae.overrideMaterial:null;for(let we=0,Je=W.length;we<Je;we++){const at=W[we],dt=at.object,Ne=at.geometry,vt=Se===null?at.material:Se,xt=at.group;dt.layers.test(ge.layers)&&$t(dt,ae,ge,Ne,vt,xt)}}function $t(W,ae,ge,Se,we,Je){W.onBeforeRender(S,ae,ge,Se,we,Je),W.modelViewMatrix.multiplyMatrices(ge.matrixWorldInverse,W.matrixWorld),W.normalMatrix.getNormalMatrix(W.modelViewMatrix),we.onBeforeRender(S,ae,ge,Se,W,Je),we.transparent===!0&&we.side===wr&&we.forceSinglePass===!1?(we.side=Ai,we.needsUpdate=!0,S.renderBufferDirect(ge,ae,Se,we,W,Je),we.side=ks,we.needsUpdate=!0,S.renderBufferDirect(ge,ae,Se,we,W,Je),we.side=wr):S.renderBufferDirect(ge,ae,Se,we,W,Je),W.onAfterRender(S,ae,ge,Se,we,Je)}function en(W,ae,ge){ae.isScene!==!0&&(ae=Ie);const Se=de.get(W),we=_.state.lights,Je=_.state.shadowsArray,at=we.state.version,dt=Q.getParameters(W,we.state,Je,ae,ge),Ne=Q.getProgramCacheKey(dt);let vt=Se.programs;Se.environment=W.isMeshStandardMaterial?ae.environment:null,Se.fog=ae.fog,Se.envMap=(W.isMeshStandardMaterial?ve:Le).get(W.envMap||Se.environment),vt===void 0&&(W.addEventListener("dispose",Ve),vt=new Map,Se.programs=vt);let xt=vt.get(Ne);if(xt!==void 0){if(Se.currentProgram===xt&&Se.lightsStateVersion===at)return cr(W,dt),xt}else dt.uniforms=Q.getUniforms(W),W.onBuild(ge,dt,S),W.onBeforeCompile(dt,S),xt=Q.acquireProgram(dt,Ne),vt.set(Ne,xt),Se.uniforms=dt.uniforms;const pt=Se.uniforms;return(!W.isShaderMaterial&&!W.isRawShaderMaterial||W.clipping===!0)&&(pt.clippingPlanes=Be.uniform),cr(W,dt),Se.needsLights=Uc(W),Se.lightsStateVersion=at,Se.needsLights&&(pt.ambientLightColor.value=we.state.ambient,pt.lightProbe.value=we.state.probe,pt.directionalLights.value=we.state.directional,pt.directionalLightShadows.value=we.state.directionalShadow,pt.spotLights.value=we.state.spot,pt.spotLightShadows.value=we.state.spotShadow,pt.rectAreaLights.value=we.state.rectArea,pt.ltc_1.value=we.state.rectAreaLTC1,pt.ltc_2.value=we.state.rectAreaLTC2,pt.pointLights.value=we.state.point,pt.pointLightShadows.value=we.state.pointShadow,pt.hemisphereLights.value=we.state.hemi,pt.directionalShadowMap.value=we.state.directionalShadowMap,pt.directionalShadowMatrix.value=we.state.directionalShadowMatrix,pt.spotShadowMap.value=we.state.spotShadowMap,pt.spotLightMatrix.value=we.state.spotLightMatrix,pt.spotLightMap.value=we.state.spotLightMap,pt.pointShadowMap.value=we.state.pointShadowMap,pt.pointShadowMatrix.value=we.state.pointShadowMatrix),Se.currentProgram=xt,Se.uniformsList=null,xt}function Un(W){if(W.uniformsList===null){const ae=W.currentProgram.getUniforms();W.uniformsList=Qm.seqWithValue(ae.seq,W.uniforms)}return W.uniformsList}function cr(W,ae){const ge=de.get(W);ge.outputColorSpace=ae.outputColorSpace,ge.instancing=ae.instancing,ge.instancingColor=ae.instancingColor,ge.skinning=ae.skinning,ge.morphTargets=ae.morphTargets,ge.morphNormals=ae.morphNormals,ge.morphColors=ae.morphColors,ge.morphTargetsCount=ae.morphTargetsCount,ge.numClippingPlanes=ae.numClippingPlanes,ge.numIntersection=ae.numClipIntersection,ge.vertexAlphas=ae.vertexAlphas,ge.vertexTangents=ae.vertexTangents,ge.toneMapping=ae.toneMapping}function bi(W,ae,ge,Se,we){ae.isScene!==!0&&(ae=Ie),Ce.resetTextureUnits();const Je=ae.fog,at=Se.isMeshStandardMaterial?ae.environment:null,dt=P===null?S.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:Bs,Ne=(Se.isMeshStandardMaterial?ve:Le).get(Se.envMap||at),vt=Se.vertexColors===!0&&!!ge.attributes.color&&ge.attributes.color.itemSize===4,xt=!!ge.attributes.tangent&&(!!Se.normalMap||Se.anisotropy>0),pt=!!ge.morphAttributes.position,jt=!!ge.morphAttributes.normal,Nn=!!ge.morphAttributes.color;let Gt=Us;Se.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(Gt=S.toneMapping);const cn=ge.morphAttributes.position||ge.morphAttributes.normal||ge.morphAttributes.color,ht=cn!==void 0?cn.length:0,tt=de.get(Se),ri=_.state.lights;if(ie===!0&&($===!0||W!==C)){const Sn=W===C&&Se.id===I;Be.setState(Se,W,Sn)}let bt=!1;Se.version===tt.__version?(tt.needsLights&&tt.lightsStateVersion!==ri.state.version||tt.outputColorSpace!==dt||we.isInstancedMesh&&tt.instancing===!1||!we.isInstancedMesh&&tt.instancing===!0||we.isSkinnedMesh&&tt.skinning===!1||!we.isSkinnedMesh&&tt.skinning===!0||we.isInstancedMesh&&tt.instancingColor===!0&&we.instanceColor===null||we.isInstancedMesh&&tt.instancingColor===!1&&we.instanceColor!==null||tt.envMap!==Ne||Se.fog===!0&&tt.fog!==Je||tt.numClippingPlanes!==void 0&&(tt.numClippingPlanes!==Be.numPlanes||tt.numIntersection!==Be.numIntersection)||tt.vertexAlphas!==vt||tt.vertexTangents!==xt||tt.morphTargets!==pt||tt.morphNormals!==jt||tt.morphColors!==Nn||tt.toneMapping!==Gt||me.isWebGL2===!0&&tt.morphTargetsCount!==ht)&&(bt=!0):(bt=!0,tt.__version=Se.version);let Jt=tt.currentProgram;bt===!0&&(Jt=en(Se,ae,we));let fr=!1,Zn=!1,_n=!1;const Xt=Jt.getUniforms(),Wi=tt.uniforms;if(fe.useProgram(Jt.program)&&(fr=!0,Zn=!0,_n=!0),Se.id!==I&&(I=Se.id,Zn=!0),fr||C!==W){Xt.setValue(B,"projectionMatrix",W.projectionMatrix),Xt.setValue(B,"viewMatrix",W.matrixWorldInverse);const Sn=Xt.map.cameraPosition;Sn!==void 0&&Sn.setValue(B,be.setFromMatrixPosition(W.matrixWorld)),me.logarithmicDepthBuffer&&Xt.setValue(B,"logDepthBufFC",2/(Math.log(W.far+1)/Math.LN2)),(Se.isMeshPhongMaterial||Se.isMeshToonMaterial||Se.isMeshLambertMaterial||Se.isMeshBasicMaterial||Se.isMeshStandardMaterial||Se.isShaderMaterial)&&Xt.setValue(B,"isOrthographic",W.isOrthographicCamera===!0),C!==W&&(C=W,Zn=!0,_n=!0)}if(we.isSkinnedMesh){Xt.setOptional(B,we,"bindMatrix"),Xt.setOptional(B,we,"bindMatrixInverse");const Sn=we.skeleton;Sn&&(me.floatVertexTextures?(Sn.boneTexture===null&&Sn.computeBoneTexture(),Xt.setValue(B,"boneTexture",Sn.boneTexture,Ce),Xt.setValue(B,"boneTextureSize",Sn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const gs=ge.morphAttributes;if((gs.position!==void 0||gs.normal!==void 0||gs.color!==void 0&&me.isWebGL2===!0)&&ze.update(we,ge,Jt),(Zn||tt.receiveShadow!==we.receiveShadow)&&(tt.receiveShadow=we.receiveShadow,Xt.setValue(B,"receiveShadow",we.receiveShadow)),Se.isMeshGouraudMaterial&&Se.envMap!==null&&(Wi.envMap.value=Ne,Wi.flipEnvMap.value=Ne.isCubeTexture&&Ne.isRenderTargetTexture===!1?-1:1),Zn&&(Xt.setValue(B,"toneMappingExposure",S.toneMappingExposure),tt.needsLights&&Zr(Wi,_n),Je&&Se.fog===!0&&Pe.refreshFogUniforms(Wi,Je),Pe.refreshMaterialUniforms(Wi,Se,ne,J,le),Qm.upload(B,Un(tt),Wi,Ce)),Se.isShaderMaterial&&Se.uniformsNeedUpdate===!0&&(Qm.upload(B,Un(tt),Wi,Ce),Se.uniformsNeedUpdate=!1),Se.isSpriteMaterial&&Xt.setValue(B,"center",we.center),Xt.setValue(B,"modelViewMatrix",we.modelViewMatrix),Xt.setValue(B,"normalMatrix",we.normalMatrix),Xt.setValue(B,"modelMatrix",we.matrixWorld),Se.isShaderMaterial||Se.isRawShaderMaterial){const Sn=Se.uniformsGroups;for(let si=0,Ci=Sn.length;si<Ci;si++)if(me.isWebGL2){const Gs=Sn[si];Ze.update(Gs,Jt),Ze.bind(Gs,Jt)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Jt}function Zr(W,ae){W.ambientLightColor.needsUpdate=ae,W.lightProbe.needsUpdate=ae,W.directionalLights.needsUpdate=ae,W.directionalLightShadows.needsUpdate=ae,W.pointLights.needsUpdate=ae,W.pointLightShadows.needsUpdate=ae,W.spotLights.needsUpdate=ae,W.spotLightShadows.needsUpdate=ae,W.rectAreaLights.needsUpdate=ae,W.hemisphereLights.needsUpdate=ae}function Uc(W){return W.isMeshLambertMaterial||W.isMeshToonMaterial||W.isMeshPhongMaterial||W.isMeshStandardMaterial||W.isShadowMaterial||W.isShaderMaterial&&W.lights===!0}this.getActiveCubeFace=function(){return T},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(W,ae,ge){de.get(W.texture).__webglTexture=ae,de.get(W.depthTexture).__webglTexture=ge;const Se=de.get(W);Se.__hasExternalTextures=!0,Se.__hasExternalTextures&&(Se.__autoAllocateDepthBuffer=ge===void 0,Se.__autoAllocateDepthBuffer||ce.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Se.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(W,ae){const ge=de.get(W);ge.__webglFramebuffer=ae,ge.__useDefaultFramebuffer=ae===void 0},this.setRenderTarget=function(W,ae=0,ge=0){P=W,T=ae,b=ge;let Se=!0,we=null,Je=!1,at=!1;if(W){const Ne=de.get(W);Ne.__useDefaultFramebuffer!==void 0?(fe.bindFramebuffer(B.FRAMEBUFFER,null),Se=!1):Ne.__webglFramebuffer===void 0?Ce.setupRenderTarget(W):Ne.__hasExternalTextures&&Ce.rebindTextures(W,de.get(W.texture).__webglTexture,de.get(W.depthTexture).__webglTexture);const vt=W.texture;(vt.isData3DTexture||vt.isDataArrayTexture||vt.isCompressedArrayTexture)&&(at=!0);const xt=de.get(W).__webglFramebuffer;W.isWebGLCubeRenderTarget?(Array.isArray(xt[ae])?we=xt[ae][ge]:we=xt[ae],Je=!0):me.isWebGL2&&W.samples>0&&Ce.useMultisampledRTT(W)===!1?we=de.get(W).__webglMultisampledFramebuffer:Array.isArray(xt)?we=xt[ge]:we=xt,D.copy(W.viewport),H.copy(W.scissor),G=W.scissorTest}else D.copy(V).multiplyScalar(ne).floor(),H.copy(L).multiplyScalar(ne).floor(),G=k;if(fe.bindFramebuffer(B.FRAMEBUFFER,we)&&me.drawBuffers&&Se&&fe.drawBuffers(W,we),fe.viewport(D),fe.scissor(H),fe.setScissorTest(G),Je){const Ne=de.get(W.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+ae,Ne.__webglTexture,ge)}else if(at){const Ne=de.get(W.texture),vt=ae||0;B.framebufferTextureLayer(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,Ne.__webglTexture,ge||0,vt)}I=-1},this.readRenderTargetPixels=function(W,ae,ge,Se,we,Je,at){if(!(W&&W.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let dt=de.get(W).__webglFramebuffer;if(W.isWebGLCubeRenderTarget&&at!==void 0&&(dt=dt[at]),dt){fe.bindFramebuffer(B.FRAMEBUFFER,dt);try{const Ne=W.texture,vt=Ne.format,xt=Ne.type;if(vt!==Ki&&Xe.convert(vt)!==B.getParameter(B.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const pt=xt===xc&&(ce.has("EXT_color_buffer_half_float")||me.isWebGL2&&ce.has("EXT_color_buffer_float"));if(xt!==Ns&&Xe.convert(xt)!==B.getParameter(B.IMPLEMENTATION_COLOR_READ_TYPE)&&!(xt===Rs&&(me.isWebGL2||ce.has("OES_texture_float")||ce.has("WEBGL_color_buffer_float")))&&!pt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ae>=0&&ae<=W.width-Se&&ge>=0&&ge<=W.height-we&&B.readPixels(ae,ge,Se,we,Xe.convert(vt),Xe.convert(xt),Je)}finally{const Ne=P!==null?de.get(P).__webglFramebuffer:null;fe.bindFramebuffer(B.FRAMEBUFFER,Ne)}}},this.copyFramebufferToTexture=function(W,ae,ge=0){const Se=Math.pow(2,-ge),we=Math.floor(ae.image.width*Se),Je=Math.floor(ae.image.height*Se);Ce.setTexture2D(ae,0),B.copyTexSubImage2D(B.TEXTURE_2D,ge,0,0,W.x,W.y,we,Je),fe.unbindTexture()},this.copyTextureToTexture=function(W,ae,ge,Se=0){const we=ae.image.width,Je=ae.image.height,at=Xe.convert(ge.format),dt=Xe.convert(ge.type);Ce.setTexture2D(ge,0),B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,ge.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ge.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,ge.unpackAlignment),ae.isDataTexture?B.texSubImage2D(B.TEXTURE_2D,Se,W.x,W.y,we,Je,at,dt,ae.image.data):ae.isCompressedTexture?B.compressedTexSubImage2D(B.TEXTURE_2D,Se,W.x,W.y,ae.mipmaps[0].width,ae.mipmaps[0].height,at,ae.mipmaps[0].data):B.texSubImage2D(B.TEXTURE_2D,Se,W.x,W.y,at,dt,ae.image),Se===0&&ge.generateMipmaps&&B.generateMipmap(B.TEXTURE_2D),fe.unbindTexture()},this.copyTextureToTexture3D=function(W,ae,ge,Se,we=0){if(S.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Je=W.max.x-W.min.x+1,at=W.max.y-W.min.y+1,dt=W.max.z-W.min.z+1,Ne=Xe.convert(Se.format),vt=Xe.convert(Se.type);let xt;if(Se.isData3DTexture)Ce.setTexture3D(Se,0),xt=B.TEXTURE_3D;else if(Se.isDataArrayTexture)Ce.setTexture2DArray(Se,0),xt=B.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,Se.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Se.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,Se.unpackAlignment);const pt=B.getParameter(B.UNPACK_ROW_LENGTH),jt=B.getParameter(B.UNPACK_IMAGE_HEIGHT),Nn=B.getParameter(B.UNPACK_SKIP_PIXELS),Gt=B.getParameter(B.UNPACK_SKIP_ROWS),cn=B.getParameter(B.UNPACK_SKIP_IMAGES),ht=ge.isCompressedTexture?ge.mipmaps[0]:ge.image;B.pixelStorei(B.UNPACK_ROW_LENGTH,ht.width),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,ht.height),B.pixelStorei(B.UNPACK_SKIP_PIXELS,W.min.x),B.pixelStorei(B.UNPACK_SKIP_ROWS,W.min.y),B.pixelStorei(B.UNPACK_SKIP_IMAGES,W.min.z),ge.isDataTexture||ge.isData3DTexture?B.texSubImage3D(xt,we,ae.x,ae.y,ae.z,Je,at,dt,Ne,vt,ht.data):ge.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),B.compressedTexSubImage3D(xt,we,ae.x,ae.y,ae.z,Je,at,dt,Ne,ht.data)):B.texSubImage3D(xt,we,ae.x,ae.y,ae.z,Je,at,dt,Ne,vt,ht),B.pixelStorei(B.UNPACK_ROW_LENGTH,pt),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,jt),B.pixelStorei(B.UNPACK_SKIP_PIXELS,Nn),B.pixelStorei(B.UNPACK_SKIP_ROWS,Gt),B.pixelStorei(B.UNPACK_SKIP_IMAGES,cn),we===0&&Se.generateMipmaps&&B.generateMipmap(xt),fe.unbindTexture()},this.initTexture=function(W){W.isCubeTexture?Ce.setTextureCube(W,0):W.isData3DTexture?Ce.setTexture3D(W,0):W.isDataArrayTexture||W.isCompressedArrayTexture?Ce.setTexture2DArray(W,0):Ce.setTexture2D(W,0),fe.unbindTexture()},this.resetState=function(){T=0,b=0,P=null,fe.reset(),je.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ls}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===p0?"display-p3":"srgb",t.unpackColorSpace=Ht.workingColorSpace===oh?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===jn?da:jS}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===da?jn:Bs}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class nL extends tw{}nL.prototype.isWebGL1Renderer=!0;class _0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ke(e),this.density=t}clone(){return new _0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class S0{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Ke(e),this.near=t,this.far=i}clone(){return new S0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Ig extends Bt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class w0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Od,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=br()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=br()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=br()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ni=new j;class Ar{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ni.fromBufferAttribute(this,t),Ni.applyMatrix4(e),this.setXYZ(t,Ni.x,Ni.y,Ni.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ni.fromBufferAttribute(this,t),Ni.applyNormalMatrix(e),this.setXYZ(t,Ni.x,Ni.y,Ni.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ni.fromBufferAttribute(this,t),Ni.transformDirection(e),this.setXYZ(t,Ni.x,Ni.y,Ni.z);return this}setX(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=At(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=$i(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=$i(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=$i(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=$i(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),i=At(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),i=At(i,this.array),r=At(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=At(t,this.array),i=At(i,this.array),r=At(r,this.array),s=At(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new qt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ar(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class nw extends hi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ke(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Mu;const yf=new j,Eu=new j,Au=new j,Tu=new Re,xf=new Re,iL=new _t,Qp=new j,_f=new j,Kp=new j,AT=new Re,Gy=new Re,TT=new Re;class rL extends Bt{constructor(e=new nw){if(super(),this.isSprite=!0,this.type="Sprite",Mu===void 0){Mu=new Tt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new w0(t,5);Mu.setIndex([0,1,2,0,2,3]),Mu.setAttribute("position",new Ar(i,3,0,!1)),Mu.setAttribute("uv",new Ar(i,2,3,!1))}this.geometry=Mu,this.material=e,this.center=new Re(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Eu.setFromMatrixScale(this.matrixWorld),iL.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Au.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Eu.multiplyScalar(-Au.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;$p(Qp.set(-.5,-.5,0),Au,o,Eu,r,s),$p(_f.set(.5,-.5,0),Au,o,Eu,r,s),$p(Kp.set(.5,.5,0),Au,o,Eu,r,s),AT.set(0,0),Gy.set(1,0),TT.set(1,1);let a=e.ray.intersectTriangle(Qp,_f,Kp,!1,yf);if(a===null&&($p(_f.set(-.5,.5,0),Au,o,Eu,r,s),Gy.set(0,1),a=e.ray.intersectTriangle(Qp,Kp,_f,!1,yf),a===null))return;const l=e.ray.origin.distanceTo(yf);l<e.near||l>e.far||t.push({distance:l,point:yf.clone(),uv:Qi.getInterpolation(yf,Qp,_f,Kp,AT,Gy,TT,new Re),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function $p(n,e,t,i,r,s){Tu.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(xf.x=s*Tu.x-r*Tu.y,xf.y=r*Tu.x+s*Tu.y):xf.copy(Tu),n.copy(e),n.x+=xf.x,n.y+=xf.y,n.applyMatrix4(iL)}const em=new j,bT=new j;class sL extends Bt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){em.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(em);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){em.setFromMatrixPosition(e.matrixWorld),bT.setFromMatrixPosition(this.matrixWorld);const i=em.distanceTo(bT)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const CT=new j,PT=new Dt,RT=new Dt,WV=new j,LT=new _t,tm=new j,Hy=new lr,IT=new _t,Wy=new Rc;class oL extends Dn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Lx,this.bindMatrix=new _t,this.bindMatrixInverse=new _t,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ar),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,tm),this.boundingBox.expandByPoint(tm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new lr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,tm),this.boundingSphere.expandByPoint(tm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Hy.copy(this.boundingSphere),Hy.applyMatrix4(r),e.ray.intersectsSphere(Hy)!==!1&&(IT.copy(r).invert(),Wy.copy(e.ray).applyMatrix4(IT),!(this.boundingBox!==null&&Wy.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Wy)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Dt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Lx?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===y3?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;PT.fromBufferAttribute(r.attributes.skinIndex,e),RT.fromBufferAttribute(r.attributes.skinWeight,e),CT.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=RT.getComponent(s);if(o!==0){const a=PT.getComponent(s);LT.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(WV.copy(CT).applyMatrix4(LT),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class iw extends Bt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class uc extends yn{constructor(e=null,t=1,i=1,r,s,o,a,l,u=Ln,f=Ln,h,p){super(null,o,a,l,u,f,r,s,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const DT=new _t,jV=new _t;class M0{constructor(e=[],t=[]){this.uuid=br(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new _t)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new _t;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:jV;DT.multiplyMatrices(a,t[s]),DT.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new M0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=V3(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new uc(t,e,e,Ki,Rs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new iw),this.bones.push(o),this.boneInverses.push(new _t().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Nl extends qt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const bu=new _t,UT=new _t,nm=[],NT=new ar,XV=new _t,Sf=new Dn,wf=new lr;class aL extends Dn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Nl(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,XV)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ar),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,bu),NT.copy(e.boundingBox).applyMatrix4(bu),this.boundingBox.union(NT)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new lr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,bu),wf.copy(e.boundingSphere).applyMatrix4(bu),this.boundingSphere.union(wf)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Sf.geometry=this.geometry,Sf.material=this.material,Sf.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),wf.copy(this.boundingSphere),wf.applyMatrix4(i),e.ray.intersectsSphere(wf)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,bu),UT.multiplyMatrices(i,bu),Sf.matrixWorld=UT,Sf.raycast(e,nm);for(let o=0,a=nm.length;o<a;o++){const l=nm[o];l.instanceId=s,l.object=this,t.push(l)}nm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Nl(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Hi extends hi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ke(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const OT=new j,FT=new j,kT=new _t,jy=new Rc,im=new lr;let xa=class extends Bt{constructor(e=new Tt,t=new Hi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)OT.fromBufferAttribute(t,r-1),FT.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=OT.distanceTo(FT);e.setAttribute("lineDistance",new ot(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),im.copy(i.boundingSphere),im.applyMatrix4(r),im.radius+=s,e.ray.intersectsSphere(im)===!1)return;kT.copy(r).invert(),jy.copy(e.ray).applyMatrix4(kT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new j,f=new j,h=new j,p=new j,m=this.isLineSegments?2:1,v=i.index,_=i.attributes.position;if(v!==null){const g=Math.max(0,o.start),x=Math.min(v.count,o.start+o.count);for(let S=g,E=x-1;S<E;S+=m){const T=v.getX(S),b=v.getX(S+1);if(u.fromBufferAttribute(_,T),f.fromBufferAttribute(_,b),jy.distanceSqToSegment(u,f,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(p);I<e.near||I>e.far||t.push({distance:I,point:h.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),x=Math.min(_.count,o.start+o.count);for(let S=g,E=x-1;S<E;S+=m){if(u.fromBufferAttribute(_,S),f.fromBufferAttribute(_,S+1),jy.distanceSqToSegment(u,f,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(p);b<e.near||b>e.far||t.push({distance:b,point:h.clone().applyMatrix4(this.matrixWorld),index:S,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const BT=new j,zT=new j;class zs extends xa{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)BT.fromBufferAttribute(t,r),zT.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+BT.distanceTo(zT);e.setAttribute("lineDistance",new ot(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class lL extends xa{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class E0 extends hi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ke(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const VT=new _t,l_=new Rc,rm=new lr,sm=new j;let uL=class extends Bt{constructor(e=new Tt,t=new E0){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),rm.copy(i.boundingSphere),rm.applyMatrix4(r),rm.radius+=s,e.ray.intersectsSphere(rm)===!1)return;VT.copy(r).invert(),l_.copy(e.ray).applyMatrix4(VT);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,h=i.attributes.position;if(u!==null){const p=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let v=p,w=m;v<w;v++){const _=u.getX(v);sm.fromBufferAttribute(h,_),GT(sm,_,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let v=p,w=m;v<w;v++)sm.fromBufferAttribute(h,v),GT(sm,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function GT(n,e,t,i,r,s,o){const a=l_.distanceSqToPoint(n);if(a<t){const l=new j;l_.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class YV extends yn{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:pn,this.magFilter=s!==void 0?s:pn,this.generateMipmaps=!1;const f=this;function h(){f.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class qV extends yn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ln,this.minFilter=Ln,this.generateMipmaps=!1,this.needsUpdate=!0}}class A0 extends yn{constructor(e,t,i,r,s,o,a,l,u,f,h,p){super(null,o,a,l,u,f,r,s,h,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class ZV extends A0{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ei}}class JV extends A0{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,So),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class QV extends yn{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ps{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const f=i[r],p=i[r+1]-f,m=(o-f)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Re:new j);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new j,r=[],s=[],o=[],a=new j,l=new _t;for(let m=0;m<=e;m++){const v=m/e;r[m]=this.getTangentAt(v,new j)}s[0]=new j,o[0]=new j;let u=Number.MAX_VALUE;const f=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);f<=u&&(u=f,i.set(1,0,0)),h<=u&&(u=h,i.set(0,1,0)),p<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(An(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(An(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],m*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class T0 extends ps{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new Re,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const f=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,m=u-this.aY;l=p*f-m*h+this.aX,u=p*h+m*f+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class cL extends T0{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function rw(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,f,h){let p=(o-s)/u-(a-s)/(u+f)+(a-o)/f,m=(a-o)/f-(l-o)/(f+h)+(l-a)/h;p*=f,m*=f,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const om=new j,Xy=new rw,Yy=new rw,qy=new rw;class fL extends ps{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new j){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,f;this.closed||a>0?u=r[(a-1)%s]:(om.subVectors(r[0],r[1]).add(r[0]),u=om);const h=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?f=r[(a+2)%s]:(om.subVectors(r[s-1],r[s-2]).add(r[s-1]),f=om),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(h),m),w=Math.pow(h.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(f),m);w<1e-4&&(w=1),v<1e-4&&(v=w),_<1e-4&&(_=w),Xy.initNonuniformCatmullRom(u.x,h.x,p.x,f.x,v,w,_),Yy.initNonuniformCatmullRom(u.y,h.y,p.y,f.y,v,w,_),qy.initNonuniformCatmullRom(u.z,h.z,p.z,f.z,v,w,_)}else this.curveType==="catmullrom"&&(Xy.initCatmullRom(u.x,h.x,p.x,f.x,this.tension),Yy.initCatmullRom(u.y,h.y,p.y,f.y,this.tension),qy.initCatmullRom(u.z,h.z,p.z,f.z,this.tension));return i.set(Xy.calc(l),Yy.calc(l),qy.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new j().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function HT(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function KV(n,e){const t=1-n;return t*t*e}function $V(n,e){return 2*(1-n)*n*e}function eG(n,e){return n*n*e}function $f(n,e,t,i){return KV(n,e)+$V(n,t)+eG(n,i)}function tG(n,e){const t=1-n;return t*t*t*e}function nG(n,e){const t=1-n;return 3*t*t*n*e}function iG(n,e){return 3*(1-n)*n*n*e}function rG(n,e){return n*n*n*e}function ed(n,e,t,i,r){return tG(n,e)+nG(n,t)+iG(n,i)+rG(n,r)}class sw extends ps{constructor(e=new Re,t=new Re,i=new Re,r=new Re){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Re){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(ed(e,r.x,s.x,o.x,a.x),ed(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dL extends ps{constructor(e=new j,t=new j,i=new j,r=new j){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new j){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(ed(e,r.x,s.x,o.x,a.x),ed(e,r.y,s.y,o.y,a.y),ed(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ow extends ps{constructor(e=new Re,t=new Re){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Re){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Re){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class hL extends ps{constructor(e=new j,t=new j){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new j){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new j){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aw extends ps{constructor(e=new Re,t=new Re,i=new Re){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Re){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set($f(e,r.x,s.x,o.x),$f(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lw extends ps{constructor(e=new j,t=new j,i=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new j){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set($f(e,r.x,s.x,o.x),$f(e,r.y,s.y,o.y),$f(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class uw extends ps{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Re){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],f=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(HT(a,l.x,u.x,f.x,h.x),HT(a,l.y,u.y,f.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Re().fromArray(r))}return this}}var Dg=Object.freeze({__proto__:null,ArcCurve:cL,CatmullRomCurve3:fL,CubicBezierCurve:sw,CubicBezierCurve3:dL,EllipseCurve:T0,LineCurve:ow,LineCurve3:hL,QuadraticBezierCurve:aw,QuadraticBezierCurve3:lw,SplineCurve:uw});class pL extends ps{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Dg[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const f=l[u];i&&i.equals(f)||(t.push(f),i=f)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Dg[r.type]().fromJSON(r))}return this}}class zd extends pL{constructor(e){super(),this.type="Path",this.currentPoint=new Re,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new ow(this.currentPoint.clone(),new Re(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new aw(this.currentPoint.clone(),new Re(e,t),new Re(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new sw(this.currentPoint.clone(),new Re(e,t),new Re(i,r),new Re(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new uw(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const u=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(e+u,t+f,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const u=new T0(e,t,i,r,s,o,a,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const f=u.getPoint(1);return this.currentPoint.copy(f),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ch extends Tt{constructor(e=[new Re(0,-.5),new Re(.5,0),new Re(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=An(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],f=1/t,h=new j,p=new Re,m=new j,v=new j,w=new j;let _=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:_=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-_,m.z=g*0,w.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(w.x,w.y,w.z);break;default:_=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,m.x=g*1,m.y=-_,m.z=g*0,v.copy(m),m.x+=w.x,m.y+=w.y,m.z+=w.z,m.normalize(),l.push(m.x,m.y,m.z),w.copy(v)}for(let x=0;x<=t;x++){const S=i+x*f*r,E=Math.sin(S),T=Math.cos(S);for(let b=0;b<=e.length-1;b++){h.x=e[b].x*E,h.y=e[b].y,h.z=e[b].x*T,o.push(h.x,h.y,h.z),p.x=x/t,p.y=b/(e.length-1),a.push(p.x,p.y);const P=l[3*b+0]*E,I=l[3*b+1],C=l[3*b+0]*T;u.push(P,I,C)}}for(let x=0;x<t;x++)for(let S=0;S<e.length-1;S++){const E=S+x*e.length,T=E,b=E+e.length,P=E+e.length+1,I=E+1;s.push(T,b,I),s.push(P,I,b)}this.setIndex(s),this.setAttribute("position",new ot(o,3)),this.setAttribute("uv",new ot(a,2)),this.setAttribute("normal",new ot(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ch(e.points,e.segments,e.phiStart,e.phiLength)}}class b0 extends ch{constructor(e=1,t=1,i=4,r=8){const s=new zd;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new b0(e.radius,e.length,e.capSegments,e.radialSegments)}}class C0 extends Tt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new j,f=new Re;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,p=3;h<=t;h++,p+=3){const m=i+h/t*r;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),f.x=(o[p]/e+1)/2,f.y=(o[p+1]/e+1)/2,l.push(f.x,f.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new ot(o,3)),this.setAttribute("normal",new ot(a,3)),this.setAttribute("uv",new ot(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new C0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Ic extends Tt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const f=[],h=[],p=[],m=[];let v=0;const w=[],_=i/2;let g=0;x(),o===!1&&(e>0&&S(!0),t>0&&S(!1)),this.setIndex(f),this.setAttribute("position",new ot(h,3)),this.setAttribute("normal",new ot(p,3)),this.setAttribute("uv",new ot(m,2));function x(){const E=new j,T=new j;let b=0;const P=(t-e)/i;for(let I=0;I<=s;I++){const C=[],D=I/s,H=D*(t-e)+e;for(let G=0;G<=r;G++){const Z=G/r,z=Z*l+a,q=Math.sin(z),J=Math.cos(z);T.x=H*q,T.y=-D*i+_,T.z=H*J,h.push(T.x,T.y,T.z),E.set(q,P,J).normalize(),p.push(E.x,E.y,E.z),m.push(Z,1-D),C.push(v++)}w.push(C)}for(let I=0;I<r;I++)for(let C=0;C<s;C++){const D=w[C][I],H=w[C+1][I],G=w[C+1][I+1],Z=w[C][I+1];f.push(D,H,Z),f.push(H,G,Z),b+=6}u.addGroup(g,b,0),g+=b}function S(E){const T=v,b=new Re,P=new j;let I=0;const C=E===!0?e:t,D=E===!0?1:-1;for(let G=1;G<=r;G++)h.push(0,_*D,0),p.push(0,D,0),m.push(.5,.5),v++;const H=v;for(let G=0;G<=r;G++){const z=G/r*l+a,q=Math.cos(z),J=Math.sin(z);P.x=C*J,P.y=_*D,P.z=C*q,h.push(P.x,P.y,P.z),p.push(0,D,0),b.x=q*.5+.5,b.y=J*.5*D+.5,m.push(b.x,b.y),v++}for(let G=0;G<r;G++){const Z=T+G,z=H+G;E===!0?f.push(z,z+1,Z):f.push(z+1,z,Z),I+=3}u.addGroup(g,I,E===!0?1:2),g+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ic(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class P0 extends Ic{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new P0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ba extends Tt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),u(i),f(),this.setAttribute("position",new ot(s,3)),this.setAttribute("normal",new ot(s.slice(),3)),this.setAttribute("uv",new ot(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const S=new j,E=new j,T=new j;for(let b=0;b<t.length;b+=3)m(t[b+0],S),m(t[b+1],E),m(t[b+2],T),l(S,E,T,x)}function l(x,S,E,T){const b=T+1,P=[];for(let I=0;I<=b;I++){P[I]=[];const C=x.clone().lerp(E,I/b),D=S.clone().lerp(E,I/b),H=b-I;for(let G=0;G<=H;G++)G===0&&I===b?P[I][G]=C:P[I][G]=C.clone().lerp(D,G/H)}for(let I=0;I<b;I++)for(let C=0;C<2*(b-I)-1;C++){const D=Math.floor(C/2);C%2===0?(p(P[I][D+1]),p(P[I+1][D]),p(P[I][D])):(p(P[I][D+1]),p(P[I+1][D+1]),p(P[I+1][D]))}}function u(x){const S=new j;for(let E=0;E<s.length;E+=3)S.x=s[E+0],S.y=s[E+1],S.z=s[E+2],S.normalize().multiplyScalar(x),s[E+0]=S.x,s[E+1]=S.y,s[E+2]=S.z}function f(){const x=new j;for(let S=0;S<s.length;S+=3){x.x=s[S+0],x.y=s[S+1],x.z=s[S+2];const E=_(x)/2/Math.PI+.5,T=g(x)/Math.PI+.5;o.push(E,1-T)}v(),h()}function h(){for(let x=0;x<o.length;x+=6){const S=o[x+0],E=o[x+2],T=o[x+4],b=Math.max(S,E,T),P=Math.min(S,E,T);b>.9&&P<.1&&(S<.2&&(o[x+0]+=1),E<.2&&(o[x+2]+=1),T<.2&&(o[x+4]+=1))}}function p(x){s.push(x.x,x.y,x.z)}function m(x,S){const E=x*3;S.x=e[E+0],S.y=e[E+1],S.z=e[E+2]}function v(){const x=new j,S=new j,E=new j,T=new j,b=new Re,P=new Re,I=new Re;for(let C=0,D=0;C<s.length;C+=9,D+=6){x.set(s[C+0],s[C+1],s[C+2]),S.set(s[C+3],s[C+4],s[C+5]),E.set(s[C+6],s[C+7],s[C+8]),b.set(o[D+0],o[D+1]),P.set(o[D+2],o[D+3]),I.set(o[D+4],o[D+5]),T.copy(x).add(S).add(E).divideScalar(3);const H=_(T);w(b,D+0,x,H),w(P,D+2,S,H),w(I,D+4,E,H)}}function w(x,S,E,T){T<0&&x.x===1&&(o[S]=x.x-1),E.x===0&&E.z===0&&(o[S]=T/2/Math.PI+.5)}function _(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ba(e.vertices,e.indices,e.radius,e.details)}}class R0 extends ba{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new R0(e.radius,e.detail)}}const am=new j,lm=new j,Zy=new j,um=new Qi;class mL extends Tt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(El*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],f=["a","b","c"],h=new Array(3),p={},m=[];for(let v=0;v<l;v+=3){o?(u[0]=o.getX(v),u[1]=o.getX(v+1),u[2]=o.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:w,b:_,c:g}=um;if(w.fromBufferAttribute(a,u[0]),_.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),um.getNormal(Zy),h[0]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,h[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,h[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let x=0;x<3;x++){const S=(x+1)%3,E=h[x],T=h[S],b=um[f[x]],P=um[f[S]],I=`${E}_${T}`,C=`${T}_${E}`;C in p&&p[C]?(Zy.dot(p[C].normal)<=s&&(m.push(b.x,b.y,b.z),m.push(P.x,P.y,P.z)),p[C]=null):I in p||(p[I]={index0:u[x],index1:u[S],normal:Zy.clone()})}}for(const v in p)if(p[v]){const{index0:w,index1:_}=p[v];am.fromBufferAttribute(a,w),lm.fromBufferAttribute(a,_),m.push(am.x,am.y,am.z),m.push(lm.x,lm.y,lm.z)}this.setAttribute("position",new ot(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Tl extends zd{constructor(e){super(e),this.uuid=br(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new zd().fromJSON(r))}return this}}const sG={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=gL(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,f,h,p,m;if(i&&(s=cG(n,e,s,t)),n.length>80*t){a=u=n[0],l=f=n[1];for(let v=t;v<r;v+=t)h=n[v],p=n[v+1],h<a&&(a=h),p<l&&(l=p),h>u&&(u=h),p>f&&(f=p);m=Math.max(u-a,f-l),m=m!==0?32767/m:0}return Vd(s,o,t,a,l,m,0),o}};function gL(n,e,t,i,r){let s,o;if(r===SG(n,e,t,i)>0)for(s=e;s<t;s+=i)o=WT(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=WT(s,n[s],n[s+1],o);return o&&L0(o,o.next)&&(Hd(o),o=o.next),o}function Ol(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(L0(t,t.next)||mn(t.prev,t,t.next)===0)){if(Hd(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Vd(n,e,t,i,r,s,o){if(!n)return;!o&&s&&mG(n,i,r,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?aG(n,i,r,s):oG(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),Hd(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=lG(Ol(n),e,t),Vd(n,e,t,i,r,s,2)):o===2&&uG(n,e,t,i,r,s):Vd(Ol(n),e,t,i,r,s,1);break}}}function oG(n){const e=n.prev,t=n,i=n.next;if(mn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,f=r<s?r<o?r:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let v=i.next;for(;v!==e;){if(v.x>=f&&v.x<=p&&v.y>=h&&v.y<=m&&qu(r,a,s,l,o,u,v.x,v.y)&&mn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function aG(n,e,t,i){const r=n.prev,s=n,o=n.next;if(mn(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,f=r.y,h=s.y,p=o.y,m=a<l?a<u?a:u:l<u?l:u,v=f<h?f<p?f:p:h<p?h:p,w=a>l?a>u?a:u:l>u?l:u,_=f>h?f>p?f:p:h>p?h:p,g=u_(m,v,e,t,i),x=u_(w,_,e,t,i);let S=n.prevZ,E=n.nextZ;for(;S&&S.z>=g&&E&&E.z<=x;){if(S.x>=m&&S.x<=w&&S.y>=v&&S.y<=_&&S!==r&&S!==o&&qu(a,f,l,h,u,p,S.x,S.y)&&mn(S.prev,S,S.next)>=0||(S=S.prevZ,E.x>=m&&E.x<=w&&E.y>=v&&E.y<=_&&E!==r&&E!==o&&qu(a,f,l,h,u,p,E.x,E.y)&&mn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;S&&S.z>=g;){if(S.x>=m&&S.x<=w&&S.y>=v&&S.y<=_&&S!==r&&S!==o&&qu(a,f,l,h,u,p,S.x,S.y)&&mn(S.prev,S,S.next)>=0)return!1;S=S.prevZ}for(;E&&E.z<=x;){if(E.x>=m&&E.x<=w&&E.y>=v&&E.y<=_&&E!==r&&E!==o&&qu(a,f,l,h,u,p,E.x,E.y)&&mn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function lG(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!L0(r,s)&&vL(r,i,i.next,s)&&Gd(r,s)&&Gd(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Hd(i),Hd(i.next),i=n=s),i=i.next}while(i!==n);return Ol(i)}function uG(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&yG(o,a)){let l=yL(o,a);o=Ol(o,o.next),l=Ol(l,l.next),Vd(o,e,t,i,r,s,0),Vd(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function cG(n,e,t,i){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,u=gL(n,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(vG(u));for(r.sort(fG),s=0;s<r.length;s++)t=dG(r[s],t);return t}function fG(n,e){return n.x-e.x}function dG(n,e){const t=hG(n,e);if(!t)return e;const i=yL(t,n);return Ol(i,i.next),Ol(t,t.next)}function hG(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,u=r.y;let f=1/0,h;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&qu(o<u?s:i,o,l,u,o<u?i:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),Gd(t,n)&&(h<f||h===f&&(t.x>r.x||t.x===r.x&&pG(r,t)))&&(r=t,f=h)),t=t.next;while(t!==a);return r}function pG(n,e){return mn(n.prev,n,e.prev)<0&&mn(e.next,n,n.next)<0}function mG(n,e,t,i){let r=n;do r.z===0&&(r.z=u_(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,gG(r)}function gG(n){let e,t,i,r,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(o>1);return n}function u_(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function vG(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function qu(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function yG(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!xG(n,e)&&(Gd(n,e)&&Gd(e,n)&&_G(n,e)&&(mn(n.prev,n,e.prev)||mn(n,e.prev,e))||L0(n,e)&&mn(n.prev,n,n.next)>0&&mn(e.prev,e,e.next)>0)}function mn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function L0(n,e){return n.x===e.x&&n.y===e.y}function vL(n,e,t,i){const r=fm(mn(n,e,t)),s=fm(mn(n,e,i)),o=fm(mn(t,i,n)),a=fm(mn(t,i,e));return!!(r!==s&&o!==a||r===0&&cm(n,t,e)||s===0&&cm(n,i,e)||o===0&&cm(t,n,i)||a===0&&cm(t,e,i))}function cm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function fm(n){return n>0?1:n<0?-1:0}function xG(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&vL(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Gd(n,e){return mn(n.prev,n,n.next)<0?mn(n,e,n.next)>=0&&mn(n,n.prev,e)>=0:mn(n,e,n.prev)<0||mn(n,n.next,e)<0}function _G(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function yL(n,e){const t=new c_(n.i,n.x,n.y),i=new c_(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function WT(n,e,t,i){const r=new c_(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Hd(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function c_(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function SG(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Os{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Os.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];jT(e),XT(i,e);let o=e.length;t.forEach(jT);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,XT(i,t[l]);const a=sG.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function jT(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function XT(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class I0 extends Tt{constructor(e=new Tl([new Re(.5,.5),new Re(-.5,.5),new Re(-.5,-.5),new Re(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new ot(r,3)),this.setAttribute("uv",new ot(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,f=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:wG;let S,E=!1,T,b,P,I;g&&(S=g.getSpacedPoints(f),E=!0,p=!1,T=g.computeFrenetFrames(f,!1),b=new j,P=new j,I=new j),p||(_=0,m=0,v=0,w=0);const C=a.extractPoints(u);let D=C.shape;const H=C.holes;if(!Os.isClockWise(D)){D=D.reverse();for(let B=0,ye=H.length;B<ye;B++){const ce=H[B];Os.isClockWise(ce)&&(H[B]=ce.reverse())}}const Z=Os.triangulateShape(D,H),z=D;for(let B=0,ye=H.length;B<ye;B++){const ce=H[B];D=D.concat(ce)}function q(B,ye,ce){return ye||console.error("THREE.ExtrudeGeometry: vec does not exist"),B.clone().addScaledVector(ye,ce)}const J=D.length,ne=Z.length;function N(B,ye,ce){let me,fe,ke;const de=B.x-ye.x,Ce=B.y-ye.y,Le=ce.x-B.x,ve=ce.y-B.y,We=de*de+Ce*Ce,F=de*ve-Ce*Le;if(Math.abs(F)>Number.EPSILON){const U=Math.sqrt(We),Q=Math.sqrt(Le*Le+ve*ve),Pe=ye.x-Ce/U,xe=ye.y+de/U,_e=ce.x-ve/Q,Be=ce.y+Le/Q,De=((_e-Pe)*ve-(Be-xe)*Le)/(de*ve-Ce*Le);me=Pe+de*De-B.x,fe=xe+Ce*De-B.y;const Oe=me*me+fe*fe;if(Oe<=2)return new Re(me,fe);ke=Math.sqrt(Oe/2)}else{let U=!1;de>Number.EPSILON?Le>Number.EPSILON&&(U=!0):de<-Number.EPSILON?Le<-Number.EPSILON&&(U=!0):Math.sign(Ce)===Math.sign(ve)&&(U=!0),U?(me=-Ce,fe=de,ke=Math.sqrt(We)):(me=de,fe=Ce,ke=Math.sqrt(We/2))}return new Re(me/ke,fe/ke)}const O=[];for(let B=0,ye=z.length,ce=ye-1,me=B+1;B<ye;B++,ce++,me++)ce===ye&&(ce=0),me===ye&&(me=0),O[B]=N(z[B],z[ce],z[me]);const V=[];let L,k=O.concat();for(let B=0,ye=H.length;B<ye;B++){const ce=H[B];L=[];for(let me=0,fe=ce.length,ke=fe-1,de=me+1;me<fe;me++,ke++,de++)ke===fe&&(ke=0),de===fe&&(de=0),L[me]=N(ce[me],ce[ke],ce[de]);V.push(L),k=k.concat(L)}for(let B=0;B<_;B++){const ye=B/_,ce=m*Math.cos(ye*Math.PI/2),me=v*Math.sin(ye*Math.PI/2)+w;for(let fe=0,ke=z.length;fe<ke;fe++){const de=q(z[fe],O[fe],me);oe(de.x,de.y,-ce)}for(let fe=0,ke=H.length;fe<ke;fe++){const de=H[fe];L=V[fe];for(let Ce=0,Le=de.length;Ce<Le;Ce++){const ve=q(de[Ce],L[Ce],me);oe(ve.x,ve.y,-ce)}}}const K=v+w;for(let B=0;B<J;B++){const ye=p?q(D[B],k[B],K):D[B];E?(P.copy(T.normals[0]).multiplyScalar(ye.x),b.copy(T.binormals[0]).multiplyScalar(ye.y),I.copy(S[0]).add(P).add(b),oe(I.x,I.y,I.z)):oe(ye.x,ye.y,0)}for(let B=1;B<=f;B++)for(let ye=0;ye<J;ye++){const ce=p?q(D[ye],k[ye],K):D[ye];E?(P.copy(T.normals[B]).multiplyScalar(ce.x),b.copy(T.binormals[B]).multiplyScalar(ce.y),I.copy(S[B]).add(P).add(b),oe(I.x,I.y,I.z)):oe(ce.x,ce.y,h/f*B)}for(let B=_-1;B>=0;B--){const ye=B/_,ce=m*Math.cos(ye*Math.PI/2),me=v*Math.sin(ye*Math.PI/2)+w;for(let fe=0,ke=z.length;fe<ke;fe++){const de=q(z[fe],O[fe],me);oe(de.x,de.y,h+ce)}for(let fe=0,ke=H.length;fe<ke;fe++){const de=H[fe];L=V[fe];for(let Ce=0,Le=de.length;Ce<Le;Ce++){const ve=q(de[Ce],L[Ce],me);E?oe(ve.x,ve.y+S[f-1].y,S[f-1].x+ce):oe(ve.x,ve.y,h+ce)}}}ie(),$();function ie(){const B=r.length/3;if(p){let ye=0,ce=J*ye;for(let me=0;me<ne;me++){const fe=Z[me];he(fe[2]+ce,fe[1]+ce,fe[0]+ce)}ye=f+_*2,ce=J*ye;for(let me=0;me<ne;me++){const fe=Z[me];he(fe[0]+ce,fe[1]+ce,fe[2]+ce)}}else{for(let ye=0;ye<ne;ye++){const ce=Z[ye];he(ce[2],ce[1],ce[0])}for(let ye=0;ye<ne;ye++){const ce=Z[ye];he(ce[0]+J*f,ce[1]+J*f,ce[2]+J*f)}}i.addGroup(B,r.length/3-B,0)}function $(){const B=r.length/3;let ye=0;le(z,ye),ye+=z.length;for(let ce=0,me=H.length;ce<me;ce++){const fe=H[ce];le(fe,ye),ye+=fe.length}i.addGroup(B,r.length/3-B,1)}function le(B,ye){let ce=B.length;for(;--ce>=0;){const me=ce;let fe=ce-1;fe<0&&(fe=B.length-1);for(let ke=0,de=f+_*2;ke<de;ke++){const Ce=J*ke,Le=J*(ke+1),ve=ye+me+Ce,We=ye+fe+Ce,F=ye+fe+Le,U=ye+me+Le;be(ve,We,F,U)}}}function oe(B,ye,ce){l.push(B),l.push(ye),l.push(ce)}function he(B,ye,ce){Ie(B),Ie(ye),Ie(ce);const me=r.length/3,fe=x.generateTopUV(i,r,me-3,me-2,me-1);ue(fe[0]),ue(fe[1]),ue(fe[2])}function be(B,ye,ce,me){Ie(B),Ie(ye),Ie(me),Ie(ye),Ie(ce),Ie(me);const fe=r.length/3,ke=x.generateSideWallUV(i,r,fe-6,fe-3,fe-2,fe-1);ue(ke[0]),ue(ke[1]),ue(ke[3]),ue(ke[1]),ue(ke[2]),ue(ke[3])}function Ie(B){r.push(l[B*3+0]),r.push(l[B*3+1]),r.push(l[B*3+2])}function ue(B){s.push(B.x),s.push(B.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return MG(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Dg[r.type]().fromJSON(r)),new I0(i,e.options)}}const wG={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],f=e[r*3+1];return[new Re(s,o),new Re(a,l),new Re(u,f)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[i*3],f=e[i*3+1],h=e[i*3+2],p=e[r*3],m=e[r*3+1],v=e[r*3+2],w=e[s*3],_=e[s*3+1],g=e[s*3+2];return Math.abs(a-f)<Math.abs(o-u)?[new Re(o,1-l),new Re(u,1-h),new Re(p,1-v),new Re(w,1-g)]:[new Re(a,1-l),new Re(f,1-h),new Re(m,1-v),new Re(_,1-g)]}};function MG(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class D0 extends ba{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new D0(e.radius,e.detail)}}class fh extends ba{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new fh(e.radius,e.detail)}}class U0 extends Tt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],f=[];let h=e;const p=(t-e)/r,m=new j,v=new Re;for(let w=0;w<=r;w++){for(let _=0;_<=i;_++){const g=s+_/i*o;m.x=h*Math.cos(g),m.y=h*Math.sin(g),l.push(m.x,m.y,m.z),u.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,f.push(v.x,v.y)}h+=p}for(let w=0;w<r;w++){const _=w*(i+1);for(let g=0;g<i;g++){const x=g+_,S=x,E=x+i+1,T=x+i+2,b=x+1;a.push(S,E,b),a.push(E,T,b)}}this.setIndex(a),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(u,3)),this.setAttribute("uv",new ot(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new U0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class N0 extends Tt{constructor(e=new Tl([new Re(0,.5),new Re(-.5,-.5),new Re(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let f=0;f<e.length;f++)u(e[f]),this.addGroup(a,l,f),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new ot(r,3)),this.setAttribute("normal",new ot(s,3)),this.setAttribute("uv",new ot(o,2));function u(f){const h=r.length/3,p=f.extractPoints(t);let m=p.shape;const v=p.holes;Os.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,g=v.length;_<g;_++){const x=v[_];Os.isClockWise(x)===!0&&(v[_]=x.reverse())}const w=Os.triangulateShape(m,v);for(let _=0,g=v.length;_<g;_++){const x=v[_];m=m.concat(x)}for(let _=0,g=m.length;_<g;_++){const x=m[_];r.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let _=0,g=w.length;_<g;_++){const x=w[_],S=x[0]+h,E=x[1]+h,T=x[2]+h;i.push(S,E,T),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return EG(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new N0(i,e.curveSegments)}}function EG(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class dh extends Tt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const f=[],h=new j,p=new j,m=[],v=[],w=[],_=[];for(let g=0;g<=i;g++){const x=[],S=g/i;let E=0;g===0&&o===0?E=.5/t:g===i&&l===Math.PI&&(E=-.5/t);for(let T=0;T<=t;T++){const b=T/t;h.x=-e*Math.cos(r+b*s)*Math.sin(o+S*a),h.y=e*Math.cos(o+S*a),h.z=e*Math.sin(r+b*s)*Math.sin(o+S*a),v.push(h.x,h.y,h.z),p.copy(h).normalize(),w.push(p.x,p.y,p.z),_.push(b+E,1-S),x.push(u++)}f.push(x)}for(let g=0;g<i;g++)for(let x=0;x<t;x++){const S=f[g][x+1],E=f[g][x],T=f[g+1][x],b=f[g+1][x+1];(g!==0||o>0)&&m.push(S,E,b),(g!==i-1||l<Math.PI)&&m.push(E,T,b)}this.setIndex(m),this.setAttribute("position",new ot(v,3)),this.setAttribute("normal",new ot(w,3)),this.setAttribute("uv",new ot(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dh(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class O0 extends ba{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new O0(e.radius,e.detail)}}class F0 extends Tt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],f=new j,h=new j,p=new j;for(let m=0;m<=i;m++)for(let v=0;v<=r;v++){const w=v/r*s,_=m/i*Math.PI*2;h.x=(e+t*Math.cos(_))*Math.cos(w),h.y=(e+t*Math.cos(_))*Math.sin(w),h.z=t*Math.sin(_),a.push(h.x,h.y,h.z),f.x=e*Math.cos(w),f.y=e*Math.sin(w),p.subVectors(h,f).normalize(),l.push(p.x,p.y,p.z),u.push(v/r),u.push(m/i)}for(let m=1;m<=i;m++)for(let v=1;v<=r;v++){const w=(r+1)*m+v-1,_=(r+1)*(m-1)+v-1,g=(r+1)*(m-1)+v,x=(r+1)*m+v;o.push(w,_,x),o.push(_,g,x)}this.setIndex(o),this.setAttribute("position",new ot(a,3)),this.setAttribute("normal",new ot(l,3)),this.setAttribute("uv",new ot(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new F0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class k0 extends Tt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],f=[],h=new j,p=new j,m=new j,v=new j,w=new j,_=new j,g=new j;for(let S=0;S<=i;++S){const E=S/i*s*Math.PI*2;x(E,s,o,e,m),x(E+.01,s,o,e,v),_.subVectors(v,m),g.addVectors(v,m),w.crossVectors(_,g),g.crossVectors(w,_),w.normalize(),g.normalize();for(let T=0;T<=r;++T){const b=T/r*Math.PI*2,P=-t*Math.cos(b),I=t*Math.sin(b);h.x=m.x+(P*g.x+I*w.x),h.y=m.y+(P*g.y+I*w.y),h.z=m.z+(P*g.z+I*w.z),l.push(h.x,h.y,h.z),p.subVectors(h,m).normalize(),u.push(p.x,p.y,p.z),f.push(S/i),f.push(T/r)}}for(let S=1;S<=i;S++)for(let E=1;E<=r;E++){const T=(r+1)*(S-1)+(E-1),b=(r+1)*S+(E-1),P=(r+1)*S+E,I=(r+1)*(S-1)+E;a.push(T,b,I),a.push(b,P,I)}this.setIndex(a),this.setAttribute("position",new ot(l,3)),this.setAttribute("normal",new ot(u,3)),this.setAttribute("uv",new ot(f,2));function x(S,E,T,b,P){const I=Math.cos(S),C=Math.sin(S),D=T/E*S,H=Math.cos(D);P.x=b*(2+H)*.5*I,P.y=b*(2+H)*C*.5,P.z=b*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new k0(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class B0 extends Tt{constructor(e=new lw(new j(-1,-1,0),new j(-1,1,0),new j(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new j,l=new j,u=new Re;let f=new j;const h=[],p=[],m=[],v=[];w(),this.setIndex(v),this.setAttribute("position",new ot(h,3)),this.setAttribute("normal",new ot(p,3)),this.setAttribute("uv",new ot(m,2));function w(){for(let S=0;S<t;S++)_(S);_(s===!1?t:0),x(),g()}function _(S){f=e.getPointAt(S/t,f);const E=o.normals[S],T=o.binormals[S];for(let b=0;b<=r;b++){const P=b/r*Math.PI*2,I=Math.sin(P),C=-Math.cos(P);l.x=C*E.x+I*T.x,l.y=C*E.y+I*T.y,l.z=C*E.z+I*T.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=f.x+i*l.x,a.y=f.y+i*l.y,a.z=f.z+i*l.z,h.push(a.x,a.y,a.z)}}function g(){for(let S=1;S<=t;S++)for(let E=1;E<=r;E++){const T=(r+1)*(S-1)+(E-1),b=(r+1)*S+(E-1),P=(r+1)*S+E,I=(r+1)*(S-1)+E;v.push(T,b,I),v.push(b,P,I)}}function x(){for(let S=0;S<=t;S++)for(let E=0;E<=r;E++)u.x=S/t,u.y=E/r,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new B0(new Dg[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class cw extends Tt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new j,s=new j;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,f=l.length;u<f;++u){const h=l[u],p=h.start,m=h.count;for(let v=p,w=p+m;v<w;v+=3)for(let _=0;_<3;_++){const g=a.getX(v+_),x=a.getX(v+(_+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,x),YT(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const f=3*a+u,h=3*a+(u+1)%3;r.fromBufferAttribute(o,f),s.fromBufferAttribute(o,h),YT(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new ot(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function YT(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var qT=Object.freeze({__proto__:null,BoxGeometry:zl,CapsuleGeometry:b0,CircleGeometry:C0,ConeGeometry:P0,CylinderGeometry:Ic,DodecahedronGeometry:R0,EdgesGeometry:mL,ExtrudeGeometry:I0,IcosahedronGeometry:D0,LatheGeometry:ch,OctahedronGeometry:fh,PlaneGeometry:Ta,PolyhedronGeometry:ba,RingGeometry:U0,ShapeGeometry:N0,SphereGeometry:dh,TetrahedronGeometry:O0,TorusGeometry:F0,TorusKnotGeometry:k0,TubeGeometry:B0,WireframeGeometry:cw});class xL extends hi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ke(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class _L extends ds{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class fw extends hi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ke(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Aa,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SL extends fw{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Re(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return An(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ke(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ke(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ke(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class wL extends hi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ke(16777215),this.specular=new Ke(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Aa,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=sh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ML extends hi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ke(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Aa,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class EL extends hi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Aa,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class AL extends hi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ke(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ke(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Aa,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=sh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class TL extends hi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ke(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Aa,this.normalScale=new Re(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bL extends Hi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function yl(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function CL(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function PL(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function f_(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function dw(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function AG(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],f=u.getValueSize(),h=[],p=[];for(let m=0;m<u.times.length;++m){const v=u.times[m]*r;if(!(v<t||v>=i)){h.push(u.times[m]);for(let w=0;w<f;++w)p.push(u.values[m*f+w])}}h.length!==0&&(u.times=yl(h,u.times.constructor),u.values=yl(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function TG(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let f=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=h/3);let p=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const v=a.times.length-1;let w;if(s<=a.times[0]){const g=f,x=h-f;w=a.values.slice(g,x)}else if(s>=a.times[v]){const g=v*h+f,x=g+h-f;w=a.values.slice(g,x)}else{const g=a.createInterpolant(),x=f,S=h-f;g.evaluate(s),w=g.resultBuffer.slice(x,S)}l==="quaternion"&&new rr().fromArray(w).normalize().conjugate().toArray(w);const _=u.times.length;for(let g=0;g<_;++g){const x=g*m+p;if(l==="quaternion")rr.multiplyQuaternionsFlat(u.values,x,w,0,u.values,x);else{const S=m-p*2;for(let E=0;E<S;++E)u.values[x+E]-=w[E]}}}return n.blendMode=WS,n}const bG={convertArray:yl,isTypedArray:CL,getKeyframeOrder:PL,sortedArray:f_,flattenJSON:dw,subclip:AG,makeClipAdditive:TG};class hh{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class RL extends hh{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ml,endingEnd:ml}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case gl:s=e,a=2*t-i;break;case Id:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case gl:o=e,l=2*i-t;break;case Id:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const u=(i-t)*.5,f=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=s*f,this._offsetNext=o*f}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,m=this._weightNext,v=(i-t)/(r-t),w=v*v,_=w*v,g=-p*_+2*p*w-p*v,x=(1+p)*_+(-1.5-2*p)*w+(-.5+p)*v+1,S=(-1-m)*_+(1.5+m)*w+.5*v,E=m*_-m*w;for(let T=0;T!==a;++T)s[T]=g*o[f+T]+x*o[u+T]+S*o[l+T]+E*o[h+T];return s}}class hw extends hh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,f=(i-t)/(r-t),h=1-f;for(let p=0;p!==a;++p)s[p]=o[u+p]*h+o[l+p]*f;return s}}class LL extends hh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ms{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=yl(t,this.TimeBufferType),this.values=yl(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:yl(e.times,Array),values:yl(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new LL(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new hw(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new RL(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Rd:t=this.InterpolantFactoryMethodDiscrete;break;case Ld:t=this.InterpolantFactoryMethodLinear;break;case Jm:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Rd;case this.InterpolantFactoryMethodLinear:return Ld;case this.InterpolantFactoryMethodSmooth:return Jm}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&CL(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Jm,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],f=e[a+1];if(u!==f&&(a!==1||u!==e[0]))if(r)l=!0;else{const h=a*i,p=h-i,m=h+i;for(let v=0;v!==i;++v){const w=t[h+v];if(w!==t[p+v]||w!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[h+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}ms.prototype.TimeBufferType=Float32Array;ms.prototype.ValueBufferType=Float32Array;ms.prototype.DefaultInterpolation=Ld;class Gl extends ms{}Gl.prototype.ValueTypeName="bool";Gl.prototype.ValueBufferType=Array;Gl.prototype.DefaultInterpolation=Rd;Gl.prototype.InterpolantFactoryMethodLinear=void 0;Gl.prototype.InterpolantFactoryMethodSmooth=void 0;class pw extends ms{}pw.prototype.ValueTypeName="color";class Wd extends ms{}Wd.prototype.ValueTypeName="number";class IL extends hh{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let u=e*a;for(let f=u+a;u!==f;u+=4)rr.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Dc extends ms{InterpolantFactoryMethodLinear(e){return new IL(this.times,this.values,this.getValueSize(),e)}}Dc.prototype.ValueTypeName="quaternion";Dc.prototype.DefaultInterpolation=Ld;Dc.prototype.InterpolantFactoryMethodSmooth=void 0;class Hl extends ms{}Hl.prototype.ValueTypeName="string";Hl.prototype.ValueBufferType=Array;Hl.prototype.DefaultInterpolation=Rd;Hl.prototype.InterpolantFactoryMethodLinear=void 0;Hl.prototype.InterpolantFactoryMethodSmooth=void 0;class jd extends ms{}jd.prototype.ValueTypeName="vector";class Xd{constructor(e,t=-1,i,r=h0){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=br(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(PG(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(ms.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const f=PL(l);l=f_(l,1,f),u=f_(u,1,f),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Wd(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],f=u.name.match(s);if(f&&f.length>1){const h=f[1];let p=r[h];p||(r[h]=p=[]),p.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,p,m,v,w){if(m.length!==0){const _=[],g=[];dw(m,_,g,v),_.length!==0&&w.push(new h(p,_,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const p=u[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let w=0;w<p[v].morphTargets.length;w++)m[p[v].morphTargets[w]]=-1;for(const w in m){const _=[],g=[];for(let x=0;x!==p[v].morphTargets.length;++x){const S=p[v];_.push(S.time),g.push(S.morphTarget===w?1:0)}r.push(new Wd(".morphTargetInfluence["+w+"]",_,g))}l=m.length*o}else{const m=".bones["+t[h].name+"]";i(jd,m+".position",p,"pos",r),i(Dc,m+".quaternion",p,"rot",r),i(jd,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function CG(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Wd;case"vector":case"vector2":case"vector3":case"vector4":return jd;case"color":return pw;case"quaternion":return Dc;case"bool":case"boolean":return Gl;case"string":return Hl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function PG(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=CG(n.type);if(n.times===void 0){const t=[],i=[];dw(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Fl={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class mw{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(f){a++,s===!1&&r.onStart!==void 0&&r.onStart(f,o,a),s=!0},this.itemEnd=function(f){o++,r.onProgress!==void 0&&r.onProgress(f,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(f){r.onError!==void 0&&r.onError(f)},this.resolveURL=function(f){return l?l(f):f},this.setURLModifier=function(f){return l=f,this},this.addHandler=function(f,h){return u.push(f,h),this},this.removeHandler=function(f){const h=u.indexOf(f);return h!==-1&&u.splice(h,2),this},this.getHandler=function(f){for(let h=0,p=u.length;h<p;h+=2){const m=u[h],v=u[h+1];if(m.global&&(m.lastIndex=0),m.test(f))return v}return null}}}const Zu=new mw;class ur{constructor(e){this.manager=e!==void 0?e:Zu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ur.DEFAULT_MATERIAL_NAME="__DEFAULT";const ro={};class RG extends Error{constructor(e,t){super(e),this.response=t}}class wo extends ur{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Fl.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ro[e]!==void 0){ro[e].push({onLoad:t,onProgress:i,onError:r});return}ro[e]=[],ro[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const f=ro[e],h=u.body.getReader(),p=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),m=p?parseInt(p):0,v=m!==0;let w=0;const _=new ReadableStream({start(g){x();function x(){h.read().then(({done:S,value:E})=>{if(S)g.close();else{w+=E.byteLength;const T=new ProgressEvent("progress",{lengthComputable:v,loaded:w,total:m});for(let b=0,P=f.length;b<P;b++){const I=f[b];I.onProgress&&I.onProgress(T)}g.enqueue(E),x()}})}}});return new Response(_)}else throw new RG(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(f=>new DOMParser().parseFromString(f,a));case"json":return u.json();default:if(a===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(p);return u.arrayBuffer().then(v=>m.decode(v))}}}).then(u=>{Fl.add(e,u);const f=ro[e];delete ro[e];for(let h=0,p=f.length;h<p;h++){const m=f[h];m.onLoad&&m.onLoad(u)}}).catch(u=>{const f=ro[e];if(f===void 0)throw this.manager.itemError(e),u;delete ro[e];for(let h=0,p=f.length;h<p;h++){const m=f[h];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class LG extends ur{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new wo(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Xd.parse(e[i]);t.push(r)}return t}}class IG extends ur{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new A0,l=new wo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function f(h){l.load(e[h],function(p){const m=s.parse(p,!0);o[h]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=pn),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let h=0,p=e.length;h<p;++h)f(h);else l.load(e,function(h){const p=s.parse(h,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let w=0;w<p.mipmapCount;w++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+w]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=pn),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class Yd extends ur{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Fl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=kd("img");function l(){f(),Fl.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(h){f(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function f(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class DG extends ur{constructor(e){super(e)}load(e,t,i,r){const s=new uh;s.colorSpace=jn;const o=new Yd(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(f){s.images[u]=f,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class UG extends ur{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new uc,a=new wo(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(f){if(r!==void 0)r(f);else{console.error(f);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Ei,o.wrapT=u.wrapT!==void 0?u.wrapT:Ei,o.magFilter=u.magFilter!==void 0?u.magFilter:pn,o.minFilter=u.minFilter!==void 0?u.minFilter:pn,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=ya),u.mipmapCount===1&&(o.minFilter=pn),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},i,r),o}}class NG extends ur{constructor(e){super(e)}load(e,t,i,r){const s=new yn,o=new Yd(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Ca extends Bt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ke(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class DL extends Ca{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Bt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ke(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Jy=new _t,ZT=new j,JT=new j;class gw{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Re(512,512),this.map=null,this.mapPass=null,this.matrix=new _t,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new g0,this._frameExtents=new Re(1,1),this._viewportCount=1,this._viewports=[new Dt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;ZT.setFromMatrixPosition(e.matrixWorld),t.position.copy(ZT),JT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(JT),t.updateMatrixWorld(),Jy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Jy),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Jy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class OG extends gw{constructor(){super(new zn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=_c*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class UL extends Ca{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Bt.DEFAULT_UP),this.updateMatrix(),this.target=new Bt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new OG}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const QT=new _t,Mf=new j,Qy=new j;class FG extends gw{constructor(){super(new zn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Re(4,2),this._viewportCount=6,this._viewports=[new Dt(2,1,1,1),new Dt(0,1,1,1),new Dt(3,1,1,1),new Dt(1,1,1,1),new Dt(3,0,1,1),new Dt(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Mf.setFromMatrixPosition(e.matrixWorld),i.position.copy(Mf),Qy.copy(i.position),Qy.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Qy),i.updateMatrixWorld(),r.makeTranslation(-Mf.x,-Mf.y,-Mf.z),QT.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(QT)}}class NL extends Ca{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new FG}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class kG extends gw{constructor(){super(new Vl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class OL extends Ca{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Bt.DEFAULT_UP),this.updateMatrix(),this.target=new Bt,this.shadow=new kG}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class FL extends Ca{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class kL extends Ca{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class BL{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new j)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class zL extends Ca{constructor(e=new BL,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class z0 extends ur{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new wo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=z0.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Ke().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new Ke().setHex(o.value);break;case"v2":r.uniforms[s].value=new Re().fromArray(o.value);break;case"v3":r.uniforms[s].value=new j().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Dt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Et().fromArray(o.value);break;case"m4":r.uniforms[s].value=new _t().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Re().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Re().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:xL,SpriteMaterial:nw,RawShaderMaterial:_L,ShaderMaterial:ds,PointsMaterial:E0,MeshPhysicalMaterial:SL,MeshStandardMaterial:fw,MeshPhongMaterial:wL,MeshToonMaterial:ML,MeshNormalMaterial:EL,MeshLambertMaterial:AL,MeshDepthMaterial:y0,MeshDistanceMaterial:x0,MeshBasicMaterial:To,MeshMatcapMaterial:TL,LineDashedMaterial:bL,LineBasicMaterial:Hi,Material:hi};return new t[e]}}class d_{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class V0 extends Tt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class VL extends ur{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new wo(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,v){if(t[v]!==void 0)return t[v];const _=m.interleavedBuffers[v],g=s(m,_.buffer),x=ju(_.type,g),S=new w0(x,_.stride);return S.uuid=_.uuid,t[v]=S,S}function s(m,v){if(i[v]!==void 0)return i[v];const _=m.arrayBuffers[v],g=new Uint32Array(_).buffer;return i[v]=g,g}const o=e.isInstancedBufferGeometry?new V0:new Tt,a=e.data.index;if(a!==void 0){const m=ju(a.type,a.array);o.setIndex(new qt(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let w;if(v.isInterleavedBufferAttribute){const _=r(e.data,v.data);w=new Ar(_,v.itemSize,v.offset,v.normalized)}else{const _=ju(v.type,v.array),g=v.isInstancedBufferAttribute?Nl:qt;w=new g(_,v.itemSize,v.normalized)}v.name!==void 0&&(w.name=v.name),v.usage!==void 0&&w.setUsage(v.usage),v.updateRange!==void 0&&(w.updateRange.offset=v.updateRange.offset,w.updateRange.count=v.updateRange.count),o.setAttribute(m,w)}const u=e.data.morphAttributes;if(u)for(const m in u){const v=u[m],w=[];for(let _=0,g=v.length;_<g;_++){const x=v[_];let S;if(x.isInterleavedBufferAttribute){const E=r(e.data,x.data);S=new Ar(E,x.itemSize,x.offset,x.normalized)}else{const E=ju(x.type,x.array);S=new qt(E,x.itemSize,x.normalized)}x.name!==void 0&&(S.name=x.name),w.push(S)}o.morphAttributes[m]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let m=0,v=h.length;m!==v;++m){const w=h[m];o.addGroup(w.start,w.count,w.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new j;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new lr(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class BG extends ur{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?d_.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new wo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const f=u.metadata;if(f===void 0||f.type===void 0||f.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?d_.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new wo(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),f=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,f),t!==void 0){let h=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Tl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new M0().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new VL;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in qT?a=qT[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new z0;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Xd.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(f)}else return l.data?{data:ju(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new mw(t);s=new Yd(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,f=e.length;u<f;u++){const h=e[u],p=h.url;if(Array.isArray(p)){const m=[];for(let v=0,w=p.length;v<w;v++){const _=p[v],g=a(_);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new uc(g.data,g.width,g.height)))}r[h.uuid]=new vl(m)}else{const m=a(h.url);r[h.uuid]=new vl(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:ju(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Yd(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const f=[];for(let h=0,p=u.length;h<p;h++){const m=u[h],v=await s(m);v!==null&&(v instanceof HTMLImageElement?f.push(v):f.push(new uc(v.data,v.width,v.height)))}i[l.uuid]=new vl(f)}else{const f=await s(l.url);i[l.uuid]=new vl(f)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let f;Array.isArray(u)?(f=new uh,u.length===6&&(f.needsUpdate=!0)):(u&&u.data?f=new uc:f=new yn,u&&(f.needsUpdate=!0)),f.source=l,f.uuid=a.uuid,a.name!==void 0&&(f.name=a.name),a.mapping!==void 0&&(f.mapping=i(a.mapping,zG)),a.channel!==void 0&&(f.channel=a.channel),a.offset!==void 0&&f.offset.fromArray(a.offset),a.repeat!==void 0&&f.repeat.fromArray(a.repeat),a.center!==void 0&&f.center.fromArray(a.center),a.rotation!==void 0&&(f.rotation=a.rotation),a.wrap!==void 0&&(f.wrapS=i(a.wrap[0],KT),f.wrapT=i(a.wrap[1],KT)),a.format!==void 0&&(f.format=a.format),a.internalFormat!==void 0&&(f.internalFormat=a.internalFormat),a.type!==void 0&&(f.type=a.type),a.colorSpace!==void 0&&(f.colorSpace=a.colorSpace),a.encoding!==void 0&&(f.encoding=a.encoding),a.minFilter!==void 0&&(f.minFilter=i(a.minFilter,$T)),a.magFilter!==void 0&&(f.magFilter=i(a.magFilter,$T)),a.anisotropy!==void 0&&(f.anisotropy=a.anisotropy),a.flipY!==void 0&&(f.flipY=a.flipY),a.generateMipmaps!==void 0&&(f.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(f.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(f.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(f.compareFunction=a.compareFunction),a.userData!==void 0&&(f.userData=a.userData),r[a.uuid]=f}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let v=0,w=p.length;v<w;v++){const _=p[v];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(i[_])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function u(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let f,h;switch(e.type){case"Scene":o=new Ig,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Ke(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new S0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new _0(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new zn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Vl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new FL(e.color,e.intensity);break;case"DirectionalLight":o=new OL(e.color,e.intensity);break;case"PointLight":o=new NL(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new kL(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new UL(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new DL(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new zL().fromJSON(e);break;case"SkinnedMesh":f=a(e.geometry),h=l(e.material),o=new oL(f,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":f=a(e.geometry),h=l(e.material),o=new Dn(f,h);break;case"InstancedMesh":f=a(e.geometry),h=l(e.material);const p=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new aL(f,h,p),o.instanceMatrix=new Nl(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new Nl(new Float32Array(v.array),v.itemSize));break;case"LOD":o=new sL;break;case"Line":o=new xa(a(e.geometry),l(e.material));break;case"LineLoop":o=new lL(a(e.geometry),l(e.material));break;case"LineSegments":o=new zs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new uL(a(e.geometry),l(e.material));break;case"Sprite":o=new rL(l(e.material));break;case"Group":o=new Yu;break;case"Bone":o=new iw;break;default:o=new Bt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const v=p[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const v=p[m],w=o.getObjectByProperty("uuid",v.object);w!==void 0&&o.addLevel(w,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const zG={UVMapping:f0,CubeReflectionMapping:So,CubeRefractionMapping:va,EquirectangularReflectionMapping:Td,EquirectangularRefractionMapping:bd,CubeUVReflectionMapping:Pc},KT={RepeatWrapping:Cd,ClampToEdgeWrapping:Ei,MirroredRepeatWrapping:Pd},$T={NearestFilter:Ln,NearestMipmapNearestFilter:Pg,NearestMipmapLinearFilter:Jf,LinearFilter:pn,LinearMipmapNearestFilter:FS,LinearMipmapLinearFilter:ya};class VG extends ur{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Fl.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Fl.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let dm;class vw{static getContext(){return dm===void 0&&(dm=new(window.AudioContext||window.webkitAudioContext)),dm}static setContext(e){dm=e}}class GG extends ur{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new wo(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);vw.getContext().decodeAudioData(u,function(h){t(h)},a)}catch(u){a(u)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const e2=new _t,t2=new _t,Ja=new _t;class HG{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new zn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new zn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Ja.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(El*t.fov*.5)/t.zoom;let a,l;t2.elements[12]=-r,e2.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Ja.elements[0]=2*t.near/(l-a),Ja.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Ja),a=-o*t.aspect-s,l=o*t.aspect-s,Ja.elements[0]=2*t.near/(l-a),Ja.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Ja)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(t2),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(e2)}}class yw{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=n2(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=n2();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function n2(){return(typeof performance>"u"?Date:performance).now()}const Qa=new j,i2=new rr,WG=new j,Ka=new j;class jG extends Bt{constructor(){super(),this.type="AudioListener",this.context=vw.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new yw}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Qa,i2,WG),Ka.set(0,0,-1).applyQuaternion(i2),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Qa.x,r),t.positionY.linearRampToValueAtTime(Qa.y,r),t.positionZ.linearRampToValueAtTime(Qa.z,r),t.forwardX.linearRampToValueAtTime(Ka.x,r),t.forwardY.linearRampToValueAtTime(Ka.y,r),t.forwardZ.linearRampToValueAtTime(Ka.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Qa.x,Qa.y,Qa.z),t.setOrientation(Ka.x,Ka.y,Ka.z,i.x,i.y,i.z)}}class GL extends Bt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const $a=new j,r2=new rr,XG=new j,el=new j;class YG extends GL{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose($a,r2,XG),el.set(0,0,1).applyQuaternion(r2);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime($a.x,i),t.positionY.linearRampToValueAtTime($a.y,i),t.positionZ.linearRampToValueAtTime($a.z,i),t.orientationX.linearRampToValueAtTime(el.x,i),t.orientationY.linearRampToValueAtTime(el.y,i),t.orientationZ.linearRampToValueAtTime(el.z,i)}else t.setPosition($a.x,$a.y,$a.z),t.setOrientation(el.x,el.y,el.z)}}class qG{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class HL{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){rr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;rr.multiplyQuaternionsFlat(e,o,e,t,e,i),rr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const xw="\\[\\]\\.:\\/",ZG=new RegExp("["+xw+"]","g"),_w="[^"+xw+"]",JG="[^"+xw.replace("\\.","")+"]",QG=/((?:WC+[\/:])*)/.source.replace("WC",_w),KG=/(WCOD+)?/.source.replace("WCOD",JG),$G=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_w),eH=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_w),tH=new RegExp("^"+QG+KG+$G+eH+"$"),nH=["material","materials","bones","map"];class iH{constructor(e,t,i){const r=i||Nt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Nt{constructor(e,t,i){this.path=t,this.parsedPath=i||Nt.parseTrackName(t),this.node=Nt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Nt.Composite(e,t,i):new Nt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(ZG,"")}static parseTrackName(e){const t=tH.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);nH.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Nt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let f=0;f<e.length;f++)if(e[f].name===u){u=f;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nt.Composite=iH;Nt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Nt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Nt.prototype.GetterByBindingType=[Nt.prototype._getValue_direct,Nt.prototype._getValue_array,Nt.prototype._getValue_arrayElement,Nt.prototype._getValue_toArray];Nt.prototype.SetterByBindingTypeAndVersioning=[[Nt.prototype._setValue_direct,Nt.prototype._setValue_direct_setNeedsUpdate,Nt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_array,Nt.prototype._setValue_array_setNeedsUpdate,Nt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_arrayElement,Nt.prototype._setValue_arrayElement_setNeedsUpdate,Nt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_fromArray,Nt.prototype._setValue_fromArray_setNeedsUpdate,Nt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class rH{constructor(){this.isAnimationObjectGroup=!0,this.uuid=br(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let f=0,h=arguments.length;f!==h;++f){const p=arguments[f],m=p.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(p);for(let w=0,_=o;w!==_;++w)s[w].push(new Nt(p,i[w],r[w]))}else if(v<u){a=e[v];const w=--u,_=e[w];t[_.uuid]=v,e[v]=_,t[m]=w,e[w]=p;for(let g=0,x=o;g!==x;++g){const S=s[g],E=S[w];let T=S[v];S[v]=E,T===void 0&&(T=new Nt(p,i[g],r[g])),S[w]=T}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,f=t[u];if(f!==void 0&&f>=s){const h=s++,p=e[h];t[p.uuid]=f,e[f]=p,t[u]=h,e[h]=l;for(let m=0,v=r;m!==v;++m){const w=i[m],_=w[h],g=w[f];w[f]=_,w[h]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],f=u.uuid,h=t[f];if(h!==void 0)if(delete t[f],h<s){const p=--s,m=e[p],v=--o,w=e[v];t[m.uuid]=h,e[h]=m,t[w.uuid]=p,e[p]=w,e.pop();for(let _=0,g=r;_!==g;++_){const x=i[_],S=x[p],E=x[v];x[h]=S,x[p]=E,x.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=h),e[h]=m,e.pop();for(let v=0,w=r;v!==w;++v){const _=i[v];_[h]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,f=this.nCachedObjects_,h=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(h);for(let p=f,m=l.length;p!==m;++p){const v=l[p];h[p]=new Nt(v,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class WL{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:ml,endingEnd:ml};for(let u=0;u!==o;++u){const f=s[u].createInterpolant(null);a[u]=f,f.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=P3,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case WS:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(o),u[f].accumulateAdditive(a);break;case h0:default:for(let f=0,h=l.length;f!==h;++f)l[f].evaluate(o),u[f].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===R3;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===C3){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=gl,r.endingEnd=gl):(e?r.endingStart=this.zeroSlopeAtStart?gl:ml:r.endingStart=Id,t?r.endingEnd=this.zeroSlopeAtEnd?gl:ml:r.endingEnd=Id)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const sH=new Float32Array(1);class oH extends Ao{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let f=u[l];f===void 0&&(f={},u[l]=f);for(let h=0;h!==s;++h){const p=r[h],m=p.name;let v=f[m];if(v!==void 0)++v.referenceCount,o[h]=v;else{if(v=o[h],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const w=t&&t._propertyBindings[h].binding.parsedPath;v=new HL(Nt.create(i,m,w),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[h]=v}a[h].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],f=e._byClipCacheIndex;u._byClipCacheIndex=f,l[f]=u,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete h[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new hw(new Float32Array(2),new Float32Array(2),1,sH),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Xd.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=h0),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const f=new WL(this,o,t,i);return this._bindAction(f,u),this._addInactiveAction(f,a,s),f}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Xd.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const f=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=f,t[f]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Sw{constructor(e){this.value=e}clone(){return new Sw(this.value.clone===void 0?this.value:this.value.clone())}}let aH=0;class lH extends Ao{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:aH++}),this.name="",this.usage=Od,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class Ug extends w0{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class uH{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class jL{constructor(e,t,i=0,r=1/0){this.ray=new Rc(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Al,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return h_(e,this,i,t),i.sort(s2),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)h_(e[r],this,i,t);return i.sort(s2),i}}function s2(n,e){return n.distance-e.distance}function h_(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)h_(r[s],e,t,!0)}}class cH{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(An(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class fH{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const o2=new Re;class dH{constructor(e=new Re(1/0,1/0),t=new Re(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=o2.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,o2).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const a2=new j,hm=new j;class XL{constructor(e=new j,t=new j){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){a2.subVectors(e,this.start),hm.subVectors(this.end,this.start);const i=hm.dot(hm);let s=hm.dot(a2)/i;return t&&(s=An(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const l2=new j;class hH extends Bt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Tt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,f=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(f),Math.sin(f),1)}i.setAttribute("position",new ot(r,3));const s=new Hi({fog:!1,toneMapped:!1});this.cone=new zs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),l2.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(l2),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Ho=new j,pm=new _t,Ky=new _t;class pH extends zs{constructor(e){const t=YL(e),i=new Tt,r=[],s=[],o=new Ke(0,0,1),a=new Ke(0,1,0);for(let u=0;u<t.length;u++){const f=t[u];f.parent&&f.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new ot(r,3)),i.setAttribute("color",new ot(s,3));const l=new Hi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Ky.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(pm.multiplyMatrices(Ky,a.matrixWorld),Ho.setFromMatrixPosition(pm),r.setXYZ(o,Ho.x,Ho.y,Ho.z),pm.multiplyMatrices(Ky,a.parent.matrixWorld),Ho.setFromMatrixPosition(pm),r.setXYZ(o+1,Ho.x,Ho.y,Ho.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function YL(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,YL(n.children[t]));return e}class mH extends Dn{constructor(e,t,i){const r=new dh(t,4,2),s=new To({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const gH=new j,u2=new Ke,c2=new Ke;class vH extends Bt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new fh(t);r.rotateY(Math.PI*.5),this.material=new To({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new qt(o,3)),this.add(new Dn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");u2.copy(this.light.color),c2.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?u2:c2;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(gH.setFromMatrixPosition(this.light.matrixWorld).negate())}}class yH extends zs{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ke(i),r=new Ke(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let p=0,m=0,v=-a;p<=t;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const w=p===s?i:r;w.toArray(u,m),m+=3,w.toArray(u,m),m+=3,w.toArray(u,m),m+=3,w.toArray(u,m),m+=3}const f=new Tt;f.setAttribute("position",new ot(l,3)),f.setAttribute("color",new ot(u,3));const h=new Hi({vertexColors:!0,toneMapped:!1});super(f,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class xH extends zs{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new Ke(s),o=new Ke(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const p=h/t*(Math.PI*2),m=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,v);const w=h&1?s:o;l.push(w.r,w.g,w.b),l.push(w.r,w.g,w.b)}for(let h=0;h<i;h++){const p=h&1?s:o,m=e-e/i*h;for(let v=0;v<r;v++){let w=v/r*(Math.PI*2),_=Math.sin(w)*m,g=Math.cos(w)*m;a.push(_,0,g),l.push(p.r,p.g,p.b),w=(v+1)/r*(Math.PI*2),_=Math.sin(w)*m,g=Math.cos(w)*m,a.push(_,0,g),l.push(p.r,p.g,p.b)}}const u=new Tt;u.setAttribute("position",new ot(a,3)),u.setAttribute("color",new ot(l,3));const f=new Hi({vertexColors:!0,toneMapped:!1});super(u,f),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const f2=new j,mm=new j,d2=new j;class _H extends Bt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Tt;r.setAttribute("position",new ot([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Hi({fog:!1,toneMapped:!1});this.lightPlane=new xa(r,s),this.add(this.lightPlane),r=new Tt,r.setAttribute("position",new ot([0,0,0,0,0,1],3)),this.targetLine=new xa(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),f2.setFromMatrixPosition(this.light.matrixWorld),mm.setFromMatrixPosition(this.light.target.matrixWorld),d2.subVectors(mm,f2),this.lightPlane.lookAt(mm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(mm),this.targetLine.scale.z=d2.length()}}const gm=new j,Mn=new lh;class SH extends zs{constructor(e){const t=new Tt,i=new Hi({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,w){l(v),l(w)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new ot(r,3)),t.setAttribute("color",new ot(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new Ke(16755200),f=new Ke(16711680),h=new Ke(43775),p=new Ke(16777215),m=new Ke(3355443);this.setColors(u,f,h,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Mn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Rn("c",t,e,Mn,0,0,-1),Rn("t",t,e,Mn,0,0,1),Rn("n1",t,e,Mn,-i,-r,-1),Rn("n2",t,e,Mn,i,-r,-1),Rn("n3",t,e,Mn,-i,r,-1),Rn("n4",t,e,Mn,i,r,-1),Rn("f1",t,e,Mn,-i,-r,1),Rn("f2",t,e,Mn,i,-r,1),Rn("f3",t,e,Mn,-i,r,1),Rn("f4",t,e,Mn,i,r,1),Rn("u1",t,e,Mn,i*.7,r*1.1,-1),Rn("u2",t,e,Mn,-i*.7,r*1.1,-1),Rn("u3",t,e,Mn,0,r*2,-1),Rn("cf1",t,e,Mn,-i,0,1),Rn("cf2",t,e,Mn,i,0,1),Rn("cf3",t,e,Mn,0,-r,1),Rn("cf4",t,e,Mn,0,r,1),Rn("cn1",t,e,Mn,-i,0,-1),Rn("cn2",t,e,Mn,i,0,-1),Rn("cn3",t,e,Mn,0,-r,-1),Rn("cn4",t,e,Mn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Rn(n,e,t,i,r,s,o){gm.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,f=a.length;u<f;u++)l.setXYZ(a[u],gm.x,gm.y,gm.z)}}const vm=new ar;class wH extends zs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Tt;s.setIndex(new qt(i,1)),s.setAttribute("position",new qt(r,3)),super(s,new Hi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&vm.setFromObject(this.object),vm.isEmpty())return;const t=vm.min,i=vm.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class MH extends zs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Tt;s.setIndex(new qt(i,1)),s.setAttribute("position",new ot(r,3)),super(s,new Hi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class EH extends xa{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Tt;o.setAttribute("position",new ot(s,3)),o.computeBoundingSphere(),super(o,new Hi({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Tt;l.setAttribute("position",new ot(a,3)),l.computeBoundingSphere(),this.add(new Dn(l,new To({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const h2=new j;let ym,$y;class AH extends Bt{constructor(e=new j(0,0,1),t=new j(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",ym===void 0&&(ym=new Tt,ym.setAttribute("position",new ot([0,0,0,0,1,0],3)),$y=new Ic(0,.5,1,5,1),$y.translate(0,-.5,0)),this.position.copy(t),this.line=new xa(ym,new Hi({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Dn($y,new To({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{h2.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(h2,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class TH extends zs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Tt;r.setAttribute("position",new ot(t,3)),r.setAttribute("color",new ot(i,3));const s=new Hi({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Ke,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class bH{constructor(){this.type="ShapePath",this.color=new Ke,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new zd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const x=[];for(let S=0,E=g.length;S<E;S++){const T=g[S],b=new Tl;b.curves=T.curves,x.push(b)}return x}function i(g,x){const S=x.length;let E=!1;for(let T=S-1,b=0;b<S;T=b++){let P=x[T],I=x[b],C=I.x-P.x,D=I.y-P.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(P=x[b],C=-C,I=x[T],D=-D),g.y<P.y||g.y>I.y)continue;if(g.y===P.y){if(g.x===P.x)return!0}else{const H=D*(g.x-P.x)-C*(g.y-P.y);if(H===0)return!0;if(H<0)continue;E=!E}}else{if(g.y!==P.y)continue;if(I.x<=g.x&&g.x<=P.x||P.x<=g.x&&g.x<=I.x)return!0}}return E}const r=Os.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new Tl,l.curves=a.curves,u.push(l),u;let f=!r(s[0].getPoints());f=e?!f:f;const h=[],p=[];let m=[],v=0,w;p[v]=void 0,m[v]=[];for(let g=0,x=s.length;g<x;g++)a=s[g],w=a.getPoints(),o=r(w),o=e?!o:o,o?(!f&&p[v]&&v++,p[v]={s:new Tl,p:w},p[v].s.curves=a.curves,f&&v++,m[v]=[]):m[v].push({h:a,p:w[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,x=0;for(let S=0,E=p.length;S<E;S++)h[S]=[];for(let S=0,E=p.length;S<E;S++){const T=m[S];for(let b=0;b<T.length;b++){const P=T[b];let I=!0;for(let C=0;C<p.length;C++)i(P.p,p[C].p)&&(S!==C&&x++,I?(I=!1,h[C].push(P)):g=!0);I&&h[S].push(P)}}x>0&&g===!1&&(m=h)}let _;for(let g=0,x=p.length;g<x;g++){l=p[g].s,u.push(l),_=m[g];for(let S=0,E=_.length;S<E;S++)l.holes.push(_[S].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Cc}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Cc);const CH=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:OS,AddEquation:$o,AddOperation:h3,AdditiveAnimationBlendMode:WS,AdditiveBlending:Tx,AlphaFormat:S3,AlwaysCompare:z3,AlwaysDepth:o3,AlwaysStencilFunc:i_,AmbientLight:FL,AnimationAction:WL,AnimationClip:Xd,AnimationLoader:LG,AnimationMixer:oH,AnimationObjectGroup:rH,AnimationUtils:bG,ArcCurve:cL,ArrayCamera:eL,ArrowHelper:AH,AttachedBindMode:Lx,Audio:GL,AudioAnalyser:qG,AudioContext:vw,AudioListener:jG,AudioLoader:GG,AxesHelper:TH,BackSide:Ai,BasicDepthPacking:L3,BasicShadowMap:GR,Bone:iw,BooleanKeyframeTrack:Gl,Box2:dH,Box3:ar,Box3Helper:MH,BoxGeometry:zl,BoxHelper:wH,BufferAttribute:qt,BufferGeometry:Tt,BufferGeometryLoader:VL,ByteType:x3,Cache:Fl,Camera:lh,CameraHelper:SH,CanvasTexture:QV,CapsuleGeometry:b0,CatmullRomCurve3:fL,CineonToneMapping:g3,CircleGeometry:C0,ClampToEdgeWrapping:Ei,Clock:yw,Color:Ke,ColorKeyframeTrack:pw,ColorManagement:Ht,CompressedArrayTexture:ZV,CompressedCubeTexture:JV,CompressedTexture:A0,CompressedTextureLoader:IG,ConeGeometry:P0,ConstantAlphaFactor:i3,ConstantColorFactor:t3,CubeCamera:KS,CubeReflectionMapping:So,CubeRefractionMapping:va,CubeTexture:uh,CubeTextureLoader:DG,CubeUVReflectionMapping:Pc,CubicBezierCurve:sw,CubicBezierCurve3:dL,CubicInterpolant:RL,CullFaceBack:Ax,CullFaceFront:VR,CullFaceFrontBack:ZF,CullFaceNone:zR,Curve:ps,CurvePath:pL,CustomBlending:HR,CustomToneMapping:v3,CylinderGeometry:Ic,Cylindrical:fH,Data3DTexture:ZS,DataArrayTexture:m0,DataTexture:uc,DataTextureLoader:UG,DataUtils:n4,DecrementStencilOp:ak,DecrementWrapStencilOp:uk,DefaultLoadingManager:Zu,DepthFormat:fa,DepthStencilFormat:Ul,DepthTexture:tL,DetachedBindMode:y3,DirectionalLight:OL,DirectionalLightHelper:_H,DiscreteInterpolant:LL,DisplayP3ColorSpace:p0,DodecahedronGeometry:R0,DoubleSide:wr,DstAlphaFactor:JR,DstColorFactor:KR,DynamicCopyUsage:Mk,DynamicDrawUsage:Ml,DynamicReadUsage:_k,EdgesGeometry:mL,EllipseCurve:T0,EqualCompare:N3,EqualDepth:l3,EqualStencilFunc:hk,EquirectangularReflectionMapping:Td,EquirectangularRefractionMapping:bd,Euler:ah,EventDispatcher:Ao,ExtrudeGeometry:I0,FileLoader:wo,Float16BufferAttribute:l4,Float32BufferAttribute:ot,Float64BufferAttribute:u4,FloatType:Rs,Fog:S0,FogExp2:_0,FramebufferTexture:qV,FrontSide:ks,Frustum:g0,GLBufferAttribute:uH,GLSL1:Ak,GLSL3:r_,GreaterCompare:F3,GreaterDepth:c3,GreaterEqualCompare:B3,GreaterEqualDepth:u3,GreaterEqualStencilFunc:vk,GreaterStencilFunc:mk,GridHelper:yH,Group:Yu,HalfFloatType:xc,HemisphereLight:DL,HemisphereLightHelper:vH,IcosahedronGeometry:D0,ImageBitmapLoader:VG,ImageLoader:Yd,ImageUtils:qS,IncrementStencilOp:ok,IncrementWrapStencilOp:lk,InstancedBufferAttribute:Nl,InstancedBufferGeometry:V0,InstancedInterleavedBuffer:Ug,InstancedMesh:aL,Int16BufferAttribute:o4,Int32BufferAttribute:a4,Int8BufferAttribute:i4,IntType:kS,InterleavedBuffer:w0,InterleavedBufferAttribute:Ar,Interpolant:hh,InterpolateDiscrete:Rd,InterpolateLinear:Ld,InterpolateSmooth:Jm,InvertStencilOp:ck,KeepStencilOp:ol,KeyframeTrack:ms,LOD:sL,LatheGeometry:ch,Layers:Al,LessCompare:U3,LessDepth:a3,LessEqualCompare:O3,LessEqualDepth:Ad,LessEqualStencilFunc:pk,LessStencilFunc:dk,Light:Ca,LightProbe:zL,Line:xa,Line3:XL,LineBasicMaterial:Hi,LineCurve:ow,LineCurve3:hL,LineDashedMaterial:bL,LineLoop:lL,LineSegments:zs,LinearDisplayP3ColorSpace:oh,LinearEncoding:jS,LinearFilter:pn,LinearInterpolant:hw,LinearMipMapLinearFilter:ek,LinearMipMapNearestFilter:$F,LinearMipmapLinearFilter:ya,LinearMipmapNearestFilter:FS,LinearSRGBColorSpace:Bs,LinearToneMapping:p3,LinearTransfer:Dd,Loader:ur,LoaderUtils:d_,LoadingManager:mw,LoopOnce:C3,LoopPingPong:R3,LoopRepeat:P3,LuminanceAlphaFormat:M3,LuminanceFormat:w3,MOUSE:YF,Material:hi,MaterialLoader:z0,MathUtils:G3,Matrix3:Et,Matrix4:_t,MaxEquation:Rx,Mesh:Dn,MeshBasicMaterial:To,MeshDepthMaterial:y0,MeshDistanceMaterial:x0,MeshLambertMaterial:AL,MeshMatcapMaterial:TL,MeshNormalMaterial:EL,MeshPhongMaterial:wL,MeshPhysicalMaterial:SL,MeshStandardMaterial:fw,MeshToonMaterial:ML,MinEquation:Px,MirroredRepeatWrapping:Pd,MixOperation:d3,MultiplyBlending:Cx,MultiplyOperation:sh,NearestFilter:Ln,NearestMipMapLinearFilter:KF,NearestMipMapNearestFilter:QF,NearestMipmapLinearFilter:Jf,NearestMipmapNearestFilter:Pg,NeverCompare:D3,NeverDepth:s3,NeverStencilFunc:fk,NoBlending:po,NoColorSpace:Mr,NoToneMapping:Us,NormalAnimationBlendMode:h0,NormalBlending:wl,NotEqualCompare:k3,NotEqualDepth:f3,NotEqualStencilFunc:gk,NumberKeyframeTrack:Wd,Object3D:Bt,ObjectLoader:BG,ObjectSpaceNormalMap:I3,OctahedronGeometry:fh,OneFactor:YR,OneMinusConstantAlphaFactor:r3,OneMinusConstantColorFactor:n3,OneMinusDstAlphaFactor:QR,OneMinusDstColorFactor:$R,OneMinusSrcAlphaFactor:Cg,OneMinusSrcColorFactor:ZR,OrthographicCamera:Vl,P3Primaries:Nd,PCFShadowMap:c0,PCFSoftShadowMap:Zf,PMREMGenerator:o_,Path:zd,PerspectiveCamera:zn,Plane:Zo,PlaneGeometry:Ta,PlaneHelper:EH,PointLight:NL,PointLightHelper:mH,Points:uL,PointsMaterial:E0,PolarGridHelper:xH,PolyhedronGeometry:ba,PositionalAudio:YG,PropertyBinding:Nt,PropertyMixer:HL,QuadraticBezierCurve:aw,QuadraticBezierCurve3:lw,Quaternion:rr,QuaternionKeyframeTrack:Dc,QuaternionLinearInterpolant:IL,RED_GREEN_RGTC2_Format:t_,RED_RGTC1_Format:b3,REVISION:Cc,RGBADepthPacking:XS,RGBAFormat:Ki,RGBAIntegerFormat:HS,RGBA_ASTC_10x10_Format:Zx,RGBA_ASTC_10x5_Format:Xx,RGBA_ASTC_10x6_Format:Yx,RGBA_ASTC_10x8_Format:qx,RGBA_ASTC_12x10_Format:Jx,RGBA_ASTC_12x12_Format:Qx,RGBA_ASTC_4x4_Format:kx,RGBA_ASTC_5x4_Format:Bx,RGBA_ASTC_5x5_Format:zx,RGBA_ASTC_6x5_Format:Vx,RGBA_ASTC_6x6_Format:Gx,RGBA_ASTC_8x5_Format:Hx,RGBA_ASTC_8x6_Format:Wx,RGBA_ASTC_8x8_Format:jx,RGBA_BPTC_Format:Zm,RGBA_ETC2_EAC_Format:Fx,RGBA_PVRTC_2BPPV1_Format:Nx,RGBA_PVRTC_4BPPV1_Format:Ux,RGBA_S3TC_DXT1_Format:Xm,RGBA_S3TC_DXT3_Format:Ym,RGBA_S3TC_DXT5_Format:qm,RGB_BPTC_SIGNED_Format:Kx,RGB_BPTC_UNSIGNED_Format:$x,RGB_ETC1_Format:T3,RGB_ETC2_Format:Ox,RGB_PVRTC_2BPPV1_Format:Dx,RGB_PVRTC_4BPPV1_Format:Ix,RGB_S3TC_DXT1_Format:jm,RGFormat:A3,RGIntegerFormat:GS,RawShaderMaterial:_L,Ray:Rc,Raycaster:jL,Rec709Primaries:Ud,RectAreaLight:kL,RedFormat:E3,RedIntegerFormat:VS,ReinhardToneMapping:m3,RenderTarget:j3,RepeatWrapping:Cd,ReplaceStencilOp:sk,ReverseSubtractEquation:jR,RingGeometry:U0,SIGNED_RED_GREEN_RGTC2_Format:n_,SIGNED_RED_RGTC1_Format:e_,SRGBColorSpace:jn,SRGBTransfer:Qt,Scene:Ig,ShaderChunk:Mt,ShaderLib:os,ShaderMaterial:ds,ShadowMaterial:xL,Shape:Tl,ShapeGeometry:N0,ShapePath:bH,ShapeUtils:Os,ShortType:_3,Skeleton:M0,SkeletonHelper:pH,SkinnedMesh:oL,Source:vl,Sphere:lr,SphereGeometry:dh,Spherical:cH,SphericalHarmonics3:BL,SplineCurve:uw,SpotLight:UL,SpotLightHelper:hH,Sprite:rL,SpriteMaterial:nw,SrcAlphaFactor:bg,SrcAlphaSaturateFactor:e3,SrcColorFactor:qR,StaticCopyUsage:wk,StaticDrawUsage:Od,StaticReadUsage:xk,StereoCamera:HG,StreamCopyUsage:Ek,StreamDrawUsage:yk,StreamReadUsage:Sk,StringKeyframeTrack:Hl,SubtractEquation:WR,SubtractiveBlending:bx,TOUCH:qF,TangentSpaceNormalMap:Aa,TetrahedronGeometry:O0,Texture:yn,TextureLoader:NG,TorusGeometry:F0,TorusKnotGeometry:k0,Triangle:Qi,TriangleFanDrawMode:ik,TriangleStripDrawMode:nk,TrianglesDrawMode:tk,TubeGeometry:B0,TwoPassDoubleSide:JF,UVMapping:f0,Uint16BufferAttribute:JS,Uint32BufferAttribute:QS,Uint8BufferAttribute:r4,Uint8ClampedBufferAttribute:s4,Uniform:Sw,UniformsGroup:lH,UniformsLib:qe,UniformsUtils:Bd,UnsignedByteType:Ns,UnsignedInt248Type:ca,UnsignedIntType:co,UnsignedShort4444Type:BS,UnsignedShort5551Type:zS,UnsignedShortType:d0,VSMShadowMap:is,Vector2:Re,Vector3:j,Vector4:Dt,VectorKeyframeTrack:jd,VideoTexture:YV,WebGL1Renderer:nL,WebGL3DRenderTarget:Wk,WebGLArrayRenderTarget:Hk,WebGLCoordinateSystem:Ls,WebGLCubeRenderTarget:$S,WebGLMultipleRenderTargets:jk,WebGLRenderTarget:fs,WebGLRenderer:tw,WebGLUtils:$3,WebGPUCoordinateSystem:Fd,WireframeGeometry:cw,WrapAroundEnding:Id,ZeroCurvatureEnding:ml,ZeroFactor:XR,ZeroSlopeEnding:gl,ZeroStencilOp:rk,_SRGBAFormat:Rg,createCanvasElement:W3,sRGBEncoding:da},Symbol.toStringTag,{value:"Module"}));var qL={exports:{}},Wl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Wl.ConcurrentRoot=1;Wl.ContinuousEventPriority=4;Wl.DefaultEventPriority=16;Wl.DiscreteEventPriority=1;Wl.IdleEventPriority=536870912;Wl.LegacyRoot=0;qL.exports=Wl;var Ju=qL.exports;function PH(n){let e;const t=new Set,i=(u,f)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const p=e;e=f?h:Object.assign({},e,h),t.forEach(m=>m(e,p))}},r=()=>e,s=(u,f=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=f(e);function m(){const v=f(e);if(!h(p,v)){const w=p;u(p=v,w)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(u,f,h)=>f||h?s(u,f,h):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const RH=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),p2=RH?X.useEffect:X.useLayoutEffect;function ZL(n){const e=typeof n=="function"?PH(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=X.useReducer(_=>_+1,0),o=e.getState(),a=X.useRef(o),l=X.useRef(i),u=X.useRef(r),f=X.useRef(!1),h=X.useRef();h.current===void 0&&(h.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||u.current!==r||f.current)&&(p=i(o),m=!r(h.current,p)),p2(()=>{m&&(h.current=p),a.current=o,l.current=i,u.current=r,f.current=!1});const v=X.useRef(o);p2(()=>{const _=()=>{try{const x=e.getState(),S=l.current(x);u.current(h.current,S)||(a.current=x,h.current=S,s())}catch{f.current=!0,s()}},g=e.subscribe(_);return e.getState()!==v.current&&_(),g},[]);const w=m?p:h.current;return X.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var JL={exports:{}},e1={exports:{}},t1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m2;function LH(){return m2||(m2=1,function(n){function e(N,O){var V=N.length;N.push(O);e:for(;0<V;){var L=V-1>>>1,k=N[L];if(0<r(k,O))N[L]=O,N[V]=k,V=L;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var O=N[0],V=N.pop();if(V!==O){N[0]=V;e:for(var L=0,k=N.length,K=k>>>1;L<K;){var ie=2*(L+1)-1,$=N[ie],le=ie+1,oe=N[le];if(0>r($,V))le<k&&0>r(oe,$)?(N[L]=oe,N[le]=V,L=le):(N[L]=$,N[ie]=V,L=ie);else if(le<k&&0>r(oe,V))N[L]=oe,N[le]=V,L=le;else break e}}return O}function r(N,O){var V=N.sortIndex-O.sortIndex;return V!==0?V:N.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,h=null,p=3,m=!1,v=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(N){for(var O=t(u);O!==null;){if(O.callback===null)i(u);else if(O.startTime<=N)i(u),O.sortIndex=O.expirationTime,e(l,O);else break;O=t(u)}}function E(N){if(w=!1,S(N),!v)if(t(l)!==null)v=!0,J(T);else{var O=t(u);O!==null&&ne(E,O.startTime-N)}}function T(N,O){v=!1,w&&(w=!1,g(I),I=-1),m=!0;var V=p;try{for(S(O),h=t(l);h!==null&&(!(h.expirationTime>O)||N&&!H());){var L=h.callback;if(typeof L=="function"){h.callback=null,p=h.priorityLevel;var k=L(h.expirationTime<=O);O=n.unstable_now(),typeof k=="function"?h.callback=k:h===t(l)&&i(l),S(O)}else i(l);h=t(l)}if(h!==null)var K=!0;else{var ie=t(u);ie!==null&&ne(E,ie.startTime-O),K=!1}return K}finally{h=null,p=V,m=!1}}var b=!1,P=null,I=-1,C=5,D=-1;function H(){return!(n.unstable_now()-D<C)}function G(){if(P!==null){var N=n.unstable_now();D=N;var O=!0;try{O=P(!0,N)}finally{O?Z():(b=!1,P=null)}}else b=!1}var Z;if(typeof x=="function")Z=function(){x(G)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,q=z.port2;z.port1.onmessage=G,Z=function(){q.postMessage(null)}}else Z=function(){_(G,0)};function J(N){P=N,b||(b=!0,Z())}function ne(N,O){I=_(function(){N(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,J(T))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var V=p;p=O;try{return N()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,O){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var V=p;p=N;try{return O()}finally{p=V}},n.unstable_scheduleCallback=function(N,O,V){var L=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?L+V:L):V=L,N){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=V+k,N={id:f++,callback:O,priorityLevel:N,startTime:V,expirationTime:k,sortIndex:-1},V>L?(N.sortIndex=V,e(u,N),t(l)===null&&N===t(u)&&(w?(g(I),I=-1):w=!0,ne(E,V-L))):(N.sortIndex=k,e(l,N),v||m||(v=!0,J(T))),N},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(N){var O=p;return function(){var V=p;p=O;try{return N.apply(this,arguments)}finally{p=V}}}}(t1)),t1}var g2;function IH(){return g2||(g2=1,e1.exports=LH()),e1.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DH=function(e){var t={},i=X,r=IH(),s=Object.assign;function o(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)d+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),T=Symbol.iterator;function b(c){return c===null||typeof c!="object"?null:(c=T&&c[T]||c["@@iterator"],typeof c=="function"?c:null)}function P(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case f:return"Fragment";case u:return"Portal";case p:return"Profiler";case h:return"StrictMode";case _:return"Suspense";case g:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case v:return(c.displayName||"Context")+".Consumer";case m:return(c._context.displayName||"Context")+".Provider";case w:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case x:return d=c.displayName||null,d!==null?d:P(c.type)||"Memo";case S:d=c._payload,c=c._init;try{return P(c(d))}catch{}}return null}function I(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P(d);case 8:return d===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function C(c){var d=c,y=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,d.flags&4098&&(y=d.return),c=d.return;while(c)}return d.tag===3?y:null}function D(c){if(C(c)!==c)throw Error(o(188))}function H(c){var d=c.alternate;if(!d){if(d=C(c),d===null)throw Error(o(188));return d!==c?null:c}for(var y=c,M=d;;){var A=y.return;if(A===null)break;var R=A.alternate;if(R===null){if(M=A.return,M!==null){y=M;continue}break}if(A.child===R.child){for(R=A.child;R;){if(R===y)return D(A),c;if(R===M)return D(A),d;R=R.sibling}throw Error(o(188))}if(y.return!==M.return)y=A,M=R;else{for(var Y=!1,re=A.child;re;){if(re===y){Y=!0,y=A,M=R;break}if(re===M){Y=!0,M=A,y=R;break}re=re.sibling}if(!Y){for(re=R.child;re;){if(re===y){Y=!0,y=R,M=A;break}if(re===M){Y=!0,M=R,y=A;break}re=re.sibling}if(!Y)throw Error(o(189))}}if(y.alternate!==M)throw Error(o(190))}if(y.tag!==3)throw Error(o(188));return y.stateNode.current===y?c:d}function G(c){return c=H(c),c!==null?Z(c):null}function Z(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=Z(c);if(d!==null)return d;c=c.sibling}return null}function z(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var d=z(c);if(d!==null)return d}c=c.sibling}return null}var q=Array.isArray,J=e.getPublicInstance,ne=e.getRootHostContext,N=e.getChildHostContext,O=e.prepareForCommit,V=e.resetAfterCommit,L=e.createInstance,k=e.appendInitialChild,K=e.finalizeInitialChildren,ie=e.prepareUpdate,$=e.shouldSetTextContent,le=e.createTextInstance,oe=e.scheduleTimeout,he=e.cancelTimeout,be=e.noTimeout,Ie=e.isPrimaryRenderer,ue=e.supportsMutation,B=e.supportsPersistence,ye=e.supportsHydration,ce=e.getInstanceFromNode,me=e.preparePortalMount,fe=e.getCurrentEventPriority,ke=e.detachDeletedInstance,de=e.supportsMicrotasks,Ce=e.scheduleMicrotask,Le=e.supportsTestSelectors,ve=e.findFiberRoot,We=e.getBoundingRect,F=e.getTextContent,U=e.isHiddenSubtree,Q=e.matchAccessibilityRole,Pe=e.setFocusIfFocusable,xe=e.setupIntersectionObserver,_e=e.appendChild,Be=e.appendChildToContainer,De=e.commitTextUpdate,Oe=e.commitMount,ze=e.commitUpdate,rt=e.insertBefore,Ee=e.insertInContainerBefore,Xe=e.removeChild,je=e.removeChildFromContainer,Ze=e.resetTextContent,$e=e.hideInstance,Ue=e.hideTextInstance,lt=e.unhideInstance,ee=e.unhideTextInstance,Ye=e.clearContainer,Ve=e.cloneInstance,Ae=e.createContainerChildSet,Fe=e.appendChildToContainerChildSet,st=e.finalizeContainerChildren,ct=e.replaceContainerChildren,zt=e.cloneHiddenInstance,Lt=e.cloneHiddenTextInstance,gt=e.canHydrateInstance,Vt=e.canHydrateTextInstance,Zt=e.canHydrateSuspenseInstance,Ut=e.isSuspenseInstancePending,un=e.isSuspenseInstanceFallback,Gn=e.registerSuspenseInstanceRetry,$t=e.getNextHydratableSibling,en=e.getFirstHydratableChild,Un=e.getFirstHydratableChildWithinContainer,cr=e.getFirstHydratableChildWithinSuspenseInstance,bi=e.hydrateInstance,Zr=e.hydrateTextInstance,Uc=e.hydrateSuspenseInstance,W=e.getNextHydratableInstanceAfterSuspenseInstance,ae=e.commitHydratedContainer,ge=e.commitHydratedSuspenseInstance,Se=e.clearSuspenseBoundary,we=e.clearSuspenseBoundaryFromContainer,Je=e.shouldDeleteUnhydratedTailInstances,at=e.didNotMatchHydratedContainerTextInstance,dt=e.didNotMatchHydratedTextInstance,Ne;function vt(c){if(Ne===void 0)try{throw Error()}catch(y){var d=y.stack.trim().match(/\n( *(at )?)/);Ne=d&&d[1]||""}return`
`+Ne+c}var xt=!1;function pt(c,d){if(!c||xt)return"";xt=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(He){var M=He}Reflect.construct(c,[],d)}else{try{d.call()}catch(He){M=He}c.call(d.prototype)}else{try{throw Error()}catch(He){M=He}c()}}catch(He){if(He&&M&&typeof He.stack=="string"){for(var A=He.stack.split(`
`),R=M.stack.split(`
`),Y=A.length-1,re=R.length-1;1<=Y&&0<=re&&A[Y]!==R[re];)re--;for(;1<=Y&&0<=re;Y--,re--)if(A[Y]!==R[re]){if(Y!==1||re!==1)do if(Y--,re--,0>re||A[Y]!==R[re]){var Te=`
`+A[Y].replace(" at new "," at ");return c.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",c.displayName)),Te}while(1<=Y&&0<=re);break}}}finally{xt=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?vt(c):""}var jt=Object.prototype.hasOwnProperty,Nn=[],Gt=-1;function cn(c){return{current:c}}function ht(c){0>Gt||(c.current=Nn[Gt],Nn[Gt]=null,Gt--)}function tt(c,d){Gt++,Nn[Gt]=c.current,c.current=d}var ri={},bt=cn(ri),Jt=cn(!1),fr=ri;function Zn(c,d){var y=c.type.contextTypes;if(!y)return ri;var M=c.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===d)return M.__reactInternalMemoizedMaskedChildContext;var A={},R;for(R in y)A[R]=d[R];return M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=A),A}function _n(c){return c=c.childContextTypes,c!=null}function Xt(){ht(Jt),ht(bt)}function Wi(c,d,y){if(bt.current!==ri)throw Error(o(168));tt(bt,d),tt(Jt,y)}function gs(c,d,y){var M=c.stateNode;if(d=d.childContextTypes,typeof M.getChildContext!="function")return y;M=M.getChildContext();for(var A in M)if(!(A in d))throw Error(o(108,I(c)||"Unknown",A));return s({},y,M)}function Sn(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||ri,fr=bt.current,tt(bt,c),tt(Jt,Jt.current),!0}function si(c,d,y){var M=c.stateNode;if(!M)throw Error(o(169));y?(c=gs(c,d,fr),M.__reactInternalMemoizedMergedChildContext=c,ht(Jt),ht(bt),tt(bt,c)):ht(Jt),tt(Jt,y)}var Ci=Math.clz32?Math.clz32:wh,Gs=Math.log,Ra=Math.LN2;function wh(c){return c>>>=0,c===0?32:31-(Gs(c)/Ra|0)|0}var Hs=64,Ws=4194304;function js(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function La(c,d){var y=c.pendingLanes;if(y===0)return 0;var M=0,A=c.suspendedLanes,R=c.pingedLanes,Y=y&268435455;if(Y!==0){var re=Y&~A;re!==0?M=js(re):(R&=Y,R!==0&&(M=js(R)))}else Y=y&~A,Y!==0?M=js(Y):R!==0&&(M=js(R));if(M===0)return 0;if(d!==0&&d!==M&&!(d&A)&&(A=M&-M,R=d&-d,A>=R||A===16&&(R&4194240)!==0))return d;if(M&4&&(M|=y&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=M;0<d;)y=31-Ci(d),A=1<<y,M|=c[y],d&=~A;return M}function Mh(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nc(c,d){for(var y=c.suspendedLanes,M=c.pingedLanes,A=c.expirationTimes,R=c.pendingLanes;0<R;){var Y=31-Ci(R),re=1<<Y,Te=A[Y];Te===-1?(!(re&y)||re&M)&&(A[Y]=Mh(re,d)):Te<=d&&(c.expiredLanes|=re),R&=~re}}function Xs(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Yl(c){for(var d=[],y=0;31>y;y++)d.push(c);return d}function vs(c,d,y){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-Ci(d),c[d]=y}function bo(c,d){var y=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var M=c.eventTimes;for(c=c.expirationTimes;0<y;){var A=31-Ci(y),R=1<<A;d[A]=0,M[A]=-1,c[A]=-1,y&=~R}}function ys(c,d){var y=c.entangledLanes|=d;for(c=c.entanglements;y;){var M=31-Ci(y),A=1<<M;A&d|c[M]&d&&(c[M]|=d),y&=~A}}var Rt=0;function Oc(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var Ys=r.unstable_scheduleCallback,ql=r.unstable_cancelCallback,Fc=r.unstable_shouldYield,Eh=r.unstable_requestPaint,fn=r.unstable_now,Ia=r.unstable_ImmediatePriority,Ah=r.unstable_UserBlockingPriority,Pi=r.unstable_NormalPriority,kc=r.unstable_IdlePriority,Da=null,dr=null;function Bc(c){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Da,c,void 0,(c.current.flags&128)===128)}catch{}}function Th(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var hr=typeof Object.is=="function"?Object.is:Th,Ri=null,xs=!1,Ir=!1;function zc(c){Ri===null?Ri=[c]:Ri.push(c)}function Vc(c){xs=!0,zc(c)}function ji(){if(!Ir&&Ri!==null){Ir=!0;var c=0,d=Rt;try{var y=Ri;for(Rt=1;c<y.length;c++){var M=y[c];do M=M(!0);while(M!==null)}Ri=null,xs=!1}catch(A){throw Ri!==null&&(Ri=Ri.slice(c+1)),Ys(Ia,ji),A}finally{Rt=d,Ir=!1}}return null}var Ua=a.ReactCurrentBatchConfig;function Na(c,d){if(hr(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var y=Object.keys(c),M=Object.keys(d);if(y.length!==M.length)return!1;for(M=0;M<y.length;M++){var A=y[M];if(!jt.call(d,A)||!hr(c[A],d[A]))return!1}return!0}function Oa(c){switch(c.tag){case 5:return vt(c.type);case 16:return vt("Lazy");case 13:return vt("Suspense");case 19:return vt("SuspenseList");case 0:case 2:case 15:return c=pt(c.type,!1),c;case 11:return c=pt(c.type.render,!1),c;case 1:return c=pt(c.type,!0),c;default:return""}}function Li(c,d){if(c&&c.defaultProps){d=s({},d),c=c.defaultProps;for(var y in c)d[y]===void 0&&(d[y]=c[y]);return d}return d}var Jn=cn(null),Zl=null,Jr=null,Co=null;function Jl(){Co=Jr=Zl=null}function bh(c,d,y){Ie?(tt(Jn,d._currentValue),d._currentValue=y):(tt(Jn,d._currentValue2),d._currentValue2=y)}function Qn(c){var d=Jn.current;ht(Jn),Ie?c._currentValue=d:c._currentValue2=d}function Ii(c,d,y){for(;c!==null;){var M=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,M!==null&&(M.childLanes|=d)):M!==null&&(M.childLanes&d)!==d&&(M.childLanes|=d),c===y)break;c=c.return}}function bn(c,d){Zl=c,Co=Jr=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&d&&(vr=!0),c.firstContext=null)}function Cn(c){var d=Ie?c._currentValue:c._currentValue2;if(Co!==c)if(c={context:c,memoizedValue:d,next:null},Jr===null){if(Zl===null)throw Error(o(308));Jr=c,Zl.dependencies={lanes:0,firstContext:c}}else Jr=Jr.next=c;return d}var pr=null,Po=!1;function $0(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $w(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function qs(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function Ro(c,d){var y=c.updateQueue;y!==null&&(y=y.shared,On!==null&&c.mode&1&&!(Pt&2)?(c=y.interleaved,c===null?(d.next=d,pr===null?pr=[y]:pr.push(y)):(d.next=c.next,c.next=d),y.interleaved=d):(c=y.pending,c===null?d.next=d:(d.next=c.next,c.next=d),y.pending=d))}function Ch(c,d,y){if(d=d.updateQueue,d!==null&&(d=d.shared,(y&4194240)!==0)){var M=d.lanes;M&=c.pendingLanes,y|=M,d.lanes=y,ys(c,y)}}function eM(c,d){var y=c.updateQueue,M=c.alternate;if(M!==null&&(M=M.updateQueue,y===M)){var A=null,R=null;if(y=y.firstBaseUpdate,y!==null){do{var Y={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};R===null?A=R=Y:R=R.next=Y,y=y.next}while(y!==null);R===null?A=R=d:R=R.next=d}else A=R=d;y={baseState:M.baseState,firstBaseUpdate:A,lastBaseUpdate:R,shared:M.shared,effects:M.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=d:c.next=d,y.lastBaseUpdate=d}function Ph(c,d,y,M){var A=c.updateQueue;Po=!1;var R=A.firstBaseUpdate,Y=A.lastBaseUpdate,re=A.shared.pending;if(re!==null){A.shared.pending=null;var Te=re,He=Te.next;Te.next=null,Y===null?R=He:Y.next=He,Y=Te;var it=c.alternate;it!==null&&(it=it.updateQueue,re=it.lastBaseUpdate,re!==Y&&(re===null?it.firstBaseUpdate=He:re.next=He,it.lastBaseUpdate=Te))}if(R!==null){var St=A.baseState;Y=0,it=He=Te=null,re=R;do{var mt=re.lane,Yt=re.eventTime;if((M&mt)===mt){it!==null&&(it=it.next={eventTime:Yt,lane:0,tag:re.tag,payload:re.payload,callback:re.callback,next:null});e:{var ft=c,vi=re;switch(mt=d,Yt=y,vi.tag){case 1:if(ft=vi.payload,typeof ft=="function"){St=ft.call(Yt,St,mt);break e}St=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=vi.payload,mt=typeof ft=="function"?ft.call(Yt,St,mt):ft,mt==null)break e;St=s({},St,mt);break e;case 2:Po=!0}}re.callback!==null&&re.lane!==0&&(c.flags|=64,mt=A.effects,mt===null?A.effects=[re]:mt.push(re))}else Yt={eventTime:Yt,lane:mt,tag:re.tag,payload:re.payload,callback:re.callback,next:null},it===null?(He=it=Yt,Te=St):it=it.next=Yt,Y|=mt;if(re=re.next,re===null){if(re=A.shared.pending,re===null)break;mt=re,re=mt.next,mt.next=null,A.lastBaseUpdate=mt,A.shared.pending=null}}while(1);if(it===null&&(Te=St),A.baseState=Te,A.firstBaseUpdate=He,A.lastBaseUpdate=it,d=A.shared.interleaved,d!==null){A=d;do Y|=A.lane,A=A.next;while(A!==d)}else R===null&&(A.shared.lanes=0);su|=Y,c.lanes=Y,c.memoizedState=St}}function tM(c,d,y){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var M=c[d],A=M.callback;if(A!==null){if(M.callback=null,M=y,typeof A!="function")throw Error(o(191,A));A.call(M)}}}var nM=new i.Component().refs;function ev(c,d,y,M){d=c.memoizedState,y=y(M,d),y=y==null?d:s({},d,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var Rh={isMounted:function(c){return(c=c._reactInternals)?C(c)===c:!1},enqueueSetState:function(c,d,y){c=c._reactInternals;var M=Ui(),A=Do(c),R=qs(M,A);R.payload=d,y!=null&&(R.callback=y),Ro(c,R),d=Fr(c,A,M),d!==null&&Ch(d,c,A)},enqueueReplaceState:function(c,d,y){c=c._reactInternals;var M=Ui(),A=Do(c),R=qs(M,A);R.tag=1,R.payload=d,y!=null&&(R.callback=y),Ro(c,R),d=Fr(c,A,M),d!==null&&Ch(d,c,A)},enqueueForceUpdate:function(c,d){c=c._reactInternals;var y=Ui(),M=Do(c),A=qs(y,M);A.tag=2,d!=null&&(A.callback=d),Ro(c,A),d=Fr(c,M,y),d!==null&&Ch(d,c,M)}};function iM(c,d,y,M,A,R,Y){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(M,R,Y):d.prototype&&d.prototype.isPureReactComponent?!Na(y,M)||!Na(A,R):!0}function rM(c,d,y){var M=!1,A=ri,R=d.contextType;return typeof R=="object"&&R!==null?R=Cn(R):(A=_n(d)?fr:bt.current,M=d.contextTypes,R=(M=M!=null)?Zn(c,A):ri),d=new d(y,R),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Rh,c.stateNode=d,d._reactInternals=c,M&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=A,c.__reactInternalMemoizedMaskedChildContext=R),d}function sM(c,d,y,M){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(y,M),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(y,M),d.state!==c&&Rh.enqueueReplaceState(d,d.state,null)}function tv(c,d,y,M){var A=c.stateNode;A.props=y,A.state=c.memoizedState,A.refs=nM,$0(c);var R=d.contextType;typeof R=="object"&&R!==null?A.context=Cn(R):(R=_n(d)?fr:bt.current,A.context=Zn(c,R)),A.state=c.memoizedState,R=d.getDerivedStateFromProps,typeof R=="function"&&(ev(c,d,R,y),A.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(d=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),d!==A.state&&Rh.enqueueReplaceState(A,A.state,null),Ph(c,y,A,M),A.state=c.memoizedState),typeof A.componentDidMount=="function"&&(c.flags|=4194308)}var Ql=[],Kl=0,Lh=null,Ih=0,Dr=[],Ur=0,Fa=null,Zs=1,Js="";function ka(c,d){Ql[Kl++]=Ih,Ql[Kl++]=Lh,Lh=c,Ih=d}function oM(c,d,y){Dr[Ur++]=Zs,Dr[Ur++]=Js,Dr[Ur++]=Fa,Fa=c;var M=Zs;c=Js;var A=32-Ci(M)-1;M&=~(1<<A),y+=1;var R=32-Ci(d)+A;if(30<R){var Y=A-A%5;R=(M&(1<<Y)-1).toString(32),M>>=Y,A-=Y,Zs=1<<32-Ci(d)+A|y<<A|M,Js=R+c}else Zs=1<<R|y<<A|M,Js=c}function nv(c){c.return!==null&&(ka(c,1),oM(c,1,0))}function iv(c){for(;c===Lh;)Lh=Ql[--Kl],Ql[Kl]=null,Ih=Ql[--Kl],Ql[Kl]=null;for(;c===Fa;)Fa=Dr[--Ur],Dr[Ur]=null,Js=Dr[--Ur],Dr[Ur]=null,Zs=Dr[--Ur],Dr[Ur]=null}var mr=null,gr=null,sn=!1,Gc=!1,Qr=null;function aM(c,d){var y=kr(5,null,null,0);y.elementType="DELETED",y.stateNode=d,y.return=c,d=c.deletions,d===null?(c.deletions=[y],c.flags|=16):d.push(y)}function lM(c,d){switch(c.tag){case 5:return d=gt(d,c.type,c.pendingProps),d!==null?(c.stateNode=d,mr=c,gr=en(d),!0):!1;case 6:return d=Vt(d,c.pendingProps),d!==null?(c.stateNode=d,mr=c,gr=null,!0):!1;case 13:if(d=Zt(d),d!==null){var y=Fa!==null?{id:Zs,overflow:Js}:null;return c.memoizedState={dehydrated:d,treeContext:y,retryLane:1073741824},y=kr(18,null,null,0),y.stateNode=d,y.return=c,c.child=y,mr=c,gr=null,!0}return!1;default:return!1}}function rv(c){return(c.mode&1)!==0&&(c.flags&128)===0}function sv(c){if(sn){var d=gr;if(d){var y=d;if(!lM(c,d)){if(rv(c))throw Error(o(418));d=$t(y);var M=mr;d&&lM(c,d)?aM(M,y):(c.flags=c.flags&-4097|2,sn=!1,mr=c)}}else{if(rv(c))throw Error(o(418));c.flags=c.flags&-4097|2,sn=!1,mr=c}}}function uM(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;mr=c}function Hc(c){if(!ye||c!==mr)return!1;if(!sn)return uM(c),sn=!0,!1;if(c.tag!==3&&(c.tag!==5||Je(c.type)&&!$(c.type,c.memoizedProps))){var d=gr;if(d){if(rv(c)){for(c=gr;c;)c=$t(c);throw Error(o(418))}for(;d;)aM(c,d),d=$t(d)}}if(uM(c),c.tag===13){if(!ye)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));gr=W(c)}else gr=mr?$t(c.stateNode):null;return!0}function $l(){ye&&(gr=mr=null,Gc=sn=!1)}function ov(c){Qr===null?Qr=[c]:Qr.push(c)}function Wc(c,d,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(o(309));var M=y.stateNode}if(!M)throw Error(o(147,c));var A=M,R=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===R?d.ref:(d=function(Y){var re=A.refs;re===nM&&(re=A.refs={}),Y===null?delete re[R]:re[R]=Y},d._stringRef=R,d)}if(typeof c!="string")throw Error(o(284));if(!y._owner)throw Error(o(290,c))}return c}function Dh(c,d){throw c=Object.prototype.toString.call(d),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function cM(c){var d=c._init;return d(c._payload)}function fM(c){function d(pe,se){if(c){var Me=pe.deletions;Me===null?(pe.deletions=[se],pe.flags|=16):Me.push(se)}}function y(pe,se){if(!c)return null;for(;se!==null;)d(pe,se),se=se.sibling;return null}function M(pe,se){for(pe=new Map;se!==null;)se.key!==null?pe.set(se.key,se):pe.set(se.index,se),se=se.sibling;return pe}function A(pe,se){return pe=No(pe,se),pe.index=0,pe.sibling=null,pe}function R(pe,se,Me){return pe.index=Me,c?(Me=pe.alternate,Me!==null?(Me=Me.index,Me<se?(pe.flags|=2,se):Me):(pe.flags|=2,se)):(pe.flags|=1048576,se)}function Y(pe){return c&&pe.alternate===null&&(pe.flags|=2),pe}function re(pe,se,Me,et){return se===null||se.tag!==6?(se=Hv(Me,pe.mode,et),se.return=pe,se):(se=A(se,Me),se.return=pe,se)}function Te(pe,se,Me,et){var ut=Me.type;return ut===f?it(pe,se,Me.props.children,et,Me.key):se!==null&&(se.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&cM(ut)===se.type)?(et=A(se,Me.props),et.ref=Wc(pe,se,Me),et.return=pe,et):(et=cp(Me.type,Me.key,Me.props,null,pe.mode,et),et.ref=Wc(pe,se,Me),et.return=pe,et)}function He(pe,se,Me,et){return se===null||se.tag!==4||se.stateNode.containerInfo!==Me.containerInfo||se.stateNode.implementation!==Me.implementation?(se=Wv(Me,pe.mode,et),se.return=pe,se):(se=A(se,Me.children||[]),se.return=pe,se)}function it(pe,se,Me,et,ut){return se===null||se.tag!==7?(se=ja(Me,pe.mode,et,ut),se.return=pe,se):(se=A(se,Me),se.return=pe,se)}function St(pe,se,Me){if(typeof se=="string"&&se!==""||typeof se=="number")return se=Hv(""+se,pe.mode,Me),se.return=pe,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case l:return Me=cp(se.type,se.key,se.props,null,pe.mode,Me),Me.ref=Wc(pe,null,se),Me.return=pe,Me;case u:return se=Wv(se,pe.mode,Me),se.return=pe,se;case S:var et=se._init;return St(pe,et(se._payload),Me)}if(q(se)||b(se))return se=ja(se,pe.mode,Me,null),se.return=pe,se;Dh(pe,se)}return null}function mt(pe,se,Me,et){var ut=se!==null?se.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return ut!==null?null:re(pe,se,""+Me,et);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case l:return Me.key===ut?Te(pe,se,Me,et):null;case u:return Me.key===ut?He(pe,se,Me,et):null;case S:return ut=Me._init,mt(pe,se,ut(Me._payload),et)}if(q(Me)||b(Me))return ut!==null?null:it(pe,se,Me,et,null);Dh(pe,Me)}return null}function Yt(pe,se,Me,et,ut){if(typeof et=="string"&&et!==""||typeof et=="number")return pe=pe.get(Me)||null,re(se,pe,""+et,ut);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case l:return pe=pe.get(et.key===null?Me:et.key)||null,Te(se,pe,et,ut);case u:return pe=pe.get(et.key===null?Me:et.key)||null,He(se,pe,et,ut);case S:var Ct=et._init;return Yt(pe,se,Me,Ct(et._payload),ut)}if(q(et)||b(et))return pe=pe.get(Me)||null,it(se,pe,et,ut,null);Dh(se,et)}return null}function ft(pe,se,Me,et){for(var ut=null,Ct=null,wt=se,Ft=se=0,$n=null;wt!==null&&Ft<Me.length;Ft++){wt.index>Ft?($n=wt,wt=null):$n=wt.sibling;var kt=mt(pe,wt,Me[Ft],et);if(kt===null){wt===null&&(wt=$n);break}c&&wt&&kt.alternate===null&&d(pe,wt),se=R(kt,se,Ft),Ct===null?ut=kt:Ct.sibling=kt,Ct=kt,wt=$n}if(Ft===Me.length)return y(pe,wt),sn&&ka(pe,Ft),ut;if(wt===null){for(;Ft<Me.length;Ft++)wt=St(pe,Me[Ft],et),wt!==null&&(se=R(wt,se,Ft),Ct===null?ut=wt:Ct.sibling=wt,Ct=wt);return sn&&ka(pe,Ft),ut}for(wt=M(pe,wt);Ft<Me.length;Ft++)$n=Yt(wt,pe,Ft,Me[Ft],et),$n!==null&&(c&&$n.alternate!==null&&wt.delete($n.key===null?Ft:$n.key),se=R($n,se,Ft),Ct===null?ut=$n:Ct.sibling=$n,Ct=$n);return c&&wt.forEach(function(Oo){return d(pe,Oo)}),sn&&ka(pe,Ft),ut}function vi(pe,se,Me,et){var ut=b(Me);if(typeof ut!="function")throw Error(o(150));if(Me=ut.call(Me),Me==null)throw Error(o(151));for(var Ct=ut=null,wt=se,Ft=se=0,$n=null,kt=Me.next();wt!==null&&!kt.done;Ft++,kt=Me.next()){wt.index>Ft?($n=wt,wt=null):$n=wt.sibling;var Oo=mt(pe,wt,kt.value,et);if(Oo===null){wt===null&&(wt=$n);break}c&&wt&&Oo.alternate===null&&d(pe,wt),se=R(Oo,se,Ft),Ct===null?ut=Oo:Ct.sibling=Oo,Ct=Oo,wt=$n}if(kt.done)return y(pe,wt),sn&&ka(pe,Ft),ut;if(wt===null){for(;!kt.done;Ft++,kt=Me.next())kt=St(pe,kt.value,et),kt!==null&&(se=R(kt,se,Ft),Ct===null?ut=kt:Ct.sibling=kt,Ct=kt);return sn&&ka(pe,Ft),ut}for(wt=M(pe,wt);!kt.done;Ft++,kt=Me.next())kt=Yt(wt,pe,Ft,kt.value,et),kt!==null&&(c&&kt.alternate!==null&&wt.delete(kt.key===null?Ft:kt.key),se=R(kt,se,Ft),Ct===null?ut=kt:Ct.sibling=kt,Ct=kt);return c&&wt.forEach(function(XU){return d(pe,XU)}),sn&&ka(pe,Ft),ut}function Br(pe,se,Me,et){if(typeof Me=="object"&&Me!==null&&Me.type===f&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case l:e:{for(var ut=Me.key,Ct=se;Ct!==null;){if(Ct.key===ut){if(ut=Me.type,ut===f){if(Ct.tag===7){y(pe,Ct.sibling),se=A(Ct,Me.props.children),se.return=pe,pe=se;break e}}else if(Ct.elementType===ut||typeof ut=="object"&&ut!==null&&ut.$$typeof===S&&cM(ut)===Ct.type){y(pe,Ct.sibling),se=A(Ct,Me.props),se.ref=Wc(pe,Ct,Me),se.return=pe,pe=se;break e}y(pe,Ct);break}else d(pe,Ct);Ct=Ct.sibling}Me.type===f?(se=ja(Me.props.children,pe.mode,et,Me.key),se.return=pe,pe=se):(et=cp(Me.type,Me.key,Me.props,null,pe.mode,et),et.ref=Wc(pe,se,Me),et.return=pe,pe=et)}return Y(pe);case u:e:{for(Ct=Me.key;se!==null;){if(se.key===Ct)if(se.tag===4&&se.stateNode.containerInfo===Me.containerInfo&&se.stateNode.implementation===Me.implementation){y(pe,se.sibling),se=A(se,Me.children||[]),se.return=pe,pe=se;break e}else{y(pe,se);break}else d(pe,se);se=se.sibling}se=Wv(Me,pe.mode,et),se.return=pe,pe=se}return Y(pe);case S:return Ct=Me._init,Br(pe,se,Ct(Me._payload),et)}if(q(Me))return ft(pe,se,Me,et);if(b(Me))return vi(pe,se,Me,et);Dh(pe,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,se!==null&&se.tag===6?(y(pe,se.sibling),se=A(se,Me),se.return=pe,pe=se):(y(pe,se),se=Hv(Me,pe.mode,et),se.return=pe,pe=se),Y(pe)):y(pe,se)}return Br}var eu=fM(!0),dM=fM(!1),jc={},Nr=cn(jc),Xc=cn(jc),tu=cn(jc);function _s(c){if(c===jc)throw Error(o(174));return c}function av(c,d){tt(tu,d),tt(Xc,c),tt(Nr,jc),c=ne(d),ht(Nr),tt(Nr,c)}function nu(){ht(Nr),ht(Xc),ht(tu)}function hM(c){var d=_s(tu.current),y=_s(Nr.current);d=N(y,c.type,d),y!==d&&(tt(Xc,c),tt(Nr,d))}function lv(c){Xc.current===c&&(ht(Nr),ht(Xc))}var dn=cn(0);function Uh(c){for(var d=c;d!==null;){if(d.tag===13){var y=d.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||Ut(y)||un(y)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var uv=[];function cv(){for(var c=0;c<uv.length;c++){var d=uv[c];Ie?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}uv.length=0}var Nh=a.ReactCurrentDispatcher,Or=a.ReactCurrentBatchConfig,iu=0,wn=null,pi=null,Kn=null,Oh=!1,Yc=!1,qc=0,vU=0;function mi(){throw Error(o(321))}function fv(c,d){if(d===null)return!1;for(var y=0;y<d.length&&y<c.length;y++)if(!hr(c[y],d[y]))return!1;return!0}function dv(c,d,y,M,A,R){if(iu=R,wn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Nh.current=c===null||c.memoizedState===null?SU:wU,c=y(M,A),Yc){R=0;do{if(Yc=!1,qc=0,25<=R)throw Error(o(301));R+=1,Kn=pi=null,d.updateQueue=null,Nh.current=MU,c=y(M,A)}while(Yc)}if(Nh.current=Vh,d=pi!==null&&pi.next!==null,iu=0,Kn=pi=wn=null,Oh=!1,d)throw Error(o(300));return c}function hv(){var c=qc!==0;return qc=0,c}function Qs(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kn===null?wn.memoizedState=Kn=c:Kn=Kn.next=c,Kn}function Ss(){if(pi===null){var c=wn.alternate;c=c!==null?c.memoizedState:null}else c=pi.next;var d=Kn===null?wn.memoizedState:Kn.next;if(d!==null)Kn=d,pi=c;else{if(c===null)throw Error(o(310));pi=c,c={memoizedState:pi.memoizedState,baseState:pi.baseState,baseQueue:pi.baseQueue,queue:pi.queue,next:null},Kn===null?wn.memoizedState=Kn=c:Kn=Kn.next=c}return Kn}function Ba(c,d){return typeof d=="function"?d(c):d}function Fh(c){var d=Ss(),y=d.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=c;var M=pi,A=M.baseQueue,R=y.pending;if(R!==null){if(A!==null){var Y=A.next;A.next=R.next,R.next=Y}M.baseQueue=A=R,y.pending=null}if(A!==null){R=A.next,M=M.baseState;var re=Y=null,Te=null,He=R;do{var it=He.lane;if((iu&it)===it)Te!==null&&(Te=Te.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),M=He.hasEagerState?He.eagerState:c(M,He.action);else{var St={lane:it,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Te===null?(re=Te=St,Y=M):Te=Te.next=St,wn.lanes|=it,su|=it}He=He.next}while(He!==null&&He!==R);Te===null?Y=M:Te.next=re,hr(M,d.memoizedState)||(vr=!0),d.memoizedState=M,d.baseState=Y,d.baseQueue=Te,y.lastRenderedState=M}if(c=y.interleaved,c!==null){A=c;do R=A.lane,wn.lanes|=R,su|=R,A=A.next;while(A!==c)}else A===null&&(y.lanes=0);return[d.memoizedState,y.dispatch]}function kh(c){var d=Ss(),y=d.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=c;var M=y.dispatch,A=y.pending,R=d.memoizedState;if(A!==null){y.pending=null;var Y=A=A.next;do R=c(R,Y.action),Y=Y.next;while(Y!==A);hr(R,d.memoizedState)||(vr=!0),d.memoizedState=R,d.baseQueue===null&&(d.baseState=R),y.lastRenderedState=R}return[R,M]}function pM(){}function mM(c,d){var y=wn,M=Ss(),A=d(),R=!hr(M.memoizedState,A);if(R&&(M.memoizedState=A,vr=!0),M=M.queue,Jc(yM.bind(null,y,M,c),[c]),M.getSnapshot!==d||R||Kn!==null&&Kn.memoizedState.tag&1){if(y.flags|=2048,Zc(9,vM.bind(null,y,M,A,d),void 0,null),On===null)throw Error(o(349));iu&30||gM(y,d,A)}return A}function gM(c,d,y){c.flags|=16384,c={getSnapshot:d,value:y},d=wn.updateQueue,d===null?(d={lastEffect:null,stores:null},wn.updateQueue=d,d.stores=[c]):(y=d.stores,y===null?d.stores=[c]:y.push(c))}function vM(c,d,y,M){d.value=y,d.getSnapshot=M,xM(d)&&Fr(c,1,-1)}function yM(c,d,y){return y(function(){xM(d)&&Fr(c,1,-1)})}function xM(c){var d=c.getSnapshot;c=c.value;try{var y=d();return!hr(c,y)}catch{return!0}}function pv(c){var d=Qs();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ba,lastRenderedState:c},d.queue=c,c=c.dispatch=_U.bind(null,wn,c),[d.memoizedState,c]}function Zc(c,d,y,M){return c={tag:c,create:d,destroy:y,deps:M,next:null},d=wn.updateQueue,d===null?(d={lastEffect:null,stores:null},wn.updateQueue=d,d.lastEffect=c.next=c):(y=d.lastEffect,y===null?d.lastEffect=c.next=c:(M=y.next,y.next=c,c.next=M,d.lastEffect=c)),c}function _M(){return Ss().memoizedState}function Bh(c,d,y,M){var A=Qs();wn.flags|=c,A.memoizedState=Zc(1|d,y,void 0,M===void 0?null:M)}function zh(c,d,y,M){var A=Ss();M=M===void 0?null:M;var R=void 0;if(pi!==null){var Y=pi.memoizedState;if(R=Y.destroy,M!==null&&fv(M,Y.deps)){A.memoizedState=Zc(d,y,R,M);return}}wn.flags|=c,A.memoizedState=Zc(1|d,y,R,M)}function mv(c,d){return Bh(8390656,8,c,d)}function Jc(c,d){return zh(2048,8,c,d)}function SM(c,d){return zh(4,2,c,d)}function wM(c,d){return zh(4,4,c,d)}function MM(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function EM(c,d,y){return y=y!=null?y.concat([c]):null,zh(4,4,MM.bind(null,d,c),y)}function gv(){}function AM(c,d){var y=Ss();d=d===void 0?null:d;var M=y.memoizedState;return M!==null&&d!==null&&fv(d,M[1])?M[0]:(y.memoizedState=[c,d],c)}function TM(c,d){var y=Ss();d=d===void 0?null:d;var M=y.memoizedState;return M!==null&&d!==null&&fv(d,M[1])?M[0]:(c=c(),y.memoizedState=[c,d],c)}function yU(c,d){var y=Rt;Rt=y!==0&&4>y?y:4,c(!0);var M=Or.transition;Or.transition={};try{c(!1),d()}finally{Rt=y,Or.transition=M}}function bM(){return Ss().memoizedState}function xU(c,d,y){var M=Do(c);y={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null},CM(c)?PM(d,y):(RM(c,d,y),y=Ui(),c=Fr(c,M,y),c!==null&&LM(c,d,M))}function _U(c,d,y){var M=Do(c),A={lane:M,action:y,hasEagerState:!1,eagerState:null,next:null};if(CM(c))PM(d,A);else{RM(c,d,A);var R=c.alternate;if(c.lanes===0&&(R===null||R.lanes===0)&&(R=d.lastRenderedReducer,R!==null))try{var Y=d.lastRenderedState,re=R(Y,y);if(A.hasEagerState=!0,A.eagerState=re,hr(re,Y))return}catch{}finally{}y=Ui(),c=Fr(c,M,y),c!==null&&LM(c,d,M)}}function CM(c){var d=c.alternate;return c===wn||d!==null&&d===wn}function PM(c,d){Yc=Oh=!0;var y=c.pending;y===null?d.next=d:(d.next=y.next,y.next=d),c.pending=d}function RM(c,d,y){On!==null&&c.mode&1&&!(Pt&2)?(c=d.interleaved,c===null?(y.next=y,pr===null?pr=[d]:pr.push(d)):(y.next=c.next,c.next=y),d.interleaved=y):(c=d.pending,c===null?y.next=y:(y.next=c.next,c.next=y),d.pending=y)}function LM(c,d,y){if(y&4194240){var M=d.lanes;M&=c.pendingLanes,y|=M,d.lanes=y,ys(c,y)}}var Vh={readContext:Cn,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},SU={readContext:Cn,useCallback:function(c,d){return Qs().memoizedState=[c,d===void 0?null:d],c},useContext:Cn,useEffect:mv,useImperativeHandle:function(c,d,y){return y=y!=null?y.concat([c]):null,Bh(4194308,4,MM.bind(null,d,c),y)},useLayoutEffect:function(c,d){return Bh(4194308,4,c,d)},useInsertionEffect:function(c,d){return Bh(4,2,c,d)},useMemo:function(c,d){var y=Qs();return d=d===void 0?null:d,c=c(),y.memoizedState=[c,d],c},useReducer:function(c,d,y){var M=Qs();return d=y!==void 0?y(d):d,M.memoizedState=M.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},M.queue=c,c=c.dispatch=xU.bind(null,wn,c),[M.memoizedState,c]},useRef:function(c){var d=Qs();return c={current:c},d.memoizedState=c},useState:pv,useDebugValue:gv,useDeferredValue:function(c){var d=pv(c),y=d[0],M=d[1];return mv(function(){var A=Or.transition;Or.transition={};try{M(c)}finally{Or.transition=A}},[c]),y},useTransition:function(){var c=pv(!1),d=c[0];return c=yU.bind(null,c[1]),Qs().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,y){var M=wn,A=Qs();if(sn){if(y===void 0)throw Error(o(407));y=y()}else{if(y=d(),On===null)throw Error(o(349));iu&30||gM(M,d,y)}A.memoizedState=y;var R={value:y,getSnapshot:d};return A.queue=R,mv(yM.bind(null,M,R,c),[c]),M.flags|=2048,Zc(9,vM.bind(null,M,R,y,d),void 0,null),y},useId:function(){var c=Qs(),d=On.identifierPrefix;if(sn){var y=Js,M=Zs;y=(M&~(1<<32-Ci(M)-1)).toString(32)+y,d=":"+d+"R"+y,y=qc++,0<y&&(d+="H"+y.toString(32)),d+=":"}else y=vU++,d=":"+d+"r"+y.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},wU={readContext:Cn,useCallback:AM,useContext:Cn,useEffect:Jc,useImperativeHandle:EM,useInsertionEffect:SM,useLayoutEffect:wM,useMemo:TM,useReducer:Fh,useRef:_M,useState:function(){return Fh(Ba)},useDebugValue:gv,useDeferredValue:function(c){var d=Fh(Ba),y=d[0],M=d[1];return Jc(function(){var A=Or.transition;Or.transition={};try{M(c)}finally{Or.transition=A}},[c]),y},useTransition:function(){var c=Fh(Ba)[0],d=Ss().memoizedState;return[c,d]},useMutableSource:pM,useSyncExternalStore:mM,useId:bM,unstable_isNewReconciler:!1},MU={readContext:Cn,useCallback:AM,useContext:Cn,useEffect:Jc,useImperativeHandle:EM,useInsertionEffect:SM,useLayoutEffect:wM,useMemo:TM,useReducer:kh,useRef:_M,useState:function(){return kh(Ba)},useDebugValue:gv,useDeferredValue:function(c){var d=kh(Ba),y=d[0],M=d[1];return Jc(function(){var A=Or.transition;Or.transition={};try{M(c)}finally{Or.transition=A}},[c]),y},useTransition:function(){var c=kh(Ba)[0],d=Ss().memoizedState;return[c,d]},useMutableSource:pM,useSyncExternalStore:mM,useId:bM,unstable_isNewReconciler:!1};function vv(c,d){try{var y="",M=d;do y+=Oa(M),M=M.return;while(M);var A=y}catch(R){A=`
Error generating stack: `+R.message+`
`+R.stack}return{value:c,source:d,stack:A}}function yv(c,d){try{console.error(d.value)}catch(y){setTimeout(function(){throw y})}}var EU=typeof WeakMap=="function"?WeakMap:Map;function IM(c,d,y){y=qs(-1,y),y.tag=3,y.payload={element:null};var M=d.value;return y.callback=function(){ip||(ip=!0,Ov=M),yv(c,d)},y}function DM(c,d,y){y=qs(-1,y),y.tag=3;var M=c.type.getDerivedStateFromError;if(typeof M=="function"){var A=d.value;y.payload=function(){return M(A)},y.callback=function(){yv(c,d)}}var R=c.stateNode;return R!==null&&typeof R.componentDidCatch=="function"&&(y.callback=function(){yv(c,d),typeof M!="function"&&(Lo===null?Lo=new Set([this]):Lo.add(this));var Y=d.stack;this.componentDidCatch(d.value,{componentStack:Y!==null?Y:""})}),y}function UM(c,d,y){var M=c.pingCache;if(M===null){M=c.pingCache=new EU;var A=new Set;M.set(d,A)}else A=M.get(d),A===void 0&&(A=new Set,M.set(d,A));A.has(y)||(A.add(y),c=kU.bind(null,c,d,y),d.then(c,c))}function NM(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function OM(c,d,y,M,A){return c.mode&1?(c.flags|=65536,c.lanes=A,c):(c===d?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(d=qs(-1,1),d.tag=2,Ro(y,d))),y.lanes|=1),c)}function ws(c){c.flags|=4}function FM(c,d){if(c!==null&&c.child===d.child)return!0;if(d.flags&16)return!1;for(c=d.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var Qc,Kc,Gh,Hh;if(ue)Qc=function(c,d){for(var y=d.child;y!==null;){if(y.tag===5||y.tag===6)k(c,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===d)break;for(;y.sibling===null;){if(y.return===null||y.return===d)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},Kc=function(){},Gh=function(c,d,y,M,A){if(c=c.memoizedProps,c!==M){var R=d.stateNode,Y=_s(Nr.current);y=ie(R,y,c,M,A,Y),(d.updateQueue=y)&&ws(d)}},Hh=function(c,d,y,M){y!==M&&ws(d)};else if(B){Qc=function(c,d,y,M){for(var A=d.child;A!==null;){if(A.tag===5){var R=A.stateNode;y&&M&&(R=zt(R,A.type,A.memoizedProps,A)),k(c,R)}else if(A.tag===6)R=A.stateNode,y&&M&&(R=Lt(R,A.memoizedProps,A)),k(c,R);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)R=A.child,R!==null&&(R.return=A),Qc(c,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===d)break;for(;A.sibling===null;){if(A.return===null||A.return===d)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};var kM=function(c,d,y,M){for(var A=d.child;A!==null;){if(A.tag===5){var R=A.stateNode;y&&M&&(R=zt(R,A.type,A.memoizedProps,A)),Fe(c,R)}else if(A.tag===6)R=A.stateNode,y&&M&&(R=Lt(R,A.memoizedProps,A)),Fe(c,R);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)R=A.child,R!==null&&(R.return=A),kM(c,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===d)break;for(;A.sibling===null;){if(A.return===null||A.return===d)return;A=A.return}A.sibling.return=A.return,A=A.sibling}};Kc=function(c,d){var y=d.stateNode;if(!FM(c,d)){c=y.containerInfo;var M=Ae(c);kM(M,d,!1,!1),y.pendingChildren=M,ws(d),st(c,M)}},Gh=function(c,d,y,M,A){var R=c.stateNode,Y=c.memoizedProps;if((c=FM(c,d))&&Y===M)d.stateNode=R;else{var re=d.stateNode,Te=_s(Nr.current),He=null;Y!==M&&(He=ie(re,y,Y,M,A,Te)),c&&He===null?d.stateNode=R:(R=Ve(R,He,y,Y,M,d,c,re),K(R,y,M,A,Te)&&ws(d),d.stateNode=R,c?ws(d):Qc(R,d,!1,!1))}},Hh=function(c,d,y,M){y!==M?(c=_s(tu.current),y=_s(Nr.current),d.stateNode=le(M,c,y,d),ws(d)):d.stateNode=c.stateNode}}else Kc=function(){},Gh=function(){},Hh=function(){};function $c(c,d){if(!sn)switch(c.tailMode){case"hidden":d=c.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var M=null;y!==null;)y.alternate!==null&&(M=y),y=y.sibling;M===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:M.sibling=null}}function gi(c){var d=c.alternate!==null&&c.alternate.child===c.child,y=0,M=0;if(d)for(var A=c.child;A!==null;)y|=A.lanes|A.childLanes,M|=A.subtreeFlags&14680064,M|=A.flags&14680064,A.return=c,A=A.sibling;else for(A=c.child;A!==null;)y|=A.lanes|A.childLanes,M|=A.subtreeFlags,M|=A.flags,A.return=c,A=A.sibling;return c.subtreeFlags|=M,c.childLanes=y,d}function AU(c,d,y){var M=d.pendingProps;switch(iv(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gi(d),null;case 1:return _n(d.type)&&Xt(),gi(d),null;case 3:return M=d.stateNode,nu(),ht(Jt),ht(bt),cv(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(c===null||c.child===null)&&(Hc(d)?ws(d):c===null||c.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,Qr!==null&&(Bv(Qr),Qr=null))),Kc(c,d),gi(d),null;case 5:lv(d),y=_s(tu.current);var A=d.type;if(c!==null&&d.stateNode!=null)Gh(c,d,A,M,y),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!M){if(d.stateNode===null)throw Error(o(166));return gi(d),null}if(c=_s(Nr.current),Hc(d)){if(!ye)throw Error(o(175));c=bi(d.stateNode,d.type,d.memoizedProps,y,c,d,!Gc),d.updateQueue=c,c!==null&&ws(d)}else{var R=L(A,M,y,c,d);Qc(R,d,!1,!1),d.stateNode=R,K(R,A,M,y,c)&&ws(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return gi(d),null;case 6:if(c&&d.stateNode!=null)Hh(c,d,c.memoizedProps,M);else{if(typeof M!="string"&&d.stateNode===null)throw Error(o(166));if(c=_s(tu.current),y=_s(Nr.current),Hc(d)){if(!ye)throw Error(o(176));if(c=d.stateNode,M=d.memoizedProps,(y=Zr(c,M,d,!Gc))&&(A=mr,A!==null))switch(R=(A.mode&1)!==0,A.tag){case 3:at(A.stateNode.containerInfo,c,M,R);break;case 5:dt(A.type,A.memoizedProps,A.stateNode,c,M,R)}y&&ws(d)}else d.stateNode=le(M,c,y,d)}return gi(d),null;case 13:if(ht(dn),M=d.memoizedState,sn&&gr!==null&&d.mode&1&&!(d.flags&128)){for(c=gr;c;)c=$t(c);return $l(),d.flags|=98560,d}if(M!==null&&M.dehydrated!==null){if(M=Hc(d),c===null){if(!M)throw Error(o(318));if(!ye)throw Error(o(344));if(c=d.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Uc(c,d)}else $l(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return gi(d),null}return Qr!==null&&(Bv(Qr),Qr=null),d.flags&128?(d.lanes=y,d):(M=M!==null,y=!1,c===null?Hc(d):y=c.memoizedState!==null,M&&!y&&(d.child.flags|=8192,d.mode&1&&(c===null||dn.current&1?Hn===0&&(Hn=3):Vv())),d.updateQueue!==null&&(d.flags|=4),gi(d),null);case 4:return nu(),Kc(c,d),c===null&&me(d.stateNode.containerInfo),gi(d),null;case 10:return Qn(d.type._context),gi(d),null;case 17:return _n(d.type)&&Xt(),gi(d),null;case 19:if(ht(dn),A=d.memoizedState,A===null)return gi(d),null;if(M=(d.flags&128)!==0,R=A.rendering,R===null)if(M)$c(A,!1);else{if(Hn!==0||c!==null&&c.flags&128)for(c=d.child;c!==null;){if(R=Uh(c),R!==null){for(d.flags|=128,$c(A,!1),c=R.updateQueue,c!==null&&(d.updateQueue=c,d.flags|=4),d.subtreeFlags=0,c=y,M=d.child;M!==null;)y=M,A=c,y.flags&=14680066,R=y.alternate,R===null?(y.childLanes=0,y.lanes=A,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=R.childLanes,y.lanes=R.lanes,y.child=R.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=R.memoizedProps,y.memoizedState=R.memoizedState,y.updateQueue=R.updateQueue,y.type=R.type,A=R.dependencies,y.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext}),M=M.sibling;return tt(dn,dn.current&1|2),d.child}c=c.sibling}A.tail!==null&&fn()>Nv&&(d.flags|=128,M=!0,$c(A,!1),d.lanes=4194304)}else{if(!M)if(c=Uh(R),c!==null){if(d.flags|=128,M=!0,c=c.updateQueue,c!==null&&(d.updateQueue=c,d.flags|=4),$c(A,!0),A.tail===null&&A.tailMode==="hidden"&&!R.alternate&&!sn)return gi(d),null}else 2*fn()-A.renderingStartTime>Nv&&y!==1073741824&&(d.flags|=128,M=!0,$c(A,!1),d.lanes=4194304);A.isBackwards?(R.sibling=d.child,d.child=R):(c=A.last,c!==null?c.sibling=R:d.child=R,A.last=R)}return A.tail!==null?(d=A.tail,A.rendering=d,A.tail=d.sibling,A.renderingStartTime=fn(),d.sibling=null,c=dn.current,tt(dn,M?c&1|2:c&1),d):(gi(d),null);case 22:case 23:return zv(),M=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==M&&(d.flags|=8192),M&&d.mode&1?yr&1073741824&&(gi(d),ue&&d.subtreeFlags&6&&(d.flags|=8192)):gi(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}var TU=a.ReactCurrentOwner,vr=!1;function Di(c,d,y,M){d.child=c===null?dM(d,null,y,M):eu(d,c.child,y,M)}function BM(c,d,y,M,A){y=y.render;var R=d.ref;return bn(d,A),M=dv(c,d,y,M,R,A),y=hv(),c!==null&&!vr?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~A,Ks(c,d,A)):(sn&&y&&nv(d),d.flags|=1,Di(c,d,M,A),d.child)}function zM(c,d,y,M,A){if(c===null){var R=y.type;return typeof R=="function"&&!Gv(R)&&R.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(d.tag=15,d.type=R,VM(c,d,R,M,A)):(c=cp(y.type,null,M,d,d.mode,A),c.ref=d.ref,c.return=d,d.child=c)}if(R=c.child,!(c.lanes&A)){var Y=R.memoizedProps;if(y=y.compare,y=y!==null?y:Na,y(Y,M)&&c.ref===d.ref)return Ks(c,d,A)}return d.flags|=1,c=No(R,M),c.ref=d.ref,c.return=d,d.child=c}function VM(c,d,y,M,A){if(c!==null&&Na(c.memoizedProps,M)&&c.ref===d.ref)if(vr=!1,(c.lanes&A)!==0)c.flags&131072&&(vr=!0);else return d.lanes=c.lanes,Ks(c,d,A);return xv(c,d,y,M,A)}function GM(c,d,y){var M=d.pendingProps,A=M.children,R=c!==null?c.memoizedState:null;if(M.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},tt(ru,yr),yr|=y;else if(y&1073741824)d.memoizedState={baseLanes:0,cachePool:null},M=R!==null?R.baseLanes:y,tt(ru,yr),yr|=M;else return c=R!==null?R.baseLanes|y:y,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null},d.updateQueue=null,tt(ru,yr),yr|=c,null;else R!==null?(M=R.baseLanes|y,d.memoizedState=null):M=y,tt(ru,yr),yr|=M;return Di(c,d,A,y),d.child}function HM(c,d){var y=d.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(d.flags|=512,d.flags|=2097152)}function xv(c,d,y,M,A){var R=_n(y)?fr:bt.current;return R=Zn(d,R),bn(d,A),y=dv(c,d,y,M,R,A),M=hv(),c!==null&&!vr?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~A,Ks(c,d,A)):(sn&&M&&nv(d),d.flags|=1,Di(c,d,y,A),d.child)}function WM(c,d,y,M,A){if(_n(y)){var R=!0;Sn(d)}else R=!1;if(bn(d,A),d.stateNode===null)c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2),rM(d,y,M),tv(d,y,M,A),M=!0;else if(c===null){var Y=d.stateNode,re=d.memoizedProps;Y.props=re;var Te=Y.context,He=y.contextType;typeof He=="object"&&He!==null?He=Cn(He):(He=_n(y)?fr:bt.current,He=Zn(d,He));var it=y.getDerivedStateFromProps,St=typeof it=="function"||typeof Y.getSnapshotBeforeUpdate=="function";St||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(re!==M||Te!==He)&&sM(d,Y,M,He),Po=!1;var mt=d.memoizedState;Y.state=mt,Ph(d,M,Y,A),Te=d.memoizedState,re!==M||mt!==Te||Jt.current||Po?(typeof it=="function"&&(ev(d,y,it,M),Te=d.memoizedState),(re=Po||iM(d,y,re,M,mt,Te,He))?(St||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(d.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=M,d.memoizedState=Te),Y.props=M,Y.state=Te,Y.context=He,M=re):(typeof Y.componentDidMount=="function"&&(d.flags|=4194308),M=!1)}else{Y=d.stateNode,$w(c,d),re=d.memoizedProps,He=d.type===d.elementType?re:Li(d.type,re),Y.props=He,St=d.pendingProps,mt=Y.context,Te=y.contextType,typeof Te=="object"&&Te!==null?Te=Cn(Te):(Te=_n(y)?fr:bt.current,Te=Zn(d,Te));var Yt=y.getDerivedStateFromProps;(it=typeof Yt=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(re!==St||mt!==Te)&&sM(d,Y,M,Te),Po=!1,mt=d.memoizedState,Y.state=mt,Ph(d,M,Y,A);var ft=d.memoizedState;re!==St||mt!==ft||Jt.current||Po?(typeof Yt=="function"&&(ev(d,y,Yt,M),ft=d.memoizedState),(He=Po||iM(d,y,He,M,mt,ft,Te)||!1)?(it||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(M,ft,Te),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(M,ft,Te)),typeof Y.componentDidUpdate=="function"&&(d.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof Y.componentDidUpdate!="function"||re===c.memoizedProps&&mt===c.memoizedState||(d.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||re===c.memoizedProps&&mt===c.memoizedState||(d.flags|=1024),d.memoizedProps=M,d.memoizedState=ft),Y.props=M,Y.state=ft,Y.context=Te,M=He):(typeof Y.componentDidUpdate!="function"||re===c.memoizedProps&&mt===c.memoizedState||(d.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||re===c.memoizedProps&&mt===c.memoizedState||(d.flags|=1024),M=!1)}return _v(c,d,y,M,R,A)}function _v(c,d,y,M,A,R){HM(c,d);var Y=(d.flags&128)!==0;if(!M&&!Y)return A&&si(d,y,!1),Ks(c,d,R);M=d.stateNode,TU.current=d;var re=Y&&typeof y.getDerivedStateFromError!="function"?null:M.render();return d.flags|=1,c!==null&&Y?(d.child=eu(d,c.child,null,R),d.child=eu(d,null,re,R)):Di(c,d,re,R),d.memoizedState=M.state,A&&si(d,y,!0),d.child}function jM(c){var d=c.stateNode;d.pendingContext?Wi(c,d.pendingContext,d.pendingContext!==d.context):d.context&&Wi(c,d.context,!1),av(c,d.containerInfo)}function XM(c,d,y,M,A){return $l(),ov(A),d.flags|=256,Di(c,d,y,M),d.child}var Wh={dehydrated:null,treeContext:null,retryLane:0};function jh(c){return{baseLanes:c,cachePool:null}}function YM(c,d,y){var M=d.pendingProps,A=dn.current,R=!1,Y=(d.flags&128)!==0,re;if((re=Y)||(re=c!==null&&c.memoizedState===null?!1:(A&2)!==0),re?(R=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(A|=1),tt(dn,A&1),c===null)return sv(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(d.mode&1?un(c)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(A=M.children,c=M.fallback,R?(M=d.mode,R=d.child,A={mode:"hidden",children:A},!(M&1)&&R!==null?(R.childLanes=0,R.pendingProps=A):R=fp(A,M,0,null),c=ja(c,M,y,null),R.return=d,c.return=d,R.sibling=c,d.child=R,d.child.memoizedState=jh(y),d.memoizedState=Wh,c):Sv(d,A));if(A=c.memoizedState,A!==null){if(re=A.dehydrated,re!==null){if(Y)return d.flags&256?(d.flags&=-257,Xh(c,d,y,Error(o(422)))):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(R=M.fallback,A=d.mode,M=fp({mode:"visible",children:M.children},A,0,null),R=ja(R,A,y,null),R.flags|=2,M.return=d,R.return=d,M.sibling=R,d.child=M,d.mode&1&&eu(d,c.child,null,y),d.child.memoizedState=jh(y),d.memoizedState=Wh,R);if(!(d.mode&1))d=Xh(c,d,y,null);else if(un(re))d=Xh(c,d,y,Error(o(419)));else if(M=(y&c.childLanes)!==0,vr||M){if(M=On,M!==null){switch(y&-y){case 4:R=2;break;case 16:R=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:R=32;break;case 536870912:R=268435456;break;default:R=0}M=R&(M.suspendedLanes|y)?0:R,M!==0&&M!==A.retryLane&&(A.retryLane=M,Fr(c,M,-1))}Vv(),d=Xh(c,d,y,Error(o(421)))}else Ut(re)?(d.flags|=128,d.child=c.child,d=BU.bind(null,c),Gn(re,d),d=null):(y=A.treeContext,ye&&(gr=cr(re),mr=d,sn=!0,Qr=null,Gc=!1,y!==null&&(Dr[Ur++]=Zs,Dr[Ur++]=Js,Dr[Ur++]=Fa,Zs=y.id,Js=y.overflow,Fa=d)),d=Sv(d,d.pendingProps.children),d.flags|=4096);return d}return R?(M=ZM(c,d,M.children,M.fallback,y),R=d.child,A=c.child.memoizedState,R.memoizedState=A===null?jh(y):{baseLanes:A.baseLanes|y,cachePool:null},R.childLanes=c.childLanes&~y,d.memoizedState=Wh,M):(y=qM(c,d,M.children,y),d.memoizedState=null,y)}return R?(M=ZM(c,d,M.children,M.fallback,y),R=d.child,A=c.child.memoizedState,R.memoizedState=A===null?jh(y):{baseLanes:A.baseLanes|y,cachePool:null},R.childLanes=c.childLanes&~y,d.memoizedState=Wh,M):(y=qM(c,d,M.children,y),d.memoizedState=null,y)}function Sv(c,d){return d=fp({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function qM(c,d,y,M){var A=c.child;return c=A.sibling,y=No(A,{mode:"visible",children:y}),!(d.mode&1)&&(y.lanes=M),y.return=d,y.sibling=null,c!==null&&(M=d.deletions,M===null?(d.deletions=[c],d.flags|=16):M.push(c)),d.child=y}function ZM(c,d,y,M,A){var R=d.mode;c=c.child;var Y=c.sibling,re={mode:"hidden",children:y};return!(R&1)&&d.child!==c?(y=d.child,y.childLanes=0,y.pendingProps=re,d.deletions=null):(y=No(c,re),y.subtreeFlags=c.subtreeFlags&14680064),Y!==null?M=No(Y,M):(M=ja(M,R,A,null),M.flags|=2),M.return=d,y.return=d,y.sibling=M,d.child=y,M}function Xh(c,d,y,M){return M!==null&&ov(M),eu(d,c.child,null,y),c=Sv(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function JM(c,d,y){c.lanes|=d;var M=c.alternate;M!==null&&(M.lanes|=d),Ii(c.return,d,y)}function wv(c,d,y,M,A){var R=c.memoizedState;R===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:M,tail:y,tailMode:A}:(R.isBackwards=d,R.rendering=null,R.renderingStartTime=0,R.last=M,R.tail=y,R.tailMode=A)}function QM(c,d,y){var M=d.pendingProps,A=M.revealOrder,R=M.tail;if(Di(c,d,M.children,y),M=dn.current,M&2)M=M&1|2,d.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&JM(c,y,d);else if(c.tag===19)JM(c,y,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}M&=1}if(tt(dn,M),!(d.mode&1))d.memoizedState=null;else switch(A){case"forwards":for(y=d.child,A=null;y!==null;)c=y.alternate,c!==null&&Uh(c)===null&&(A=y),y=y.sibling;y=A,y===null?(A=d.child,d.child=null):(A=y.sibling,y.sibling=null),wv(d,!1,A,y,R);break;case"backwards":for(y=null,A=d.child,d.child=null;A!==null;){if(c=A.alternate,c!==null&&Uh(c)===null){d.child=A;break}c=A.sibling,A.sibling=y,y=A,A=c}wv(d,!0,y,null,R);break;case"together":wv(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Ks(c,d,y){if(c!==null&&(d.dependencies=c.dependencies),su|=d.lanes,!(y&d.childLanes))return null;if(c!==null&&d.child!==c.child)throw Error(o(153));if(d.child!==null){for(c=d.child,y=No(c,c.pendingProps),d.child=y,y.return=d;c.sibling!==null;)c=c.sibling,y=y.sibling=No(c,c.pendingProps),y.return=d;y.sibling=null}return d.child}function bU(c,d,y){switch(d.tag){case 3:jM(d),$l();break;case 5:hM(d);break;case 1:_n(d.type)&&Sn(d);break;case 4:av(d,d.stateNode.containerInfo);break;case 10:bh(d,d.type._context,d.memoizedProps.value);break;case 13:var M=d.memoizedState;if(M!==null)return M.dehydrated!==null?(tt(dn,dn.current&1),d.flags|=128,null):y&d.child.childLanes?YM(c,d,y):(tt(dn,dn.current&1),c=Ks(c,d,y),c!==null?c.sibling:null);tt(dn,dn.current&1);break;case 19:if(M=(y&d.childLanes)!==0,c.flags&128){if(M)return QM(c,d,y);d.flags|=128}var A=d.memoizedState;if(A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),tt(dn,dn.current),M)break;return null;case 22:case 23:return d.lanes=0,GM(c,d,y)}return Ks(c,d,y)}function CU(c,d){switch(iv(d),d.tag){case 1:return _n(d.type)&&Xt(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return nu(),ht(Jt),ht(bt),cv(),c=d.flags,c&65536&&!(c&128)?(d.flags=c&-65537|128,d):null;case 5:return lv(d),null;case 13:if(ht(dn),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(o(340));$l()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return ht(dn),null;case 4:return nu(),null;case 10:return Qn(d.type._context),null;case 22:case 23:return zv(),null;case 24:return null;default:return null}}var Yh=!1,za=!1,PU=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function qh(c,d){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(M){qi(c,d,M)}else y.current=null}function Mv(c,d,y){try{y()}catch(M){qi(c,d,M)}}var KM=!1;function RU(c,d){for(O(c.containerInfo),Qe=d;Qe!==null;)if(c=Qe,d=c.child,(c.subtreeFlags&1028)!==0&&d!==null)d.return=c,Qe=d;else for(;Qe!==null;){c=Qe;try{var y=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var M=y.memoizedProps,A=y.memoizedState,R=c.stateNode,Y=R.getSnapshotBeforeUpdate(c.elementType===c.type?M:Li(c.type,M),A);R.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:ue&&Ye(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(re){qi(c,c.return,re)}if(d=c.sibling,d!==null){d.return=c.return,Qe=d;break}Qe=c.return}return y=KM,KM=!1,y}function Va(c,d,y){var M=d.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var A=M=M.next;do{if((A.tag&c)===c){var R=A.destroy;A.destroy=void 0,R!==void 0&&Mv(d,y,R)}A=A.next}while(A!==M)}}function ef(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var y=d=d.next;do{if((y.tag&c)===c){var M=y.create;y.destroy=M()}y=y.next}while(y!==d)}}function Ev(c){var d=c.ref;if(d!==null){var y=c.stateNode;switch(c.tag){case 5:c=J(y);break;default:c=y}typeof d=="function"?d(c):d.current=c}}function $M(c,d,y){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Da,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(c=d.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var M=c=c.next;do{var A=M,R=A.destroy;A=A.tag,R!==void 0&&(A&2||A&4)&&Mv(d,y,R),M=M.next}while(M!==c)}break;case 1:if(qh(d,y),c=d.stateNode,typeof c.componentWillUnmount=="function")try{c.props=d.memoizedProps,c.state=d.memoizedState,c.componentWillUnmount()}catch(Y){qi(d,y,Y)}break;case 5:qh(d,y);break;case 4:ue?sE(c,d,y):B&&B&&(d=d.stateNode.containerInfo,y=Ae(d),ct(d,y))}}function eE(c,d,y){for(var M=d;;)if($M(c,M,y),M.child===null||ue&&M.tag===4){if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return}M.sibling.return=M.return,M=M.sibling}else M.child.return=M,M=M.child}function tE(c){var d=c.alternate;d!==null&&(c.alternate=null,tE(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&ke(d)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function nE(c){return c.tag===5||c.tag===3||c.tag===4}function iE(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||nE(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function rE(c){if(ue){e:{for(var d=c.return;d!==null;){if(nE(d))break e;d=d.return}throw Error(o(160))}var y=d;switch(y.tag){case 5:d=y.stateNode,y.flags&32&&(Ze(d),y.flags&=-33),y=iE(c),Tv(c,y,d);break;case 3:case 4:d=y.stateNode.containerInfo,y=iE(c),Av(c,y,d);break;default:throw Error(o(161))}}}function Av(c,d,y){var M=c.tag;if(M===5||M===6)c=c.stateNode,d?Ee(y,c,d):Be(y,c);else if(M!==4&&(c=c.child,c!==null))for(Av(c,d,y),c=c.sibling;c!==null;)Av(c,d,y),c=c.sibling}function Tv(c,d,y){var M=c.tag;if(M===5||M===6)c=c.stateNode,d?rt(y,c,d):_e(y,c);else if(M!==4&&(c=c.child,c!==null))for(Tv(c,d,y),c=c.sibling;c!==null;)Tv(c,d,y),c=c.sibling}function sE(c,d,y){for(var M=d,A=!1,R,Y;;){if(!A){A=M.return;e:for(;;){if(A===null)throw Error(o(160));switch(R=A.stateNode,A.tag){case 5:Y=!1;break e;case 3:R=R.containerInfo,Y=!0;break e;case 4:R=R.containerInfo,Y=!0;break e}A=A.return}A=!0}if(M.tag===5||M.tag===6)eE(c,M,y),Y?je(R,M.stateNode):Xe(R,M.stateNode);else if(M.tag===18)Y?we(R,M.stateNode):Se(R,M.stateNode);else if(M.tag===4){if(M.child!==null){R=M.stateNode.containerInfo,Y=!0,M.child.return=M,M=M.child;continue}}else if($M(c,M,y),M.child!==null){M.child.return=M,M=M.child;continue}if(M===d)break;for(;M.sibling===null;){if(M.return===null||M.return===d)return;M=M.return,M.tag===4&&(A=!1)}M.sibling.return=M.return,M=M.sibling}}function bv(c,d){if(ue){switch(d.tag){case 0:case 11:case 14:case 15:Va(3,d,d.return),ef(3,d),Va(5,d,d.return);return;case 1:return;case 5:var y=d.stateNode;if(y!=null){var M=d.memoizedProps;c=c!==null?c.memoizedProps:M;var A=d.type,R=d.updateQueue;d.updateQueue=null,R!==null&&ze(y,R,A,c,M,d)}return;case 6:if(d.stateNode===null)throw Error(o(162));y=d.memoizedProps,De(d.stateNode,c!==null?c.memoizedProps:y,y);return;case 3:ye&&c!==null&&c.memoizedState.isDehydrated&&ae(d.stateNode.containerInfo);return;case 12:return;case 13:Zh(d);return;case 19:Zh(d);return;case 17:return}throw Error(o(163))}switch(d.tag){case 0:case 11:case 14:case 15:Va(3,d,d.return),ef(3,d),Va(5,d,d.return);return;case 12:return;case 13:Zh(d);return;case 19:Zh(d);return;case 3:ye&&c!==null&&c.memoizedState.isDehydrated&&ae(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(B){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,ct(d.containerInfo,d.pendingChildren);break e}throw Error(o(163))}}function Zh(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new PU),d.forEach(function(M){var A=zU.bind(null,c,M);y.has(M)||(y.add(M),M.then(A,A))})}}function LU(c,d){for(Qe=d;Qe!==null;){d=Qe;var y=d.deletions;if(y!==null)for(var M=0;M<y.length;M++){var A=y[M];try{var R=c;ue?sE(R,A,d):eE(R,A,d);var Y=A.alternate;Y!==null&&(Y.return=null),A.return=null}catch(ut){qi(A,d,ut)}}if(y=d.child,d.subtreeFlags&12854&&y!==null)y.return=d,Qe=y;else for(;Qe!==null;){d=Qe;try{var re=d.flags;if(re&32&&ue&&Ze(d.stateNode),re&512){var Te=d.alternate;if(Te!==null){var He=Te.ref;He!==null&&(typeof He=="function"?He(null):He.current=null)}}if(re&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var it=d.alternate;(it===null||it.memoizedState===null)&&(Uv=fn())}break;case 22:var St=d.memoizedState!==null,mt=d.alternate,Yt=mt!==null&&mt.memoizedState!==null;if(y=d,ue){e:if(M=y,A=St,R=null,ue)for(var ft=M;;){if(ft.tag===5){if(R===null){R=ft;var vi=ft.stateNode;A?$e(vi):lt(ft.stateNode,ft.memoizedProps)}}else if(ft.tag===6){if(R===null){var Br=ft.stateNode;A?Ue(Br):ee(Br,ft.memoizedProps)}}else if((ft.tag!==22&&ft.tag!==23||ft.memoizedState===null||ft===M)&&ft.child!==null){ft.child.return=ft,ft=ft.child;continue}if(ft===M)break;for(;ft.sibling===null;){if(ft.return===null||ft.return===M)break e;R===ft&&(R=null),ft=ft.return}R===ft&&(R=null),ft.sibling.return=ft.return,ft=ft.sibling}}if(St&&!Yt&&y.mode&1){Qe=y;for(var pe=y.child;pe!==null;){for(y=Qe=pe;Qe!==null;){M=Qe;var se=M.child;switch(M.tag){case 0:case 11:case 14:case 15:Va(4,M,M.return);break;case 1:qh(M,M.return);var Me=M.stateNode;if(typeof Me.componentWillUnmount=="function"){var et=M.return;try{Me.props=M.memoizedProps,Me.state=M.memoizedState,Me.componentWillUnmount()}catch(ut){qi(M,et,ut)}}break;case 5:qh(M,M.return);break;case 22:if(M.memoizedState!==null){lE(y);continue}}se!==null?(se.return=M,Qe=se):lE(y)}pe=pe.sibling}}}switch(re&4102){case 2:rE(d),d.flags&=-3;break;case 6:rE(d),d.flags&=-3,bv(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,bv(d.alternate,d);break;case 4:bv(d.alternate,d)}}catch(ut){qi(d,d.return,ut)}if(y=d.sibling,y!==null){y.return=d.return,Qe=y;break}Qe=d.return}}}function IU(c,d,y){Qe=c,oE(c)}function oE(c,d,y){for(var M=(c.mode&1)!==0;Qe!==null;){var A=Qe,R=A.child;if(A.tag===22&&M){var Y=A.memoizedState!==null||Yh;if(!Y){var re=A.alternate,Te=re!==null&&re.memoizedState!==null||za;re=Yh;var He=za;if(Yh=Y,(za=Te)&&!He)for(Qe=A;Qe!==null;)Y=Qe,Te=Y.child,Y.tag===22&&Y.memoizedState!==null?uE(A):Te!==null?(Te.return=Y,Qe=Te):uE(A);for(;R!==null;)Qe=R,oE(R),R=R.sibling;Qe=A,Yh=re,za=He}aE(c)}else A.subtreeFlags&8772&&R!==null?(R.return=A,Qe=R):aE(c)}}function aE(c){for(;Qe!==null;){var d=Qe;if(d.flags&8772){var y=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:za||ef(5,d);break;case 1:var M=d.stateNode;if(d.flags&4&&!za)if(y===null)M.componentDidMount();else{var A=d.elementType===d.type?y.memoizedProps:Li(d.type,y.memoizedProps);M.componentDidUpdate(A,y.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var R=d.updateQueue;R!==null&&tM(d,R,M);break;case 3:var Y=d.updateQueue;if(Y!==null){if(y=null,d.child!==null)switch(d.child.tag){case 5:y=J(d.child.stateNode);break;case 1:y=d.child.stateNode}tM(d,Y,y)}break;case 5:var re=d.stateNode;y===null&&d.flags&4&&Oe(re,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(ye&&d.memoizedState===null){var Te=d.alternate;if(Te!==null){var He=Te.memoizedState;if(He!==null){var it=He.dehydrated;it!==null&&ge(it)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}za||d.flags&512&&Ev(d)}catch(St){qi(d,d.return,St)}}if(d===c){Qe=null;break}if(y=d.sibling,y!==null){y.return=d.return,Qe=y;break}Qe=d.return}}function lE(c){for(;Qe!==null;){var d=Qe;if(d===c){Qe=null;break}var y=d.sibling;if(y!==null){y.return=d.return,Qe=y;break}Qe=d.return}}function uE(c){for(;Qe!==null;){var d=Qe;try{switch(d.tag){case 0:case 11:case 15:var y=d.return;try{ef(4,d)}catch(Te){qi(d,y,Te)}break;case 1:var M=d.stateNode;if(typeof M.componentDidMount=="function"){var A=d.return;try{M.componentDidMount()}catch(Te){qi(d,A,Te)}}var R=d.return;try{Ev(d)}catch(Te){qi(d,R,Te)}break;case 5:var Y=d.return;try{Ev(d)}catch(Te){qi(d,Y,Te)}}}catch(Te){qi(d,d.return,Te)}if(d===c){Qe=null;break}var re=d.sibling;if(re!==null){re.return=d.return,Qe=re;break}Qe=d.return}}var Jh=0,Qh=1,Kh=2,$h=3,ep=4;if(typeof Symbol=="function"&&Symbol.for){var tf=Symbol.for;Jh=tf("selector.component"),Qh=tf("selector.has_pseudo_class"),Kh=tf("selector.role"),$h=tf("selector.test_id"),ep=tf("selector.text")}function Cv(c){var d=ce(c);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(c=ve(c),c===null)throw Error(o(362));return c.stateNode.current}function Pv(c,d){switch(d.$$typeof){case Jh:if(c.type===d.value)return!0;break;case Qh:e:{d=d.value,c=[c,0];for(var y=0;y<c.length;){var M=c[y++],A=c[y++],R=d[A];if(M.tag!==5||!U(M)){for(;R!=null&&Pv(M,R);)A++,R=d[A];if(A===d.length){d=!0;break e}else for(M=M.child;M!==null;)c.push(M,A),M=M.sibling}}d=!1}return d;case Kh:if(c.tag===5&&Q(c.stateNode,d.value))return!0;break;case ep:if((c.tag===5||c.tag===6)&&(c=F(c),c!==null&&0<=c.indexOf(d.value)))return!0;break;case $h:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Rv(c){switch(c.$$typeof){case Jh:return"<"+(P(c.value)||"Unknown")+">";case Qh:return":has("+(Rv(c)||"")+")";case Kh:return'[role="'+c.value+'"]';case ep:return'"'+c.value+'"';case $h:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function cE(c,d){var y=[];c=[c,0];for(var M=0;M<c.length;){var A=c[M++],R=c[M++],Y=d[R];if(A.tag!==5||!U(A)){for(;Y!=null&&Pv(A,Y);)R++,Y=d[R];if(R===d.length)y.push(A);else for(A=A.child;A!==null;)c.push(A,R),A=A.sibling}}return y}function Lv(c,d){if(!Le)throw Error(o(363));c=Cv(c),c=cE(c,d),d=[],c=Array.from(c);for(var y=0;y<c.length;){var M=c[y++];if(M.tag===5)U(M)||d.push(M.stateNode);else for(M=M.child;M!==null;)c.push(M),M=M.sibling}return d}var DU=Math.ceil,tp=a.ReactCurrentDispatcher,Iv=a.ReactCurrentOwner,Pn=a.ReactCurrentBatchConfig,Pt=0,On=null,Fn=null,oi=0,yr=0,ru=cn(0),Hn=0,nf=null,su=0,np=0,Dv=0,rf=null,Xi=null,Uv=0,Nv=1/0;function ou(){Nv=fn()+500}var ip=!1,Ov=null,Lo=null,rp=!1,Io=null,sp=0,sf=0,Fv=null,op=-1,ap=0;function Ui(){return Pt&6?fn():op!==-1?op:op=fn()}function Do(c){return c.mode&1?Pt&2&&oi!==0?oi&-oi:Ua.transition!==null?(ap===0&&(c=Hs,Hs<<=1,!(Hs&4194240)&&(Hs=64),ap=c),ap):(c=Rt,c!==0?c:fe()):1}function Fr(c,d,y){if(50<sf)throw sf=0,Fv=null,Error(o(185));var M=lp(c,d);return M===null?null:(vs(M,d,y),(!(Pt&2)||M!==On)&&(M===On&&(!(Pt&2)&&(np|=d),Hn===4&&Uo(M,oi)),Yi(M,y),d===1&&Pt===0&&!(c.mode&1)&&(ou(),xs&&ji())),M)}function lp(c,d){c.lanes|=d;var y=c.alternate;for(y!==null&&(y.lanes|=d),y=c,c=c.return;c!==null;)c.childLanes|=d,y=c.alternate,y!==null&&(y.childLanes|=d),y=c,c=c.return;return y.tag===3?y.stateNode:null}function Yi(c,d){var y=c.callbackNode;Nc(c,d);var M=La(c,c===On?oi:0);if(M===0)y!==null&&ql(y),c.callbackNode=null,c.callbackPriority=0;else if(d=M&-M,c.callbackPriority!==d){if(y!=null&&ql(y),d===1)c.tag===0?Vc(dE.bind(null,c)):zc(dE.bind(null,c)),de?Ce(function(){Pt===0&&ji()}):Ys(Ia,ji),y=null;else{switch(Oc(M)){case 1:y=Ia;break;case 4:y=Ah;break;case 16:y=Pi;break;case 536870912:y=kc;break;default:y=Pi}y=SE(y,fE.bind(null,c))}c.callbackPriority=d,c.callbackNode=y}}function fE(c,d){if(op=-1,ap=0,Pt&6)throw Error(o(327));var y=c.callbackNode;if(Wa()&&c.callbackNode!==y)return null;var M=La(c,c===On?oi:0);if(M===0)return null;if(M&30||M&c.expiredLanes||d)d=up(c,M);else{d=M;var A=Pt;Pt|=2;var R=mE();(On!==c||oi!==d)&&(ou(),Ga(c,d));do try{OU();break}catch(re){pE(c,re)}while(1);Jl(),tp.current=R,Pt=A,Fn!==null?d=0:(On=null,oi=0,d=Hn)}if(d!==0){if(d===2&&(A=Xs(c),A!==0&&(M=A,d=kv(c,A))),d===1)throw y=nf,Ga(c,0),Uo(c,M),Yi(c,fn()),y;if(d===6)Uo(c,M);else{if(A=c.current.alternate,!(M&30)&&!UU(A)&&(d=up(c,M),d===2&&(R=Xs(c),R!==0&&(M=R,d=kv(c,R))),d===1))throw y=nf,Ga(c,0),Uo(c,M),Yi(c,fn()),y;switch(c.finishedWork=A,c.finishedLanes=M,d){case 0:case 1:throw Error(o(345));case 2:Ha(c,Xi);break;case 3:if(Uo(c,M),(M&130023424)===M&&(d=Uv+500-fn(),10<d)){if(La(c,0)!==0)break;if(A=c.suspendedLanes,(A&M)!==M){Ui(),c.pingedLanes|=c.suspendedLanes&A;break}c.timeoutHandle=oe(Ha.bind(null,c,Xi),d);break}Ha(c,Xi);break;case 4:if(Uo(c,M),(M&4194240)===M)break;for(d=c.eventTimes,A=-1;0<M;){var Y=31-Ci(M);R=1<<Y,Y=d[Y],Y>A&&(A=Y),M&=~R}if(M=A,M=fn()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*DU(M/1960))-M,10<M){c.timeoutHandle=oe(Ha.bind(null,c,Xi),M);break}Ha(c,Xi);break;case 5:Ha(c,Xi);break;default:throw Error(o(329))}}}return Yi(c,fn()),c.callbackNode===y?fE.bind(null,c):null}function kv(c,d){var y=rf;return c.current.memoizedState.isDehydrated&&(Ga(c,d).flags|=256),c=up(c,d),c!==2&&(d=Xi,Xi=y,d!==null&&Bv(d)),c}function Bv(c){Xi===null?Xi=c:Xi.push.apply(Xi,c)}function UU(c){for(var d=c;;){if(d.flags&16384){var y=d.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var M=0;M<y.length;M++){var A=y[M],R=A.getSnapshot;A=A.value;try{if(!hr(R(),A))return!1}catch{return!1}}}if(y=d.child,d.subtreeFlags&16384&&y!==null)y.return=d,d=y;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Uo(c,d){for(d&=~Dv,d&=~np,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var y=31-Ci(d),M=1<<y;c[y]=-1,d&=~M}}function dE(c){if(Pt&6)throw Error(o(327));Wa();var d=La(c,0);if(!(d&1))return Yi(c,fn()),null;var y=up(c,d);if(c.tag!==0&&y===2){var M=Xs(c);M!==0&&(d=M,y=kv(c,M))}if(y===1)throw y=nf,Ga(c,0),Uo(c,d),Yi(c,fn()),y;if(y===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,Ha(c,Xi),Yi(c,fn()),null}function hE(c){Io!==null&&Io.tag===0&&!(Pt&6)&&Wa();var d=Pt;Pt|=1;var y=Pn.transition,M=Rt;try{if(Pn.transition=null,Rt=1,c)return c()}finally{Rt=M,Pn.transition=y,Pt=d,!(Pt&6)&&ji()}}function zv(){yr=ru.current,ht(ru)}function Ga(c,d){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==be&&(c.timeoutHandle=be,he(y)),Fn!==null)for(y=Fn.return;y!==null;){var M=y;switch(iv(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&Xt();break;case 3:nu(),ht(Jt),ht(bt),cv();break;case 5:lv(M);break;case 4:nu();break;case 13:ht(dn);break;case 19:ht(dn);break;case 10:Qn(M.type._context);break;case 22:case 23:zv()}y=y.return}if(On=c,Fn=c=No(c.current,null),oi=yr=d,Hn=0,nf=null,Dv=np=su=0,Xi=rf=null,pr!==null){for(d=0;d<pr.length;d++)if(y=pr[d],M=y.interleaved,M!==null){y.interleaved=null;var A=M.next,R=y.pending;if(R!==null){var Y=R.next;R.next=A,M.next=Y}y.pending=M}pr=null}return c}function pE(c,d){do{var y=Fn;try{if(Jl(),Nh.current=Vh,Oh){for(var M=wn.memoizedState;M!==null;){var A=M.queue;A!==null&&(A.pending=null),M=M.next}Oh=!1}if(iu=0,Kn=pi=wn=null,Yc=!1,qc=0,Iv.current=null,y===null||y.return===null){Hn=1,nf=d,Fn=null;break}e:{var R=c,Y=y.return,re=y,Te=d;if(d=oi,re.flags|=32768,Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var He=Te,it=re,St=it.tag;if(!(it.mode&1)&&(St===0||St===11||St===15)){var mt=it.alternate;mt?(it.updateQueue=mt.updateQueue,it.memoizedState=mt.memoizedState,it.lanes=mt.lanes):(it.updateQueue=null,it.memoizedState=null)}var Yt=NM(Y);if(Yt!==null){Yt.flags&=-257,OM(Yt,Y,re,R,d),Yt.mode&1&&UM(R,He,d),d=Yt,Te=He;var ft=d.updateQueue;if(ft===null){var vi=new Set;vi.add(Te),d.updateQueue=vi}else ft.add(Te);break e}else{if(!(d&1)){UM(R,He,d),Vv();break e}Te=Error(o(426))}}else if(sn&&re.mode&1){var Br=NM(Y);if(Br!==null){!(Br.flags&65536)&&(Br.flags|=256),OM(Br,Y,re,R,d),ov(Te);break e}}R=Te,Hn!==4&&(Hn=2),rf===null?rf=[R]:rf.push(R),Te=vv(Te,re),re=Y;do{switch(re.tag){case 3:re.flags|=65536,d&=-d,re.lanes|=d;var pe=IM(re,Te,d);eM(re,pe);break e;case 1:R=Te;var se=re.type,Me=re.stateNode;if(!(re.flags&128)&&(typeof se.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(Lo===null||!Lo.has(Me)))){re.flags|=65536,d&=-d,re.lanes|=d;var et=DM(re,R,d);eM(re,et);break e}}re=re.return}while(re!==null)}vE(y)}catch(ut){d=ut,Fn===y&&y!==null&&(Fn=y=y.return);continue}break}while(1)}function mE(){var c=tp.current;return tp.current=Vh,c===null?Vh:c}function Vv(){(Hn===0||Hn===3||Hn===2)&&(Hn=4),On===null||!(su&268435455)&&!(np&268435455)||Uo(On,oi)}function up(c,d){var y=Pt;Pt|=2;var M=mE();On===c&&oi===d||Ga(c,d);do try{NU();break}catch(A){pE(c,A)}while(1);if(Jl(),Pt=y,tp.current=M,Fn!==null)throw Error(o(261));return On=null,oi=0,Hn}function NU(){for(;Fn!==null;)gE(Fn)}function OU(){for(;Fn!==null&&!Fc();)gE(Fn)}function gE(c){var d=_E(c.alternate,c,yr);c.memoizedProps=c.pendingProps,d===null?vE(c):Fn=d,Iv.current=null}function vE(c){var d=c;do{var y=d.alternate;if(c=d.return,d.flags&32768){if(y=CU(y,d),y!==null){y.flags&=32767,Fn=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Hn=6,Fn=null;return}}else if(y=AU(y,d,yr),y!==null){Fn=y;return}if(d=d.sibling,d!==null){Fn=d;return}Fn=d=c}while(d!==null);Hn===0&&(Hn=5)}function Ha(c,d){var y=Rt,M=Pn.transition;try{Pn.transition=null,Rt=1,FU(c,d,y)}finally{Pn.transition=M,Rt=y}return null}function FU(c,d,y){do Wa();while(Io!==null);if(Pt&6)throw Error(o(327));var M=c.finishedWork,A=c.finishedLanes;if(M===null)return null;if(c.finishedWork=null,c.finishedLanes=0,M===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var R=M.lanes|M.childLanes;if(bo(c,R),c===On&&(Fn=On=null,oi=0),!(M.subtreeFlags&2064)&&!(M.flags&2064)||rp||(rp=!0,SE(Pi,function(){return Wa(),null})),R=(M.flags&15990)!==0,M.subtreeFlags&15990||R){R=Pn.transition,Pn.transition=null;var Y=Rt;Rt=1;var re=Pt;Pt|=4,Iv.current=null,RU(c,M),LU(c,M),V(c.containerInfo),c.current=M,IU(M),Eh(),Pt=re,Rt=Y,Pn.transition=R}else c.current=M;if(rp&&(rp=!1,Io=c,sp=A),R=c.pendingLanes,R===0&&(Lo=null),Bc(M.stateNode),Yi(c,fn()),d!==null)for(y=c.onRecoverableError,M=0;M<d.length;M++)y(d[M]);if(ip)throw ip=!1,c=Ov,Ov=null,c;return sp&1&&c.tag!==0&&Wa(),R=c.pendingLanes,R&1?c===Fv?sf++:(sf=0,Fv=c):sf=0,ji(),null}function Wa(){if(Io!==null){var c=Oc(sp),d=Pn.transition,y=Rt;try{if(Pn.transition=null,Rt=16>c?16:c,Io===null)var M=!1;else{if(c=Io,Io=null,sp=0,Pt&6)throw Error(o(331));var A=Pt;for(Pt|=4,Qe=c.current;Qe!==null;){var R=Qe,Y=R.child;if(Qe.flags&16){var re=R.deletions;if(re!==null){for(var Te=0;Te<re.length;Te++){var He=re[Te];for(Qe=He;Qe!==null;){var it=Qe;switch(it.tag){case 0:case 11:case 15:Va(8,it,R)}var St=it.child;if(St!==null)St.return=it,Qe=St;else for(;Qe!==null;){it=Qe;var mt=it.sibling,Yt=it.return;if(tE(it),it===He){Qe=null;break}if(mt!==null){mt.return=Yt,Qe=mt;break}Qe=Yt}}}var ft=R.alternate;if(ft!==null){var vi=ft.child;if(vi!==null){ft.child=null;do{var Br=vi.sibling;vi.sibling=null,vi=Br}while(vi!==null)}}Qe=R}}if(R.subtreeFlags&2064&&Y!==null)Y.return=R,Qe=Y;else e:for(;Qe!==null;){if(R=Qe,R.flags&2048)switch(R.tag){case 0:case 11:case 15:Va(9,R,R.return)}var pe=R.sibling;if(pe!==null){pe.return=R.return,Qe=pe;break e}Qe=R.return}}var se=c.current;for(Qe=se;Qe!==null;){Y=Qe;var Me=Y.child;if(Y.subtreeFlags&2064&&Me!==null)Me.return=Y,Qe=Me;else e:for(Y=se;Qe!==null;){if(re=Qe,re.flags&2048)try{switch(re.tag){case 0:case 11:case 15:ef(9,re)}}catch(ut){qi(re,re.return,ut)}if(re===Y){Qe=null;break e}var et=re.sibling;if(et!==null){et.return=re.return,Qe=et;break e}Qe=re.return}}if(Pt=A,ji(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Da,c)}catch{}M=!0}return M}finally{Rt=y,Pn.transition=d}}return!1}function yE(c,d,y){d=vv(y,d),d=IM(c,d,1),Ro(c,d),d=Ui(),c=lp(c,1),c!==null&&(vs(c,1,d),Yi(c,d))}function qi(c,d,y){if(c.tag===3)yE(c,c,y);else for(;d!==null;){if(d.tag===3){yE(d,c,y);break}else if(d.tag===1){var M=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Lo===null||!Lo.has(M))){c=vv(y,c),c=DM(d,c,1),Ro(d,c),c=Ui(),d=lp(d,1),d!==null&&(vs(d,1,c),Yi(d,c));break}}d=d.return}}function kU(c,d,y){var M=c.pingCache;M!==null&&M.delete(d),d=Ui(),c.pingedLanes|=c.suspendedLanes&y,On===c&&(oi&y)===y&&(Hn===4||Hn===3&&(oi&130023424)===oi&&500>fn()-Uv?Ga(c,0):Dv|=y),Yi(c,d)}function xE(c,d){d===0&&(c.mode&1?(d=Ws,Ws<<=1,!(Ws&130023424)&&(Ws=4194304)):d=1);var y=Ui();c=lp(c,d),c!==null&&(vs(c,d,y),Yi(c,y))}function BU(c){var d=c.memoizedState,y=0;d!==null&&(y=d.retryLane),xE(c,y)}function zU(c,d){var y=0;switch(c.tag){case 13:var M=c.stateNode,A=c.memoizedState;A!==null&&(y=A.retryLane);break;case 19:M=c.stateNode;break;default:throw Error(o(314))}M!==null&&M.delete(d),xE(c,y)}var _E;_E=function(c,d,y){if(c!==null)if(c.memoizedProps!==d.pendingProps||Jt.current)vr=!0;else{if(!(c.lanes&y)&&!(d.flags&128))return vr=!1,bU(c,d,y);vr=!!(c.flags&131072)}else vr=!1,sn&&d.flags&1048576&&oM(d,Ih,d.index);switch(d.lanes=0,d.tag){case 2:var M=d.type;c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2),c=d.pendingProps;var A=Zn(d,bt.current);bn(d,y),A=dv(null,d,M,c,A,y);var R=hv();return d.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,_n(M)?(R=!0,Sn(d)):R=!1,d.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,$0(d),A.updater=Rh,d.stateNode=A,A._reactInternals=d,tv(d,M,c,y),d=_v(null,d,M,!0,R,y)):(d.tag=0,sn&&R&&nv(d),Di(null,d,A,y),d=d.child),d;case 16:M=d.elementType;e:{switch(c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2),c=d.pendingProps,A=M._init,M=A(M._payload),d.type=M,A=d.tag=GU(M),c=Li(M,c),A){case 0:d=xv(null,d,M,c,y);break e;case 1:d=WM(null,d,M,c,y);break e;case 11:d=BM(null,d,M,c,y);break e;case 14:d=zM(null,d,M,Li(M.type,c),y);break e}throw Error(o(306,M,""))}return d;case 0:return M=d.type,A=d.pendingProps,A=d.elementType===M?A:Li(M,A),xv(c,d,M,A,y);case 1:return M=d.type,A=d.pendingProps,A=d.elementType===M?A:Li(M,A),WM(c,d,M,A,y);case 3:e:{if(jM(d),c===null)throw Error(o(387));M=d.pendingProps,R=d.memoizedState,A=R.element,$w(c,d),Ph(d,M,null,y);var Y=d.memoizedState;if(M=Y.element,ye&&R.isDehydrated)if(R={element:M,isDehydrated:!1,cache:Y.cache,transitions:Y.transitions},d.updateQueue.baseState=R,d.memoizedState=R,d.flags&256){A=Error(o(423)),d=XM(c,d,M,y,A);break e}else if(M!==A){A=Error(o(424)),d=XM(c,d,M,y,A);break e}else for(ye&&(gr=Un(d.stateNode.containerInfo),mr=d,sn=!0,Qr=null,Gc=!1),y=dM(d,null,M,y),d.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if($l(),M===A){d=Ks(c,d,y);break e}Di(c,d,M,y)}d=d.child}return d;case 5:return hM(d),c===null&&sv(d),M=d.type,A=d.pendingProps,R=c!==null?c.memoizedProps:null,Y=A.children,$(M,A)?Y=null:R!==null&&$(M,R)&&(d.flags|=32),HM(c,d),Di(c,d,Y,y),d.child;case 6:return c===null&&sv(d),null;case 13:return YM(c,d,y);case 4:return av(d,d.stateNode.containerInfo),M=d.pendingProps,c===null?d.child=eu(d,null,M,y):Di(c,d,M,y),d.child;case 11:return M=d.type,A=d.pendingProps,A=d.elementType===M?A:Li(M,A),BM(c,d,M,A,y);case 7:return Di(c,d,d.pendingProps,y),d.child;case 8:return Di(c,d,d.pendingProps.children,y),d.child;case 12:return Di(c,d,d.pendingProps.children,y),d.child;case 10:e:{if(M=d.type._context,A=d.pendingProps,R=d.memoizedProps,Y=A.value,bh(d,M,Y),R!==null)if(hr(R.value,Y)){if(R.children===A.children&&!Jt.current){d=Ks(c,d,y);break e}}else for(R=d.child,R!==null&&(R.return=d);R!==null;){var re=R.dependencies;if(re!==null){Y=R.child;for(var Te=re.firstContext;Te!==null;){if(Te.context===M){if(R.tag===1){Te=qs(-1,y&-y),Te.tag=2;var He=R.updateQueue;if(He!==null){He=He.shared;var it=He.pending;it===null?Te.next=Te:(Te.next=it.next,it.next=Te),He.pending=Te}}R.lanes|=y,Te=R.alternate,Te!==null&&(Te.lanes|=y),Ii(R.return,y,d),re.lanes|=y;break}Te=Te.next}}else if(R.tag===10)Y=R.type===d.type?null:R.child;else if(R.tag===18){if(Y=R.return,Y===null)throw Error(o(341));Y.lanes|=y,re=Y.alternate,re!==null&&(re.lanes|=y),Ii(Y,y,d),Y=R.sibling}else Y=R.child;if(Y!==null)Y.return=R;else for(Y=R;Y!==null;){if(Y===d){Y=null;break}if(R=Y.sibling,R!==null){R.return=Y.return,Y=R;break}Y=Y.return}R=Y}Di(c,d,A.children,y),d=d.child}return d;case 9:return A=d.type,M=d.pendingProps.children,bn(d,y),A=Cn(A),M=M(A),d.flags|=1,Di(c,d,M,y),d.child;case 14:return M=d.type,A=Li(M,d.pendingProps),A=Li(M.type,A),zM(c,d,M,A,y);case 15:return VM(c,d,d.type,d.pendingProps,y);case 17:return M=d.type,A=d.pendingProps,A=d.elementType===M?A:Li(M,A),c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,_n(M)?(c=!0,Sn(d)):c=!1,bn(d,y),rM(d,M,A),tv(d,M,A,y),_v(null,d,M,!0,c,y);case 19:return QM(c,d,y);case 22:return GM(c,d,y)}throw Error(o(156,d.tag))};function SE(c,d){return Ys(c,d)}function VU(c,d,y,M){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kr(c,d,y,M){return new VU(c,d,y,M)}function Gv(c){return c=c.prototype,!(!c||!c.isReactComponent)}function GU(c){if(typeof c=="function")return Gv(c)?1:0;if(c!=null){if(c=c.$$typeof,c===w)return 11;if(c===x)return 14}return 2}function No(c,d){var y=c.alternate;return y===null?(y=kr(c.tag,d,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=d,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,d=c.dependencies,y.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function cp(c,d,y,M,A,R){var Y=2;if(M=c,typeof c=="function")Gv(c)&&(Y=1);else if(typeof c=="string")Y=5;else e:switch(c){case f:return ja(y.children,A,R,d);case h:Y=8,A|=8;break;case p:return c=kr(12,y,d,A|2),c.elementType=p,c.lanes=R,c;case _:return c=kr(13,y,d,A),c.elementType=_,c.lanes=R,c;case g:return c=kr(19,y,d,A),c.elementType=g,c.lanes=R,c;case E:return fp(y,A,R,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case m:Y=10;break e;case v:Y=9;break e;case w:Y=11;break e;case x:Y=14;break e;case S:Y=16,M=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return d=kr(Y,y,d,A),d.elementType=c,d.type=M,d.lanes=R,d}function ja(c,d,y,M){return c=kr(7,c,M,d),c.lanes=y,c}function fp(c,d,y,M){return c=kr(22,c,M,d),c.elementType=E,c.lanes=y,c.stateNode={},c}function Hv(c,d,y){return c=kr(6,c,null,d),c.lanes=y,c}function Wv(c,d,y){return d=kr(4,c.children!==null?c.children:[],c.key,d),d.lanes=y,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function HU(c,d,y,M,A){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=be,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=M,this.onRecoverableError=A,ye&&(this.mutableSourceEagerHydrationData=null)}function wE(c,d,y,M,A,R,Y,re,Te){return c=new HU(c,d,y,re,Te),d===1?(d=1,R===!0&&(d|=8)):d=0,R=kr(3,null,null,d),c.current=R,R.stateNode=c,R.memoizedState={element:M,isDehydrated:y,cache:null,transitions:null},$0(R),c}function ME(c){if(!c)return ri;c=c._reactInternals;e:{if(C(c)!==c||c.tag!==1)throw Error(o(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(_n(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(c.tag===1){var y=c.type;if(_n(y))return gs(c,y,d)}return d}function EE(c){var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=G(d),c===null?null:c.stateNode}function AE(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<d?y:d}}function jv(c,d){AE(c,d),(c=c.alternate)&&AE(c,d)}function WU(c){return c=G(c),c===null?null:c.stateNode}function jU(){return null}return t.attemptContinuousHydration=function(c){if(c.tag===13){var d=Ui();Fr(c,134217728,d),jv(c,134217728)}},t.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var d=Ui(),y=Do(c);Fr(c,y,d),jv(c,y)}},t.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var y=js(d.pendingLanes);y!==0&&(ys(d,y|1),Yi(d,fn()),!(Pt&6)&&(ou(),ji()))}break;case 13:var M=Ui();hE(function(){return Fr(c,1,M)}),jv(c,1)}},t.batchedUpdates=function(c,d){var y=Pt;Pt|=1;try{return c(d)}finally{Pt=y,Pt===0&&(ou(),xs&&ji())}},t.createComponentSelector=function(c){return{$$typeof:Jh,value:c}},t.createContainer=function(c,d,y,M,A,R,Y){return wE(c,d,!1,null,y,M,A,R,Y)},t.createHasPseudoClassSelector=function(c){return{$$typeof:Qh,value:c}},t.createHydrationContainer=function(c,d,y,M,A,R,Y,re,Te){return c=wE(y,M,!0,c,A,R,Y,re,Te),c.context=ME(null),y=c.current,M=Ui(),A=Do(y),R=qs(M,A),R.callback=d??null,Ro(y,R),c.current.lanes=A,vs(c,A,M),Yi(c,M),c},t.createPortal=function(c,d,y){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:M==null?null:""+M,children:c,containerInfo:d,implementation:y}},t.createRoleSelector=function(c){return{$$typeof:Kh,value:c}},t.createTestNameSelector=function(c){return{$$typeof:$h,value:c}},t.createTextSelector=function(c){return{$$typeof:ep,value:c}},t.deferredUpdates=function(c){var d=Rt,y=Pn.transition;try{return Pn.transition=null,Rt=16,c()}finally{Rt=d,Pn.transition=y}},t.discreteUpdates=function(c,d,y,M,A){var R=Rt,Y=Pn.transition;try{return Pn.transition=null,Rt=1,c(d,y,M,A)}finally{Rt=R,Pn.transition=Y,Pt===0&&ou()}},t.findAllNodes=Lv,t.findBoundingRects=function(c,d){if(!Le)throw Error(o(363));d=Lv(c,d),c=[];for(var y=0;y<d.length;y++)c.push(We(d[y]));for(d=c.length-1;0<d;d--){y=c[d];for(var M=y.x,A=M+y.width,R=y.y,Y=R+y.height,re=d-1;0<=re;re--)if(d!==re){var Te=c[re],He=Te.x,it=He+Te.width,St=Te.y,mt=St+Te.height;if(M>=He&&R>=St&&A<=it&&Y<=mt){c.splice(d,1);break}else if(M!==He||y.width!==Te.width||mt<R||St>Y){if(!(R!==St||y.height!==Te.height||it<M||He>A)){He>M&&(Te.width+=He-M,Te.x=M),it<A&&(Te.width=A-He),c.splice(d,1);break}}else{St>R&&(Te.height+=St-R,Te.y=R),mt<Y&&(Te.height=Y-St),c.splice(d,1);break}}}return c},t.findHostInstance=EE,t.findHostInstanceWithNoPortals=function(c){return c=H(c),c=c!==null?z(c):null,c===null?null:c.stateNode},t.findHostInstanceWithWarning=function(c){return EE(c)},t.flushControlled=function(c){var d=Pt;Pt|=1;var y=Pn.transition,M=Rt;try{Pn.transition=null,Rt=1,c()}finally{Rt=M,Pn.transition=y,Pt=d,Pt===0&&(ou(),ji())}},t.flushPassiveEffects=Wa,t.flushSync=hE,t.focusWithin=function(c,d){if(!Le)throw Error(o(363));for(c=Cv(c),d=cE(c,d),d=Array.from(d),c=0;c<d.length;){var y=d[c++];if(!U(y)){if(y.tag===5&&Pe(y.stateNode))return!0;for(y=y.child;y!==null;)d.push(y),y=y.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Rt},t.getFindAllNodesFailureDescription=function(c,d){if(!Le)throw Error(o(363));var y=0,M=[];c=[Cv(c),0];for(var A=0;A<c.length;){var R=c[A++],Y=c[A++],re=d[Y];if((R.tag!==5||!U(R))&&(Pv(R,re)&&(M.push(Rv(re)),Y++,Y>y&&(y=Y)),Y<d.length))for(R=R.child;R!==null;)c.push(R,Y),R=R.sibling}if(y<d.length){for(c=[];y<d.length;y++)c.push(Rv(d[y]));return`findAllNodes was able to match part of the selector:
  `+(M.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},t.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return J(c.child.stateNode);default:return c.child.stateNode}},t.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:WU,findFiberByHostInstance:c.findFiberByHostInstance||jU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)c=!0;else{try{Da=d.inject(c),dr=d}catch{}c=!!d.checkDCE}}return c},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(c,d,y,M){if(!Le)throw Error(o(363));c=Lv(c,d);var A=xe(c,y,M).disconnect;return{disconnect:function(){A()}}},t.registerMutableSourceForHydration=function(c,d){var y=d._getVersion;y=y(d._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[d,y]:c.mutableSourceEagerHydrationData.push(d,y)},t.runWithPriority=function(c,d){var y=Rt;try{return Rt=c,d()}finally{Rt=y}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(c,d,y,M){var A=d.current,R=Ui(),Y=Do(A);return y=ME(y),d.context===null?d.context=y:d.pendingContext=y,d=qs(R,Y),d.payload={element:c},M=M===void 0?null:M,M!==null&&(d.callback=M),Ro(A,d),c=Fr(A,Y,R),c!==null&&Ch(c,A,Y),Y},t};JL.exports=DH;var UH=JL.exports;const NH=B_(UH);var QL={exports:{}},KL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,O){var V=N.length;N.push(O);e:for(;0<V;){var L=V-1>>>1,k=N[L];if(0<r(k,O))N[L]=O,N[V]=k,V=L;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var O=N[0],V=N.pop();if(V!==O){N[0]=V;e:for(var L=0,k=N.length,K=k>>>1;L<K;){var ie=2*(L+1)-1,$=N[ie],le=ie+1,oe=N[le];if(0>r($,V))le<k&&0>r(oe,$)?(N[L]=oe,N[le]=V,L=le):(N[L]=$,N[ie]=V,L=ie);else if(le<k&&0>r(oe,V))N[L]=oe,N[le]=V,L=le;else break e}}return O}function r(N,O){var V=N.sortIndex-O.sortIndex;return V!==0?V:N.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,h=null,p=3,m=!1,v=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(N){for(var O=t(u);O!==null;){if(O.callback===null)i(u);else if(O.startTime<=N)i(u),O.sortIndex=O.expirationTime,e(l,O);else break;O=t(u)}}function E(N){if(w=!1,S(N),!v)if(t(l)!==null)v=!0,J(T);else{var O=t(u);O!==null&&ne(E,O.startTime-N)}}function T(N,O){v=!1,w&&(w=!1,g(I),I=-1),m=!0;var V=p;try{for(S(O),h=t(l);h!==null&&(!(h.expirationTime>O)||N&&!H());){var L=h.callback;if(typeof L=="function"){h.callback=null,p=h.priorityLevel;var k=L(h.expirationTime<=O);O=n.unstable_now(),typeof k=="function"?h.callback=k:h===t(l)&&i(l),S(O)}else i(l);h=t(l)}if(h!==null)var K=!0;else{var ie=t(u);ie!==null&&ne(E,ie.startTime-O),K=!1}return K}finally{h=null,p=V,m=!1}}var b=!1,P=null,I=-1,C=5,D=-1;function H(){return!(n.unstable_now()-D<C)}function G(){if(P!==null){var N=n.unstable_now();D=N;var O=!0;try{O=P(!0,N)}finally{O?Z():(b=!1,P=null)}}else b=!1}var Z;if(typeof x=="function")Z=function(){x(G)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,q=z.port2;z.port1.onmessage=G,Z=function(){q.postMessage(null)}}else Z=function(){_(G,0)};function J(N){P=N,b||(b=!0,Z())}function ne(N,O){I=_(function(){N(n.unstable_now())},O)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,J(T))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var O=3;break;default:O=p}var V=p;p=O;try{return N()}finally{p=V}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,O){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var V=p;p=N;try{return O()}finally{p=V}},n.unstable_scheduleCallback=function(N,O,V){var L=n.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?L+V:L):V=L,N){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=V+k,N={id:f++,callback:O,priorityLevel:N,startTime:V,expirationTime:k,sortIndex:-1},V>L?(N.sortIndex=V,e(u,N),t(l)===null&&N===t(u)&&(w?(g(I),I=-1):w=!0,ne(E,V-L))):(N.sortIndex=k,e(l,N),v||m||(v=!0,J(T))),N},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(N){var O=p;return function(){var V=p;p=O;try{return N.apply(this,arguments)}finally{p=V}}}})(KL);QL.exports=KL;var v2=QL.exports;const OH=n=>typeof n=="object"&&typeof n.then=="function",xm=[];function FH(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function kH(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of xm)if(FH(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=xm.indexOf(r);s!==-1&&xm.splice(s,1)},promise:(OH(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(xm.push(r),!t)throw r.promise}const BH=(n,e,t)=>kH(n,e,!1,t),ww={},zH=n=>void Object.assign(ww,n);function VH(n,e){function t(f,{args:h=[],attach:p,...m},v){let w=`${f[0].toUpperCase()}${f.slice(1)}`,_;if(f==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;_=Lu(g,{type:f,root:v,attach:p,primitive:!0})}else{const g=ww[w];if(!g)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");_=Lu(new g(...h),{type:f,root:v,attach:p,memoizedProps:{args:h}})}return _.__r3f.attach===void 0&&(_ instanceof Tt?_.__r3f.attach="geometry":_ instanceof hi&&(_.__r3f.attach="material")),w!=="inject"&&r1(_,m),_}function i(f,h){let p=!1;if(h){var m,v;(m=h.__r3f)!=null&&m.attach?i1(f,h,h.__r3f.attach):h.isObject3D&&f.isObject3D&&(f.add(h),p=!0),p||(v=f.__r3f)==null||v.objects.push(h),h.__r3f||Lu(h,{}),h.__r3f.parent=f,m_(h),Iu(h)}}function r(f,h,p){let m=!1;if(h){var v,w;if((v=h.__r3f)!=null&&v.attach)i1(f,h,h.__r3f.attach);else if(h.isObject3D&&f.isObject3D){h.parent=f,h.dispatchEvent({type:"added"});const _=f.children.filter(x=>x!==h),g=_.indexOf(p);f.children=[..._.slice(0,g),h,..._.slice(g)],m=!0}m||(w=f.__r3f)==null||w.objects.push(h),h.__r3f||Lu(h,{}),h.__r3f.parent=f,m_(h),Iu(h)}}function s(f,h,p=!1){f&&[...f].forEach(m=>o(h,m,p))}function o(f,h,p){if(h){var m,v,w;if(h.__r3f&&(h.__r3f.parent=null),(m=f.__r3f)!=null&&m.objects&&(f.__r3f.objects=f.__r3f.objects.filter(E=>E!==h)),(v=h.__r3f)!=null&&v.attach)w2(f,h,h.__r3f.attach);else if(h.isObject3D&&f.isObject3D){var _;f.remove(h),(_=h.__r3f)!=null&&_.root&&ZH(h.__r3f.root,h)}const x=(w=h.__r3f)==null?void 0:w.primitive,S=p===void 0?h.dispose!==null&&!x:p;if(!x){var g;s((g=h.__r3f)==null?void 0:g.objects,h,S),s(h.children,h,S)}delete h.__r3f,S&&h.dispose&&h.type!=="Scene"&&v2.unstable_scheduleCallback(v2.unstable_IdlePriority,()=>{try{h.dispose()}catch{}}),Iu(f)}}function a(f,h,p,m){var v;const w=(v=f.__r3f)==null?void 0:v.parent;if(!w)return;const _=t(h,p,f.__r3f.root);if(f.children){for(const g of f.children)g.__r3f&&i(_,g);f.children=f.children.filter(g=>!g.__r3f)}f.__r3f.objects.forEach(g=>i(_,g)),f.__r3f.objects=[],f.__r3f.autoRemovedBeforeAppend||o(w,f),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(w,_),_.raycast&&_.__r3f.eventCount&&_.__r3f.root.getState().internal.interaction.push(_),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=_,g.ref&&(typeof g.ref=="function"?g.ref(_):g.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:NH({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(f,h)=>{if(!h)return;const p=f.getState().scene;p.__r3f&&(p.__r3f.root=f,i(p,h))},removeChildFromContainer:(f,h)=>{h&&o(f.getState().scene,h)},insertInContainerBefore:(f,h,p)=>{if(!h||!p)return;const m=f.getState().scene;m.__r3f&&r(m,h,p)},getRootHostContext:()=>null,getChildHostContext:f=>f,finalizeInitialChildren(f){var h;return!!((h=f==null?void 0:f.__r3f)!=null?h:{}).handlers},prepareUpdate(f,h,p,m){var v;if(((v=f==null?void 0:f.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==f)return[!0];{const{args:_=[],children:g,...x}=m,{args:S=[],children:E,...T}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((P,I)=>P!==S[I]))return[!0];const b=sI(f,x,T,!0);return b.changes.length?[!1,b]:null}},commitUpdate(f,[h,p],m,v,w,_){h?a(f,m,w,_):r1(f,p)},commitMount(f,h,p,m){var v;const w=(v=f.__r3f)!=null?v:{};f.raycast&&w.handlers&&w.eventCount&&f.__r3f.root.getState().internal.interaction.push(f)},getPublicInstance:f=>f,prepareForCommit:()=>null,preparePortalMount:f=>Lu(f.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(f){var h;const{attach:p,parent:m}=(h=f.__r3f)!=null?h:{};p&&m&&w2(m,f,p),f.isObject3D&&(f.visible=!1),Iu(f)},unhideInstance(f,h){var p;const{attach:m,parent:v}=(p=f.__r3f)!=null?p:{};m&&v&&i1(v,f,m),(f.isObject3D&&h.visible==null||h.visible)&&(f.visible=!0),Iu(f)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Ju.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&an.fun(performance.now)?performance.now:an.fun(Date.now)?Date.now:()=>0,scheduleTimeout:an.fun(setTimeout)?setTimeout:void 0,cancelTimeout:an.fun(clearTimeout)?clearTimeout:void 0}),applyProps:r1}}var y2,x2;const n1=n=>"colorSpace"in n||"outputColorSpace"in n,$L=()=>{var n;return(n=ww.ColorManagement)!=null?n:null},eI=n=>n&&n.isOrthographicCamera,GH=n=>n&&n.hasOwnProperty("current"),ph=typeof window<"u"&&((y2=window.document)!=null&&y2.createElement||((x2=window.navigator)==null?void 0:x2.product)==="ReactNative")?X.useLayoutEffect:X.useEffect;function tI(n){const e=X.useRef(n);return ph(()=>void(e.current=n),[n]),e}function HH({set:n}){return ph(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class nI extends X.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}nI.getDerivedStateFromError=()=>({error:!0});const iI="__default",_2=new Map,WH=n=>n&&!!n.memoized&&!!n.changes;function rI(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Ef=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},an={obj:n=>n===Object(n)&&!an.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(an.str(n)||an.num(n))return n===e;const s=an.obj(n);if(s&&i==="reference")return n===e;const o=an.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!an.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(an.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function jH(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Lu(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function p_(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const S2=/-\d+$/;function i1(n,e,t){if(an.str(t)){if(S2.test(t)){const s=t.replace(S2,""),{target:o,key:a}=p_(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=p_(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function w2(n,e,t){var i,r;if(an.str(t)){const{target:s,key:o}=p_(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function sI(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){var f;const h=(f=n==null?void 0:n.__r3f)!=null?f:{},p=Object.entries(r),m=[];if(u){const w=Object.keys(l);for(let _=0;_<w.length;_++)r.hasOwnProperty(w[_])||p.unshift([w[_],iI+"remove"])}p.forEach(([w,_])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&w==="object"||an.equ(_,l[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return m.push([w,_,!0,[]]);let x=[];w.includes("-")&&(x=w.split("-")),m.push([w,_,!1,x]);for(const S in r){const E=r[S];S.startsWith(`${w}-`)&&m.push([S,E,!1,S.split("-")])}});const v={...r};return h.memoizedProps&&h.memoizedProps.args&&(v.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(v.attach=h.memoizedProps.attach),{memoized:v,changes:m}}const XH=typeof process<"u"&&!1;function r1(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(i=o==null||o.getState==null?void 0:o.getState())!=null?i:{},{memoized:l,changes:u}=WH(e)?e:sI(n,e),f=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let p=0;p<u.length;p++){let[m,v,w,_]=u[p];if(n1(n)){const E="srgb",T="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?E:T):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?E:T)}let g=n,x=g[m];if(_.length&&(x=_.reduce((S,E)=>S[E],n),!(x&&x.set))){const[S,...E]=_.reverse();g=E.reverse().reduce((T,b)=>T[b],n),m=S}if(v===iI+"remove")if(g.constructor){let S=_2.get(g.constructor);S||(S=new g.constructor,_2.set(g.constructor,S)),v=S[m]}else v=0;if(w)v?s.handlers[m]=v:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Al)){if(Array.isArray(v))x.fromArray?x.fromArray(v):x.set(...v);else if(x.copy&&v&&v.constructor&&(XH?x.constructor.name===v.constructor.name:x.constructor===v.constructor))x.copy(v);else if(v!==void 0){const S=x instanceof Ke;!S&&x.setScalar?x.setScalar(v):x instanceof Al&&v instanceof Al?x.mask=v.mask:x.set(v),!$L()&&!a.linear&&S&&x.convertSRGBToLinear()}}else if(g[m]=v,g[m]instanceof yn&&g[m].format===Ki&&g[m].type===Ns){const S=g[m];n1(S)&&n1(a.gl)?S.colorSpace=a.gl.outputColorSpace:S.encoding=a.gl.outputEncoding}Iu(n)}if(s.parent&&a.internal&&n.raycast&&f!==s.eventCount){const p=a.internal.interaction.indexOf(n);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(r=n.__r3f)!=null&&r.parent&&m_(n),n}function Iu(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function m_(n){n.onUpdate==null||n.onUpdate(n)}function YH(n,e){n.manual||(eI(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function _m(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function qH(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Ju.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ju.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ju.ContinuousEventPriority;default:return Ju.DefaultEventPriority}}function oI(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function ZH(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{oI(t.capturedMap,e,i,r)})}function JH(n){function e(l){const{internal:u}=n.getState(),f=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(f*f+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(f=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+f]}))}function i(l,u){const f=n.getState(),h=new Set,p=[],m=u?u(f.internal.interaction):f.internal.interaction;for(let g=0;g<m.length;g++){const x=Ef(m[g]);x&&(x.raycaster.camera=void 0)}f.previousRoot||f.events.compute==null||f.events.compute(l,f);function v(g){const x=Ef(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var S;x.events.compute==null||x.events.compute(l,x,(S=x.previousRoot)==null?void 0:S.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let w=m.flatMap(v).sort((g,x)=>{const S=Ef(g.object),E=Ef(x.object);return!S||!E?g.distance-x.distance:E.events.priority-S.events.priority||g.distance-x.distance}).filter(g=>{const x=_m(g);return h.has(x)?!1:(h.add(x),!0)});f.events.filter&&(w=f.events.filter(w,f));for(const g of w){let x=g.object;for(;x;){var _;(_=x.__r3f)!=null&&_.eventCount&&p.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in l&&f.internal.capturedMap.has(l.pointerId))for(let g of f.internal.capturedMap.get(l.pointerId).values())h.has(_m(g.intersection))||p.push(g.intersection);return p}function r(l,u,f,h){const p=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const w=Ef(v.object)||p,{raycaster:_,pointer:g,camera:x,internal:S}=w,E=new j(g.x,g.y,0).unproject(x),T=D=>{var H,G;return(H=(G=S.capturedMap.get(D))==null?void 0:G.has(v.eventObject))!=null?H:!1},b=D=>{const H={intersection:v,target:u.target};S.capturedMap.has(D)?S.capturedMap.get(D).set(v.eventObject,H):S.capturedMap.set(D,new Map([[v.eventObject,H]])),u.target.setPointerCapture(D)},P=D=>{const H=S.capturedMap.get(D);H&&oI(S.capturedMap,v.eventObject,H,D)};let I={};for(let D in u){let H=u[D];typeof H!="function"&&(I[D]=H)}let C={...v,...I,pointer:g,intersections:l,stopped:m.stopped,delta:f,unprojectedPoint:E,ray:_.ray,camera:x,stopPropagation(){const D="pointerId"in u&&S.capturedMap.get(u.pointerId);if((!D||D.has(v.eventObject))&&(C.stopped=m.stopped=!0,S.hovered.size&&Array.from(S.hovered.values()).find(H=>H.eventObject===v.eventObject))){const H=l.slice(0,l.indexOf(v));s([...H,v])}},target:{hasPointerCapture:T,setPointerCapture:b,releasePointerCapture:P},currentTarget:{hasPointerCapture:T,setPointerCapture:b,releasePointerCapture:P},nativeEvent:u};if(h(C),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const f of u.hovered.values())if(!l.length||!l.find(h=>h.object===f.object&&h.index===f.index&&h.instanceId===f.instanceId)){const p=f.eventObject.__r3f,m=p==null?void 0:p.handlers;if(u.hovered.delete(_m(f)),p!=null&&p.eventCount){const v={...f,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,u){for(let f=0;f<u.length;f++){const h=u[f].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:f}=n.getState();"pointerId"in u&&f.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{f.capturedMap.has(u.pointerId)&&(f.capturedMap.delete(u.pointerId),s([]))})}}return function(f){const{onPointerMissed:h,internal:p}=n.getState();p.lastEvent.current=f;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(f,m?t:void 0),g=v?e(f):0;l==="onPointerDown"&&(p.initialClick=[f.offsetX,f.offsetY],p.initialHits=_.map(S=>S.eventObject)),v&&!_.length&&g<=2&&(o(f,p.interaction),h&&h(f)),m&&s(_);function x(S){const E=S.eventObject,T=E.__r3f,b=T==null?void 0:T.handlers;if(T!=null&&T.eventCount)if(m){if(b.onPointerOver||b.onPointerEnter||b.onPointerOut||b.onPointerLeave){const P=_m(S),I=p.hovered.get(P);I?I.stopped&&S.stopPropagation():(p.hovered.set(P,S),b.onPointerOver==null||b.onPointerOver(S),b.onPointerEnter==null||b.onPointerEnter(S))}b.onPointerMove==null||b.onPointerMove(S)}else{const P=b[l];P?(!v||p.initialHits.includes(E))&&(o(f,p.interaction.filter(I=>!p.initialHits.includes(I))),P(S)):v&&p.initialHits.includes(E)&&o(f,p.interaction.filter(I=>!p.initialHits.includes(I)))}}r(_,f,g,x)}}return{handlePointer:a}}const aI=n=>!!(n!=null&&n.render),lI=X.createContext(null),QH=(n,e)=>{const t=ZL((a,l)=>{const u=new j,f=new j,h=new j;function p(g=l().camera,x=f,S=l().size){const{width:E,height:T,top:b,left:P}=S,I=E/T;x instanceof j?h.copy(x):h.set(...x);const C=g.getWorldPosition(u).distanceTo(h);if(eI(g))return{width:E/g.zoom,height:T/g.zoom,top:b,left:P,factor:1,distance:C,aspect:I};{const D=g.fov*Math.PI/180,H=2*Math.tan(D/2)*C,G=H*(E/T);return{width:G,height:H,top:b,left:P,factor:E/G,distance:C,aspect:I}}}let m;const v=g=>a(x=>({performance:{...x.performance,current:g}})),w=new Re;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,x)=>e(g,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new yw,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,S,E,T)=>{const b=l().camera,P={width:g,height:x,top:E||0,left:T||0,updateStyle:S};a(I=>({size:P,viewport:{...I.viewport,...p(b,f,P)}}))},setDpr:g=>a(x=>{const S=rI(g);return{viewport:{...x.viewport,dpr:S,initialDpr:x.viewport.initialDpr||S}}}),setFrameloop:(g="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:X.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,x,S)=>{const E=l().internal;return E.priority=E.priority+(x>0?1:0),E.subscribers.push({ref:g,priority:x,store:S}),E.subscribers=E.subscribers.sort((T,b)=>T.priority-b.priority),()=>{const T=l().internal;T!=null&&T.subscribers&&(T.priority=T.priority-(x>0?1:0),T.subscribers=T.subscribers.filter(b=>b.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:f,set:h}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){var p;r=l,s=u.dpr,YH(a,l),f.setPixelRatio(u.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&f.domElement instanceof HTMLCanvasElement;f.setSize(l.width,l.height,m)}a!==o&&(o=a,h(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Sm,KH=new Set,$H=new Set,e6=new Set;function s1(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Af(n,e){switch(n){case"before":return s1(KH,e);case"after":return s1($H,e);case"tail":return s1(e6,e)}}let o1,a1;function l1(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),o1=e.internal.subscribers,Sm=0;Sm<o1.length;Sm++)a1=o1[Sm],a1.ref.current(a1.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function t6(n){let e=!1,t,i,r;function s(l){i=requestAnimationFrame(s),e=!0,t=0,Af("before",l);for(const f of n.values()){var u;r=f.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((u=r.gl.xr)!=null&&u.isPresenting)&&(t+=l1(l,r))}if(Af("after",l),t===0)return Af("tail",l),e=!1,cancelAnimationFrame(i)}function o(l,u=1){var f;if(!l)return n.forEach(h=>o(h.store.getState()),u);(f=l.gl.xr)!=null&&f.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,f,h){if(u&&Af("before",l),f)l1(l,f,h);else for(const p of n.values())l1(l,p.store.getState());u&&Af("after",l)}return{loop:s,invalidate:o,advance:a}}function uI(){const n=X.useContext(lI);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function cc(n=t=>t,e){return uI()(n,e)}function Vs(n,e=0){const t=uI(),i=t.getState().internal.subscribe,r=tI(n);return ph(()=>i(r,e,t),[e,i,t]),null}const wc=new Map,{invalidate:M2,advance:E2}=t6(wc),{reconciler:Ng,applyProps:Cu}=VH(wc,qH),Pu={objects:"shallow",strict:!1},n6=(n,e)=>{const t=typeof n=="function"?n(e):n;return aI(t)?t:new tw({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function i6(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function r6(n){const e=wc.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||QH(M2,E2),o=t||Ng.createContainer(s,Ju.ConcurrentRoot,null,!1,null,"",r,null);e||wc.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(f={}){let{gl:h,size:p,scene:m,events:v,onCreated:w,shadows:_=!1,linear:g=!1,flat:x=!1,legacy:S=!1,orthographic:E=!1,frameloop:T="always",dpr:b=[1,2],performance:P,raycaster:I,camera:C,onPointerMissed:D}=f,H=s.getState(),G=H.gl;H.gl||H.set({gl:G=n6(h,n)});let Z=H.raycaster;Z||H.set({raycaster:Z=new jL});const{params:z,...q}=I||{};if(an.equ(q,Z,Pu)||Cu(Z,{...q}),an.equ(z,Z.params,Pu)||Cu(Z,{params:{...Z.params,...z}}),!H.camera||H.camera===u&&!an.equ(u,C,Pu)){u=C;const k=C instanceof lh,K=k?C:E?new Vl(0,0,0,0,.1,1e3):new zn(75,0,.1,1e3);k||(K.position.z=5,C&&Cu(K,C),!H.camera&&!(C!=null&&C.rotation)&&K.lookAt(0,0,0)),H.set({camera:K}),Z.camera=K}if(!H.scene){let k;m instanceof Ig?k=m:(k=new Ig,m&&Cu(k,m)),H.set({scene:Lu(k)})}if(!H.xr){var J;const k=($,le)=>{const oe=s.getState();oe.frameloop!=="never"&&E2($,!0,oe,le)},K=()=>{const $=s.getState();$.gl.xr.enabled=$.gl.xr.isPresenting,$.gl.xr.setAnimationLoop($.gl.xr.isPresenting?k:null),$.gl.xr.isPresenting||M2($)},ie={connect(){const $=s.getState().gl;$.xr.addEventListener("sessionstart",K),$.xr.addEventListener("sessionend",K)},disconnect(){const $=s.getState().gl;$.xr.removeEventListener("sessionstart",K),$.xr.removeEventListener("sessionend",K)}};typeof((J=G.xr)==null?void 0:J.addEventListener)=="function"&&ie.connect(),H.set({xr:ie})}if(G.shadowMap){const k=G.shadowMap.enabled,K=G.shadowMap.type;if(G.shadowMap.enabled=!!_,an.boo(_))G.shadowMap.type=Zf;else if(an.str(_)){var ne;const ie={basic:GR,percentage:c0,soft:Zf,variance:is};G.shadowMap.type=(ne=ie[_])!=null?ne:Zf}else an.obj(_)&&Object.assign(G.shadowMap,_);(k!==G.shadowMap.enabled||K!==G.shadowMap.type)&&(G.shadowMap.needsUpdate=!0)}const N=$L();N&&("enabled"in N?N.enabled=!S:"legacyMode"in N&&(N.legacyMode=S)),Cu(G,{outputEncoding:g?3e3:3001,toneMapping:x?Us:OS}),H.legacy!==S&&H.set(()=>({legacy:S})),H.linear!==g&&H.set(()=>({linear:g})),H.flat!==x&&H.set(()=>({flat:x})),h&&!an.fun(h)&&!aI(h)&&!an.equ(h,G,Pu)&&Cu(G,h),v&&!H.events.handlers&&H.set({events:v(s)});const L=i6(n,p);return an.equ(L,H.size,Pu)||H.setSize(L.width,L.height,L.updateStyle,L.top,L.left),b&&H.viewport.dpr!==rI(b)&&H.setDpr(b),H.frameloop!==T&&H.setFrameloop(T),H.onPointerMissed||H.set({onPointerMissed:D}),P&&!an.equ(P,H.performance,Pu)&&H.set(k=>({performance:{...k.performance,...P}})),a=w,l=!0,this},render(f){return l||this.configure(),Ng.updateContainer(X.createElement(s6,{store:s,children:f,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){cI(n)}}}function s6({store:n,children:e,onCreated:t,rootElement:i}){return ph(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),X.createElement(lI.Provider,{value:n},e)}function cI(n,e){const t=wc.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),Ng.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),jH(r),wc.delete(n),e&&e(n)}catch{}},500)})}}Ng.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:X.version});function sr(){return sr=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},sr.apply(this,arguments)}function g_(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var f=Date.now()-o;f<e&&f>=0?i=setTimeout(l,e-f):(i=null,t||(a=n.apply(s,r),s=r=null))}var u=function(){s=this,r=arguments,o=Date.now();var f=t&&!i;return i||(i=setTimeout(l,e)),f&&(a=n.apply(s,r),s=r=null),a};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},u}g_.debounce=g_;var o6=g_;const A2=B_(o6);function a6(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=X.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=X.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,f=e?typeof e=="number"?e:e.resize:null,h=X.useRef(!1);X.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,m,v]=X.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:S,top:E,width:T,height:b,bottom:P,right:I,x:C,y:D}=l.current.element.getBoundingClientRect(),H={left:S,top:E,width:T,height:b,bottom:P,right:I,x:C,y:D};l.current.element instanceof HTMLElement&&r&&(H.height=l.current.element.offsetHeight,H.width=l.current.element.offsetWidth),Object.freeze(H),h.current&&!f6(l.current.lastBounds,H)&&a(l.current.lastBounds=H)};return[x,f?A2(x,f):x,u?A2(x,u):x]},[a,r,u,f]);function w(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",v,{capture:!0,passive:!0})))}const g=x=>{!x||x===l.current.element||(w(),l.current.element=x,l.current.scrollContainers=fI(x),_())};return u6(v,!!t),l6(m),X.useEffect(()=>{w(),_()},[t,v,m]),X.useEffect(()=>w,[]),[g,o,p]}function l6(n){X.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function u6(n,e){X.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function fI(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...fI(n.parentElement)]}const c6=["x","y","top","bottom","left","right","width","height"],f6=(n,e)=>c6.every(t=>n[t]===e[t]);var d6=Object.defineProperty,h6=Object.defineProperties,p6=Object.getOwnPropertyDescriptors,T2=Object.getOwnPropertySymbols,m6=Object.prototype.hasOwnProperty,g6=Object.prototype.propertyIsEnumerable,b2=(n,e,t)=>e in n?d6(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,C2=(n,e)=>{for(var t in e||(e={}))m6.call(e,t)&&b2(n,t,e[t]);if(T2)for(var t of T2(e))g6.call(e,t)&&b2(n,t,e[t]);return n},v6=(n,e)=>h6(n,p6(e));function dI(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=dI(i,e,t);if(r)return r;i=e?null:i.sibling}}function hI(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const Mw=hI(X.createContext(null));class pI extends X.Component{render(){return X.createElement(Mw.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:P2,ReactCurrentDispatcher:R2}=X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function y6(){const n=X.useContext(Mw);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=X.useId();return X.useMemo(()=>{for(const i of[P2==null?void 0:P2.current,n,n==null?void 0:n.alternate]){if(!i)continue;const r=dI(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function x6(){var n,e;const t=y6(),[i]=X.useState(()=>new Map);i.clear();let r=t;for(;r;){const s=(n=r.type)==null?void 0:n._context;s&&s!==Mw&&!i.has(s)&&i.set(s,(e=R2==null?void 0:R2.current)==null?void 0:e.readContext(hI(s))),r=r.return}return i}function _6(){const n=x6();return X.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>X.createElement(e,null,X.createElement(t.Provider,v6(C2({},i),{value:n.get(t)}))),e=>X.createElement(pI,C2({},e))),[n])}const u1={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function S6(n){const{handlePointer:e}=JH(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(u1).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=u1[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=u1[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const w6=X.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=S6,eventSource:a,eventPrefix:l,shadows:u,linear:f,flat:h,legacy:p,orthographic:m,frameloop:v,dpr:w,performance:_,raycaster:g,camera:x,scene:S,onPointerMissed:E,onCreated:T,...b},P){X.useMemo(()=>zH(CH),[]);const I=_6(),[C,D]=a6({scroll:!0,debounce:{scroll:50,resize:0},...i}),H=X.useRef(null),G=X.useRef(null);X.useImperativeHandle(P,()=>H.current);const Z=tI(E),[z,q]=X.useState(!1),[J,ne]=X.useState(!1);if(z)throw z;if(J)throw J;const N=X.useRef(null);ph(()=>{const V=H.current;D.width>0&&D.height>0&&V&&(N.current||(N.current=r6(V)),N.current.configure({gl:s,events:o,shadows:u,linear:f,flat:h,legacy:p,orthographic:m,frameloop:v,dpr:w,performance:_,raycaster:g,camera:x,scene:S,size:D,onPointerMissed:(...L)=>Z.current==null?void 0:Z.current(...L),onCreated:L=>{L.events.connect==null||L.events.connect(a?GH(a)?a.current:a:G.current),l&&L.setEvents({compute:(k,K)=>{const ie=k[l+"X"],$=k[l+"Y"];K.pointer.set(ie/K.size.width*2-1,-($/K.size.height)*2+1),K.raycaster.setFromCamera(K.pointer,K.camera)}}),T==null||T(L)}}),N.current.render(X.createElement(I,null,X.createElement(nI,{set:ne},X.createElement(X.Suspense,{fallback:X.createElement(HH,{set:q})},e)))))}),X.useEffect(()=>{const V=H.current;if(V)return()=>cI(V)},[]);const O=a?"none":"auto";return X.createElement("div",sr({ref:G,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:O,...r}},b),X.createElement("div",{ref:C,style:{width:"100%",height:"100%"}},X.createElement("canvas",{ref:H,style:{display:"block"}},t)))}),Ew=X.forwardRef(function(e,t){return X.createElement(pI,null,X.createElement(w6,sr({},e,{ref:t})))}),mh=new j,Aw=new j,M6=new j;function E6(n,e,t){const i=mh.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function A6(n,e){const t=mh.setFromMatrixPosition(n.matrixWorld),i=Aw.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(M6);return r.angleTo(s)>Math.PI/2}function T6(n,e,t,i){const r=mh.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),t.setFromCamera(s,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function b6(n,e){if(e instanceof Vl)return e.zoom;if(e instanceof zn){const t=mh.setFromMatrixPosition(n.matrixWorld),i=Aw.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function C6(n,e,t){if(e instanceof zn||e instanceof Vl){const i=mh.setFromMatrixPosition(n.matrixWorld),r=Aw.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const v_=n=>Math.abs(n)<1e-10?0:n;function mI(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=v_(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const P6=(n=>e=>mI(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),R6=(n=>(e,t)=>mI(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function L6(n){return n&&typeof n=="object"&&"current"in n}const I6=X.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:f=!1,occlude:h,onOcclude:p,castShadow:m,receiveShadow:v,material:w,geometry:_,zIndexRange:g=[16777271,0],calculatePosition:x=E6,as:S="div",wrapperClass:E,pointerEvents:T="auto",...b},P)=>{const{gl:I,camera:C,scene:D,size:H,raycaster:G,events:Z,viewport:z}=cc(),[q]=X.useState(()=>document.createElement(S)),J=X.useRef(),ne=X.useRef(null),N=X.useRef(0),O=X.useRef([0,0]),V=X.useRef(null),L=X.useRef(null),k=(a==null?void 0:a.current)||Z.connected||I.domElement.parentNode,K=X.useRef(null),ie=X.useRef(!1),$=X.useMemo(()=>h&&h!=="blending"||Array.isArray(h)&&h.length&&L6(h[0]),[h]);X.useLayoutEffect(()=>{const Ie=I.domElement;h&&h==="blending"?(Ie.style.zIndex=`${Math.floor(g[0]/2)}`,Ie.style.position="absolute",Ie.style.pointerEvents="none"):(Ie.style.zIndex=null,Ie.style.position=null,Ie.style.pointerEvents=null)},[h]),X.useLayoutEffect(()=>{if(ne.current){const Ie=J.current=PR(q);if(D.updateMatrixWorld(),f)q.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ue=x(ne.current,C,H);q.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ue[0]}px,${ue[1]}px,0);transform-origin:0 0;`}return k&&(r?k.prepend(q):k.appendChild(q)),()=>{k&&k.removeChild(q),Ie.unmount()}}},[k,f]),X.useLayoutEffect(()=>{E&&(q.className=E)},[E]);const le=X.useMemo(()=>f?{position:"absolute",top:0,left:0,width:H.width,height:H.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-H.height/2,left:-H.width/2,width:H.width,height:H.height},...t},[t,s,o,H,f]),oe=X.useMemo(()=>({position:"absolute",pointerEvents:T}),[T]);X.useLayoutEffect(()=>{if(ie.current=!1,f){var Ie;(Ie=J.current)==null||Ie.render(X.createElement("div",{ref:V,style:le},X.createElement("div",{ref:L,style:oe},X.createElement("div",{ref:P,className:i,style:t,children:n}))))}else{var ue;(ue=J.current)==null||ue.render(X.createElement("div",{ref:P,style:le,className:i,children:n}))}});const he=X.useRef(!0);Vs(Ie=>{if(ne.current){C.updateMatrixWorld(),ne.current.updateWorldMatrix(!0,!1);const ue=f?O.current:x(ne.current,C,H);if(f||Math.abs(N.current-C.zoom)>e||Math.abs(O.current[0]-ue[0])>e||Math.abs(O.current[1]-ue[1])>e){const B=A6(ne.current,C);let ye=!1;$&&(Array.isArray(h)?ye=h.map(ke=>ke.current):h!=="blending"&&(ye=[D]));const ce=he.current;if(ye){const ke=T6(ne.current,C,G,ye);he.current=ke&&!B}else he.current=!B;ce!==he.current&&(p?p(!he.current):q.style.display=he.current?"block":"none");const me=Math.floor(g[0]/2),fe=h?$?[g[0],me]:[me-1,0]:g;if(q.style.zIndex=`${C6(ne.current,C,fe)}`,f){const[ke,de]=[H.width/2,H.height/2],Ce=C.projectionMatrix.elements[5]*de,{isOrthographicCamera:Le,top:ve,left:We,bottom:F,right:U}=C,Q=P6(C.matrixWorldInverse),Pe=Le?`scale(${Ce})translate(${v_(-(U+We)/2)}px,${v_((ve+F)/2)}px)`:`translateZ(${Ce}px)`;let xe=ne.current.matrixWorld;u&&(xe=C.matrixWorldInverse.clone().transpose().copyPosition(xe).scale(ne.current.scale),xe.elements[3]=xe.elements[7]=xe.elements[11]=0,xe.elements[15]=1),q.style.width=H.width+"px",q.style.height=H.height+"px",q.style.perspective=Le?"":`${Ce}px`,V.current&&L.current&&(V.current.style.transform=`${Pe}${Q}translate(${ke}px,${de}px)`,L.current.style.transform=R6(xe,1/((l||10)/400)))}else{const ke=l===void 0?1:b6(ne.current,C)*l;q.style.transform=`translate3d(${ue[0]}px,${ue[1]}px,0) scale(${ke})`}O.current=ue,N.current=C.zoom}}if(!$&&K.current&&!ie.current)if(f){if(V.current){const ue=V.current.children[0];if(ue!=null&&ue.clientWidth&&ue!=null&&ue.clientHeight){const{isOrthographicCamera:B}=C;if(B||_)b.scale&&(Array.isArray(b.scale)?b.scale instanceof j?K.current.scale.copy(b.scale.clone().divideScalar(1)):K.current.scale.set(1/b.scale[0],1/b.scale[1],1/b.scale[2]):K.current.scale.setScalar(1/b.scale));else{const ye=(l||10)/400,ce=ue.clientWidth*ye,me=ue.clientHeight*ye;K.current.scale.set(ce,me,1)}ie.current=!0}}}else{const ue=q.children[0];if(ue!=null&&ue.clientWidth&&ue!=null&&ue.clientHeight){const B=1/z.factor,ye=ue.clientWidth*B,ce=ue.clientHeight*B;K.current.scale.set(ye,ce,1),ie.current=!0}K.current.lookAt(Ie.camera.position)}});const be=X.useMemo(()=>({vertexShader:f?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[f]);return X.createElement("group",sr({},b,{ref:ne}),h&&!$&&X.createElement("mesh",{castShadow:m,receiveShadow:v,ref:K},_||X.createElement("planeGeometry",null),w||X.createElement("shaderMaterial",{side:wr,vertexShader:be.vertexShader,fragmentShader:be.fragmentShader})))});let Tf=0;const D6=ZL(n=>(Zu.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-Tf)/(i-Tf)*100})},Zu.onLoad=()=>{n({active:!1})},Zu.onError=e=>n(t=>({errors:[...t.errors,e]})),Zu.onProgress=(e,t,i)=>{t===i&&(Tf=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-Tf)/(i-Tf)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function gI(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}const L2=new ar,wm=new j;class Tw extends V0{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new ot(e,3)),this.setAttribute("uv",new ot(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new Ug(t,6,1);return this.setAttribute("instanceStart",new Ar(i,3,0)),this.setAttribute("instanceEnd",new Ar(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new Ug(t,6,1);return this.setAttribute("instanceColorStart",new Ar(i,3,0)),this.setAttribute("instanceColorEnd",new Ar(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new cw(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ar);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),L2.setFromBufferAttribute(t),this.boundingBox.union(L2))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new lr),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)wm.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(wm)),wm.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(wm));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class vI extends Tw{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setColors(i),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class bw extends ds{constructor(e){super({type:"LineMaterial",uniforms:Bd.clone(Bd.merge([qe.common,qe.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Re(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <color_pars_vertex>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				attribute vec3 instanceColorStart;
				attribute vec3 instanceColorEnd;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <color_pars_fragment>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );

					#include <logdepthbuf_fragment>
					#include <color_fragment>

					gl_FragColor = vec4( diffuseColor.rgb, alpha );

					#include <tonemapping_fragment>
					#include <${parseInt(Cc.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const I2=new j,D2=new j,ai=new Dt,li=new Dt,Es=new Dt,c1=new j,f1=new _t,wi=new XL,U2=new j,Mm=new ar,Em=new lr,As=new Dt;let Ps,y_,yI,bl;function N2(n,e,t){return As.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),As.multiplyScalar(1/As.w),As.x=bl/t.width,As.y=bl/t.height,As.applyMatrix4(n.projectionMatrixInverse),As.multiplyScalar(1/As.w),Math.abs(Math.max(As.x,As.y))}function U6(n,e){for(let t=0,i=y_.count;t<i;t++){wi.start.fromBufferAttribute(y_,t),wi.end.fromBufferAttribute(yI,t);const r=new j,s=new j;Ps.distanceSqToSegment(wi.start,wi.end,s,r),s.distanceTo(r)<bl*.5&&e.push({point:s,pointOnLine:r,distance:Ps.origin.distanceTo(s),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function N6(n,e,t){const i=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,a=n.geometry,l=a.attributes.instanceStart,u=a.attributes.instanceEnd,f=-e.near;Ps.at(1,Es),Es.w=1,Es.applyMatrix4(e.matrixWorldInverse),Es.applyMatrix4(i),Es.multiplyScalar(1/Es.w),Es.x*=s.x/2,Es.y*=s.y/2,Es.z=0,c1.copy(Es),f1.multiplyMatrices(e.matrixWorldInverse,o);for(let h=0,p=l.count;h<p;h++){if(ai.fromBufferAttribute(l,h),li.fromBufferAttribute(u,h),ai.w=1,li.w=1,ai.applyMatrix4(f1),li.applyMatrix4(f1),ai.z>f&&li.z>f)continue;if(ai.z>f){const x=ai.z-li.z,S=(ai.z-f)/x;ai.lerp(li,S)}else if(li.z>f){const x=li.z-ai.z,S=(li.z-f)/x;li.lerp(ai,S)}ai.applyMatrix4(i),li.applyMatrix4(i),ai.multiplyScalar(1/ai.w),li.multiplyScalar(1/li.w),ai.x*=s.x/2,ai.y*=s.y/2,li.x*=s.x/2,li.y*=s.y/2,wi.start.copy(ai),wi.start.z=0,wi.end.copy(li),wi.end.z=0;const v=wi.closestPointToPointParameter(c1,!0);wi.at(v,U2);const w=G3.lerp(ai.z,li.z,v),_=w>=-1&&w<=1,g=c1.distanceTo(U2)<bl*.5;if(_&&g){wi.start.fromBufferAttribute(l,h),wi.end.fromBufferAttribute(u,h),wi.start.applyMatrix4(o),wi.end.applyMatrix4(o);const x=new j,S=new j;Ps.distanceSqToSegment(wi.start,wi.end,S,x),t.push({point:S,pointOnLine:x,distance:Ps.origin.distanceTo(S),object:n,face:null,faceIndex:h,uv:null,uv2:null})}}}class xI extends Dn{constructor(e=new Tw,t=new bw({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)I2.fromBufferAttribute(t,o),D2.fromBufferAttribute(i,o),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+I2.distanceTo(D2);const s=new Ug(r,2,1);return e.setAttribute("instanceDistanceStart",new Ar(s,1,0)),e.setAttribute("instanceDistanceEnd",new Ar(s,1,1)),this}raycast(e,t){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Ps=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;bl=l.linewidth+s,y_=a.attributes.instanceStart,yI=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),Em.copy(a.boundingSphere).applyMatrix4(o);let u;if(i)u=bl*.5;else{const h=Math.max(r.near,Em.distanceToPoint(Ps.origin));u=N2(r,h,l.resolution)}if(Em.radius+=u,Ps.intersectsSphere(Em)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),Mm.copy(a.boundingBox).applyMatrix4(o);let f;if(i)f=bl*.5;else{const h=Math.max(r.near,Mm.distanceToPoint(Ps.origin));f=N2(r,h,l.resolution)}Mm.expandByScalar(f),Ps.intersectsBox(Mm)!==!1&&(i?U6(this,t):N6(this,r,t))}}class O6 extends xI{constructor(e=new vI,t=new bw({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const F6=X.forwardRef(function({points:e,color:t="black",vertexColors:i,linewidth:r,lineWidth:s,segments:o,dashed:a,...l},u){const f=cc(v=>v.size),h=X.useMemo(()=>o?new xI:new O6,[o]),[p]=X.useState(()=>new bw),m=X.useMemo(()=>{const v=o?new Tw:new vI,w=e.map(_=>{const g=Array.isArray(_);return _ instanceof j?[_.x,_.y,_.z]:_ instanceof Re?[_.x,_.y,0]:g&&_.length===3?[_[0],_[1],_[2]]:g&&_.length===2?[_[0],_[1],0]:_});if(v.setPositions(w.flat()),i){const _=i.map(g=>g instanceof Ke?g.toArray():g);v.setColors(_.flat())}return v},[e,o,i]);return X.useLayoutEffect(()=>{h.computeLineDistances()},[e,h]),X.useLayoutEffect(()=>{a?p.defines.USE_DASH="":delete p.defines.USE_DASH,p.needsUpdate=!0},[a,p]),X.useEffect(()=>()=>m.dispose(),[m]),X.createElement("primitive",sr({object:h,ref:u},l),X.createElement("primitive",{object:m,attach:"geometry"}),X.createElement("primitive",sr({object:p,attach:"material",color:t,vertexColors:!!i,resolution:[f.width,f.height],linewidth:r??s,dashed:a},l)))});function k6(){var n=Object.create(null);function e(r,s){var o=r.id,a=r.name,l=r.dependencies;l===void 0&&(l=[]);var u=r.init;u===void 0&&(u=function(){});var f=r.getTransferables;if(f===void 0&&(f=null),!n[o])try{l=l.map(function(p){return p&&p.isWorkerModule&&(e(p,function(m){if(m instanceof Error)throw m}),p=n[p.id].value),p}),u=i("<"+a+">.init",u),f&&(f=i("<"+a+">.getTransferables",f));var h=null;typeof u=="function"?h=u.apply(void 0,l):console.error("worker module init function failed to rehydrate"),n[o]={id:o,value:h,getTransferables:f},s(h)}catch(p){p&&p.noLog||console.error(p),s(p)}}function t(r,s){var o,a=r.id,l=r.args;(!n[a]||typeof n[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var u=(o=n[a]).value.apply(o,l);u&&typeof u.then=="function"?u.then(f,function(h){return s(h instanceof Error?h:new Error(""+h))}):f(u)}catch(h){s(h)}function f(h){try{var p=n[a].getTransferables&&n[a].getTransferables(h);(!p||!Array.isArray(p)||!p.length)&&(p=void 0),s(h,p)}catch(m){console.error(m),s(m)}}}function i(r,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(r){var s=r.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(u){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof u=="function"}})}),a==="callModule"&&t(l,function(u,f){u instanceof Error?postMessage({messageId:o,success:!1,error:u.message}):postMessage({messageId:o,success:!0,result:u},f||void 0)})}catch(u){postMessage({messageId:o,success:!1,error:u.stack})}})}function B6(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var r=Promise.all(t).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var _I=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return _I=function(){return n},n},z6=0,V6=0,d1=!1,td=Object.create(null),nd=Object.create(null),x_=Object.create(null);function gh(n){if((!n||typeof n.init!="function")&&!d1)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,r=n.workerId;if(!_I())return B6(n);r==null&&(r="#default");var s="workerModule"+ ++z6,o=n.name||s,a=null;e=e&&e.map(function(u){return typeof u=="function"&&!u.workerModuleData&&(d1=!0,u=gh({workerId:r,name:"<"+o+"> function dependency: "+u.name,init:`function(){return (
`+Km(u)+`
)}`}),d1=!1),u&&u.workerModuleData&&(u=u.workerModuleData),u});function l(){for(var u=[],f=arguments.length;f--;)u[f]=arguments[f];if(!a){a=O2(r,"registerModule",l.workerModuleData);var h=function(){a=null,nd[r].delete(h)};(nd[r]||(nd[r]=new Set)).add(h)}return a.then(function(p){var m=p.isCallable;if(m)return O2(r,"callModule",{id:s,args:u});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:Km(t),getTransferables:i&&Km(i)},l}function G6(n){nd[n]&&nd[n].forEach(function(e){e()}),td[n]&&(td[n].terminate(),delete td[n])}function Km(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function H6(n){var e=td[n];if(!e){var t=Km(k6);e=td[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,o=x_[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete x_[s],o(r)}}return e}function O2(n,e,t){return new Promise(function(i,r){var s=++V6;x_[s]=function(o){o.success?i(o.result):r(new Error("Error in worker "+e+" call: "+o.error))},H6(n).postMessage({messageId:s,action:e,data:t})})}function SI(){var n=function(e){function t(O,V,L,k,K,ie,$,le){var oe=1-$;le.x=oe*oe*O+2*oe*$*L+$*$*K,le.y=oe*oe*V+2*oe*$*k+$*$*ie}function i(O,V,L,k,K,ie,$,le,oe,he){var be=1-oe;he.x=be*be*be*O+3*be*be*oe*L+3*be*oe*oe*K+oe*oe*oe*$,he.y=be*be*be*V+3*be*be*oe*k+3*be*oe*oe*ie+oe*oe*oe*le}function r(O,V){for(var L=/([MLQCZ])([^MLQCZ]*)/g,k,K,ie,$,le;k=L.exec(O);){var oe=k[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(he){return parseFloat(he)});switch(k[1]){case"M":$=K=oe[0],le=ie=oe[1];break;case"L":(oe[0]!==$||oe[1]!==le)&&V("L",$,le,$=oe[0],le=oe[1]);break;case"Q":{V("Q",$,le,$=oe[2],le=oe[3],oe[0],oe[1]);break}case"C":{V("C",$,le,$=oe[4],le=oe[5],oe[0],oe[1],oe[2],oe[3]);break}case"Z":($!==K||le!==ie)&&V("L",$,le,K,ie);break}}}function s(O,V,L){L===void 0&&(L=16);var k={x:0,y:0};r(O,function(K,ie,$,le,oe,he,be,Ie,ue){switch(K){case"L":V(ie,$,le,oe);break;case"Q":{for(var B=ie,ye=$,ce=1;ce<L;ce++)t(ie,$,he,be,le,oe,ce/(L-1),k),V(B,ye,k.x,k.y),B=k.x,ye=k.y;break}case"C":{for(var me=ie,fe=$,ke=1;ke<L;ke++)i(ie,$,he,be,Ie,ue,le,oe,ke/(L-1),k),V(me,fe,k.x,k.y),me=k.x,fe=k.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,u={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function f(O,V){var L=O.getContext?O.getContext("webgl",u):O,k=l.get(L);if(!k){let me=function(ve){var We=ie[ve];if(!We&&(We=ie[ve]=L.getExtension(ve),!We))throw new Error(ve+" not supported");return We},fe=function(ve,We){var F=L.createShader(We);return L.shaderSource(F,ve),L.compileShader(F),F},ke=function(ve,We,F,U){if(!$[ve]){var Q={},Pe={},xe=L.createProgram();L.attachShader(xe,fe(We,L.VERTEX_SHADER)),L.attachShader(xe,fe(F,L.FRAGMENT_SHADER)),L.linkProgram(xe),$[ve]={program:xe,transaction:function(Be){L.useProgram(xe),Be({setUniform:function(Oe,ze){for(var rt=[],Ee=arguments.length-2;Ee-- >0;)rt[Ee]=arguments[Ee+2];var Xe=Pe[ze]||(Pe[ze]=L.getUniformLocation(xe,ze));L["uniform"+Oe].apply(L,[Xe].concat(rt))},setAttribute:function(Oe,ze,rt,Ee,Xe){var je=Q[Oe];je||(je=Q[Oe]={buf:L.createBuffer(),loc:L.getAttribLocation(xe,Oe),data:null}),L.bindBuffer(L.ARRAY_BUFFER,je.buf),L.vertexAttribPointer(je.loc,ze,L.FLOAT,!1,0,0),L.enableVertexAttribArray(je.loc),K?L.vertexAttribDivisor(je.loc,Ee):me("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(je.loc,Ee),Xe!==je.data&&(L.bufferData(L.ARRAY_BUFFER,Xe,rt),je.data=Xe)}})}}}$[ve].transaction(U)},de=function(ve,We){oe++;try{L.activeTexture(L.TEXTURE0+oe);var F=le[ve];F||(F=le[ve]=L.createTexture(),L.bindTexture(L.TEXTURE_2D,F),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.NEAREST),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.NEAREST)),L.bindTexture(L.TEXTURE_2D,F),We(F,oe)}finally{oe--}},Ce=function(ve,We,F){var U=L.createFramebuffer();he.push(U),L.bindFramebuffer(L.FRAMEBUFFER,U),L.activeTexture(L.TEXTURE0+We),L.bindTexture(L.TEXTURE_2D,ve),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,ve,0);try{F(U)}finally{L.deleteFramebuffer(U),L.bindFramebuffer(L.FRAMEBUFFER,he[--he.length-1]||null)}},Le=function(){ie={},$={},le={},oe=-1,he.length=0};var be=me,Ie=fe,ue=ke,B=de,ye=Ce,ce=Le,K=typeof WebGL2RenderingContext<"u"&&L instanceof WebGL2RenderingContext,ie={},$={},le={},oe=-1,he=[];L.canvas.addEventListener("webglcontextlost",function(ve){Le(),ve.preventDefault()},!1),l.set(L,k={gl:L,isWebGL2:K,getExtension:me,withProgram:ke,withTexture:de,withTextureFramebuffer:Ce,handleContextLoss:Le})}V(k)}function h(O,V,L,k,K,ie,$,le){$===void 0&&($=15),le===void 0&&(le=null),f(O,function(oe){var he=oe.gl,be=oe.withProgram,Ie=oe.withTexture;Ie("copy",function(ue,B){he.texImage2D(he.TEXTURE_2D,0,he.RGBA,K,ie,0,he.RGBA,he.UNSIGNED_BYTE,V),be("copy",o,a,function(ye){var ce=ye.setUniform,me=ye.setAttribute;me("aUV",2,he.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),ce("1i","image",B),he.bindFramebuffer(he.FRAMEBUFFER,le||null),he.disable(he.BLEND),he.colorMask($&8,$&4,$&2,$&1),he.viewport(L,k,K,ie),he.scissor(L,k,K,ie),he.drawArrays(he.TRIANGLES,0,3)})})})}function p(O,V,L){var k=O.width,K=O.height;f(O,function(ie){var $=ie.gl,le=new Uint8Array(k*K*4);$.readPixels(0,0,k,K,$.RGBA,$.UNSIGNED_BYTE,le),O.width=V,O.height=L,h($,le,0,0,k,K)})}var m=Object.freeze({__proto__:null,withWebGLContext:f,renderImageData:h,resizeWebGLCanvasWithoutClearing:p});function v(O,V,L,k,K,ie){ie===void 0&&(ie=1);var $=new Uint8Array(O*V),le=k[2]-k[0],oe=k[3]-k[1],he=[];s(L,function(me,fe,ke,de){he.push({x1:me,y1:fe,x2:ke,y2:de,minX:Math.min(me,ke),minY:Math.min(fe,de),maxX:Math.max(me,ke),maxY:Math.max(fe,de)})}),he.sort(function(me,fe){return me.maxX-fe.maxX});for(var be=0;be<O;be++)for(var Ie=0;Ie<V;Ie++){var ue=ye(k[0]+le*(be+.5)/O,k[1]+oe*(Ie+.5)/V),B=Math.pow(1-Math.abs(ue)/K,ie)/2;ue<0&&(B=1-B),B=Math.max(0,Math.min(255,Math.round(B*255))),$[Ie*O+be]=B}return $;function ye(me,fe){for(var ke=1/0,de=1/0,Ce=he.length;Ce--;){var Le=he[Ce];if(Le.maxX+de<=me)break;if(me+de>Le.minX&&fe-de<Le.maxY&&fe+de>Le.minY){var ve=g(me,fe,Le.x1,Le.y1,Le.x2,Le.y2);ve<ke&&(ke=ve,de=Math.sqrt(ke))}}return ce(me,fe)&&(de=-de),de}function ce(me,fe){for(var ke=0,de=he.length;de--;){var Ce=he[de];if(Ce.maxX<=me)break;var Le=Ce.y1>fe!=Ce.y2>fe&&me<(Ce.x2-Ce.x1)*(fe-Ce.y1)/(Ce.y2-Ce.y1)+Ce.x1;Le&&(ke+=Ce.y1<Ce.y2?1:-1)}return ke!==0}}function w(O,V,L,k,K,ie,$,le,oe,he){ie===void 0&&(ie=1),le===void 0&&(le=0),oe===void 0&&(oe=0),he===void 0&&(he=0),_(O,V,L,k,K,ie,$,null,le,oe,he)}function _(O,V,L,k,K,ie,$,le,oe,he,be){ie===void 0&&(ie=1),oe===void 0&&(oe=0),he===void 0&&(he=0),be===void 0&&(be=0);for(var Ie=v(O,V,L,k,K,ie),ue=new Uint8Array(Ie.length*4),B=0;B<Ie.length;B++)ue[B*4+be]=Ie[B];h($,ue,oe,he,O,V,1<<3-be,le)}function g(O,V,L,k,K,ie){var $=K-L,le=ie-k,oe=$*$+le*le,he=oe?Math.max(0,Math.min(1,((O-L)*$+(V-k)*le)/oe)):0,be=O-(L+he*$),Ie=V-(k+he*le);return be*be+Ie*Ie}var x=Object.freeze({__proto__:null,generate:v,generateIntoCanvas:w,generateIntoFramebuffer:_}),S="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",E="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",T="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",b=new Float32Array([0,0,2,0,0,2]),P=null,I=!1,C={},D=new WeakMap;function H(O){if(!I&&!q(O))throw new Error("WebGL generation not supported")}function G(O,V,L,k,K,ie,$){if(ie===void 0&&(ie=1),$===void 0&&($=null),!$&&($=P,!$)){var le=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!le)throw new Error("OffscreenCanvas or DOM canvas not supported");$=P=le.getContext("webgl",{depth:!1})}H($);var oe=new Uint8Array(O*V*4);f($,function(ue){var B=ue.gl,ye=ue.withTexture,ce=ue.withTextureFramebuffer;ye("readable",function(me,fe){B.texImage2D(B.TEXTURE_2D,0,B.RGBA,O,V,0,B.RGBA,B.UNSIGNED_BYTE,null),ce(me,fe,function(ke){z(O,V,L,k,K,ie,B,ke,0,0,0),B.readPixels(0,0,O,V,B.RGBA,B.UNSIGNED_BYTE,oe)})})});for(var he=new Uint8Array(O*V),be=0,Ie=0;be<oe.length;be+=4)he[Ie++]=oe[be];return he}function Z(O,V,L,k,K,ie,$,le,oe,he){ie===void 0&&(ie=1),le===void 0&&(le=0),oe===void 0&&(oe=0),he===void 0&&(he=0),z(O,V,L,k,K,ie,$,null,le,oe,he)}function z(O,V,L,k,K,ie,$,le,oe,he,be){ie===void 0&&(ie=1),oe===void 0&&(oe=0),he===void 0&&(he=0),be===void 0&&(be=0),H($);var Ie=[];s(L,function(ue,B,ye,ce){Ie.push(ue,B,ye,ce)}),Ie=new Float32Array(Ie),f($,function(ue){var B=ue.gl,ye=ue.isWebGL2,ce=ue.getExtension,me=ue.withProgram,fe=ue.withTexture,ke=ue.withTextureFramebuffer,de=ue.handleContextLoss;if(fe("rawDistances",function(Ce,Le){(O!==Ce._lastWidth||V!==Ce._lastHeight)&&B.texImage2D(B.TEXTURE_2D,0,B.RGBA,Ce._lastWidth=O,Ce._lastHeight=V,0,B.RGBA,B.UNSIGNED_BYTE,null),me("main",S,E,function(ve){var We=ve.setAttribute,F=ve.setUniform,U=!ye&&ce("ANGLE_instanced_arrays"),Q=!ye&&ce("EXT_blend_minmax");We("aUV",2,B.STATIC_DRAW,0,b),We("aLineSegment",4,B.DYNAMIC_DRAW,1,Ie),F.apply(void 0,["4f","uGlyphBounds"].concat(k)),F("1f","uMaxDistance",K),F("1f","uExponent",ie),ke(Ce,Le,function(Pe){B.enable(B.BLEND),B.colorMask(!0,!0,!0,!0),B.viewport(0,0,O,V),B.scissor(0,0,O,V),B.blendFunc(B.ONE,B.ONE),B.blendEquationSeparate(B.FUNC_ADD,ye?B.MAX:Q.MAX_EXT),B.clear(B.COLOR_BUFFER_BIT),ye?B.drawArraysInstanced(B.TRIANGLES,0,3,Ie.length/4):U.drawArraysInstancedANGLE(B.TRIANGLES,0,3,Ie.length/4)})}),me("post",o,T,function(ve){ve.setAttribute("aUV",2,B.STATIC_DRAW,0,b),ve.setUniform("1i","tex",Le),B.bindFramebuffer(B.FRAMEBUFFER,le),B.disable(B.BLEND),B.colorMask(be===0,be===1,be===2,be===3),B.viewport(oe,he,O,V),B.scissor(oe,he,O,V),B.drawArrays(B.TRIANGLES,0,3)})}),B.isContextLost())throw de(),new Error("webgl context lost")})}function q(O){var V=!O||O===P?C:O.canvas||O,L=D.get(V);if(L===void 0){I=!0;var k=null;try{var K=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ie=G(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,O);L=ie&&K.length===ie.length&&ie.every(function($,le){return $===K[le]}),L||(k="bad trial run results",console.info(K,ie))}catch($){L=!1,k=$.message}k&&console.warn("WebGL SDF generation not supported:",k),I=!1,D.set(V,L)}return L}var J=Object.freeze({__proto__:null,generate:G,generateIntoCanvas:Z,generateIntoFramebuffer:z,isSupported:q});function ne(O,V,L,k,K,ie){K===void 0&&(K=Math.max(k[2]-k[0],k[3]-k[1])/2),ie===void 0&&(ie=1);try{return G.apply(J,arguments)}catch($){return console.info("WebGL SDF generation failed, falling back to JS",$),v.apply(x,arguments)}}function N(O,V,L,k,K,ie,$,le,oe,he){K===void 0&&(K=Math.max(k[2]-k[0],k[3]-k[1])/2),ie===void 0&&(ie=1),le===void 0&&(le=0),oe===void 0&&(oe=0),he===void 0&&(he=0);try{return Z.apply(J,arguments)}catch(be){return console.info("WebGL SDF generation failed, falling back to JS",be),w.apply(x,arguments)}}return e.forEachPathCommand=r,e.generate=ne,e.generateIntoCanvas=N,e.javascript=x,e.pathToLineSegments=s,e.webgl=J,e.webglUtils=m,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function W6(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(t).forEach(function(de,Ce){i[de]=1<<Ce+1,r[i[de]]=de}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,a=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,u=i.S|i.WS|i.B|s|i.PDI|l,f=null;function h(){if(!f){f=new Map;var de=function(Le){if(t.hasOwnProperty(Le)){var ve=0;t[Le].split(",").forEach(function(We){var F=We.split("+"),U=F[0],Q=F[1];U=parseInt(U,36),Q=Q?parseInt(Q,36):0,f.set(ve+=U,i[Le]);for(var Pe=0;Pe<Q;Pe++)f.set(++ve,i[Le])})}};for(var Ce in t)de(Ce)}}function p(de){return h(),f.get(de.codePointAt(0))||i.L}function m(de){return r[p(de)]}var v={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function w(de,Ce){var Le=36,ve=0,We=new Map,F=Ce&&new Map,U;return de.split(",").forEach(function Q(Pe){if(Pe.indexOf("+")!==-1)for(var xe=+Pe;xe--;)Q(U);else{U=Pe;var _e=Pe.split(">"),Be=_e[0],De=_e[1];Be=String.fromCodePoint(ve+=parseInt(Be,Le)),De=String.fromCodePoint(ve+=parseInt(De,Le)),We.set(Be,De),Ce&&F.set(De,Be)}}),{map:We,reverseMap:F}}var _,g,x;function S(){if(!_){var de=w(v.pairs,!0),Ce=de.map,Le=de.reverseMap;_=Ce,g=Le,x=w(v.canonical,!1).map}}function E(de){return S(),_.get(de)||null}function T(de){return S(),g.get(de)||null}function b(de){return S(),x.get(de)||null}var P=i.L,I=i.R,C=i.EN,D=i.ES,H=i.ET,G=i.AN,Z=i.CS,z=i.B,q=i.S,J=i.ON,ne=i.BN,N=i.NSM,O=i.AL,V=i.LRO,L=i.RLO,k=i.LRE,K=i.RLE,ie=i.PDF,$=i.LRI,le=i.RLI,oe=i.FSI,he=i.PDI;function be(de,Ce){for(var Le=125,ve=new Uint32Array(de.length),We=0;We<de.length;We++)ve[We]=p(de[We]);var F=new Map;function U(Qn,Ii){var bn=ve[Qn];ve[Qn]=Ii,F.set(bn,F.get(bn)-1),bn&a&&F.set(a,F.get(a)-1),F.set(Ii,(F.get(Ii)||0)+1),Ii&a&&F.set(a,(F.get(a)||0)+1)}for(var Q=new Uint8Array(de.length),Pe=new Map,xe=[],_e=null,Be=0;Be<de.length;Be++)_e||xe.push(_e={start:Be,end:de.length-1,level:Ce==="rtl"?1:Ce==="ltr"?0:Jl(Be,!1)}),ve[Be]&z&&(_e.end=Be,_e=null);for(var De=K|k|L|V|s|he|ie|z,Oe=function(Qn){return Qn+(Qn&1?1:2)},ze=function(Qn){return Qn+(Qn&1?2:1)},rt=0;rt<xe.length;rt++){_e=xe[rt];var Ee=[{_level:_e.level,_override:0,_isolate:0}],Xe=void 0,je=0,Ze=0,$e=0;F.clear();for(var Ue=_e.start;Ue<=_e.end;Ue++){var lt=ve[Ue];if(Xe=Ee[Ee.length-1],F.set(lt,(F.get(lt)||0)+1),lt&a&&F.set(a,(F.get(a)||0)+1),lt&De)if(lt&(K|k)){Q[Ue]=Xe._level;var ee=(lt===K?ze:Oe)(Xe._level);ee<=Le&&!je&&!Ze?Ee.push({_level:ee,_override:0,_isolate:0}):je||Ze++}else if(lt&(L|V)){Q[Ue]=Xe._level;var Ye=(lt===L?ze:Oe)(Xe._level);Ye<=Le&&!je&&!Ze?Ee.push({_level:Ye,_override:lt&L?I:P,_isolate:0}):je||Ze++}else if(lt&s){lt&oe&&(lt=Jl(Ue+1,!0)===1?le:$),Q[Ue]=Xe._level,Xe._override&&U(Ue,Xe._override);var Ve=(lt===le?ze:Oe)(Xe._level);Ve<=Le&&je===0&&Ze===0?($e++,Ee.push({_level:Ve,_override:0,_isolate:1,_isolInitIndex:Ue})):je++}else if(lt&he){if(je>0)je--;else if($e>0){for(Ze=0;!Ee[Ee.length-1]._isolate;)Ee.pop();var Ae=Ee[Ee.length-1]._isolInitIndex;Ae!=null&&(Pe.set(Ae,Ue),Pe.set(Ue,Ae)),Ee.pop(),$e--}Xe=Ee[Ee.length-1],Q[Ue]=Xe._level,Xe._override&&U(Ue,Xe._override)}else lt&ie?(je===0&&(Ze>0?Ze--:!Xe._isolate&&Ee.length>1&&(Ee.pop(),Xe=Ee[Ee.length-1])),Q[Ue]=Xe._level):lt&z&&(Q[Ue]=_e.level);else Q[Ue]=Xe._level,Xe._override&&lt!==ne&&U(Ue,Xe._override)}for(var Fe=[],st=null,ct=_e.start;ct<=_e.end;ct++){var zt=ve[ct];if(!(zt&l)){var Lt=Q[ct],gt=zt&s,Vt=zt===he;st&&Lt===st._level?(st._end=ct,st._endsWithIsolInit=gt):Fe.push(st={_start:ct,_end:ct,_level:Lt,_startsWithPDI:Vt,_endsWithIsolInit:gt})}}for(var Zt=[],Ut=0;Ut<Fe.length;Ut++){var un=Fe[Ut];if(!un._startsWithPDI||un._startsWithPDI&&!Pe.has(un._start)){for(var Gn=[st=un],$t=void 0;st&&st._endsWithIsolInit&&($t=Pe.get(st._end))!=null;)for(var en=Ut+1;en<Fe.length;en++)if(Fe[en]._start===$t){Gn.push(st=Fe[en]);break}for(var Un=[],cr=0;cr<Gn.length;cr++)for(var bi=Gn[cr],Zr=bi._start;Zr<=bi._end;Zr++)Un.push(Zr);for(var Uc=Q[Un[0]],W=_e.level,ae=Un[0]-1;ae>=0;ae--)if(!(ve[ae]&l)){W=Q[ae];break}var ge=Un[Un.length-1],Se=Q[ge],we=_e.level;if(!(ve[ge]&s)){for(var Je=ge+1;Je<=_e.end;Je++)if(!(ve[Je]&l)){we=Q[Je];break}}Zt.push({_seqIndices:Un,_sosType:Math.max(W,Uc)%2?I:P,_eosType:Math.max(we,Se)%2?I:P})}}for(var at=0;at<Zt.length;at++){var dt=Zt[at],Ne=dt._seqIndices,vt=dt._sosType,xt=dt._eosType,pt=Q[Ne[0]]&1?I:P;if(F.get(N))for(var jt=0;jt<Ne.length;jt++){var Nn=Ne[jt];if(ve[Nn]&N){for(var Gt=vt,cn=jt-1;cn>=0;cn--)if(!(ve[Ne[cn]]&l)){Gt=ve[Ne[cn]];break}U(Nn,Gt&(s|he)?J:Gt)}}if(F.get(C))for(var ht=0;ht<Ne.length;ht++){var tt=Ne[ht];if(ve[tt]&C)for(var ri=ht-1;ri>=-1;ri--){var bt=ri===-1?vt:ve[Ne[ri]];if(bt&o){bt===O&&U(tt,G);break}}}if(F.get(O))for(var Jt=0;Jt<Ne.length;Jt++){var fr=Ne[Jt];ve[fr]&O&&U(fr,I)}if(F.get(D)||F.get(Z))for(var Zn=1;Zn<Ne.length-1;Zn++){var _n=Ne[Zn];if(ve[_n]&(D|Z)){for(var Xt=0,Wi=0,gs=Zn-1;gs>=0&&(Xt=ve[Ne[gs]],!!(Xt&l));gs--);for(var Sn=Zn+1;Sn<Ne.length&&(Wi=ve[Ne[Sn]],!!(Wi&l));Sn++);Xt===Wi&&(ve[_n]===D?Xt===C:Xt&(C|G))&&U(_n,Xt)}}if(F.get(C))for(var si=0;si<Ne.length;si++){var Ci=Ne[si];if(ve[Ci]&C){for(var Gs=si-1;Gs>=0&&ve[Ne[Gs]]&(H|l);Gs--)U(Ne[Gs],C);for(si++;si<Ne.length&&ve[Ne[si]]&(H|l|C);si++)ve[Ne[si]]!==C&&U(Ne[si],C)}}if(F.get(H)||F.get(D)||F.get(Z))for(var Ra=0;Ra<Ne.length;Ra++){var wh=Ne[Ra];if(ve[wh]&(H|D|Z)){U(wh,J);for(var Hs=Ra-1;Hs>=0&&ve[Ne[Hs]]&l;Hs--)U(Ne[Hs],J);for(var Ws=Ra+1;Ws<Ne.length&&ve[Ne[Ws]]&l;Ws++)U(Ne[Ws],J)}}if(F.get(C))for(var js=0,La=vt;js<Ne.length;js++){var Mh=Ne[js],Nc=ve[Mh];Nc&C?La===P&&U(Mh,P):Nc&o&&(La=Nc)}if(F.get(a)){var Xs=I|C|G,Yl=Xs|P,vs=[];{for(var bo=[],ys=0;ys<Ne.length;ys++)if(ve[Ne[ys]]&a){var Rt=de[Ne[ys]],Oc=void 0;if(E(Rt)!==null)if(bo.length<63)bo.push({char:Rt,seqIndex:ys});else break;else if((Oc=T(Rt))!==null)for(var Ys=bo.length-1;Ys>=0;Ys--){var ql=bo[Ys].char;if(ql===Oc||ql===T(b(Rt))||E(b(ql))===Rt){vs.push([bo[Ys].seqIndex,ys]),bo.length=Ys;break}}}vs.sort(function(Qn,Ii){return Qn[0]-Ii[0]})}for(var Fc=0;Fc<vs.length;Fc++){for(var Eh=vs[Fc],fn=Eh[0],Ia=Eh[1],Ah=!1,Pi=0,kc=fn+1;kc<Ia;kc++){var Da=Ne[kc];if(ve[Da]&Yl){Ah=!0;var dr=ve[Da]&Xs?I:P;if(dr===pt){Pi=dr;break}}}if(Ah&&!Pi){Pi=vt;for(var Bc=fn-1;Bc>=0;Bc--){var Th=Ne[Bc];if(ve[Th]&Yl){var hr=ve[Th]&Xs?I:P;hr!==pt?Pi=hr:Pi=pt;break}}}if(Pi){if(ve[Ne[fn]]=ve[Ne[Ia]]=Pi,Pi!==pt){for(var Ri=fn+1;Ri<Ne.length;Ri++)if(!(ve[Ne[Ri]]&l)){p(de[Ne[Ri]])&N&&(ve[Ne[Ri]]=Pi);break}}if(Pi!==pt){for(var xs=Ia+1;xs<Ne.length;xs++)if(!(ve[Ne[xs]]&l)){p(de[Ne[xs]])&N&&(ve[Ne[xs]]=Pi);break}}}}for(var Ir=0;Ir<Ne.length;Ir++)if(ve[Ne[Ir]]&a){for(var zc=Ir,Vc=Ir,ji=vt,Ua=Ir-1;Ua>=0;Ua--)if(ve[Ne[Ua]]&l)zc=Ua;else{ji=ve[Ne[Ua]]&Xs?I:P;break}for(var Na=xt,Oa=Ir+1;Oa<Ne.length;Oa++)if(ve[Ne[Oa]]&(a|l))Vc=Oa;else{Na=ve[Ne[Oa]]&Xs?I:P;break}for(var Li=zc;Li<=Vc;Li++)ve[Ne[Li]]=ji===Na?ji:pt;Ir=Vc}}}for(var Jn=_e.start;Jn<=_e.end;Jn++){var Zl=Q[Jn],Jr=ve[Jn];if(Zl&1?Jr&(P|C|G)&&Q[Jn]++:Jr&I?Q[Jn]++:Jr&(G|C)&&(Q[Jn]+=2),Jr&l&&(Q[Jn]=Jn===0?_e.level:Q[Jn-1]),Jn===_e.end||p(de[Jn])&(q|z))for(var Co=Jn;Co>=0&&p(de[Co])&u;Co--)Q[Co]=_e.level}}return{levels:Q,paragraphs:xe};function Jl(Qn,Ii){for(var bn=Qn;bn<de.length;bn++){var Cn=ve[bn];if(Cn&(I|O))return 1;if(Cn&(z|P)||Ii&&Cn===he)return 0;if(Cn&s){var pr=bh(bn);bn=pr===-1?de.length:pr}}return 0}function bh(Qn){for(var Ii=1,bn=Qn+1;bn<de.length;bn++){var Cn=ve[bn];if(Cn&z)break;if(Cn&he){if(--Ii===0)return bn}else Cn&s&&Ii++}return-1}}var Ie="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",ue;function B(){if(!ue){var de=w(Ie,!0),Ce=de.map,Le=de.reverseMap;Le.forEach(function(ve,We){Ce.set(We,ve)}),ue=Ce}}function ye(de){return B(),ue.get(de)||null}function ce(de,Ce,Le,ve){var We=de.length;Le=Math.max(0,Le==null?0:+Le),ve=Math.min(We-1,ve==null?We-1:+ve);for(var F=new Map,U=Le;U<=ve;U++)if(Ce[U]&1){var Q=ye(de[U]);Q!==null&&F.set(U,Q)}return F}function me(de,Ce,Le,ve){var We=de.length;Le=Math.max(0,Le==null?0:+Le),ve=Math.min(We-1,ve==null?We-1:+ve);var F=[];return Ce.paragraphs.forEach(function(U){var Q=Math.max(Le,U.start),Pe=Math.min(ve,U.end);if(Q<Pe){for(var xe=Ce.levels.slice(Q,Pe+1),_e=Pe;_e>=Q&&p(de[_e])&u;_e--)xe[_e]=U.level;for(var Be=U.level,De=1/0,Oe=0;Oe<xe.length;Oe++){var ze=xe[Oe];ze>Be&&(Be=ze),ze<De&&(De=ze|1)}for(var rt=Be;rt>=De;rt--)for(var Ee=0;Ee<xe.length;Ee++)if(xe[Ee]>=rt){for(var Xe=Ee;Ee+1<xe.length&&xe[Ee+1]>=rt;)Ee++;Ee>Xe&&F.push([Xe+Q,Ee+Q])}}}),F}function fe(de,Ce,Le,ve){var We=ke(de,Ce,Le,ve),F=[].concat(de);return We.forEach(function(U,Q){F[Q]=(Ce.levels[U]&1?ye(de[U]):null)||de[U]}),F.join("")}function ke(de,Ce,Le,ve){for(var We=me(de,Ce,Le,ve),F=[],U=0;U<de.length;U++)F[U]=U;return We.forEach(function(Q){for(var Pe=Q[0],xe=Q[1],_e=F.slice(Pe,xe+1),Be=_e.length;Be--;)F[xe-Be]=_e[Be]}),F}return e.closingToOpeningBracket=T,e.getBidiCharType=p,e.getBidiCharTypeName=m,e.getCanonicalBracket=b,e.getEmbeddingLevels=be,e.getMirroredCharacter=ye,e.getMirroredCharactersMap=ce,e.getReorderSegments=me,e.getReorderedIndices=ke,e.getReorderedString=fe,e.openingToClosingBracket=E,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const wI=/\bvoid\s+main\s*\(\s*\)\s*{/g;function __(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,r){let s=Mt[r];return s?__(s):i}return n.replace(e,t)}const ui=[];for(let n=0;n<256;n++)ui[n]=(n<16?"0":"")+n.toString(16);function j6(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ui[n&255]+ui[n>>8&255]+ui[n>>16&255]+ui[n>>24&255]+"-"+ui[e&255]+ui[e>>8&255]+"-"+ui[e>>16&15|64]+ui[e>>24&255]+"-"+ui[t&63|128]+ui[t>>8&255]+"-"+ui[t>>16&255]+ui[t>>24&255]+ui[i&255]+ui[i>>8&255]+ui[i>>16&255]+ui[i>>24&255]).toUpperCase()}const tl=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},X6=Date.now(),F2=new WeakMap,k2=new Map;let Y6=1e10;function S_(n,e){const t=Q6(e);let i=F2.get(n);if(i||F2.set(n,i=Object.create(null)),i[t])return new i[t];const r=`_onBeforeCompile${t}`,s=function(u,f){n.onBeforeCompile.call(this,u,f);const h=this.customProgramCacheKey()+"|"+u.vertexShader+"|"+u.fragmentShader;let p=k2[h];if(!p){const m=q6(this,u,e,t);p=k2[h]=m}u.vertexShader=p.vertexShader,u.fragmentShader=p.fragmentShader,tl(u.uniforms,this.uniforms),e.timeUniform&&(u.uniforms[e.timeUniform]={get value(){return Date.now()-X6}}),this[r]&&this[r](u)},o=function(){return a(e.chained?n:n.clone())},a=function(u){const f=Object.create(u,l);return Object.defineProperty(f,"baseMaterial",{value:n}),Object.defineProperty(f,"id",{value:Y6++}),f.uuid=j6(),f.uniforms=tl({},u.uniforms,e.uniforms),f.defines=tl({},u.defines,e.defines),f.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",f.extensions=tl({},u.extensions,e.extensions),f._listeners=void 0,f},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(u){this[r]=u}},copy:{writable:!0,configurable:!0,value:function(u){return n.copy.call(this,u),!n.isShaderMaterial&&!n.isDerivedMaterial&&(tl(this.extensions,u.extensions),tl(this.defines,u.defines),tl(this.uniforms,Bd.clone(u.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const u=new n.constructor;return a(u).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let u=this._depthMaterial;return u||(u=this._depthMaterial=S_(n.isDerivedMaterial?n.getDepthMaterial():new y0({depthPacking:XS}),e),u.defines.IS_DEPTH_MATERIAL="",u.uniforms=this.uniforms),u}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let u=this._distanceMaterial;return u||(u=this._distanceMaterial=S_(n.isDerivedMaterial?n.getDistanceMaterial():new x0,e),u.defines.IS_DISTANCE_MATERIAL="",u.uniforms=this.uniforms),u}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:u,_distanceMaterial:f}=this;u&&u.dispose(),f&&f.dispose(),n.dispose.call(this)}}};return i[t]=o,new o}function q6(n,{vertexShader:e,fragmentShader:t},i,r){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:u,fragmentMainIntro:f,fragmentMainOutro:h,fragmentColorTransform:p,customRewriter:m,timeUniform:v}=i;if(s=s||"",o=o||"",a=a||"",u=u||"",f=f||"",h=h||"",(l||m)&&(e=__(e)),(p||m)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=__(t)),m){let w=m({vertexShader:e,fragmentShader:t});e=w.vertexShader,t=w.fragmentShader}if(p){let w=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,_=>(w.push(_),"")),h=`${p}
${w.join(`
`)}
${h}`}if(v){const w=`
uniform float ${v};
`;s=w+s,u=w+u}return l&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(w,_,g,x)=>/\battribute\s+vec[23]\s+$/.test(x.substr(0,g))?_:`troika_${_}_${r}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=B2(e,r,s,o,a),t=B2(t,r,u,f,h),{vertexShader:e,fragmentShader:t}}function B2(n,e,t,i,r){return(i||r||t)&&(n=n.replace(wI,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),n}function Z6(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let J6=0;const z2=new Map;function Q6(n){const e=JSON.stringify(n,Z6);let t=z2.get(e);return t==null&&z2.set(e,t=++J6),t}function K6(n,e,t){const{defaultFontURL:i}=t,r=Object.create(null),s=1/0,o=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,a="[^\\S\\u00A0]",l=new RegExp(`${a}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function u(x,S){function E(){const T=b=>{console.error(`Failure loading font ${x}${x===i?"":"; trying fallback"}`,b),x!==i&&(x=i,E())};try{const b=new XMLHttpRequest;b.open("get",x,!0),b.responseType="arraybuffer",b.onload=function(){if(b.status>=400)T(new Error(b.statusText));else if(b.status>0)try{const P=n(b.response);S(P)}catch(P){T(P)}},b.onerror=T,b.send()}catch(b){T(b)}}E()}function f(x,S){x||(x=i);let E=r[x];E?E.pending?E.pending.push(S):S(E):(r[x]={pending:[S]},u(x,T=>{let b=r[x].pending;r[x]=T,b.forEach(P=>P(T))}))}function h({text:x="",font:S=i,sdfGlyphSize:E=64,fontSize:T=1,letterSpacing:b=0,lineHeight:P="normal",maxWidth:I=s,direction:C,textAlign:D="left",textIndent:H=0,whiteSpace:G="normal",overflowWrap:Z="normal",anchorX:z=0,anchorY:q=0,includeCaretPositions:J=!1,chunkedBoundsSize:ne=8192,colorRanges:N=null},O,V=!1){const L=w(),k={fontLoad:0,typesetting:0};x.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),x=x.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),T=+T,b=+b,I=+I,P=P||"normal",H=+H,f(S,K=>{const ie=isFinite(I);let $=null,le=null,oe=null,he=null,be=null,Ie=null,ue=null,B=0,ye=0,ce=G!=="nowrap";const{ascender:me,descender:fe,unitsPerEm:ke,lineGap:de,capHeight:Ce,xHeight:Le}=K;k.fontLoad=w()-L;const ve=w(),We=T/ke;P==="normal"&&(P=(me-fe+de)/ke),P=P*T;const F=(P-(me-fe)*We)/2,U=-(me*We+F),Q=Math.min(P,(me-fe)*We),Pe=(me+fe)/2*We-Q/2;let xe=H,_e=new _;const Be=[_e];K.forEachGlyph(x,T,b,(ze,rt,Ee)=>{const Xe=x.charAt(Ee),je=ze.advanceWidth*We,Ze=_e.count;let $e;if("isEmpty"in ze||(ze.isWhitespace=!!Xe&&new RegExp(a).test(Xe),ze.canBreakAfter=!!Xe&&l.test(Xe),ze.isEmpty=ze.xMin===ze.xMax||ze.yMin===ze.yMax||o.test(Xe)),!ze.isWhitespace&&!ze.isEmpty&&ye++,ce&&ie&&!ze.isWhitespace&&rt+je+xe>I&&Ze){if(_e.glyphAt(Ze-1).glyphObj.canBreakAfter)$e=new _,xe=-rt;else for(let lt=Ze;lt--;)if(lt===0&&Z==="break-word"){$e=new _,xe=-rt;break}else if(_e.glyphAt(lt).glyphObj.canBreakAfter){$e=_e.splitAt(lt+1);const ee=$e.glyphAt(0).x;xe-=ee;for(let Ye=$e.count;Ye--;)$e.glyphAt(Ye).x-=ee;break}$e&&(_e.isSoftWrapped=!0,_e=$e,Be.push(_e),B=I)}let Ue=_e.glyphAt(_e.count);Ue.glyphObj=ze,Ue.x=rt+xe,Ue.width=je,Ue.charIndex=Ee,Xe===`
`&&(_e=new _,Be.push(_e),xe=-(rt+je+b*T)+H)}),Be.forEach(ze=>{for(let rt=ze.count;rt--;){let{glyphObj:Ee,x:Xe,width:je}=ze.glyphAt(rt);if(!Ee.isWhitespace){ze.width=Xe+je,ze.width>B&&(B=ze.width);return}}});let De=0,Oe=0;if(z&&(typeof z=="number"?De=-z:typeof z=="string"&&(De=-B*(z==="left"?0:z==="center"?.5:z==="right"?1:m(z)))),q){if(typeof q=="number")Oe=-q;else if(typeof q=="string"){let ze=Be.length*P;Oe=q==="top"?0:q==="top-baseline"?-U:q==="top-cap"?-U-Ce*We:q==="top-ex"?-U-Le*We:q==="middle"?ze/2:q==="bottom"?ze:q==="bottom-baseline"?ze-F+fe*We:m(q)*ze}}if(!V){const ze=e.getEmbeddingLevels(x,C);$=new Uint16Array(ye),le=new Float32Array(ye*2),oe={},Ie=[s,s,-s,-s],ue=[];let rt=U;J&&(be=new Float32Array(x.length*3)),N&&(he=new Uint8Array(ye*3));let Ee=0,Xe=-1,je=-1,Ze,$e;if(Be.forEach((Ue,lt)=>{let{count:ee,width:Ye}=Ue;if(ee>0){let Ve=0;for(let Lt=ee;Lt--&&Ue.glyphAt(Lt).glyphObj.isWhitespace;)Ve++;let Ae=0,Fe=0;if(D==="center")Ae=(B-Ye)/2;else if(D==="right")Ae=B-Ye;else if(D==="justify"&&Ue.isSoftWrapped){let Lt=0;for(let gt=ee-Ve;gt--;)Ue.glyphAt(gt).glyphObj.isWhitespace&&Lt++;Fe=(B-Ye)/Lt}if(Fe||Ae){let Lt=0;for(let gt=0;gt<ee;gt++){let Vt=Ue.glyphAt(gt);const Zt=Vt.glyphObj;Vt.x+=Ae+Lt,Fe!==0&&Zt.isWhitespace&&gt<ee-Ve&&(Lt+=Fe,Vt.width+=Fe)}}const st=e.getReorderSegments(x,ze,Ue.glyphAt(0).charIndex,Ue.glyphAt(Ue.count-1).charIndex);for(let Lt=0;Lt<st.length;Lt++){const[gt,Vt]=st[Lt];let Zt=1/0,Ut=-1/0;for(let un=0;un<ee;un++)if(Ue.glyphAt(un).charIndex>=gt){let Gn=un,$t=un;for(;$t<ee;$t++){let en=Ue.glyphAt($t);if(en.charIndex>Vt)break;$t<ee-Ve&&(Zt=Math.min(Zt,en.x),Ut=Math.max(Ut,en.x+en.width))}for(let en=Gn;en<$t;en++){const Un=Ue.glyphAt(en);Un.x=Ut-(Un.x+Un.width-Zt)}break}}let ct;const zt=Lt=>ct=Lt;for(let Lt=0;Lt<ee;Lt++){let gt=Ue.glyphAt(Lt);ct=gt.glyphObj;const Vt=ct.index,Zt=ze.levels[gt.charIndex]&1;if(Zt){const Ut=e.getMirroredCharacter(x[gt.charIndex]);Ut&&K.forEachGlyph(Ut,0,0,zt)}if(J){const{charIndex:Ut}=gt,un=gt.x+De,Gn=gt.x+gt.width+De;be[Ut*3]=Zt?Gn:un,be[Ut*3+1]=Zt?un:Gn,be[Ut*3+2]=rt+Pe+Oe;const $t=Ut-Xe;$t>1&&v(be,Xe,$t),Xe=Ut}if(N){const{charIndex:Ut}=gt;for(;Ut>je;)je++,N.hasOwnProperty(je)&&($e=N[je])}if(!ct.isWhitespace&&!ct.isEmpty){const Ut=Ee++;oe[Vt]||(oe[Vt]={path:ct.path,pathBounds:[ct.xMin,ct.yMin,ct.xMax,ct.yMax]});const un=gt.x+De,Gn=rt+Oe;le[Ut*2]=un,le[Ut*2+1]=Gn;const $t=un+ct.xMin*We,en=Gn+ct.yMin*We,Un=un+ct.xMax*We,cr=Gn+ct.yMax*We;$t<Ie[0]&&(Ie[0]=$t),en<Ie[1]&&(Ie[1]=en),Un>Ie[2]&&(Ie[2]=Un),cr>Ie[3]&&(Ie[3]=cr),Ut%ne===0&&(Ze={start:Ut,end:Ut,rect:[s,s,-s,-s]},ue.push(Ze)),Ze.end++;const bi=Ze.rect;if($t<bi[0]&&(bi[0]=$t),en<bi[1]&&(bi[1]=en),Un>bi[2]&&(bi[2]=Un),cr>bi[3]&&(bi[3]=cr),$[Ut]=Vt,N){const Zr=Ut*3;he[Zr]=$e>>16&255,he[Zr+1]=$e>>8&255,he[Zr+2]=$e&255}}}}rt-=P}),be){const Ue=x.length-Xe;Ue>1&&v(be,Xe,Ue)}}k.typesetting=w()-ve,O({glyphIds:$,glyphPositions:le,glyphData:oe,caretPositions:be,caretHeight:Q,glyphColors:he,chunkedBounds:ue,fontSize:T,unitsPerEm:ke,ascender:me*We,descender:fe*We,capHeight:Ce*We,xHeight:Le*We,lineHeight:P,topBaseline:U,blockBounds:[De,Oe-Be.length*P,De+B,Oe],visibleBounds:Ie,timings:k})})}function p(x,S){h(x,E=>{const[T,b,P,I]=E.blockBounds;S({width:P-T,height:I-b})},{metricsOnly:!0})}function m(x){let S=x.match(/^([\d.]+)%$/),E=S?parseFloat(S[1]):NaN;return isNaN(E)?0:E/100}function v(x,S,E){const T=x[S*3],b=x[S*3+1],P=x[S*3+2],I=(b-T)/E;for(let C=0;C<E;C++){const D=(S+C)*3;x[D]=T+I*C,x[D+1]=T+I*(C+1),x[D+2]=P}}function w(){return(self.performance||Date).now()}function _(){this.data=[]}const g=["glyphObj","x","width","charIndex"];return _.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/g.length)},glyphAt(x){let S=_.flyweight;return S.data=this.data,S.index=x,S},splitAt(x){let S=new _;return S.data=this.data.splice(x*g.length),S}},_.flyweight=g.reduce((x,S,E,T)=>(Object.defineProperty(x,S,{get(){return this.data[this.index*g.length+E]},set(b){this.data[this.index*g.length+E]=b}}),x),{data:null,index:0}),{typeset:h,measure:p,loadFont:f}}const Cl=()=>(self.performance||Date).now(),G0=SI();let V2;function $6(n,e,t,i,r,s,o,a,l,u,f=!0){return f?t8(n,e,t,i,r,s,o,a,l,u).then(null,h=>(V2||(console.warn("WebGL SDF generation failed, falling back to JS",h),V2=!0),H2(n,e,t,i,r,s,o,a,l,u))):H2(n,e,t,i,r,s,o,a,l,u)}const $m=[],e8=5;let w_=0;function MI(){const n=Cl();for(;$m.length&&Cl()-n<e8;)$m.shift()();w_=$m.length?setTimeout(MI,0):0}const t8=(...n)=>new Promise((e,t)=>{$m.push(()=>{const i=Cl();try{G0.webgl.generateIntoCanvas(...n),e({timing:Cl()-i})}catch(r){t(r)}}),w_||(w_=setTimeout(MI,0))}),n8=4,i8=2e3,G2={};let r8=0;function H2(n,e,t,i,r,s,o,a,l,u){const f="TroikaTextSDFGenerator_JS_"+r8++%n8;let h=G2[f];return h||(h=G2[f]={workerModule:gh({name:f,workerId:f,dependencies:[SI,Cl],init(p,m){const v=p().javascript.generate;return function(...w){const _=m();return{textureData:v(...w),timing:m()-_}}},getTransferables(p){return[p.textureData.buffer]}}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(n,e,t,i,r,s).then(({textureData:p,timing:m})=>{const v=Cl(),w=new Uint8Array(p.length*4);for(let _=0;_<p.length;_++)w[_*4+u]=p[_];return G0.webglUtils.renderImageData(o,w,a,l,n,e,1<<3-u),m+=Cl()-v,--h.requests===0&&(h.idleTimer=setTimeout(()=>{G6(f)},i8)),{timing:m}})}function s8(n){n._warm||(G0.webgl.isSupported(n),n._warm=!0)}const o8=G0.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function a8(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(r){var s=e._bin,o=new Uint8Array(r);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var u=[],f=0;f<l;f++){var h=s.readUint(o,a);a+=4,u.push(e._readFont(o,h))}return u}return[e._readFont(o,0)]},_readFont:function(r,s){var o=e._bin,a=s;o.readFixed(r,s),s+=4;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2;for(var u=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],f={_data:r,_offset:a},h={},p=0;p<l;p++){var m=o.readASCII(r,s,4);s+=4,o.readUint(r,s),s+=4;var v=o.readUint(r,s);s+=4;var w=o.readUint(r,s);s+=4,h[m]={offset:v,length:w}}for(p=0;p<u.length;p++){var _=u[p];h[_]&&(f[_.trim()]=e[_.trim()].parse(r,h[_].offset,h[_].length,f))}return f},_tabOffset:function(r,s,o){for(var a=e._bin,l=a.readUshort(r,o+4),u=o+12,f=0;f<l;f++){var h=a.readASCII(r,u,4);u+=4,a.readUint(r,u),u+=4;var p=a.readUint(r,u);if(u+=4,a.readUint(r,u),u+=4,h==s)return p}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(r,s+2*l));return a},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(r[s+l]);return a},readUnicode:function(r,s,o){for(var a="",l=0;l<o;l++){var u=r[s++]<<8|r[s++];a+=String.fromCharCode(u)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,o){var a=e._bin._tdec;return a&&s==0&&o==r.length?a.decode(r):e._bin.readASCII(r,s,o)},readBytes:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(r[s+l]);return a},readASCIIArray:function(r,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(r[s+l]));return a},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,o,a,l){var u=e._bin,f={},h=s;u.readFixed(r,s),s+=4;var p=u.readUshort(r,s);s+=2;var m=u.readUshort(r,s);s+=2;var v=u.readUshort(r,s);return s+=2,f.scriptList=e._lctf.readScriptList(r,h+p),f.featureList=e._lctf.readFeatureList(r,h+m),f.lookupList=e._lctf.readLookupList(r,h+v,l),f},e._lctf.readLookupList=function(r,s,o){var a=e._bin,l=s,u=[],f=a.readUshort(r,s);s+=2;for(var h=0;h<f;h++){var p=a.readUshort(r,s);s+=2;var m=e._lctf.readLookupTable(r,l+p,o);u.push(m)}return u},e._lctf.readLookupTable=function(r,s,o){var a=e._bin,l=s,u={tabs:[]};u.ltype=a.readUshort(r,s),s+=2,u.flag=a.readUshort(r,s),s+=2;var f=a.readUshort(r,s);s+=2;for(var h=u.ltype,p=0;p<f;p++){var m=a.readUshort(r,s);s+=2;var v=o(r,h,l+m,u);u.tabs.push(v)}return u},e._lctf.numOfOnes=function(r){for(var s=0,o=0;o<32;o++)r>>>o&1&&s++;return s},e._lctf.readClassDef=function(r,s){var o=e._bin,a=[],l=o.readUshort(r,s);if(s+=2,l==1){var u=o.readUshort(r,s);s+=2;var f=o.readUshort(r,s);s+=2;for(var h=0;h<f;h++)a.push(u+h),a.push(u+h),a.push(o.readUshort(r,s)),s+=2}if(l==2){var p=o.readUshort(r,s);for(s+=2,h=0;h<p;h++)a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2,a.push(o.readUshort(r,s)),s+=2}return a},e._lctf.getInterval=function(r,s){for(var o=0;o<r.length;o+=3){var a=r[o],l=r[o+1];if(r[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(r,s){var o=e._bin,a={};a.fmt=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(r,s,l)),a.fmt==2&&(a.tab=o.readUshorts(r,s,3*l)),a},e._lctf.coverageIndex=function(r,s){var o=r.tab;if(r.fmt==1)return o.indexOf(s);if(r.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(r,s){var o=e._bin,a=s,l=[],u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var h=o.readASCII(r,s,4);s+=4;var p=o.readUshort(r,s);s+=2;var m=e._lctf.readFeatureTable(r,a+p);m.tag=h.trim(),l.push(m)}return l},e._lctf.readFeatureTable=function(r,s){var o=e._bin,a=s,l={},u=o.readUshort(r,s);s+=2,u>0&&(l.featureParams=a+u);var f=o.readUshort(r,s);s+=2,l.tab=[];for(var h=0;h<f;h++)l.tab.push(o.readUshort(r,s+2*h));return l},e._lctf.readScriptList=function(r,s){var o=e._bin,a=s,l={},u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var h=o.readASCII(r,s,4);s+=4;var p=o.readUshort(r,s);s+=2,l[h.trim()]=e._lctf.readScriptTable(r,a+p)}return l},e._lctf.readScriptTable=function(r,s){var o=e._bin,a=s,l={},u=o.readUshort(r,s);s+=2,l.default=e._lctf.readLangSysTable(r,a+u);var f=o.readUshort(r,s);s+=2;for(var h=0;h<f;h++){var p=o.readASCII(r,s,4);s+=4;var m=o.readUshort(r,s);s+=2,l[p.trim()]=e._lctf.readLangSysTable(r,a+m)}return l},e._lctf.readLangSysTable=function(r,s){var o=e._bin,a={};o.readUshort(r,s),s+=2,a.reqFeature=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);return s+=2,a.features=o.readUshorts(r,s,l),a},e.CFF={},e.CFF.parse=function(r,s,o){var a=e._bin;(r=new Uint8Array(r.buffer,s,o))[s=0],r[++s],r[++s],r[++s],s++;var l=[];s=e.CFF.readIndex(r,s,l);for(var u=[],f=0;f<l.length-1;f++)u.push(a.readASCII(r,s+l[f],l[f+1]-l[f]));s+=l[l.length-1];var h=[];s=e.CFF.readIndex(r,s,h);var p=[];for(f=0;f<h.length-1;f++)p.push(e.CFF.readDict(r,s+h[f],s+h[f+1]));s+=h[h.length-1];var m=p[0],v=[];s=e.CFF.readIndex(r,s,v);var w=[];for(f=0;f<v.length-1;f++)w.push(a.readASCII(r,s+v[f],v[f+1]-v[f]));if(s+=v[v.length-1],e.CFF.readSubrs(r,s,m),m.CharStrings){s=m.CharStrings,v=[],s=e.CFF.readIndex(r,s,v);var _=[];for(f=0;f<v.length-1;f++)_.push(a.readBytes(r,s+v[f],v[f+1]-v[f]));m.CharStrings=_}if(m.ROS){s=m.FDArray;var g=[];for(s=e.CFF.readIndex(r,s,g),m.FDArray=[],f=0;f<g.length-1;f++){var x=e.CFF.readDict(r,s+g[f],s+g[f+1]);e.CFF._readFDict(r,x,w),m.FDArray.push(x)}s+=g[g.length-1],s=m.FDSelect,m.FDSelect=[];var S=r[s];if(s++,S!=3)throw S;var E=a.readUshort(r,s);for(s+=2,f=0;f<E+1;f++)m.FDSelect.push(a.readUshort(r,s),r[s+2]),s+=3}return m.Encoding&&(m.Encoding=e.CFF.readEncoding(r,m.Encoding,m.CharStrings.length)),m.charset&&(m.charset=e.CFF.readCharset(r,m.charset,m.CharStrings.length)),e.CFF._readFDict(r,m,w),m},e.CFF._readFDict=function(r,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(r,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(r,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(r,s,l);var u,f=l.length;u=f<1240?107:f<33900?1131:32768,o.Bias=u,o.Subrs=[];for(var h=0;h<l.length-1;h++)o.Subrs.push(a.readBytes(r,s+l[h],l[h+1]-l[h]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var o=0;o<r.charset.length;o++)if(r.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,o){e._bin;var a=[".notdef"],l=r[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var u=r[s];s++;for(var f=0;f<u;f++)a.push(r[s+f]);return a},e.CFF.readCharset=function(r,s,o){var a=e._bin,l=[".notdef"],u=r[s];if(s++,u==0)for(var f=0;f<o;f++){var h=a.readUshort(r,s);s+=2,l.push(h)}else{if(u!=1&&u!=2)throw"error: format: "+u;for(;l.length<o;){h=a.readUshort(r,s),s+=2;var p=0;for(u==1?(p=r[s],s++):(p=a.readUshort(r,s),s+=2),f=0;f<=p;f++)l.push(h),h++}}return l},e.CFF.readIndex=function(r,s,o){var a=e._bin,l=a.readUshort(r,s)+1,u=r[s+=2];if(s++,u==1)for(var f=0;f<l;f++)o.push(r[s+f]);else if(u==2)for(f=0;f<l;f++)o.push(a.readUshort(r,s+2*f));else if(u==3)for(f=0;f<l;f++)o.push(16777215&a.readUint(r,s+3*f-1));else if(l!=1)throw"unsupported offset size: "+u+", count: "+l;return(s+=l*u)-1},e.CFF.getCharString=function(r,s,o){var a=e._bin,l=r[s],u=r[s+1];r[s+2],r[s+3],r[s+4];var f=1,h=null,p=null;l<=20&&(h=l,f=1),l==12&&(h=100*l+u,f=2),21<=l&&l<=27&&(h=l,f=1),l==28&&(p=a.readShort(r,s+1),f=3),29<=l&&l<=31&&(h=l,f=1),32<=l&&l<=246&&(p=l-139,f=1),247<=l&&l<=250&&(p=256*(l-247)+u+108,f=2),251<=l&&l<=254&&(p=256*-(l-251)-u-108,f=2),l==255&&(p=a.readInt(r,s+1)/65535,f=5),o.val=p??"o"+h,o.size=f},e.CFF.readCharString=function(r,s,o){for(var a=s+o,l=e._bin,u=[];s<a;){var f=r[s],h=r[s+1];r[s+2],r[s+3],r[s+4];var p=1,m=null,v=null;f<=20&&(m=f,p=1),f==12&&(m=100*f+h,p=2),f!=19&&f!=20||(m=f,p=2),21<=f&&f<=27&&(m=f,p=1),f==28&&(v=l.readShort(r,s+1),p=3),29<=f&&f<=31&&(m=f,p=1),32<=f&&f<=246&&(v=f-139,p=1),247<=f&&f<=250&&(v=256*(f-247)+h+108,p=2),251<=f&&f<=254&&(v=256*-(f-251)-h-108,p=2),f==255&&(v=l.readInt(r,s+1)/65535,p=5),u.push(v??"o"+m),s+=p}return u},e.CFF.readDict=function(r,s,o){for(var a=e._bin,l={},u=[];s<o;){var f=r[s],h=r[s+1];r[s+2],r[s+3],r[s+4];var p=1,m=null,v=null;if(f==28&&(v=a.readShort(r,s+1),p=3),f==29&&(v=a.readInt(r,s+1),p=5),32<=f&&f<=246&&(v=f-139,p=1),247<=f&&f<=250&&(v=256*(f-247)+h+108,p=2),251<=f&&f<=254&&(v=256*-(f-251)-h-108,p=2),f==255)throw v=a.readInt(r,s+1)/65535,p=5,"unknown number";if(f==30){var w=[];for(p=1;;){var _=r[s+p];p++;var g=_>>4,x=15&_;if(g!=15&&w.push(g),x!=15&&w.push(x),x==15)break}for(var S="",E=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],T=0;T<w.length;T++)S+=E[w[T]];v=parseFloat(S)}f<=21&&(m=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][f],p=1,f==12&&(m=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][h],p=2)),m!=null?(l[m]=u.length==1?u[0]:u,u=[]):u.push(v),s+=p}return l},e.cmap={},e.cmap.parse=function(r,s,o){r=new Uint8Array(r.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2;var f=[];l.tables=[];for(var h=0;h<u;h++){var p=a.readUshort(r,s);s+=2;var m=a.readUshort(r,s);s+=2;var v=a.readUint(r,s);s+=4;var w="p"+p+"e"+m,_=f.indexOf(v);if(_==-1){var g;_=l.tables.length,f.push(v);var x=a.readUshort(r,v);x==0?g=e.cmap.parse0(r,v):x==4?g=e.cmap.parse4(r,v):x==6?g=e.cmap.parse6(r,v):x==12?g=e.cmap.parse12(r,v):console.debug("unknown format: "+x,p,m,v),l.tables.push(g)}if(l[w]!=null)throw"multiple tables for one platform+encoding";l[w]=_}return l},e.cmap.parse0=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2,a.map=[];for(var u=0;u<l-6;u++)a.map.push(r[s+u]);return a},e.cmap.parse4=function(r,s){var o=e._bin,a=s,l={};l.format=o.readUshort(r,s),s+=2;var u=o.readUshort(r,s);s+=2,o.readUshort(r,s),s+=2;var f=o.readUshort(r,s);s+=2;var h=f/2;l.searchRange=o.readUshort(r,s),s+=2,l.entrySelector=o.readUshort(r,s),s+=2,l.rangeShift=o.readUshort(r,s),s+=2,l.endCount=o.readUshorts(r,s,h),s+=2*h,s+=2,l.startCount=o.readUshorts(r,s,h),s+=2*h,l.idDelta=[];for(var p=0;p<h;p++)l.idDelta.push(o.readShort(r,s)),s+=2;for(l.idRangeOffset=o.readUshorts(r,s,h),s+=2*h,l.glyphIdArray=[];s<a+u;)l.glyphIdArray.push(o.readUshort(r,s)),s+=2;return l},e.cmap.parse6=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,o.readUshort(r,s),s+=2,a.firstCode=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2,a.glyphIdArray=[];for(var u=0;u<l;u++)a.glyphIdArray.push(o.readUshort(r,s)),s+=2;return a},e.cmap.parse12=function(r,s){var o=e._bin,a={};a.format=o.readUshort(r,s),s+=2,s+=2,o.readUint(r,s),s+=4,o.readUint(r,s),s+=4;var l=o.readUint(r,s);s+=4,a.groups=[];for(var u=0;u<l;u++){var f=s+12*u,h=o.readUint(r,f+0),p=o.readUint(r,f+4),m=o.readUint(r,f+8);a.groups.push([h,p,m])}return a},e.glyf={},e.glyf.parse=function(r,s,o,a){for(var l=[],u=0;u<a.maxp.numGlyphs;u++)l.push(null);return l},e.glyf._parseGlyf=function(r,s){var o=e._bin,a=r._data,l=e._tabOffset(a,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var u={};if(u.noc=o.readShort(a,l),l+=2,u.xMin=o.readShort(a,l),l+=2,u.yMin=o.readShort(a,l),l+=2,u.xMax=o.readShort(a,l),l+=2,u.yMax=o.readShort(a,l),l+=2,u.xMin>=u.xMax||u.yMin>=u.yMax)return null;if(u.noc>0){u.endPts=[];for(var f=0;f<u.noc;f++)u.endPts.push(o.readUshort(a,l)),l+=2;var h=o.readUshort(a,l);if(l+=2,a.length-l<h)return null;u.instructions=o.readBytes(a,l,h),l+=h;var p=u.endPts[u.noc-1]+1;for(u.flags=[],f=0;f<p;f++){var m=a[l];if(l++,u.flags.push(m),(8&m)!=0){var v=a[l];l++;for(var w=0;w<v;w++)u.flags.push(m),f++}}for(u.xs=[],f=0;f<p;f++){var _=(2&u.flags[f])!=0,g=(16&u.flags[f])!=0;_?(u.xs.push(g?a[l]:-a[l]),l++):g?u.xs.push(0):(u.xs.push(o.readShort(a,l)),l+=2)}for(u.ys=[],f=0;f<p;f++)_=(4&u.flags[f])!=0,g=(32&u.flags[f])!=0,_?(u.ys.push(g?a[l]:-a[l]),l++):g?u.ys.push(0):(u.ys.push(o.readShort(a,l)),l+=2);var x=0,S=0;for(f=0;f<p;f++)x+=u.xs[f],S+=u.ys[f],u.xs[f]=x,u.ys[f]=S}else{var E;u.parts=[];do{E=o.readUshort(a,l),l+=2;var T={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(u.parts.push(T),T.glyphIndex=o.readUshort(a,l),l+=2,1&E){var b=o.readShort(a,l);l+=2;var P=o.readShort(a,l);l+=2}else b=o.readInt8(a,l),l++,P=o.readInt8(a,l),l++;2&E?(T.m.tx=b,T.m.ty=P):(T.p1=b,T.p2=P),8&E?(T.m.a=T.m.d=o.readF2dot14(a,l),l+=2):64&E?(T.m.a=o.readF2dot14(a,l),l+=2,T.m.d=o.readF2dot14(a,l),l+=2):128&E&&(T.m.a=o.readF2dot14(a,l),l+=2,T.m.b=o.readF2dot14(a,l),l+=2,T.m.c=o.readF2dot14(a,l),l+=2,T.m.d=o.readF2dot14(a,l),l+=2)}while(32&E);if(256&E){var I=o.readUshort(a,l);for(l+=2,u.instr=[],f=0;f<I;f++)u.instr.push(a[l]),l++}}return u},e.GPOS={},e.GPOS.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(r,s,o,a){var l=e._bin,u=o,f={};if(f.fmt=l.readUshort(r,o),o+=2,s==1||s==2||s==3||s==7||s==8&&f.fmt<=2){var h=l.readUshort(r,o);o+=2,f.coverage=e._lctf.readCoverage(r,h+u)}if(s==1&&f.fmt==1){var p=l.readUshort(r,o);o+=2;var m=e._lctf.numOfOnes(p);p!=0&&(f.pos=e.GPOS.readValueRecord(r,o,p))}else if(s==2&&f.fmt>=1&&f.fmt<=2){p=l.readUshort(r,o),o+=2;var v=l.readUshort(r,o);o+=2,m=e._lctf.numOfOnes(p);var w=e._lctf.numOfOnes(v);if(f.fmt==1){f.pairsets=[];var _=l.readUshort(r,o);o+=2;for(var g=0;g<_;g++){var x=u+l.readUshort(r,o);o+=2;var S=l.readUshort(r,x);x+=2;for(var E=[],T=0;T<S;T++){var b=l.readUshort(r,x);x+=2,p!=0&&(G=e.GPOS.readValueRecord(r,x,p),x+=2*m),v!=0&&(Z=e.GPOS.readValueRecord(r,x,v),x+=2*w),E.push({gid2:b,val1:G,val2:Z})}f.pairsets.push(E)}}if(f.fmt==2){var P=l.readUshort(r,o);o+=2;var I=l.readUshort(r,o);o+=2;var C=l.readUshort(r,o);o+=2;var D=l.readUshort(r,o);for(o+=2,f.classDef1=e._lctf.readClassDef(r,u+P),f.classDef2=e._lctf.readClassDef(r,u+I),f.matrix=[],g=0;g<C;g++){var H=[];for(T=0;T<D;T++){var G=null,Z=null;p!=0&&(G=e.GPOS.readValueRecord(r,o,p),o+=2*m),v!=0&&(Z=e.GPOS.readValueRecord(r,o,v),o+=2*w),H.push({val1:G,val2:Z})}f.matrix.push(H)}}}else{if(s==9&&f.fmt==1){var z=l.readUshort(r,o);o+=2;var q=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=z;else if(a.ltype!=z)throw"invalid extension substitution";return e.GPOS.subt(r,a.ltype,u+q)}console.debug("unsupported GPOS table LookupType",s,"format",f.fmt)}return f},e.GPOS.readValueRecord=function(r,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(r,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(r,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(r,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(r,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(r,s,o,a){return e._lctf.parse(r,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(r,s,o,a){var l=e._bin,u=o,f={};if(f.fmt=l.readUshort(r,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&f.fmt<=2||s==6&&f.fmt<=2){var h=l.readUshort(r,o);o+=2,f.coverage=e._lctf.readCoverage(r,u+h)}if(s==1&&f.fmt>=1&&f.fmt<=2){if(f.fmt==1)f.delta=l.readShort(r,o),o+=2;else if(f.fmt==2){var p=l.readUshort(r,o);o+=2,f.newg=l.readUshorts(r,o,p),o+=2*f.newg.length}}else if(s==4){f.vals=[],p=l.readUshort(r,o),o+=2;for(var m=0;m<p;m++){var v=l.readUshort(r,o);o+=2,f.vals.push(e.GSUB.readLigatureSet(r,u+v))}}else if(s==5&&f.fmt==2){if(f.fmt==2){var w=l.readUshort(r,o);o+=2,f.cDef=e._lctf.readClassDef(r,u+w),f.scset=[];var _=l.readUshort(r,o);for(o+=2,m=0;m<_;m++){var g=l.readUshort(r,o);o+=2,f.scset.push(g==0?null:e.GSUB.readSubClassSet(r,u+g))}}}else if(s==6&&f.fmt==3){if(f.fmt==3){for(m=0;m<3;m++){p=l.readUshort(r,o),o+=2;for(var x=[],S=0;S<p;S++)x.push(e._lctf.readCoverage(r,u+l.readUshort(r,o+2*S)));o+=2*p,m==0&&(f.backCvg=x),m==1&&(f.inptCvg=x),m==2&&(f.ahedCvg=x)}p=l.readUshort(r,o),o+=2,f.lookupRec=e.GSUB.readSubstLookupRecords(r,o,p)}}else{if(s==7&&f.fmt==1){var E=l.readUshort(r,o);o+=2;var T=l.readUint(r,o);if(o+=4,a.ltype==9)a.ltype=E;else if(a.ltype!=E)throw"invalid extension substitution";return e.GSUB.subt(r,a.ltype,u+T)}console.debug("unsupported GSUB table LookupType",s,"format",f.fmt)}return f},e.GSUB.readSubClassSet=function(r,s){var o=e._bin.readUshort,a=s,l=[],u=o(r,s);s+=2;for(var f=0;f<u;f++){var h=o(r,s);s+=2,l.push(e.GSUB.readSubClassRule(r,a+h))}return l},e.GSUB.readSubClassRule=function(r,s){var o=e._bin.readUshort,a={},l=o(r,s),u=o(r,s+=2);s+=2,a.input=[];for(var f=0;f<l-1;f++)a.input.push(o(r,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,u),a},e.GSUB.readSubstLookupRecords=function(r,s,o){for(var a=e._bin.readUshort,l=[],u=0;u<o;u++)l.push(a(r,s),a(r,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(r,s){var o=e._bin,a=s,l=[],u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var h=o.readUshort(r,s);s+=2,l.push(e.GSUB.readChainSubClassRule(r,a+h))}return l},e.GSUB.readChainSubClassRule=function(r,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],u=0;u<l.length;u++){var f=o.readUshort(r,s);s+=2,u==1&&f--,a[l[u]]=o.readUshorts(r,s,f),s+=2*a[l[u]].length}return f=o.readUshort(r,s),s+=2,a.subst=o.readUshorts(r,s,2*f),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(r,s){var o=e._bin,a=s,l=[],u=o.readUshort(r,s);s+=2;for(var f=0;f<u;f++){var h=o.readUshort(r,s);s+=2,l.push(e.GSUB.readLigature(r,a+h))}return l},e.GSUB.readLigature=function(r,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(r,s),s+=2;var l=o.readUshort(r,s);s+=2;for(var u=0;u<l-1;u++)a.chain.push(o.readUshort(r,s)),s+=2;return a},e.head={},e.head.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.fontRevision=a.readFixed(r,s),s+=4,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4,l.flags=a.readUshort(r,s),s+=2,l.unitsPerEm=a.readUshort(r,s),s+=2,l.created=a.readUint64(r,s),s+=8,l.modified=a.readUint64(r,s),s+=8,l.xMin=a.readShort(r,s),s+=2,l.yMin=a.readShort(r,s),s+=2,l.xMax=a.readShort(r,s),s+=2,l.yMax=a.readShort(r,s),s+=2,l.macStyle=a.readUshort(r,s),s+=2,l.lowestRecPPEM=a.readUshort(r,s),s+=2,l.fontDirectionHint=a.readShort(r,s),s+=2,l.indexToLocFormat=a.readShort(r,s),s+=2,l.glyphDataFormat=a.readShort(r,s),s+=2,l},e.hhea={},e.hhea.parse=function(r,s,o){var a=e._bin,l={};return a.readFixed(r,s),s+=4,l.ascender=a.readShort(r,s),s+=2,l.descender=a.readShort(r,s),s+=2,l.lineGap=a.readShort(r,s),s+=2,l.advanceWidthMax=a.readUshort(r,s),s+=2,l.minLeftSideBearing=a.readShort(r,s),s+=2,l.minRightSideBearing=a.readShort(r,s),s+=2,l.xMaxExtent=a.readShort(r,s),s+=2,l.caretSlopeRise=a.readShort(r,s),s+=2,l.caretSlopeRun=a.readShort(r,s),s+=2,l.caretOffset=a.readShort(r,s),s+=2,s+=8,l.metricDataFormat=a.readShort(r,s),s+=2,l.numberOfHMetrics=a.readUshort(r,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(r,s,o,a){for(var l=e._bin,u={aWidth:[],lsBearing:[]},f=0,h=0,p=0;p<a.maxp.numGlyphs;p++)p<a.hhea.numberOfHMetrics&&(f=l.readUshort(r,s),s+=2,h=l.readShort(r,s),s+=2),u.aWidth.push(f),u.lsBearing.push(h);return u},e.kern={},e.kern.parse=function(r,s,o,a){var l=e._bin,u=l.readUshort(r,s);if(s+=2,u==1)return e.kern.parseV1(r,s-2,o,a);var f=l.readUshort(r,s);s+=2;for(var h={glyph1:[],rval:[]},p=0;p<f;p++){s+=2,o=l.readUshort(r,s),s+=2;var m=l.readUshort(r,s);s+=2;var v=m>>>8;if((v&=15)!=0)throw"unknown kern table format: "+v;s=e.kern.readFormat0(r,s,h)}return h},e.kern.parseV1=function(r,s,o,a){var l=e._bin;l.readFixed(r,s),s+=4;var u=l.readUint(r,s);s+=4;for(var f={glyph1:[],rval:[]},h=0;h<u;h++){l.readUint(r,s),s+=4;var p=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2;var m=p>>>8;if((m&=15)!=0)throw"unknown kern table format: "+m;s=e.kern.readFormat0(r,s,f)}return f},e.kern.readFormat0=function(r,s,o){var a=e._bin,l=-1,u=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var f=0;f<u;f++){var h=a.readUshort(r,s);s+=2;var p=a.readUshort(r,s);s+=2;var m=a.readShort(r,s);s+=2,h!=l&&(o.glyph1.push(h),o.rval.push({glyph2:[],vals:[]}));var v=o.rval[o.rval.length-1];v.glyph2.push(p),v.vals.push(m),l=h}return s},e.loca={},e.loca.parse=function(r,s,o,a){var l=e._bin,u=[],f=a.head.indexToLocFormat,h=a.maxp.numGlyphs+1;if(f==0)for(var p=0;p<h;p++)u.push(l.readUshort(r,s+(p<<1))<<1);if(f==1)for(p=0;p<h;p++)u.push(l.readUint(r,s+(p<<2)));return u},e.maxp={},e.maxp.parse=function(r,s,o){var a=e._bin,l={},u=a.readUint(r,s);return s+=4,l.numGlyphs=a.readUshort(r,s),s+=2,u==65536&&(l.maxPoints=a.readUshort(r,s),s+=2,l.maxContours=a.readUshort(r,s),s+=2,l.maxCompositePoints=a.readUshort(r,s),s+=2,l.maxCompositeContours=a.readUshort(r,s),s+=2,l.maxZones=a.readUshort(r,s),s+=2,l.maxTwilightPoints=a.readUshort(r,s),s+=2,l.maxStorage=a.readUshort(r,s),s+=2,l.maxFunctionDefs=a.readUshort(r,s),s+=2,l.maxInstructionDefs=a.readUshort(r,s),s+=2,l.maxStackElements=a.readUshort(r,s),s+=2,l.maxSizeOfInstructions=a.readUshort(r,s),s+=2,l.maxComponentElements=a.readUshort(r,s),s+=2,l.maxComponentDepth=a.readUshort(r,s),s+=2),l},e.name={},e.name.parse=function(r,s,o){var a=e._bin,l={};a.readUshort(r,s),s+=2;var u=a.readUshort(r,s);s+=2,a.readUshort(r,s);for(var f,h=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],p=s+=2,m=0;m<u;m++){var v=a.readUshort(r,s);s+=2;var w=a.readUshort(r,s);s+=2;var _=a.readUshort(r,s);s+=2;var g=a.readUshort(r,s);s+=2;var x=a.readUshort(r,s);s+=2;var S=a.readUshort(r,s);s+=2;var E,T=h[g],b=p+12*u+S;if(v==0)E=a.readUnicode(r,b,x/2);else if(v==3&&w==0)E=a.readUnicode(r,b,x/2);else if(w==0)E=a.readASCII(r,b,x);else if(w==1)E=a.readUnicode(r,b,x/2);else if(w==3)E=a.readUnicode(r,b,x/2);else{if(v!=1)throw"unknown encoding "+w+", platformID: "+v;E=a.readASCII(r,b,x),console.debug("reading unknown MAC encoding "+w+" as ASCII")}var P="p"+v+","+_.toString(16);l[P]==null&&(l[P]={}),l[P][T!==void 0?T:g]=E,l[P]._lang=_}for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==1033)return l[I];for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==0)return l[I];for(var I in l)if(l[I].postScriptName!=null&&l[I]._lang==3084)return l[I];for(var I in l)if(l[I].postScriptName!=null)return l[I];for(var I in l){f=I;break}return console.debug("returning name table with languageID "+l[f]._lang),l[f]},e["OS/2"]={},e["OS/2"].parse=function(r,s,o){var a=e._bin.readUshort(r,s);s+=2;var l={};if(a==0)e["OS/2"].version0(r,s,l);else if(a==1)e["OS/2"].version1(r,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(r,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(r,s,l)}return l},e["OS/2"].version0=function(r,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(r,s),s+=2,o.usWeightClass=a.readUshort(r,s),s+=2,o.usWidthClass=a.readUshort(r,s),s+=2,o.fsType=a.readUshort(r,s),s+=2,o.ySubscriptXSize=a.readShort(r,s),s+=2,o.ySubscriptYSize=a.readShort(r,s),s+=2,o.ySubscriptXOffset=a.readShort(r,s),s+=2,o.ySubscriptYOffset=a.readShort(r,s),s+=2,o.ySuperscriptXSize=a.readShort(r,s),s+=2,o.ySuperscriptYSize=a.readShort(r,s),s+=2,o.ySuperscriptXOffset=a.readShort(r,s),s+=2,o.ySuperscriptYOffset=a.readShort(r,s),s+=2,o.yStrikeoutSize=a.readShort(r,s),s+=2,o.yStrikeoutPosition=a.readShort(r,s),s+=2,o.sFamilyClass=a.readShort(r,s),s+=2,o.panose=a.readBytes(r,s,10),s+=10,o.ulUnicodeRange1=a.readUint(r,s),s+=4,o.ulUnicodeRange2=a.readUint(r,s),s+=4,o.ulUnicodeRange3=a.readUint(r,s),s+=4,o.ulUnicodeRange4=a.readUint(r,s),s+=4,o.achVendID=[a.readInt8(r,s),a.readInt8(r,s+1),a.readInt8(r,s+2),a.readInt8(r,s+3)],s+=4,o.fsSelection=a.readUshort(r,s),s+=2,o.usFirstCharIndex=a.readUshort(r,s),s+=2,o.usLastCharIndex=a.readUshort(r,s),s+=2,o.sTypoAscender=a.readShort(r,s),s+=2,o.sTypoDescender=a.readShort(r,s),s+=2,o.sTypoLineGap=a.readShort(r,s),s+=2,o.usWinAscent=a.readUshort(r,s),s+=2,o.usWinDescent=a.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,o){var a=e._bin;return s=e["OS/2"].version0(r,s,o),o.ulCodePageRange1=a.readUint(r,s),s+=4,o.ulCodePageRange2=a.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,o){var a=e._bin;return s=e["OS/2"].version1(r,s,o),o.sxHeight=a.readShort(r,s),s+=2,o.sCapHeight=a.readShort(r,s),s+=2,o.usDefault=a.readUshort(r,s),s+=2,o.usBreak=a.readUshort(r,s),s+=2,o.usMaxContext=a.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,o){var a=e._bin;return s=e["OS/2"].version2(r,s,o),o.usLowerOpticalPointSize=a.readUshort(r,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,o){var a=e._bin,l={};return l.version=a.readFixed(r,s),s+=4,l.italicAngle=a.readFixed(r,s),s+=4,l.underlinePosition=a.readShort(r,s),s+=2,l.underlineThickness=a.readShort(r,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var o=r.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var u=-1,f=0;f<l.endCount.length;f++)if(s<=l.endCount[f]){u=f;break}return u==-1||l.startCount[u]>s?0:65535&(l.idRangeOffset[u]!=0?l.glyphIdArray[s-l.startCount[u]+(l.idRangeOffset[u]>>1)-(l.idRangeOffset.length-u)]:s+l.idDelta[u])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(f=0;f<l.groups.length;f++){var h=l.groups[f];if(h[0]<=s&&s<=h[1])return h[2]+(s-h[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(r,s){var o={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var a=r.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),r.SVG.entries[s]=a),a)}if(r.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},u=r.CFF,f=r.CFF.Private;if(u.ROS){for(var h=0;u.FDSelect[h+2]<=s;)h+=2;f=u.FDArray[u.FDSelect[h+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],l,u,f,o)}else r.glyf&&e.U._drawGlyf(s,r,o);return o},e.U._drawGlyf=function(r,s,o){var a=s.glyf[r];a==null&&(a=s.glyf[r]=e.glyf._parseGlyf(s,r)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(r,s){for(var o=0;o<r.noc;o++){for(var a=o==0?0:r.endPts[o-1]+1,l=r.endPts[o],u=a;u<=l;u++){var f=u==a?l:u-1,h=u==l?a:u+1,p=1&r.flags[u],m=1&r.flags[f],v=1&r.flags[h],w=r.xs[u],_=r.ys[u];if(u==a)if(p){if(!m){e.U.P.moveTo(s,w,_);continue}e.U.P.moveTo(s,r.xs[f],r.ys[f])}else m?e.U.P.moveTo(s,r.xs[f],r.ys[f]):e.U.P.moveTo(s,(r.xs[f]+w)/2,(r.ys[f]+_)/2);p?m&&e.U.P.lineTo(s,w,_):v?e.U.P.qcurveTo(s,w,_,r.xs[h],r.ys[h]):e.U.P.qcurveTo(s,w,_,(w+r.xs[h])/2,(_+r.ys[h])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,o){for(var a=0;a<r.parts.length;a++){var l={cmds:[],crds:[]},u=r.parts[a];e.U._drawGlyf(u.glyphIndex,s,l);for(var f=u.m,h=0;h<l.crds.length;h+=2){var p=l.crds[h],m=l.crds[h+1];o.crds.push(p*f.a+m*f.b+f.tx),o.crds.push(p*f.c+m*f.d+f.ty)}for(h=0;h<l.cmds.length;h++)o.cmds.push(l.cmds[h])}},e.U._getGlyphClass=function(r,s){var o=e._lctf.getInterval(s,r);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(r,s,o){var a=!1;if(r.GPOS)for(var l=r.GPOS,u=l.lookupList,f=l.featureList,h=[],p=0;p<f.length;p++){var m=f[p];if(m.tag=="kern"){a=!0;for(var v=0;v<m.tab.length;v++)if(!h[m.tab[v]]){h[m.tab[v]]=!0;for(var w=u[m.tab[v]],_=0;_<w.tabs.length;_++)if(w.tabs[_]!=null){var g,x=w.tabs[_];if((!x.coverage||(g=e._lctf.coverageIndex(x.coverage,s))!=-1)&&w.ltype!=1){if(w.ltype==2){var S=null;if(x.fmt==1){var E=x.pairsets[g];for(p=0;p<E.length;p++)E[p].gid2==o&&(S=E[p])}else if(x.fmt==2){var T=e.U._getGlyphClass(s,x.classDef1),b=e.U._getGlyphClass(o,x.classDef2);S=x.matrix[T][b]}if(S){var P=0;return S.val1&&S.val1[2]&&(P+=S.val1[2]),S.val2&&S.val2[0]&&(P+=S.val2[0]),P}}}}}}}if(r.kern&&!a){var I=r.kern.glyph1.indexOf(s);if(I!=-1){var C=r.kern.rval[I].glyph2.indexOf(o);if(C!=-1)return r.kern.rval[I].vals[C]}}return 0},e.U._applySubs=function(r,s,o,a){for(var l=r.length-s-1,u=0;u<o.tabs.length;u++)if(o.tabs[u]!=null){var f,h=o.tabs[u];if(!h.coverage||(f=e._lctf.coverageIndex(h.coverage,r[s]))!=-1){if(o.ltype==1)r[s],h.fmt==1?r[s]=r[s]+h.delta:r[s]=h.newg[f];else if(o.ltype==4)for(var p=h.vals[f],m=0;m<p.length;m++){var v=p[m],w=v.chain.length;if(!(w>l)){for(var _=!0,g=0,x=0;x<w;x++){for(;r[s+g+(1+x)]==-1;)g++;v.chain[x]!=r[s+g+(1+x)]&&(_=!1)}if(_){for(r[s]=v.nglyph,x=0;x<w+g;x++)r[s+x+1]=-1;break}}}else if(o.ltype==5&&h.fmt==2)for(var S=e._lctf.getInterval(h.cDef,r[s]),E=h.cDef[S+2],T=h.scset[E],b=0;b<T.length;b++){var P=T[b],I=P.input;if(!(I.length>l)){for(_=!0,x=0;x<I.length;x++){var C=e._lctf.getInterval(h.cDef,r[s+1+x]);if(S==-1&&h.cDef[C+2]!=I[x]){_=!1;break}}if(_){var D=P.substLookupRecords;for(m=0;m<D.length;m+=2)D[m],D[m+1]}}}else if(o.ltype==6&&h.fmt==3){if(!e.U._glsCovered(r,h.backCvg,s-h.backCvg.length)||!e.U._glsCovered(r,h.inptCvg,s)||!e.U._glsCovered(r,h.ahedCvg,s+h.inptCvg.length))continue;var H=h.lookupRec;for(b=0;b<H.length;b+=2){S=H[b];var G=a[H[b+1]];e.U._applySubs(r,s+S,G,a)}}}}},e.U._glsCovered=function(r,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],r[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,o){for(var a={cmds:[],crds:[]},l=0,u=0;u<s.length;u++){var f=s[u];if(f!=-1){for(var h=u<s.length-1&&s[u+1]!=-1?s[u+1]:0,p=e.U.glyphToPath(r,f),m=0;m<p.crds.length;m+=2)a.crds.push(p.crds[m]+l),a.crds.push(p.crds[m+1]);for(o&&a.cmds.push(o),m=0;m<p.cmds.length;m++)a.cmds.push(p.cmds[m]);o&&a.cmds.push("X"),l+=r.hmtx.aWidth[f],u<s.length-1&&(l+=e.U.getPairAdjustment(r,f,h))}}return a},e.U.P={},e.U.P.moveTo=function(r,s,o){r.cmds.push("M"),r.crds.push(s,o)},e.U.P.lineTo=function(r,s,o){r.cmds.push("L"),r.crds.push(s,o)},e.U.P.curveTo=function(r,s,o,a,l,u,f){r.cmds.push("C"),r.crds.push(s,o,a,l,u,f)},e.U.P.qcurveTo=function(r,s,o,a,l){r.cmds.push("Q"),r.crds.push(s,o,a,l)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,o,a,l){for(var u=s.stack,f=s.nStems,h=s.haveWidth,p=s.width,m=s.open,v=0,w=s.x,_=s.y,g=0,x=0,S=0,E=0,T=0,b=0,P=0,I=0,C=0,D=0,H={val:0,size:0};v<r.length;){e.CFF.getCharString(r,v,H);var G=H.val;if(v+=H.size,G=="o1"||G=="o18")u.length%2!=0&&!h&&(p=u.shift()+a.nominalWidthX),f+=u.length>>1,u.length=0,h=!0;else if(G=="o3"||G=="o23")u.length%2!=0&&!h&&(p=u.shift()+a.nominalWidthX),f+=u.length>>1,u.length=0,h=!0;else if(G=="o4")u.length>1&&!h&&(p=u.shift()+a.nominalWidthX,h=!0),m&&e.U.P.closePath(l),_+=u.pop(),e.U.P.moveTo(l,w,_),m=!0;else if(G=="o5")for(;u.length>0;)w+=u.shift(),_+=u.shift(),e.U.P.lineTo(l,w,_);else if(G=="o6"||G=="o7")for(var Z=u.length,z=G=="o6",q=0;q<Z;q++){var J=u.shift();z?w+=J:_+=J,z=!z,e.U.P.lineTo(l,w,_)}else if(G=="o8"||G=="o24"){Z=u.length;for(var ne=0;ne+6<=Z;)g=w+u.shift(),x=_+u.shift(),S=g+u.shift(),E=x+u.shift(),w=S+u.shift(),_=E+u.shift(),e.U.P.curveTo(l,g,x,S,E,w,_),ne+=6;G=="o24"&&(w+=u.shift(),_+=u.shift(),e.U.P.lineTo(l,w,_))}else{if(G=="o11")break;if(G=="o1234"||G=="o1235"||G=="o1236"||G=="o1237")G=="o1234"&&(x=_,S=(g=w+u.shift())+u.shift(),D=E=x+u.shift(),b=E,I=_,w=(P=(T=(C=S+u.shift())+u.shift())+u.shift())+u.shift(),e.U.P.curveTo(l,g,x,S,E,C,D),e.U.P.curveTo(l,T,b,P,I,w,_)),G=="o1235"&&(g=w+u.shift(),x=_+u.shift(),S=g+u.shift(),E=x+u.shift(),C=S+u.shift(),D=E+u.shift(),T=C+u.shift(),b=D+u.shift(),P=T+u.shift(),I=b+u.shift(),w=P+u.shift(),_=I+u.shift(),u.shift(),e.U.P.curveTo(l,g,x,S,E,C,D),e.U.P.curveTo(l,T,b,P,I,w,_)),G=="o1236"&&(g=w+u.shift(),x=_+u.shift(),S=g+u.shift(),D=E=x+u.shift(),b=E,P=(T=(C=S+u.shift())+u.shift())+u.shift(),I=b+u.shift(),w=P+u.shift(),e.U.P.curveTo(l,g,x,S,E,C,D),e.U.P.curveTo(l,T,b,P,I,w,_)),G=="o1237"&&(g=w+u.shift(),x=_+u.shift(),S=g+u.shift(),E=x+u.shift(),C=S+u.shift(),D=E+u.shift(),T=C+u.shift(),b=D+u.shift(),P=T+u.shift(),I=b+u.shift(),Math.abs(P-w)>Math.abs(I-_)?w=P+u.shift():_=I+u.shift(),e.U.P.curveTo(l,g,x,S,E,C,D),e.U.P.curveTo(l,T,b,P,I,w,_));else if(G=="o14"){if(u.length>0&&!h&&(p=u.shift()+o.nominalWidthX,h=!0),u.length==4){var N=u.shift(),O=u.shift(),V=u.shift(),L=u.shift(),k=e.CFF.glyphBySE(o,V),K=e.CFF.glyphBySE(o,L);e.U._drawCFF(o.CharStrings[k],s,o,a,l),s.x=N,s.y=O,e.U._drawCFF(o.CharStrings[K],s,o,a,l)}m&&(e.U.P.closePath(l),m=!1)}else if(G=="o19"||G=="o20")u.length%2!=0&&!h&&(p=u.shift()+a.nominalWidthX),f+=u.length>>1,u.length=0,h=!0,v+=f+7>>3;else if(G=="o21")u.length>2&&!h&&(p=u.shift()+a.nominalWidthX,h=!0),_+=u.pop(),w+=u.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,w,_),m=!0;else if(G=="o22")u.length>1&&!h&&(p=u.shift()+a.nominalWidthX,h=!0),w+=u.pop(),m&&e.U.P.closePath(l),e.U.P.moveTo(l,w,_),m=!0;else if(G=="o25"){for(;u.length>6;)w+=u.shift(),_+=u.shift(),e.U.P.lineTo(l,w,_);g=w+u.shift(),x=_+u.shift(),S=g+u.shift(),E=x+u.shift(),w=S+u.shift(),_=E+u.shift(),e.U.P.curveTo(l,g,x,S,E,w,_)}else if(G=="o26")for(u.length%2&&(w+=u.shift());u.length>0;)g=w,x=_+u.shift(),w=S=g+u.shift(),_=(E=x+u.shift())+u.shift(),e.U.P.curveTo(l,g,x,S,E,w,_);else if(G=="o27")for(u.length%2&&(_+=u.shift());u.length>0;)x=_,S=(g=w+u.shift())+u.shift(),E=x+u.shift(),w=S+u.shift(),_=E,e.U.P.curveTo(l,g,x,S,E,w,_);else if(G=="o10"||G=="o29"){var ie=G=="o10"?a:o;if(u.length==0)console.debug("error: empty stack");else{var $=u.pop(),le=ie.Subrs[$+ie.Bias];s.x=w,s.y=_,s.nStems=f,s.haveWidth=h,s.width=p,s.open=m,e.U._drawCFF(le,s,o,a,l),w=s.x,_=s.y,f=s.nStems,h=s.haveWidth,p=s.width,m=s.open}}else if(G=="o30"||G=="o31"){var oe=u.length,he=(ne=0,G=="o31");for(ne+=oe-(Z=-3&oe);ne<Z;)he?(x=_,S=(g=w+u.shift())+u.shift(),_=(E=x+u.shift())+u.shift(),Z-ne==5?(w=S+u.shift(),ne++):w=S,he=!1):(g=w,x=_+u.shift(),S=g+u.shift(),E=x+u.shift(),w=S+u.shift(),Z-ne==5?(_=E+u.shift(),ne++):_=E,he=!0),e.U.P.curveTo(l,g,x,S,E,w,_),ne+=4}else{if((G+"").charAt(0)=="o")throw console.debug("Unknown operation: "+G,r),G;u.push(G)}}}s.x=w,s.y=_,s.nStems=f,s.haveWidth=h,s.width=p,s.open=m};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function l8(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(G,Z){for(var z=new t(31),q=0;q<31;++q)z[q]=Z+=1<<G[q-1];var J=new i(z[30]);for(q=1;q<30;++q)for(var ne=z[q];ne<z[q+1];++ne)J[ne]=ne-z[q]<<5|q;return[z,J]},l=a(r,2),u=l[0],f=l[1];u[28]=258,f[258]=28;for(var h=a(s,0)[0],p=new t(32768),m=0;m<32768;++m){var v=(43690&m)>>>1|(21845&m)<<1;v=(61680&(v=(52428&v)>>>2|(13107&v)<<2))>>>4|(3855&v)<<4,p[m]=((65280&v)>>>8|(255&v)<<8)>>>1}var w=function(G,Z,z){for(var q=G.length,J=0,ne=new t(Z);J<q;++J)++ne[G[J]-1];var N,O=new t(Z);for(J=0;J<Z;++J)O[J]=O[J-1]+ne[J-1]<<1;if(z){N=new t(1<<Z);var V=15-Z;for(J=0;J<q;++J)if(G[J])for(var L=J<<4|G[J],k=Z-G[J],K=O[G[J]-1]++<<k,ie=K|(1<<k)-1;K<=ie;++K)N[p[K]>>>V]=L}else for(N=new t(q),J=0;J<q;++J)G[J]&&(N[J]=p[O[G[J]-1]++]>>>15-G[J]);return N},_=new e(288);for(m=0;m<144;++m)_[m]=8;for(m=144;m<256;++m)_[m]=9;for(m=256;m<280;++m)_[m]=7;for(m=280;m<288;++m)_[m]=8;var g=new e(32);for(m=0;m<32;++m)g[m]=5;var x=w(_,9,1),S=w(g,5,1),E=function(G){for(var Z=G[0],z=1;z<G.length;++z)G[z]>Z&&(Z=G[z]);return Z},T=function(G,Z,z){var q=Z/8|0;return(G[q]|G[q+1]<<8)>>(7&Z)&z},b=function(G,Z){var z=Z/8|0;return(G[z]|G[z+1]<<8|G[z+2]<<16)>>(7&Z)},P=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],I=function(G,Z,z){var q=new Error(Z||P[G]);if(q.code=G,Error.captureStackTrace&&Error.captureStackTrace(q,I),!z)throw q;return q},C=function(G,Z,z){var q=G.length;if(!q||z&&!z.l&&q<5)return Z||new e(0);var J=!Z||z,ne=!z||z.i;z||(z={}),Z||(Z=new e(3*q));var N,O=function(Xe){var je=Z.length;if(Xe>je){var Ze=new e(Math.max(2*je,Xe));Ze.set(Z),Z=Ze}},V=z.f||0,L=z.p||0,k=z.b||0,K=z.l,ie=z.d,$=z.m,le=z.n,oe=8*q;do{if(!K){z.f=V=T(G,L,1);var he=T(G,L+1,3);if(L+=3,!he){var be=G[(Le=((N=L)/8|0)+(7&N&&1)+4)-4]|G[Le-3]<<8,Ie=Le+be;if(Ie>q){ne&&I(0);break}J&&O(k+be),Z.set(G.subarray(Le,Ie),k),z.b=k+=be,z.p=L=8*Ie;continue}if(he==1)K=x,ie=S,$=9,le=5;else if(he==2){var ue=T(G,L,31)+257,B=T(G,L+10,15)+4,ye=ue+T(G,L+5,31)+1;L+=14;for(var ce=new e(ye),me=new e(19),fe=0;fe<B;++fe)me[o[fe]]=T(G,L+3*fe,7);L+=3*B;var ke=E(me),de=(1<<ke)-1,Ce=w(me,ke,1);for(fe=0;fe<ye;){var Le,ve=Ce[T(G,L,de)];if(L+=15&ve,(Le=ve>>>4)<16)ce[fe++]=Le;else{var We=0,F=0;for(Le==16?(F=3+T(G,L,3),L+=2,We=ce[fe-1]):Le==17?(F=3+T(G,L,7),L+=3):Le==18&&(F=11+T(G,L,127),L+=7);F--;)ce[fe++]=We}}var U=ce.subarray(0,ue),Q=ce.subarray(ue);$=E(U),le=E(Q),K=w(U,$,1),ie=w(Q,le,1)}else I(1);if(L>oe){ne&&I(0);break}}J&&O(k+131072);for(var Pe=(1<<$)-1,xe=(1<<le)-1,_e=L;;_e=L){var Be=(We=K[b(G,L)&Pe])>>>4;if((L+=15&We)>oe){ne&&I(0);break}if(We||I(2),Be<256)Z[k++]=Be;else{if(Be==256){_e=L,K=null;break}var De=Be-254;if(Be>264){var Oe=r[fe=Be-257];De=T(G,L,(1<<Oe)-1)+u[fe],L+=Oe}var ze=ie[b(G,L)&xe],rt=ze>>>4;if(ze||I(3),L+=15&ze,Q=h[rt],rt>3&&(Oe=s[rt],Q+=b(G,L)&(1<<Oe)-1,L+=Oe),L>oe){ne&&I(0);break}J&&O(k+131072);for(var Ee=k+De;k<Ee;k+=4)Z[k]=Z[k-Q],Z[k+1]=Z[k+1-Q],Z[k+2]=Z[k+2-Q],Z[k+3]=Z[k+3-Q];k=Ee}}z.l=K,z.p=_e,z.b=k,K&&(V=1,z.m=$,z.d=ie,z.n=le)}while(!V);return k==Z.length?Z:function(Xe,je,Ze){(je==null||je<0)&&(je=0),(Ze==null||Ze>Xe.length)&&(Ze=Xe.length);var $e=new(Xe instanceof t?t:Xe instanceof i?i:e)(Ze-je);return $e.set(Xe.subarray(je,Ze)),$e}(Z,0,k)},D=new e(0),H=typeof TextDecoder<"u"&&new TextDecoder;try{H.decode(D,{stream:!0})}catch{}return n.convert_streams=function(G){var Z=new DataView(G),z=0;function q(){var ue=Z.getUint16(z);return z+=2,ue}function J(){var ue=Z.getUint32(z);return z+=4,ue}function ne(ue){be.setUint16(Ie,ue),Ie+=2}function N(ue){be.setUint32(Ie,ue),Ie+=4}for(var O={signature:J(),flavor:J(),length:J(),numTables:q(),reserved:q(),totalSfntSize:J(),majorVersion:q(),minorVersion:q(),metaOffset:J(),metaLength:J(),metaOrigLength:J(),privOffset:J(),privLength:J()},V=0;Math.pow(2,V)<=O.numTables;)V++;V--;for(var L=16*Math.pow(2,V),k=16*O.numTables-L,K=12,ie=[],$=0;$<O.numTables;$++)ie.push({tag:J(),offset:J(),compLength:J(),origLength:J(),origChecksum:J()}),K+=16;var le,oe=new Uint8Array(12+16*ie.length+ie.reduce(function(ue,B){return ue+B.origLength+4},0)),he=oe.buffer,be=new DataView(he),Ie=0;return N(O.flavor),ne(O.numTables),ne(L),ne(V),ne(k),ie.forEach(function(ue){N(ue.tag),N(ue.origChecksum),N(K),N(ue.origLength),ue.outOffset=K,(K+=ue.origLength)%4!=0&&(K+=4-K%4)}),ie.forEach(function(ue){var B,ye=G.slice(ue.offset,ue.offset+ue.compLength);if(ue.compLength!=ue.origLength){var ce=new Uint8Array(ue.origLength);B=new Uint8Array(ye,2),C(B,ce)}else ce=new Uint8Array(ye);oe.set(ce,ue.outOffset);var me=0;(K=ue.outOffset+ue.origLength)%4!=0&&(me=4-K%4),oe.set(new Uint8Array(me).buffer,ue.outOffset+ue.origLength),le=K+me}),he.slice(0,le)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function u8(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,o=4,a=8,l=16,u=32;let f;function h(T){if(!f){const b={R:s,L:r,D:o,C:l,U:u,T:a};f=new Map;for(let P in i){let I=0;i[P].split(",").forEach(C=>{let[D,H]=C.split("+");D=parseInt(D,36),H=H?parseInt(H,36):0,f.set(I+=D,b[P]);for(let G=H;G--;)f.set(++I,b[P])})}}return f.get(T)||u}const p=1,m=2,v=3,w=4,_=[null,"isol","init","fina","medi"];function g(T){const b=new Uint8Array(T.length);let P=u,I=p,C=-1;for(let D=0;D<T.length;D++){const H=T.codePointAt(D);let G=h(H)|0,Z=p;G&a||(P&(r|o|l)?G&(s|o|l)?(Z=v,(I===p||I===v)&&b[C]++):G&(r|u)&&(I===m||I===w)&&b[C]--:P&(s|u)&&(I===m||I===w)&&b[C]--,I=b[D]=Z,P=G,C=D,H>65535&&D++)}return b}function x(T,b){const P=[];for(let C=0;C<b.length;C++){const D=b.codePointAt(C);D>65535&&C++,P.push(n.U.codeToGlyph(T,D))}const I=T.GSUB;if(I){const{lookupList:C,featureList:D}=I;let H;const G=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,Z=[];D.forEach(z=>{if(G.test(z.tag))for(let q=0;q<z.tab.length;q++){if(Z[z.tab[q]])continue;Z[z.tab[q]]=!0;const J=C[z.tab[q]],ne=/^(isol|init|fina|medi)$/.test(z.tag);ne&&!H&&(H=g(b));for(let N=0;N<P.length;N++)(!H||!ne||_[H[N]]===z.tag)&&n.U._applySubs(P,N,J,C)}})}return P}function S(...T){for(let b=0;b<T.length;b++)if(typeof T[b]=="number")return T[b]}function E(T){const b=Object.create(null),P=T["OS/2"],I=T.hhea,C=T.head.unitsPerEm,D=S(P&&P.sTypoAscender,I&&I.ascender,C),H={unitsPerEm:C,ascender:D,descender:S(P&&P.sTypoDescender,I&&I.descender,0),capHeight:S(P&&P.sCapHeight,D),xHeight:S(P&&P.sxHeight,D),lineGap:S(P&&P.sTypoLineGap,I&&I.lineGap),forEachGlyph(G,Z,z,q){let J=0;const ne=1/H.unitsPerEm*Z,N=x(T,G);let O=0,V=-1;return N.forEach((L,k)=>{if(L!==-1){let K=b[L];if(!K){const{cmds:ie,crds:$}=n.U.glyphToPath(T,L);let le="",oe=0;for(let B=0,ye=ie.length;B<ye;B++){const ce=t[ie[B]];le+=ie[B];for(let me=1;me<=ce;me++)le+=(me>1?",":"")+$[oe++]}let he,be,Ie,ue;if($.length){he=be=1/0,Ie=ue=-1/0;for(let B=0,ye=$.length;B<ye;B+=2){let ce=$[B],me=$[B+1];ce<he&&(he=ce),me<be&&(be=me),ce>Ie&&(Ie=ce),me>ue&&(ue=me)}}else he=Ie=be=ue=0;K=b[L]={index:L,advanceWidth:T.hmtx.aWidth[L],xMin:he,yMin:be,xMax:Ie,yMax:ue,path:le,pathCommandCount:ie.length}}V!==-1&&(J+=n.U.getPairAdjustment(T,V,L)*ne),q.call(null,K,J,O),K.advanceWidth&&(J+=K.advanceWidth*ne),z&&(J+=z*Z),V=L}O+=G.codePointAt(O)>65535?2:1}),J}};return H}return function(b){const P=new Uint8Array(b,0,4),I=n._bin.readASCII(P,0,4);if(I==="wOFF")b=e(b);else if(I==="wOF2")throw new Error("woff2 fonts not supported");return E(n.parse(b)[0])}}const c8=gh({name:"Typr Font Parser",dependencies:[a8,l8,u8],init(n,e,t){const i=n(),r=e();return t(i,r)}}),Qu={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},f8=new Ke;function Ru(){return(self.performance||Date).now()}const W2=Object.create(null);function EI(n,e){n=p8({},n);const t=Ru();if(n.font=m8(n.font||Qu.defaultFontURL),n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||Qu.sdfGlyphSize,n.colorRanges!=null){let h={};for(let p in n.colorRanges)if(n.colorRanges.hasOwnProperty(p)){let m=n.colorRanges[p];typeof m!="number"&&(m=f8.set(m).getHex()),h[p]=m}n.colorRanges=h}Object.freeze(n);const{textureWidth:i,sdfExponent:r}=Qu,{sdfGlyphSize:s}=n,o=i/s*4;let a=W2[s];if(!a){const h=document.createElement("canvas");h.width=i,h.height=s*256/o,a=W2[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:h,sdfTexture:new yn(h,void 0,void 0,void 0,pn,pn),contextLost:!1,glyphsByFont:new Map},a.sdfTexture.generateMipmaps=!1,d8(a)}const{sdfTexture:l,sdfCanvas:u}=a;let f=a.glyphsByFont.get(n.font);f||a.glyphsByFont.set(n.font,f=new Map),v8(n).then(h=>{const{glyphIds:p,glyphPositions:m,fontSize:v,unitsPerEm:w,timings:_}=h,g=[],x=new Float32Array(p.length*4),S=v/w;let E=0,T=0;const b=Ru();p.forEach((H,G)=>{let Z=f.get(H);if(!Z){const{path:ne,pathBounds:N}=h.glyphData[H],O=Math.max(N[2]-N[0],N[3]-N[1])/s*(Qu.sdfMargin*s+.5),V=a.glyphCount++,L=[N[0]-O,N[1]-O,N[2]+O,N[3]+O];f.set(H,Z={path:ne,atlasIndex:V,sdfViewBox:L}),g.push(Z)}const{sdfViewBox:z}=Z,q=m[T++],J=m[T++];x[E++]=q+z[0]*S,x[E++]=J+z[1]*S,x[E++]=q+z[2]*S,x[E++]=J+z[3]*S,p[G]=Z.atlasIndex}),_.quads=(_.quads||0)+(Ru()-b);const P=Ru();_.sdf={};const I=u.height,C=Math.ceil(a.glyphCount/o),D=Math.pow(2,Math.ceil(Math.log2(C*s)));D>I&&(console.info(`Increasing SDF texture size ${I}->${D}`),o8(u,i,D),l.dispose()),Promise.all(g.map(H=>AI(H,a,n.gpuAccelerateSDF).then(({timing:G})=>{_.sdf[H.atlasIndex]=G}))).then(()=>{g.length&&!a.contextLost&&(TI(a),l.needsUpdate=!0),_.sdfTotal=Ru()-P,_.total=Ru()-t,e(Object.freeze({parameters:n,sdfTexture:l,sdfGlyphSize:s,sdfExponent:r,glyphBounds:x,glyphAtlasIndices:p,glyphColors:h.glyphColors,caretPositions:h.caretPositions,caretHeight:h.caretHeight,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,capHeight:h.capHeight,xHeight:h.xHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings}))})}),Promise.resolve().then(()=>{a.contextLost||s8(u)})}function AI({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Qu,u=Math.max(t[2]-t[0],t[3]-t[1]),f=Math.floor(e/4),h=f%(a/i)*i,p=Math.floor(f/(a/i))*i,m=e%4;return $6(i,i,n,t,u,l,r,h,p,m,o)}function d8(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(AI(s,n,!0))})}),Promise.all(i).then(()=>{TI(n),n.sdfTexture.needsUpdate=!0})})}function h8({font:n,characters:e,sdfGlyphSize:t},i){let r=Array.isArray(e)?e.join(`
`):""+e;EI({font:n,sdfGlyphSize:t,text:r},i)}function p8(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let Am;function m8(n){return Am||(Am=typeof document>"u"?{}:document.createElement("a")),Am.href=n,Am.href}function TI(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:r}=e,s=n.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==i*r*4)&&(o=new Uint8Array(i*r*4),t.image={width:i,height:r,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,o)}}const g8=gh({name:"Typesetter",dependencies:[Qu,c8,K6,W6],init(n,e,t,i){const{defaultFontURL:r}=n;return t(e,i(),{defaultFontURL:r})}}),v8=gh({name:"Typesetter",dependencies:[g8],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[n.glyphPositions.buffer,n.glyphIds.buffer];return n.caretPositions&&e.push(n.caretPositions.buffer),n.glyphColors&&e.push(n.glyphColors.buffer),e}}),j2={};function y8(n){let e=j2[n];if(!e){const t=new Ta(1,1,n,n),i=t.clone(),r=t.attributes,s=i.attributes,o=new Tt,a=r.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new ot([...r[l].array,...s[l].array],r[l].itemSize))}),o.setIndex([...t.index.array,...i.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=j2[n]=o}return e}const x8="aTroikaGlyphBounds",X2="aTroikaGlyphIndex",_8="aTroikaGlyphColor";class S8 extends V0{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new lr,this.boundingBox=new ar}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===Ai?t/2:0,e===wr?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=y8(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,r,s){h1(this,x8,e,4),h1(this,X2,t,1),h1(this,_8,s,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:r,floor:s,min:o,max:a,sin:l,cos:u}=Math,f=r/2,h=r*2,p=Math.abs(t),m=e[0]/p,v=e[2]/p,w=s((m+f)/h)!==s((v+f)/h)?-p:o(l(m)*p,l(v)*p),_=s((m-f)/h)!==s((v-f)/h)?p:a(l(m)*p,l(v)*p),g=s((m+r)/h)!==s((v+r)/h)?p*2:a(p-u(m)*p,p-u(v)*p);i.min.set(w,e[1],t<0?-g:0),i.max.set(_,e[3],t<0?0:g)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(X2).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){t=i[r].end;let s=i[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}}function h1(n,e,t,i){const r=n.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(n.setAttribute(e,new Nl(t,i)),delete n._maxInstanceCount,n.dispose()):r&&n.deleteAttribute(e)}const w8=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,M8=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,E8=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,A8=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function T8(n){const e=S_(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new Re},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new Dt(0,0,0,0)},uTroikaClipRect:{value:new Dt(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new Re},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Ke},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Et},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:w8,vertexTransform:M8,fragmentDefs:E8,fragmentColorTransform:A8,customRewriter({vertexShader:t,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(wI,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const Cw=new To({color:16777215,side:wr,transparent:!0}),Y2=8421504,q2=new _t,Tm=new j,p1=new j,bf=[],b8=new j,m1="+x+y";function Z2(n){return Array.isArray(n)?n[0]:n}let bI=()=>{const n=new Dn(new Ta(1,1),Cw);return bI=()=>n,n},CI=()=>{const n=new Dn(new Ta(1,1,32,1),Cw);return CI=()=>n,n};const C8={type:"syncstart"},P8={type:"synccomplete"},PI=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],R8=PI.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let RI=class extends Dn{constructor(){const e=new S8;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Y2,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=m1,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(C8),EI({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(P8),e&&e()})))}onBeforeRender(e,t,i,r,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=ks}onAfterRender(e,t,i,r,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Cw.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=T8(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return Z2(this.material).getDepthMaterial()}get customDistanceMaterial(){return Z2(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:a,blockBounds:l}=r;i.uTroikaSDFTexture.value=a,i.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(l),i.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let u=0,f=0,h=0,p,m,v,w=0,_=0;if(t){let{outlineWidth:x,outlineOffsetX:S,outlineOffsetY:E,outlineBlur:T,outlineOpacity:b}=this;u=this._parsePercent(x)||0,f=Math.max(0,this._parsePercent(T)||0),p=b,w=this._parsePercent(S)||0,_=this._parsePercent(E)||0}else h=Math.max(0,this._parsePercent(this.strokeWidth)||0),h&&(v=this.strokeColor,i.uTroikaStrokeColor.value.set(v??Y2),m=this.strokeOpacity,m==null&&(m=1)),p=this.fillOpacity;i.uTroikaDistanceOffset.value=u,i.uTroikaPositionOffset.value.set(w,_),i.uTroikaBlurRadius.value=f,i.uTroikaStrokeWidth.value=h,i.uTroikaStrokeOpacity.value=m,i.uTroikaFillOpacity.value=p??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let g=this.clipRect;if(g&&Array.isArray(g)&&g.length===4)i.uTroikaClipRect.value.fromArray(g);else{const x=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(l[0]-x,l[1]-x,l[2]+x,l[3]+x)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new Ke;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||m1;if(o!==e._orientation){let a=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==m1&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,u,f,h,p]=l;Tm.set(0,0,0)[f]=u==="-"?1:-1,p1.set(0,0,0)[p]=h==="-"?-1:1,q2.lookAt(b8,Tm.cross(p1),p1),a.setFromMatrix4(q2)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new Re){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new Re){return Tm.copy(e),this.localPositionToTextCoords(this.worldToLocal(Tm),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,o=r?CI():bI(),a=o.geometry,{position:l,uv:u}=a.attributes;for(let f=0;f<u.count;f++){let h=s[0]+u.getX(f)*(s[2]-s[0]);const p=s[1]+u.getY(f)*(s[3]-s[1]);let m=0;r&&(m=r-Math.cos(h/r)*r,h=Math.sin(h/r)*r),l.setXYZ(f,h,p,m)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,bf.length=0,o.raycast(e,bf);for(let f=0;f<bf.length;f++)bf[f].object=this,t.push(bf[f])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,R8.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};PI.forEach(n=>{const e="_private_"+n;Object.defineProperty(RI.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const L8=X.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:i,fontSize:r=1,children:s,characters:o,onSync:a,...l},u)=>{const f=cc(({invalidate:v})=>v),[h]=X.useState(()=>new RI),[p,m]=X.useMemo(()=>{const v=[];let w="";return X.Children.forEach(s,_=>{typeof _=="string"||typeof _=="number"?w+=_:v.push(_)}),[v,w]},[s]);return BH(()=>new Promise(v=>h8({font:i,characters:o},v)),["troika-text",i,o]),X.useLayoutEffect(()=>void h.sync(()=>{f(),a&&a(h)})),X.useEffect(()=>()=>h.dispose(),[h]),X.createElement("primitive",sr({object:h,ref:u,font:i,text:m,anchorX:e,anchorY:t,fontSize:r,sdfGlyphSize:n},l),p)}),I8=()=>parseInt(Cc.replace(/\D+/g,"")),LI=I8(),g1=LI>=154?"opaque_fragment":"output_fragment";class D8 extends E0{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:r}=i.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${g1}>`,`
        ${r?`#include <${g1}>`:`#extension GL_OES_standard_derivatives : enable
#include <${g1}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${LI>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const U8=X.forwardRef((n,e)=>{const[t]=X.useState(()=>new D8(null));return X.createElement("primitive",sr({},n,{object:t,ref:e,attach:"material"}))});function N8(n,e){const t=n+"Geometry";return X.forwardRef(({args:i,children:r,...s},o)=>{const a=X.useRef(null);return X.useImperativeHandle(o,()=>a.current),X.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),X.createElement("mesh",sr({ref:a},s),X.createElement(t,{attach:"geometry",args:i}),r)})}const O8=N8("sphere");let nl,Cf;const F8=X.createContext(null),J2=new _t,Q2=new j,k8=X.forwardRef(({children:n,range:e,limit:t=1e3,...i},r)=>{const s=X.useRef(null),[o,a]=X.useState([]),[[l,u,f]]=X.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);X.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),Vs(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),J2.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,o.length),nl=0;nl<o.length;nl++)Cf=o[nl].current,Cf.getWorldPosition(Q2).applyMatrix4(J2),Q2.toArray(l,nl*3),s.current.geometry.attributes.position.needsUpdate=!0,Cf.matrixWorldNeedsUpdate=!0,Cf.color.toArray(u,nl*3),s.current.geometry.attributes.color.needsUpdate=!0,f.set([Cf.size],nl),s.current.geometry.attributes.size.needsUpdate=!0});const h=X.useMemo(()=>({getParent:()=>s,subscribe:p=>(a(m=>[...m,p]),()=>a(m=>m.filter(v=>v.current!==p.current)))}),[]);return X.createElement("points",sr({userData:{instances:o},matrixAutoUpdate:!1,ref:gI([r,s]),raycast:()=>null},i),X.createElement("bufferGeometry",null,X.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:Ml}),X.createElement("bufferAttribute",{attach:"attributes-color",count:u.length/3,array:u,itemSize:3,usage:Ml}),X.createElement("bufferAttribute",{attach:"attributes-size",count:f.length,array:f,itemSize:1,usage:Ml})),X.createElement(F8.Provider,{value:h},n))}),B8=X.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:r=3,...s},o)=>{const a=X.useRef(null);return Vs(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,t&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),X.createElement("points",sr({ref:gI([o,a])},s),X.createElement("bufferGeometry",null,X.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:Ml}),t&&X.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/r,array:t,itemSize:3,usage:Ml}),i&&X.createElement("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:Ml})),n)}),z8=X.forwardRef((n,e)=>n.positions instanceof Float32Array?X.createElement(B8,sr({},n,{ref:e})):X.createElement(k8,sr({},n,{ref:e})));var II={exports:{}},V8="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",G8=V8,H8=G8;function DI(){}function UI(){}UI.resetWarningCache=DI;var W8=function(){function n(i,r,s,o,a,l){if(l!==H8){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:UI,resetWarningCache:DI};return t.PropTypes=t,t};II.exports=W8();var NI=II.exports;function j8({all:n,scene:e,camera:t}){const i=cc(({gl:o})=>o),r=cc(({camera:o})=>o),s=cc(({scene:o})=>o);return X.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(u=>{u.visible===!1&&(o.push(u),u.visible=!0)}),i.compile(e||s,t||r);const a=new $S(128);new KS(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(u=>u.visible=!1)},[]),null}const OI=()=>{const{progress:n}=D6();return te.jsxs(I6,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[te.jsx("span",{className:"canvas-loader"}),te.jsxs("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[n.toFixed(2),"%"]})]})};function fc(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function K2(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function $2(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?K2(Object(t),!0).forEach(function(i){fc(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):K2(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function FI(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}new Re;new Re;var Vr=function n(e,t,i){var r=this;FI(this,n),fc(this,"dot2",function(s,o){return r.x*s+r.y*o}),fc(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=i},X8=[new Vr(1,1,0),new Vr(-1,1,0),new Vr(1,-1,0),new Vr(-1,-1,0),new Vr(1,0,1),new Vr(-1,0,1),new Vr(1,0,-1),new Vr(-1,0,-1),new Vr(0,1,1),new Vr(0,-1,1),new Vr(0,1,-1),new Vr(0,-1,-1)],eb=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],tb=new Array(512),nb=new Array(512),Y8=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=eb[t]^e&255:i=eb[t]^e>>8&255,tb[t]=tb[t+256]=i,nb[t]=nb[t+256]=X8[i%12]}};Y8(0);function q8(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function ib(n){var e=q8(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var Z8=function n(e){var t=this;FI(this,n),fc(this,"seed",0),fc(this,"init",function(i){t.seed=i,t.value=ib(i)}),fc(this,"value",ib(this.seed)),this.init(e)},J8=new Z8(Math.random()),Q8={radius:1,center:[0,0,0]};function K8(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:J8,i=$2($2({},Q8),e),r=i.radius,s=i.center,o=0;o<n.length;o+=3){var a=Math.pow(t.value(),.3333333333333333),l=t.value()*2-1,u=t.value()*2-1,f=t.value()*2-1,h=Math.sqrt(l*l+u*u+f*f);l=a*l/h,u=a*u/h,f=a*f/h,n[o]=l*r+s[0],n[o+1]=u*r+s[1],n[o+2]=f*r+s[2]}return n}const $8=n=>{const e=X.useRef(),[t]=X.useState(()=>K8(new Float32Array(5e3),{radius:1.2}));return Vs((i,r)=>{e.current.rotation.x-=r/10,e.current.rotation.y-=r/15}),te.jsx("group",{rotation:[0,0,Math.PI/4],children:te.jsx(z8,{ref:e,positions:t,stride:3,frustumCulled:!0,...n,children:te.jsx(U8,{transparent:!0,color:"#f272c8",size:.002,sizeAttenuation:!0,depthWrite:!1})})})},eW=()=>te.jsx("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:te.jsxs(Ew,{camera:{position:[0,0,1]},children:[te.jsx(X.Suspense,{fallback:null,children:te.jsx($8,{})}),te.jsx(j8,{all:!0})]})}),tW=({position:n,color:e,size:t=.15,delay:i=0})=>{const r=X.useRef();return Vs(s=>{r.current&&r.current.scale.setScalar(1+Math.sin(s.clock.elapsedTime*2+i)*.2)}),te.jsx(O8,{ref:r,position:n,args:[t,32,32],children:te.jsx("meshStandardMaterial",{color:e,emissive:e,emissiveIntensity:.3,transparent:!0,opacity:.8})})},nW=({start:n,end:e,color:t,delay:i=0,isVisible:r=!1})=>{const s=X.useRef(),[o,a]=X.useState(0);Vs(u=>{if(s.current&&r){a(p=>Math.min(p+.02,1));const h=.3+Math.sin(u.clock.elapsedTime*3+i)*.2;s.current.material.opacity=h}});const l=X.useMemo(()=>{if(!r||o===0)return[new j(...n)];const u=new j(...n),f=new j(...e),h=u.clone().lerp(f,o);return[u,h]},[n,e,o,r]);return te.jsx(F6,{ref:s,points:l,color:t,lineWidth:1.5,transparent:!0,opacity:.4})},iW=()=>{const[n,e]=X.useState([]),[t,i]=X.useState(!1);X.useEffect(()=>{e([{code:`print("Hello Welcome
to this page")`,color:"#93C5FD",position:[-2,-3.5,0],delay:0},{code:`System.out.println(
"Hello Welcome
to this page");`,color:"#6EE7B7",position:[0,-3.5,0],delay:1},{code:`console.log(
"Hello Welcome
to this page");`,color:"#FCD34D",position:[2,-3.5,0],delay:2}]);const o=setTimeout(()=>{i(!0)},1e3);return()=>clearTimeout(o)},[]);const r=X.useMemo(()=>{const s=[{pos:[-4,2.5,0],color:"#93C5FD"},{pos:[-4,0,0],color:"#93C5FD"},{pos:[-4,-2.5,0],color:"#93C5FD"}],o=[{pos:[-1.5,2,0],color:"#6EE7B7"},{pos:[-1.5,.7,0],color:"#6EE7B7"},{pos:[-1.5,-.7,0],color:"#6EE7B7"},{pos:[-1.5,-2,0],color:"#6EE7B7"}],a=[{pos:[1,1.3,0],color:"#FCD34D"},{pos:[1,0,0],color:"#FCD34D"},{pos:[1,-1.3,0],color:"#FCD34D"}],l=[{pos:[3.5,.7,0],color:"#FCA5A5"},{pos:[3.5,-.7,0],color:"#FCA5A5"}],u=[...s,...o,...a,...l],f=[];return s.forEach((h,p)=>{o.forEach((m,v)=>{f.push({start:h.pos,end:m.pos,color:"#93C5FD",delay:(p+v)*.2})})}),o.forEach((h,p)=>{a.forEach((m,v)=>{f.push({start:h.pos,end:m.pos,color:"#6EE7B7",delay:(p+v)*.3})})}),a.forEach((h,p)=>{l.forEach((m,v)=>{f.push({start:h.pos,end:m.pos,color:"#FCD34D",delay:(p+v)*.4})})}),{nodes:u,connections:f}},[]);return te.jsxs(te.Fragment,{children:[te.jsx("ambientLight",{intensity:.6}),te.jsx("pointLight",{position:[5,5,5],intensity:.8}),te.jsx("pointLight",{position:[-5,-5,-5],intensity:.4,color:"#93C5FD"}),r.nodes.map((s,o)=>te.jsx(tW,{position:s.pos,color:s.color,delay:o*.1},`node-${o}`)),r.connections.map((s,o)=>te.jsx(nW,{start:s.start,end:s.end,color:s.color,delay:s.delay,isVisible:t},`connection-${o}`))]})},rW=()=>te.jsx(Ew,{frameloop:"demand",shadows:!0,dpr:[1,2],camera:{position:[0,0,8],fov:35},gl:{preserveDrawingBuffer:!0},children:te.jsx(X.Suspense,{fallback:te.jsx(OI,{}),children:te.jsx(iW,{})})}),sW=({text:n,position:e,color:t,delay:i=0,speed:r=1})=>{const s=X.useRef();return Vs(o=>{if(s.current){const a=o.clock.elapsedTime+i;s.current.position.x=e[0]+Math.sin(a*r)*.5,s.current.position.y=e[1]+Math.sin(a*r*.7)*.3,s.current.rotation.z=Math.sin(a*r*.5)*.1,s.current.material.opacity=.7+Math.sin(a*r)*.3}}),te.jsx(L8,{ref:s,position:e,fontSize:.15,color:t,anchorX:"center",anchorY:"middle",font:"/fonts/inter.woff",children:n})},oW=({position:n,color:e,delay:t=0})=>{const i=X.useRef();return Vs(r=>{if(i.current){const s=r.clock.elapsedTime+t;i.current.rotation.y=s*.2,i.current.position.y=n[1]+Math.sin(s*.5)*.2,i.current.scale.setScalar(1+Math.sin(s*.8)*.1)}}),te.jsx("group",{ref:i,position:n,children:te.jsxs("mesh",{children:[te.jsx("boxGeometry",{args:[.8,.6,.1]}),te.jsx("meshStandardMaterial",{color:e,transparent:!0,opacity:.1,emissive:e,emissiveIntensity:.2})]})})},aW=()=>{const n=X.useMemo(()=>[{text:"const portfolio = {",color:"#61dafb",delay:0,speed:.5},{text:"  name: 'Ravi',",color:"#f89820",delay:1,speed:.7},{text:"  skills: ['Java', 'React'],",color:"#339933",delay:2,speed:.6},{text:"  experience: '5+ years'",color:"#007acc",delay:3,speed:.8},{text:"  projects: 15+",color:"#ff6b35",delay:4,speed:.9},{text:"  languages: 8+",color:"#764abc",delay:5,speed:.4},{text:"};",color:"#61dafb",delay:6,speed:.5},{text:"function build() {",color:"#ff6b35",delay:7,speed:.9},{text:"  return 'Amazing Apps';",color:"#764abc",delay:8,speed:.4},{text:"}",color:"#ff6b35",delay:9,speed:.9},{text:"class Developer {",color:"#f89820",delay:10,speed:.6},{text:"  constructor() {",color:"#339933",delay:11,speed:.7},{text:"    this.passion = 'Coding';",color:"#007acc",delay:12,speed:.5},{text:"    this.focus = 'Quality';",color:"#61dafb",delay:13,speed:.6},{text:"  }",color:"#f89820",delay:14,speed:.6},{text:"}",color:"#f89820",delay:15,speed:.6},{text:"import React from 'react';",color:"#61dafb",delay:16,speed:.8},{text:"import { useState } from 'react';",color:"#339933",delay:17,speed:.7},{text:"const App = () => {",color:"#ff6b35",delay:18,speed:.5},{text:"  return <div>Hello World</div>;",color:"#764abc",delay:19,speed:.6},{text:"};",color:"#ff6b35",delay:20,speed:.5},{text:"export default App;",color:"#007acc",delay:21,speed:.8},{text:"public class Main {",color:"#f89820",delay:22,speed:.7},{text:"  public static void main(String[] args) {",color:"#339933",delay:23,speed:.6},{text:'    System.out.println("Hello Java!");',color:"#007acc",delay:24,speed:.8},{text:"  }",color:"#f89820",delay:25,speed:.7},{text:"}",color:"#f89820",delay:26,speed:.7}],[]),e=X.useMemo(()=>[{color:"#61dafb",delay:0,position:[-2.5,1.5,0]},{color:"#f89820",delay:2,position:[2.5,-1.5,0]},{color:"#339933",delay:4,position:[0,2.5,0]},{color:"#007acc",delay:6,position:[-2,-2,0]},{color:"#ff6b35",delay:8,position:[2,2,0]},{color:"#764abc",delay:10,position:[-1,-2.5,0]},{color:"#61dafb",delay:12,position:[1,2.5,0]},{color:"#339933",delay:14,position:[-2.5,-1,0]},{color:"#ff6b35",delay:16,position:[2.5,1,0]}],[]);return te.jsxs(te.Fragment,{children:[e.map((t,i)=>te.jsx(oW,{position:t.position,color:t.color,delay:t.delay},i)),n.map((t,i)=>te.jsx(sW,{text:t.text,position:[(Math.random()-.5)*8,(Math.random()-.5)*6,(Math.random()-.5)*3],color:t.color,delay:t.delay,speed:t.speed},i))]})},lW=()=>{const n=X.useRef(),e=100,t=X.useMemo(()=>{const i=[];for(let r=0;r<e;r++)i.push({position:[(Math.random()-.5)*12,(Math.random()-.5)*8,(Math.random()-.5)*6],speed:Math.random()*.03+.01,size:Math.random()*.03+.01,color:["#61dafb","#f89820","#339933","#007acc","#ff6b35","#764abc"][Math.floor(Math.random()*6)]});return i},[]);return Vs(i=>{n.current&&n.current.children.forEach((r,s)=>{r.position.y+=t[s].speed,r.position.x+=Math.sin(i.clock.elapsedTime+s)*.01,r.position.y>4&&(r.position.y=-4),r.rotation.y+=.02,r.rotation.x+=.01})}),te.jsx("group",{ref:n,children:t.map((i,r)=>te.jsxs("mesh",{position:i.position,children:[te.jsx("sphereGeometry",{args:[i.size,8,8]}),te.jsx("meshStandardMaterial",{color:i.color,emissive:i.color,emissiveIntensity:.4,transparent:!0,opacity:.6})]},r))})},uW=()=>{const n=X.useRef(),e=20,t=X.useMemo(()=>{const i=[];for(let r=0;r<e;r++)i.push({start:[(Math.random()-.5)*8,(Math.random()-.5)*6,(Math.random()-.5)*3],end:[(Math.random()-.5)*8,(Math.random()-.5)*6,(Math.random()-.5)*3],color:["#61dafb","#f89820","#339933","#007acc","#ff6b35","#764abc"][Math.floor(Math.random()*6)],delay:Math.random()*5});return i},[]);return Vs(i=>{n.current&&n.current.children.forEach((r,s)=>{const o=i.clock.elapsedTime+t[s].delay;r.material.opacity=.3+Math.sin(o*2)*.2,r.rotation.z=Math.sin(o*.5)*.1})}),te.jsx("group",{ref:n,children:t.map((i,r)=>te.jsxs("mesh",{position:i.start,children:[te.jsx("cylinderGeometry",{args:[.002,.002,2]}),te.jsx("meshStandardMaterial",{color:i.color,emissive:i.color,emissiveIntensity:.3,transparent:!0,opacity:.4})]},r))})},cW=()=>te.jsxs(te.Fragment,{children:[te.jsx("ambientLight",{intensity:.6}),te.jsx("pointLight",{position:[5,5,5],intensity:1.2,color:"#ffffff"}),te.jsx("pointLight",{position:[-5,-5,-5],intensity:.6,color:"#61dafb"}),te.jsx("pointLight",{position:[0,5,0],intensity:.8,color:"#f89820"}),te.jsx("pointLight",{position:[0,-5,0],intensity:.4,color:"#339933"}),te.jsx(lW,{}),te.jsx(uW,{}),te.jsx(aW,{})]}),fW=()=>te.jsx(Ew,{frameloop:"demand",shadows:!0,dpr:[1,2],camera:{position:[0,0,8],fov:35},gl:{preserveDrawingBuffer:!0,antialias:!0},children:te.jsx(X.Suspense,{fallback:te.jsx(OI,{}),children:te.jsx(cW,{})})}),kI=X.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),H0=X.createContext({}),Pw=X.createContext(null),W0=typeof document<"u",dW=W0?X.useLayoutEffect:X.useEffect,BI=X.createContext({strict:!1});function hW(n,e,t,i){const{visualElement:r}=X.useContext(H0),s=X.useContext(BI),o=X.useContext(Pw),a=X.useContext(kI).reducedMotion,l=X.useRef();i=i||s.renderer,!l.current&&i&&(l.current=i(n,{visualState:e,parent:r,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const u=l.current;X.useInsertionEffect(()=>{u&&u.update(t,o)});const f=X.useRef(!!window.HandoffAppearAnimations);return dW(()=>{u&&(u.render(),f.current&&u.animationState&&u.animationState.animateChanges())}),X.useEffect(()=>{u&&(u.updateFeatures(),!f.current&&u.animationState&&u.animationState.animateChanges(),window.HandoffAppearAnimations=void 0,f.current=!1)}),u}function Ku(n){return typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function pW(n,e,t){return X.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Ku(t)&&(t.current=i))},[e])}function qd(n){return typeof n=="string"||Array.isArray(n)}function j0(n){return typeof n=="object"&&typeof n.start=="function"}const Rw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lw=["initial",...Rw];function X0(n){return j0(n.animate)||Lw.some(e=>qd(n[e]))}function zI(n){return!!(X0(n)||n.variants)}function mW(n,e){if(X0(n)){const{initial:t,animate:i}=n;return{initial:t===!1||qd(t)?t:void 0,animate:qd(i)?i:void 0}}return n.inherit!==!1?e:{}}function gW(n){const{initial:e,animate:t}=mW(n,X.useContext(H0));return X.useMemo(()=>({initial:e,animate:t}),[rb(e),rb(t)])}function rb(n){return Array.isArray(n)?n.join(" "):n}const sb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Zd={};for(const n in sb)Zd[n]={isEnabled:e=>sb[n].some(t=>!!e[t])};function vW(n){for(const e in n)Zd[e]={...Zd[e],...n[e]}}const VI=X.createContext({}),GI=X.createContext({}),yW=Symbol.for("motionComponentSymbol");function xW({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&vW(n);function s(a,l){let u;const f={...X.useContext(kI),...a,layoutId:_W(a)},{isStatic:h}=f,p=gW(a),m=i(a,h);if(!h&&W0){p.visualElement=hW(r,m,f,e);const v=X.useContext(GI),w=X.useContext(BI).strict;p.visualElement&&(u=p.visualElement.loadFeatures(f,w,n,v))}return X.createElement(H0.Provider,{value:p},u&&p.visualElement?X.createElement(u,{visualElement:p.visualElement,...f}):null,t(r,a,pW(m,p.visualElement,l),m,h,p.visualElement))}const o=X.forwardRef(s);return o[yW]=r,o}function _W({layoutId:n}){const e=X.useContext(VI).id;return e&&n!==void 0?e+"-"+n:n}function SW(n){function e(i,r={}){return xW(n(i,r))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(i,r)=>(t.has(r)||t.set(r,e(r)),t.get(r))})}const wW=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Iw(n){return typeof n!="string"||n.includes("-")?!1:!!(wW.indexOf(n)>-1||/[A-Z]/.test(n))}const Og={};function MW(n){Object.assign(Og,n)}const vh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],jl=new Set(vh);function HI(n,{layout:e,layoutId:t}){return jl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Og[n]||n==="opacity")}const or=n=>!!(n&&n.getVelocity),EW={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},AW=vh.length;function TW(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},i,r){let s="";for(let o=0;o<AW;o++){const a=vh[o];if(n[a]!==void 0){const l=EW[a]||a;s+=`${l}(${n[a]}) `}}return e&&!n.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(n,i?"":s):t&&i&&(s="none"),s}const WI=n=>e=>typeof e=="string"&&e.startsWith(n),jI=WI("--"),M_=WI("var(--"),bW=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,CW=(n,e)=>e&&typeof n=="number"?e.transform(n):n,_a=(n,e,t)=>Math.min(Math.max(t,n),e),Xl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},id={...Xl,transform:n=>_a(0,1,n)},bm={...Xl,default:1},rd=n=>Math.round(n*1e5)/1e5,Y0=/(-)?([\d]*\.?[\d])+/g,XI=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,PW=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function yh(n){return typeof n=="string"}const xh=n=>({test:e=>yh(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Xo=xh("deg"),Fs=xh("%"),yt=xh("px"),RW=xh("vh"),LW=xh("vw"),ob={...Fs,parse:n=>Fs.parse(n)/100,transform:n=>Fs.transform(n*100)},ab={...Xl,transform:Math.round},YI={borderWidth:yt,borderTopWidth:yt,borderRightWidth:yt,borderBottomWidth:yt,borderLeftWidth:yt,borderRadius:yt,radius:yt,borderTopLeftRadius:yt,borderTopRightRadius:yt,borderBottomRightRadius:yt,borderBottomLeftRadius:yt,width:yt,maxWidth:yt,height:yt,maxHeight:yt,size:yt,top:yt,right:yt,bottom:yt,left:yt,padding:yt,paddingTop:yt,paddingRight:yt,paddingBottom:yt,paddingLeft:yt,margin:yt,marginTop:yt,marginRight:yt,marginBottom:yt,marginLeft:yt,rotate:Xo,rotateX:Xo,rotateY:Xo,rotateZ:Xo,scale:bm,scaleX:bm,scaleY:bm,scaleZ:bm,skew:Xo,skewX:Xo,skewY:Xo,distance:yt,translateX:yt,translateY:yt,translateZ:yt,x:yt,y:yt,z:yt,perspective:yt,transformPerspective:yt,opacity:id,originX:ob,originY:ob,originZ:yt,zIndex:ab,fillOpacity:id,strokeOpacity:id,numOctaves:ab};function Dw(n,e,t,i){const{style:r,vars:s,transform:o,transformOrigin:a}=n;let l=!1,u=!1,f=!0;for(const h in e){const p=e[h];if(jI(h)){s[h]=p;continue}const m=YI[h],v=CW(p,m);if(jl.has(h)){if(l=!0,o[h]=v,!f)continue;p!==(m.default||0)&&(f=!1)}else h.startsWith("origin")?(u=!0,a[h]=v):r[h]=v}if(e.transform||(l||i?r.transform=TW(n.transform,t,f,i):r.transform&&(r.transform="none")),u){const{originX:h="50%",originY:p="50%",originZ:m=0}=a;r.transformOrigin=`${h} ${p} ${m}`}}const Uw=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function qI(n,e,t){for(const i in e)!or(e[i])&&!HI(i,t)&&(n[i]=e[i])}function IW({transformTemplate:n},e,t){return X.useMemo(()=>{const i=Uw();return Dw(i,e,{enableHardwareAcceleration:!t},n),Object.assign({},i.vars,i.style)},[e])}function DW(n,e,t){const i=n.style||{},r={};return qI(r,i,n),Object.assign(r,IW(n,e,t)),n.transformValues?n.transformValues(r):r}function UW(n,e,t){const i={},r=DW(n,e,t);return n.drag&&n.dragListener!==!1&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(i.tabIndex=0),i.style=r,i}const NW=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Fg(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||NW.has(n)}let ZI=n=>!Fg(n);function OW(n){n&&(ZI=e=>e.startsWith("on")?!Fg(e):n(e))}try{OW(require("@emotion/is-prop-valid").default)}catch{}function FW(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(ZI(r)||t===!0&&Fg(r)||!e&&!Fg(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function lb(n,e,t){return typeof n=="string"?n:yt.transform(e+t*n)}function kW(n,e,t){const i=lb(e,n.x,n.width),r=lb(t,n.y,n.height);return`${i} ${r}`}const BW={offset:"stroke-dashoffset",array:"stroke-dasharray"},zW={offset:"strokeDashoffset",array:"strokeDasharray"};function VW(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?BW:zW;n[s.offset]=yt.transform(-i);const o=yt.transform(e),a=yt.transform(t);n[s.array]=`${o} ${a}`}function Nw(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...u},f,h,p){if(Dw(n,u,f,p),h){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:v,dimensions:w}=n;m.transform&&(w&&(v.transform=m.transform),delete m.transform),w&&(r!==void 0||s!==void 0||v.transform)&&(v.transformOrigin=kW(w,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),i!==void 0&&(m.scale=i),o!==void 0&&VW(m,o,a,l,!1)}const JI=()=>({...Uw(),attrs:{}}),Ow=n=>typeof n=="string"&&n.toLowerCase()==="svg";function GW(n,e,t,i){const r=X.useMemo(()=>{const s=JI();return Nw(s,e,{enableHardwareAcceleration:!1},Ow(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};qI(s,n.style,n),r.style={...s,...r.style}}return r}function HW(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(Iw(t)?GW:UW)(i,s,o,t),f={...FW(i,typeof t=="string",n),...l,ref:r},{children:h}=i,p=X.useMemo(()=>or(h)?h.get():h,[h]);return X.createElement(t,{...f,children:p})}}const Fw=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function QI(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const KI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function $I(n,e,t,i){QI(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(KI.has(r)?r:Fw(r),e.attrs[r])}function kw(n,e){const{style:t}=n,i={};for(const r in t)(or(t[r])||e.style&&or(e.style[r])||HI(r,n))&&(i[r]=t[r]);return i}function eD(n,e){const t=kw(n,e);for(const i in n)if(or(n[i])||or(e[i])){const r=vh.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;t[r]=n[i]}return t}function Bw(n,e,t,i={},r={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,i,r)),e}function WW(n){const e=X.useRef(null);return e.current===null&&(e.current=n()),e.current}const kg=n=>Array.isArray(n),jW=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),XW=n=>kg(n)?n[n.length-1]||0:n;function eg(n){const e=or(n)?n.get():n;return jW(e)?e.toValue():e}function YW({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,r,s){const o={latestValues:qW(i,r,s,n),renderState:e()};return t&&(o.mount=a=>t(i,a,o)),o}const tD=n=>(e,t)=>{const i=X.useContext(H0),r=X.useContext(Pw),s=()=>YW(n,e,i,r);return t?s():WW(s)};function qW(n,e,t,i){const r={},s=i(n,{});for(const p in s)r[p]=eg(s[p]);let{initial:o,animate:a}=n;const l=X0(n),u=zI(n);e&&u&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let f=t?t.initial===!1:!1;f=f||o===!1;const h=f?a:o;return h&&typeof h!="boolean"&&!j0(h)&&(Array.isArray(h)?h:[h]).forEach(m=>{const v=Bw(n,m);if(!v)return;const{transitionEnd:w,transition:_,...g}=v;for(const x in g){let S=g[x];if(Array.isArray(S)){const E=f?S.length-1:0;S=S[E]}S!==null&&(r[x]=S)}for(const x in w)r[x]=w[x]}),r}const Tn=n=>n;class ub{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function ZW(n){let e=new ub,t=new ub,i=0,r=!1,s=!1;const o=new WeakSet,a={schedule:(l,u=!1,f=!1)=>{const h=f&&r,p=h?e:t;return u&&o.add(l),p.add(l)&&h&&r&&(i=e.order.length),l},cancel:l=>{t.remove(l),o.delete(l)},process:l=>{if(r){s=!0;return}if(r=!0,[e,t]=[t,e],t.clear(),i=e.order.length,i)for(let u=0;u<i;u++){const f=e.order[u];f(l),o.has(f)&&(a.schedule(f),n())}r=!1,s&&(s=!1,a.process(l))}};return a}const Cm=["prepare","read","update","preRender","render","postRender"],JW=40;function QW(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=Cm.reduce((h,p)=>(h[p]=ZW(()=>t=!0),h),{}),o=h=>s[h].process(r),a=()=>{const h=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(h-r.timestamp,JW),1),r.timestamp=h,r.isProcessing=!0,Cm.forEach(o),r.isProcessing=!1,t&&e&&(i=!1,n(a))},l=()=>{t=!0,i=!0,r.isProcessing||n(a)};return{schedule:Cm.reduce((h,p)=>{const m=s[p];return h[p]=(v,w=!1,_=!1)=>(t||l(),m.schedule(v,w,_)),h},{}),cancel:h=>Cm.forEach(p=>s[p].cancel(h)),state:r,steps:s}}const{schedule:rn,cancel:Mo,state:ti,steps:v1}=QW(typeof requestAnimationFrame<"u"?requestAnimationFrame:Tn,!0),KW={useVisualState:tD({scrapeMotionValuesFromProps:eD,createRenderState:JI,onMount:(n,e,{renderState:t,latestValues:i})=>{rn.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),rn.render(()=>{Nw(t,i,{enableHardwareAcceleration:!1},Ow(e.tagName),n.transformTemplate),$I(e,t)})}})},$W={useVisualState:tD({scrapeMotionValuesFromProps:kw,createRenderState:Uw})};function e7(n,{forwardMotionProps:e=!1},t,i){return{...Iw(n)?KW:$W,preloadedFeatures:t,useRender:HW(e),createVisualElement:i,Component:n}}function fo(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}const nD=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function q0(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const t7=n=>e=>nD(e)&&n(e,q0(e));function mo(n,e,t,i){return fo(n,e,t7(t),i)}const n7=(n,e)=>t=>e(n(t)),ha=(...n)=>n.reduce(n7);function iD(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const cb=iD("dragHorizontal"),fb=iD("dragVertical");function rD(n){let e=!1;if(n==="y")e=fb();else if(n==="x")e=cb();else{const t=cb(),i=fb();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function sD(){const n=rD(!0);return n?(n(),!1):!0}class Pa{constructor(e){this.isMounted=!1,this.node=e}update(){}}function db(n,e){const t="pointer"+(e?"enter":"leave"),i="onHover"+(e?"Start":"End"),r=(s,o)=>{if(s.type==="touch"||sD())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e),a[i]&&rn.update(()=>a[i](s,o))};return mo(n.current,t,r,{passive:!n.getProps()[i]})}class i7 extends Pa{mount(){this.unmount=ha(db(this.node,!0),db(this.node,!1))}unmount(){}}class r7 extends Pa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ha(fo(this.node.current,"focus",()=>this.onFocus()),fo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const oD=(n,e)=>e?n===e?!0:oD(n,e.parentElement):!1;function y1(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,q0(t))}class s7 extends Pa{constructor(){super(...arguments),this.removeStartListeners=Tn,this.removeEndListeners=Tn,this.removeAccessibleListeners=Tn,this.startPointerPress=(e,t)=>{if(this.removeEndListeners(),this.isPressing)return;const i=this.node.getProps(),s=mo(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:f}=this.node.getProps();rn.update(()=>{oD(this.node.current,a.target)?u&&u(a,l):f&&f(a,l)})},{passive:!(i.onTap||i.onPointerUp)}),o=mo(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=ha(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||y1("up",(l,u)=>{const{onTap:f}=this.node.getProps();f&&rn.update(()=>f(l,u))})};this.removeEndListeners(),this.removeEndListeners=fo(this.node.current,"keyup",o),y1("down",(a,l)=>{this.startPress(a,l)})},t=fo(this.node.current,"keydown",e),i=()=>{this.isPressing&&y1("cancel",(s,o)=>this.cancelPress(s,o))},r=fo(this.node.current,"blur",i);this.removeAccessibleListeners=ha(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&rn.update(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!sD()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&rn.update(()=>i(e,t))}mount(){const e=this.node.getProps(),t=mo(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=fo(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ha(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const E_=new WeakMap,x1=new WeakMap,o7=n=>{const e=E_.get(n.target);e&&e(n)},a7=n=>{n.forEach(o7)};function l7({root:n,...e}){const t=n||document;x1.has(t)||x1.set(t,{});const i=x1.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(a7,{root:n,...e})),i[r]}function u7(n,e,t){const i=l7(e);return E_.set(n,t),i.observe(n),()=>{E_.delete(n),i.unobserve(n)}}const c7={some:0,all:1};class f7 extends Pa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:c7[r]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:h}=this.node.getProps(),p=u?f:h;p&&p(l)};return u7(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(d7(e,t))&&this.startObserver()}unmount(){}}function d7({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const h7={inView:{Feature:f7},tap:{Feature:s7},focus:{Feature:r7},hover:{Feature:i7}};function aD(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function p7(n){const e={};return n.values.forEach((t,i)=>e[i]=t.get()),e}function m7(n){const e={};return n.values.forEach((t,i)=>e[i]=t.getVelocity()),e}function Z0(n,e,t){const i=n.getProps();return Bw(i,e,t!==void 0?t:i.custom,p7(n),m7(n))}const g7="framerAppearId",v7="data-"+Fw(g7);let y7=Tn,zw=Tn;const pa=n=>n*1e3,go=n=>n/1e3,x7={current:!1},lD=n=>Array.isArray(n)&&typeof n[0]=="number";function uD(n){return!!(!n||typeof n=="string"&&cD[n]||lD(n)||Array.isArray(n)&&n.every(uD))}const Bf=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,cD={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bf([0,.65,.55,1]),circOut:Bf([.55,0,1,.45]),backIn:Bf([.31,.01,.66,-.59]),backOut:Bf([.33,1.53,.69,.99])};function fD(n){if(n)return lD(n)?Bf(n):Array.isArray(n)?n.map(fD):cD[n]}function _7(n,e,t,{delay:i=0,duration:r,repeat:s=0,repeatType:o="loop",ease:a,times:l}={}){const u={[e]:t};l&&(u.offset=l);const f=fD(a);return Array.isArray(f)&&(u.easing=f),n.animate(u,{delay:i,duration:r,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function S7(n,{repeat:e,repeatType:t="loop"}){const i=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[i]}const dD=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,w7=1e-7,M7=12;function E7(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=dD(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>w7&&++a<M7);return o}function _h(n,e,t,i){if(n===e&&t===i)return Tn;const r=s=>E7(s,0,1,n,t);return s=>s===0||s===1?s:dD(r(s),e,i)}const A7=_h(.42,0,1,1),T7=_h(0,0,.58,1),hD=_h(.42,0,.58,1),b7=n=>Array.isArray(n)&&typeof n[0]!="number",pD=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,mD=n=>e=>1-n(1-e),gD=n=>1-Math.sin(Math.acos(n)),Vw=mD(gD),C7=pD(Vw),vD=_h(.33,1.53,.69,.99),Gw=mD(vD),P7=pD(Gw),R7=n=>(n*=2)<1?.5*Gw(n):.5*(2-Math.pow(2,-10*(n-1))),L7={linear:Tn,easeIn:A7,easeInOut:hD,easeOut:T7,circIn:gD,circInOut:C7,circOut:Vw,backIn:Gw,backInOut:P7,backOut:vD,anticipate:R7},hb=n=>{if(Array.isArray(n)){zw(n.length===4);const[e,t,i,r]=n;return _h(e,t,i,r)}else if(typeof n=="string")return L7[n];return n},Hw=(n,e)=>t=>!!(yh(t)&&PW.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),yD=(n,e,t)=>i=>{if(!yh(i))return i;const[r,s,o,a]=i.match(Y0);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},I7=n=>_a(0,255,n),_1={...Xl,transform:n=>Math.round(I7(n))},xl={test:Hw("rgb","red"),parse:yD("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+_1.transform(n)+", "+_1.transform(e)+", "+_1.transform(t)+", "+rd(id.transform(i))+")"};function D7(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const A_={test:Hw("#"),parse:D7,transform:xl.transform},$u={test:Hw("hsl","hue"),parse:yD("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Fs.transform(rd(e))+", "+Fs.transform(rd(t))+", "+rd(id.transform(i))+")"},Fi={test:n=>xl.test(n)||A_.test(n)||$u.test(n),parse:n=>xl.test(n)?xl.parse(n):$u.test(n)?$u.parse(n):A_.parse(n),transform:n=>yh(n)?n:n.hasOwnProperty("red")?xl.transform(n):$u.transform(n)},gn=(n,e,t)=>-t*n+t*e+n;function S1(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function U7({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=S1(l,a,n+1/3),s=S1(l,a,n),o=S1(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}const w1=(n,e,t)=>{const i=n*n;return Math.sqrt(Math.max(0,t*(e*e-i)+i))},N7=[A_,xl,$u],O7=n=>N7.find(e=>e.test(n));function pb(n){const e=O7(n);let t=e.parse(n);return e===$u&&(t=U7(t)),t}const xD=(n,e)=>{const t=pb(n),i=pb(e),r={...t};return s=>(r.red=w1(t.red,i.red,s),r.green=w1(t.green,i.green,s),r.blue=w1(t.blue,i.blue,s),r.alpha=gn(t.alpha,i.alpha,s),xl.transform(r))};function F7(n){var e,t;return isNaN(n)&&yh(n)&&(((e=n.match(Y0))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(XI))===null||t===void 0?void 0:t.length)||0)>0}const _D={regex:bW,countKey:"Vars",token:"${v}",parse:Tn},SD={regex:XI,countKey:"Colors",token:"${c}",parse:Fi.parse},wD={regex:Y0,countKey:"Numbers",token:"${n}",parse:Xl.parse};function M1(n,{regex:e,countKey:t,token:i,parse:r}){const s=n.tokenised.match(e);s&&(n["num"+t]=s.length,n.tokenised=n.tokenised.replace(e,i),n.values.push(...s.map(r)))}function Bg(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&M1(t,_D),M1(t,SD),M1(t,wD),t}function MD(n){return Bg(n).values}function ED(n){const{values:e,numColors:t,numVars:i,tokenised:r}=Bg(n),s=e.length;return o=>{let a=r;for(let l=0;l<s;l++)l<i?a=a.replace(_D.token,o[l]):l<i+t?a=a.replace(SD.token,Fi.transform(o[l])):a=a.replace(wD.token,rd(o[l]));return a}}const k7=n=>typeof n=="number"?0:n;function B7(n){const e=MD(n);return ED(n)(e.map(k7))}const Sa={test:F7,parse:MD,createTransformer:ED,getAnimatableNone:B7},AD=(n,e)=>t=>`${t>0?e:n}`;function TD(n,e){return typeof n=="number"?t=>gn(n,e,t):Fi.test(n)?xD(n,e):n.startsWith("var(")?AD(n,e):CD(n,e)}const bD=(n,e)=>{const t=[...n],i=t.length,r=n.map((s,o)=>TD(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}},z7=(n,e)=>{const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=TD(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}},CD=(n,e)=>{const t=Sa.createTransformer(e),i=Bg(n),r=Bg(e);return i.numVars===r.numVars&&i.numColors===r.numColors&&i.numNumbers>=r.numNumbers?ha(bD(i.values,r.values),t):AD(n,e)},Jd=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},mb=(n,e)=>t=>gn(n,e,t);function V7(n){return typeof n=="number"?mb:typeof n=="string"?Fi.test(n)?xD:CD:Array.isArray(n)?bD:typeof n=="object"?z7:mb}function G7(n,e,t){const i=[],r=t||V7(n[0]),s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Tn:e;a=ha(l,a)}i.push(a)}return i}function PD(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(zw(s===e.length),s===1)return()=>e[0];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=G7(e,i,r),a=o.length,l=u=>{let f=0;if(a>1)for(;f<n.length-2&&!(u<n[f+1]);f++);const h=Jd(n[f],n[f+1],u);return o[f](h)};return t?u=>l(_a(n[0],n[s-1],u)):l}function H7(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=Jd(0,e,i);n.push(gn(t,1,r))}}function W7(n){const e=[0];return H7(e,n.length-1),e}function j7(n,e){return n.map(t=>t*e)}function X7(n,e){return n.map(()=>e||hD).splice(0,n.length-1)}function zg({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=b7(i)?i.map(hb):hb(i),s={done:!1,value:e[0]},o=j7(t&&t.length===e.length?t:W7(e),n),a=PD(o,e,{ease:Array.isArray(r)?r:X7(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}function RD(n,e){return e?n*(1e3/e):0}const Y7=5;function LD(n,e,t){const i=Math.max(e-Y7,0);return RD(t-n(i),e-i)}const E1=.001,q7=.01,gb=10,Z7=.05,J7=1;function Q7({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s;y7(n<=pa(gb));let o=1-e;o=_a(Z7,J7,o),n=_a(q7,gb,go(n)),o<1?(r=u=>{const f=u*o,h=f*n,p=f-t,m=T_(u,o),v=Math.exp(-h);return E1-p/m*v},s=u=>{const h=u*o*n,p=h*t+t,m=Math.pow(o,2)*Math.pow(u,2)*n,v=Math.exp(-h),w=T_(Math.pow(u,2),o);return(-r(u)+E1>0?-1:1)*((p-m)*v)/w}):(r=u=>{const f=Math.exp(-u*n),h=(u-t)*n+1;return-E1+f*h},s=u=>{const f=Math.exp(-u*n),h=(t-u)*(n*n);return f*h});const a=5/n,l=$7(r,s,a);if(n=pa(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:o*2*Math.sqrt(i*u),duration:n}}}const K7=12;function $7(n,e,t){let i=t;for(let r=1;r<K7;r++)i=i-n(i)/e(i);return i}function T_(n,e){return n*Math.sqrt(1-e*e)}const e9=["duration","bounce"],t9=["stiffness","damping","mass"];function vb(n,e){return e.some(t=>n[t]!==void 0)}function n9(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!vb(n,t9)&&vb(n,e9)){const t=Q7(n);e={...e,...t,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function ID({keyframes:n,restDelta:e,restSpeed:t,...i}){const r=n[0],s=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:u,velocity:f,duration:h,isResolvedFromDuration:p}=n9(i),m=f?-go(f):0,v=l/(2*Math.sqrt(a*u)),w=s-r,_=go(Math.sqrt(a/u)),g=Math.abs(w)<5;t||(t=g?.01:2),e||(e=g?.005:.5);let x;if(v<1){const S=T_(_,v);x=E=>{const T=Math.exp(-v*_*E);return s-T*((m+v*_*w)/S*Math.sin(S*E)+w*Math.cos(S*E))}}else if(v===1)x=S=>s-Math.exp(-_*S)*(w+(m+_*w)*S);else{const S=_*Math.sqrt(v*v-1);x=E=>{const T=Math.exp(-v*_*E),b=Math.min(S*E,300);return s-T*((m+v*_*w)*Math.sinh(b)+S*w*Math.cosh(b))/S}}return{calculatedDuration:p&&h||null,next:S=>{const E=x(S);if(p)o.done=S>=h;else{let T=m;S!==0&&(v<1?T=LD(x,S,E):T=0);const b=Math.abs(T)<=t,P=Math.abs(s-E)<=e;o.done=b&&P}return o.value=o.done?s:E,o}}}function yb({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:f}){const h=n[0],p={done:!1,value:h},m=I=>a!==void 0&&I<a||l!==void 0&&I>l,v=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let w=t*e;const _=h+w,g=o===void 0?_:o(_);g!==_&&(w=g-h);const x=I=>-w*Math.exp(-I/i),S=I=>g+x(I),E=I=>{const C=x(I),D=S(I);p.done=Math.abs(C)<=u,p.value=p.done?g:D};let T,b;const P=I=>{m(p.value)&&(T=I,b=ID({keyframes:[p.value,v(p.value)],velocity:LD(S,I,p.value),damping:r,stiffness:s,restDelta:u,restSpeed:f}))};return P(0),{calculatedDuration:null,next:I=>{let C=!1;return!b&&T===void 0&&(C=!0,E(I),P(I)),T!==void 0&&I>T?b.next(I-T):(!C&&E(I),p)}}}const i9=n=>{const e=({timestamp:t})=>n(t);return{start:()=>rn.update(e,!0),stop:()=>Mo(e),now:()=>ti.isProcessing?ti.timestamp:performance.now()}},xb=2e4;function _b(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<xb;)e+=t,i=n.next(e);return e>=xb?1/0:e}const r9={decay:yb,inertia:yb,tween:zg,keyframes:zg,spring:ID};function Vg({autoplay:n=!0,delay:e=0,driver:t=i9,keyframes:i,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",onPlay:l,onStop:u,onComplete:f,onUpdate:h,...p}){let m=1,v=!1,w,_;const g=()=>{_=new Promise(L=>{w=L})};g();let x;const S=r9[r]||zg;let E;S!==zg&&typeof i[0]!="number"&&(E=PD([0,100],i,{clamp:!1}),i=[0,100]);const T=S({...p,keyframes:i});let b;a==="mirror"&&(b=S({...p,keyframes:[...i].reverse(),velocity:-(p.velocity||0)}));let P="idle",I=null,C=null,D=null;T.calculatedDuration===null&&s&&(T.calculatedDuration=_b(T));const{calculatedDuration:H}=T;let G=1/0,Z=1/0;H!==null&&(G=H+o,Z=G*(s+1)-o);let z=0;const q=L=>{if(C===null)return;m>0&&(C=Math.min(C,L)),m<0&&(C=Math.min(L-Z/m,C)),I!==null?z=I:z=Math.round(L-C)*m;const k=z-e*(m>=0?1:-1),K=m>=0?k<0:k>Z;z=Math.max(k,0),P==="finished"&&I===null&&(z=Z);let ie=z,$=T;if(s){const be=z/G;let Ie=Math.floor(be),ue=be%1;!ue&&be>=1&&(ue=1),ue===1&&Ie--,Ie=Math.min(Ie,s+1);const B=!!(Ie%2);B&&(a==="reverse"?(ue=1-ue,o&&(ue-=o/G)):a==="mirror"&&($=b));let ye=_a(0,1,ue);z>Z&&(ye=a==="reverse"&&B?1:0),ie=ye*G}const le=K?{done:!1,value:i[0]}:$.next(ie);E&&(le.value=E(le.value));let{done:oe}=le;!K&&H!==null&&(oe=m>=0?z>=Z:z<=0);const he=I===null&&(P==="finished"||P==="running"&&oe);return h&&h(le.value),he&&N(),le},J=()=>{x&&x.stop(),x=void 0},ne=()=>{P="idle",J(),w(),g(),C=D=null},N=()=>{P="finished",f&&f(),J(),w()},O=()=>{if(v)return;x||(x=t(q));const L=x.now();l&&l(),I!==null?C=L-I:(!C||P==="finished")&&(C=L),P==="finished"&&g(),D=C,I=null,P="running",x.start()};n&&O();const V={then(L,k){return _.then(L,k)},get time(){return go(z)},set time(L){L=pa(L),z=L,I!==null||!x||m===0?I=L:C=x.now()-L/m},get duration(){const L=T.calculatedDuration===null?_b(T):T.calculatedDuration;return go(L)},get speed(){return m},set speed(L){L===m||!x||(m=L,V.time=go(z))},get state(){return P},play:O,pause:()=>{P="paused",I=z},stop:()=>{v=!0,P!=="idle"&&(P="idle",u&&u(),ne())},cancel:()=>{D!==null&&q(D),ne()},complete:()=>{P="finished"},sample:L=>(C=0,q(L))};return V}function s9(n){let e;return()=>(e===void 0&&(e=n()),e)}const o9=s9(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),a9=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Pm=10,l9=2e4,u9=(n,e)=>e.type==="spring"||n==="backgroundColor"||!uD(e.ease);function c9(n,e,{onUpdate:t,onComplete:i,...r}){if(!(o9()&&a9.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,a,l;const u=()=>{l=new Promise(x=>{a=x})};u();let{keyframes:f,duration:h=300,ease:p,times:m}=r;if(u9(e,r)){const x=Vg({...r,repeat:0,delay:0});let S={done:!1,value:f[0]};const E=[];let T=0;for(;!S.done&&T<l9;)S=x.sample(T),E.push(S.value),T+=Pm;m=void 0,f=E,h=T-Pm,p="linear"}const v=_7(n.owner.current,e,f,{...r,duration:h,ease:p,times:m});r.syncStart&&(v.startTime=ti.isProcessing?ti.timestamp:document.timeline?document.timeline.currentTime:performance.now());const w=()=>v.cancel(),_=()=>{rn.update(w),a(),u()};return v.onfinish=()=>{n.set(S7(f,r)),i&&i(),_()},{then(x,S){return l.then(x,S)},attachTimeline(x){return v.timeline=x,v.onfinish=null,Tn},get time(){return go(v.currentTime||0)},set time(x){v.currentTime=pa(x)},get speed(){return v.playbackRate},set speed(x){v.playbackRate=x},get duration(){return go(h)},play:()=>{o||(v.play(),Mo(w))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:x}=v;if(x){const S=Vg({...r,autoplay:!1});n.setWithVelocity(S.sample(x-Pm).value,S.sample(x).value,Pm)}_()},complete:()=>v.finish(),cancel:_}}function f9({keyframes:n,delay:e,onUpdate:t,onComplete:i}){const r=()=>(t&&t(n[n.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Tn,pause:Tn,stop:Tn,then:s=>(s(),Promise.resolve()),cancel:Tn,complete:Tn});return e?Vg({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const d9={type:"spring",stiffness:500,damping:25,restSpeed:10},h9=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),p9={type:"keyframes",duration:.8},m9={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},g9=(n,{keyframes:e})=>e.length>2?p9:jl.has(n)?n.startsWith("scale")?h9(e[1]):d9:m9,b_=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Sa.test(e)||e==="0")&&!e.startsWith("url(")),v9=new Set(["brightness","contrast","saturate","opacity"]);function y9(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(Y0)||[];if(!i)return n;const r=t.replace(i,"");let s=v9.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const x9=/([a-z-]*)\(.*?\)/g,C_={...Sa,getAnimatableNone:n=>{const e=n.match(x9);return e?e.map(y9).join(" "):n}},_9={...YI,color:Fi,backgroundColor:Fi,outlineColor:Fi,fill:Fi,stroke:Fi,borderColor:Fi,borderTopColor:Fi,borderRightColor:Fi,borderBottomColor:Fi,borderLeftColor:Fi,filter:C_,WebkitFilter:C_},Ww=n=>_9[n];function DD(n,e){let t=Ww(n);return t!==C_&&(t=Sa),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const UD=n=>/^0[^.\s]+$/.test(n);function S9(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||UD(n)}function w9(n,e,t,i){const r=b_(e,t);let s;Array.isArray(t)?s=[...t]:s=[null,t];const o=i.from!==void 0?i.from:n.get();let a;const l=[];for(let u=0;u<s.length;u++)s[u]===null&&(s[u]=u===0?o:s[u-1]),S9(s[u])&&l.push(u),typeof s[u]=="string"&&s[u]!=="none"&&s[u]!=="0"&&(a=s[u]);if(r&&l.length&&a)for(let u=0;u<l.length;u++){const f=l[u];s[f]=DD(e,a)}return s}function M9({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...f}){return!!Object.keys(f).length}function ND(n,e){return n[e]||n.default||n}const jw=(n,e,t,i={})=>r=>{const s=ND(i,n)||{},o=s.delay||i.delay||0;let{elapsed:a=0}=i;a=a-pa(o);const l=w9(e,n,t,s),u=l[0],f=l[l.length-1],h=b_(n,u),p=b_(n,f);let m={keyframes:l,velocity:e.getVelocity(),ease:"easeOut",...s,delay:-a,onUpdate:v=>{e.set(v),s.onUpdate&&s.onUpdate(v)},onComplete:()=>{r(),s.onComplete&&s.onComplete()}};if(M9(s)||(m={...m,...g9(n,m)}),m.duration&&(m.duration=pa(m.duration)),m.repeatDelay&&(m.repeatDelay=pa(m.repeatDelay)),!h||!p||x7.current||s.type===!1)return f9(m);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const v=c9(e,n,m);if(v)return v}return Vg(m)};function Gg(n){return!!(or(n)&&n.add)}const OD=n=>/^\-?\d*\.?\d+$/.test(n);function Xw(n,e){n.indexOf(e)===-1&&n.push(e)}function Yw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class qw{constructor(){this.subscriptions=[]}add(e){return Xw(this.subscriptions,e),()=>Yw(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const E9=n=>!isNaN(parseFloat(n));class A9{constructor(e,t={}){this.version="10.16.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(i,r=!0)=>{this.prev=this.current,this.current=i;const{delta:s,timestamp:o}=ti;this.lastUpdated!==o&&(this.timeDelta=s,this.lastUpdated=o,rn.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>rn.postRender(this.velocityCheck),this.velocityCheck=({timestamp:i})=>{i!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=E9(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new qw);const i=this.events[e].add(t);return e==="change"?()=>{i(),rn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=e,this.timeDelta=i}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?RD(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mc(n,e){return new A9(n,e)}const FD=n=>e=>e.test(n),T9={test:n=>n==="auto",parse:n=>n},kD=[Xl,yt,Fs,Xo,LW,RW,T9],Pf=n=>kD.find(FD(n)),b9=[...kD,Fi,Sa],C9=n=>b9.find(FD(n));function P9(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Mc(t))}function R9(n,e){const t=Z0(n,e);let{transitionEnd:i={},transition:r={},...s}=t?n.makeTargetAnimatable(t,!1):{};s={...s,...i};for(const o in s){const a=XW(s[o]);P9(n,o,a)}}function L9(n,e,t){var i,r;const s=Object.keys(e).filter(a=>!n.hasValue(a)),o=s.length;if(o)for(let a=0;a<o;a++){const l=s[a],u=e[l];let f=null;Array.isArray(u)&&(f=u[0]),f===null&&(f=(r=(i=t[l])!==null&&i!==void 0?i:n.readValue(l))!==null&&r!==void 0?r:e[l]),f!=null&&(typeof f=="string"&&(OD(f)||UD(f))?f=parseFloat(f):!C9(f)&&Sa.test(u)&&(f=DD(l,u)),n.addValue(l,Mc(f,{owner:n})),t[l]===void 0&&(t[l]=f),f!==null&&n.setBaseTarget(l,f))}}function I9(n,e){return e?(e[n]||e.default||e).from:void 0}function D9(n,e,t){const i={};for(const r in n){const s=I9(r,e);if(s!==void 0)i[r]=s;else{const o=t.getValue(r);o&&(i[r]=o.get())}}return i}function U9({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function BD(n,e,{delay:t=0,transitionOverride:i,type:r}={}){let{transition:s=n.getDefaultTransition(),transitionEnd:o,...a}=n.makeTargetAnimatable(e);const l=n.getValue("willChange");i&&(s=i);const u=[],f=r&&n.animationState&&n.animationState.getState()[r];for(const h in a){const p=n.getValue(h),m=a[h];if(!p||m===void 0||f&&U9(f,h))continue;const v={delay:t,elapsed:0,...s};if(window.HandoffAppearAnimations&&!p.hasAnimated){const _=n.getProps()[v7];_&&(v.elapsed=window.HandoffAppearAnimations(_,h,p,rn),v.syncStart=!0)}p.start(jw(h,p,m,n.shouldReduceMotion&&jl.has(h)?{type:!1}:v));const w=p.animation;Gg(l)&&(l.add(h),w.then(()=>l.remove(h))),u.push(w)}return o&&Promise.all(u).then(()=>{o&&R9(n,o)}),u}function P_(n,e,t={}){const i=Z0(n,e,t.custom);let{transition:r=n.getDefaultTransition()||{}}=i||{};t.transitionOverride&&(r=t.transitionOverride);const s=i?()=>Promise.all(BD(n,i,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=r;return N9(n,e,u+l,f,h,t)}:()=>Promise.resolve(),{when:a}=r;if(a){const[l,u]=a==="beforeChildren"?[s,o]:[o,s];return l().then(()=>u())}else return Promise.all([s(),o(t.delay)])}function N9(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(u=0)=>u*i:(u=0)=>a-u*i;return Array.from(n.variantChildren).sort(O9).forEach((u,f)=>{u.notify("AnimationStart",e),o.push(P_(u,e,{...s,delay:t+l(f)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function O9(n,e){return n.sortNodePosition(e)}function F9(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>P_(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=P_(n,e,t);else{const r=typeof e=="function"?Z0(n,e,t.custom):e;i=Promise.all(BD(n,r,t))}return i.then(()=>n.notify("AnimationComplete",e))}const k9=[...Rw].reverse(),B9=Rw.length;function z9(n){return e=>Promise.all(e.map(({animation:t,options:i})=>F9(n,t,i)))}function V9(n){let e=z9(n);const t=H9();let i=!0;const r=(l,u)=>{const f=Z0(n,u);if(f){const{transition:h,transitionEnd:p,...m}=f;l={...l,...m,...p}}return l};function s(l){e=l(n)}function o(l,u){const f=n.getProps(),h=n.getVariantContext(!0)||{},p=[],m=new Set;let v={},w=1/0;for(let g=0;g<B9;g++){const x=k9[g],S=t[x],E=f[x]!==void 0?f[x]:h[x],T=qd(E),b=x===u?S.isActive:null;b===!1&&(w=g);let P=E===h[x]&&E!==f[x]&&T;if(P&&i&&n.manuallyAnimateOnMount&&(P=!1),S.protectedKeys={...v},!S.isActive&&b===null||!E&&!S.prevProp||j0(E)||typeof E=="boolean")continue;const I=G9(S.prevProp,E);let C=I||x===u&&S.isActive&&!P&&T||g>w&&T;const D=Array.isArray(E)?E:[E];let H=D.reduce(r,{});b===!1&&(H={});const{prevResolvedValues:G={}}=S,Z={...G,...H},z=q=>{C=!0,m.delete(q),S.needsAnimating[q]=!0};for(const q in Z){const J=H[q],ne=G[q];v.hasOwnProperty(q)||(J!==ne?kg(J)&&kg(ne)?!aD(J,ne)||I?z(q):S.protectedKeys[q]=!0:J!==void 0?z(q):m.add(q):J!==void 0&&m.has(q)?z(q):S.protectedKeys[q]=!0)}S.prevProp=E,S.prevResolvedValues=H,S.isActive&&(v={...v,...H}),i&&n.blockInitialAnimation&&(C=!1),C&&!P&&p.push(...D.map(q=>({animation:q,options:{type:x,...l}})))}if(m.size){const g={};m.forEach(x=>{const S=n.getBaseTarget(x);S!==void 0&&(g[x]=S)}),p.push({animation:g})}let _=!!p.length;return i&&f.initial===!1&&!n.manuallyAnimateOnMount&&(_=!1),i=!1,_?e(p):Promise.resolve()}function a(l,u,f){var h;if(t[l].isActive===u)return Promise.resolve();(h=n.variantChildren)===null||h===void 0||h.forEach(m=>{var v;return(v=m.animationState)===null||v===void 0?void 0:v.setActive(l,u)}),t[l].isActive=u;const p=o(f,l);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t}}function G9(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!aD(e,n):!1}function il(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function H9(){return{animate:il(!0),whileInView:il(),whileHover:il(),whileTap:il(),whileDrag:il(),whileFocus:il(),exit:il()}}class W9 extends Pa{constructor(e){super(e),e.animationState||(e.animationState=V9(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),j0(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let j9=0;class X9 extends Pa{constructor(){super(...arguments),this.id=j9++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:i}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:i??this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Y9={animation:{Feature:W9},exit:{Feature:X9}},Sb=(n,e)=>Math.abs(n-e);function q9(n,e){const t=Sb(n.x,e.x),i=Sb(n.y,e.y);return Math.sqrt(t**2+i**2)}class zD{constructor(e,t,{transformPagePoint:i}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const u=T1(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,h=q9(u.offset,{x:0,y:0})>=3;if(!f&&!h)return;const{point:p}=u,{timestamp:m}=ti;this.history.push({...p,timestamp:m});const{onStart:v,onMove:w}=this.handlers;f||(v&&v(this.lastMoveEvent,u),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,u)},this.handlePointerMove=(u,f)=>{this.lastMoveEvent=u,this.lastMoveEventInfo=A1(f,this.transformPagePoint),rn.update(this.updatePoint,!0)},this.handlePointerUp=(u,f)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:h,onSessionEnd:p}=this.handlers,m=T1(u.type==="pointercancel"?this.lastMoveEventInfo:A1(f,this.transformPagePoint),this.history);this.startEvent&&h&&h(u,m),p&&p(u,m)},!nD(e))return;this.handlers=t,this.transformPagePoint=i;const r=q0(e),s=A1(r,this.transformPagePoint),{point:o}=s,{timestamp:a}=ti;this.history=[{...o,timestamp:a}];const{onSessionStart:l}=t;l&&l(e,T1(s,this.history)),this.removeListeners=ha(mo(window,"pointermove",this.handlePointerMove),mo(window,"pointerup",this.handlePointerUp),mo(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Mo(this.updatePoint)}}function A1(n,e){return e?{point:e(n.point)}:n}function wb(n,e){return{x:n.x-e.x,y:n.y-e.y}}function T1({point:n},e){return{point:n,delta:wb(n,VD(e)),offset:wb(n,Z9(e)),velocity:J9(e,.1)}}function Z9(n){return n[0]}function VD(n){return n[n.length-1]}function J9(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=VD(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>pa(e)));)t--;if(!i)return{x:0,y:0};const s=go(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Pr(n){return n.max-n.min}function R_(n,e=0,t=.01){return Math.abs(n-e)<=t}function Mb(n,e,t,i=.5){n.origin=i,n.originPoint=gn(e.min,e.max,n.origin),n.scale=Pr(t)/Pr(e),(R_(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=gn(t.min,t.max,n.origin)-n.originPoint,(R_(n.translate)||isNaN(n.translate))&&(n.translate=0)}function sd(n,e,t,i){Mb(n.x,e.x,t.x,i?i.originX:void 0),Mb(n.y,e.y,t.y,i?i.originY:void 0)}function Eb(n,e,t){n.min=t.min+e.min,n.max=n.min+Pr(e)}function Q9(n,e,t){Eb(n.x,e.x,t.x),Eb(n.y,e.y,t.y)}function Ab(n,e,t){n.min=e.min-t.min,n.max=n.min+Pr(e)}function od(n,e,t){Ab(n.x,e.x,t.x),Ab(n.y,e.y,t.y)}function K9(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?gn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?gn(t,n,i.max):Math.min(n,t)),n}function Tb(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function $9(n,{top:e,left:t,bottom:i,right:r}){return{x:Tb(n.x,t,r),y:Tb(n.y,e,i)}}function bb(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function ej(n,e){return{x:bb(n.x,e.x),y:bb(n.y,e.y)}}function tj(n,e){let t=.5;const i=Pr(n),r=Pr(e);return r>i?t=Jd(e.min,e.max-i,n.min):i>r&&(t=Jd(n.min,n.max-r,e.min)),_a(0,1,t)}function nj(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const L_=.35;function ij(n=L_){return n===!1?n=0:n===!0&&(n=L_),{x:Cb(n,"left","right"),y:Cb(n,"top","bottom")}}function Cb(n,e,t){return{min:Pb(n,e),max:Pb(n,t)}}function Pb(n,e){return typeof n=="number"?n:n[e]||0}const Rb=()=>({translate:0,scale:1,origin:0,originPoint:0}),ec=()=>({x:Rb(),y:Rb()}),Lb=()=>({min:0,max:0}),Bn=()=>({x:Lb(),y:Lb()});function bs(n){return[n("x"),n("y")]}function GD({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function rj({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function sj(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function b1(n){return n===void 0||n===1}function I_({scale:n,scaleX:e,scaleY:t}){return!b1(n)||!b1(e)||!b1(t)}function ll(n){return I_(n)||HD(n)||n.z||n.rotate||n.rotateX||n.rotateY}function HD(n){return Ib(n.x)||Ib(n.y)}function Ib(n){return n&&n!=="0%"}function Hg(n,e,t){const i=n-t,r=e*i;return t+r}function Db(n,e,t,i,r){return r!==void 0&&(n=Hg(n,r,i)),Hg(n,t,i)+e}function D_(n,e=0,t=1,i,r){n.min=Db(n.min,e,t,i,r),n.max=Db(n.max,e,t,i,r)}function WD(n,{x:e,y:t}){D_(n.x,e.translate,e.scale,e.originPoint),D_(n.y,t.translate,t.scale,t.originPoint)}function oj(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const l=s.instance;l&&l.style&&l.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&tc(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,WD(n,o)),i&&ll(s.latestValues)&&tc(n,s.latestValues))}e.x=Ub(e.x),e.y=Ub(e.y)}function Ub(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function Jo(n,e){n.min=n.min+e,n.max=n.max+e}function Nb(n,e,[t,i,r]){const s=e[r]!==void 0?e[r]:.5,o=gn(n.min,n.max,s);D_(n,e[t],e[i],o,e.scale)}const aj=["x","scaleX","originX"],lj=["y","scaleY","originY"];function tc(n,e){Nb(n.x,e,aj),Nb(n.y,e,lj)}function jD(n,e){return GD(sj(n.getBoundingClientRect(),e))}function uj(n,e,t){const i=jD(n,t),{scroll:r}=e;return r&&(Jo(i.x,r.offset.x),Jo(i.y,r.offset.y)),i}const cj=new WeakMap;class fj{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Bn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=l=>{this.stopAnimation(),t&&this.snapToCursor(q0(l,"page").point)},s=(l,u)=>{const{drag:f,dragPropagation:h,onDragStart:p}=this.getProps();if(f&&!h&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=rD(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),bs(v=>{let w=this.getAxisMotionValue(v).get()||0;if(Fs.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const g=_.layout.layoutBox[v];g&&(w=Pr(g)*(parseFloat(w)/100))}}this.originPoint[v]=w}),p&&rn.update(()=>p(l,u),!1,!0);const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},o=(l,u)=>{const{dragPropagation:f,dragDirectionLock:h,onDirectionLock:p,onDrag:m}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:v}=u;if(h&&this.currentDirection===null){this.currentDirection=dj(v),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",u.point,v),this.updateAxis("y",u.point,v),this.visualElement.render(),m&&m(l,u)},a=(l,u)=>this.stop(l,u);this.panSession=new zD(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&rn.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Rm(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=K9(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),{layout:i}=this.visualElement.projection||{},r=this.constraints;e&&Ku(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=$9(i.layoutBox,e):this.constraints=!1,this.elastic=ij(t),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&bs(s=>{this.getAxisMotionValue(s)&&(this.constraints[s]=nj(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ku(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=uj(i,r.root,this.visualElement.getTransformPagePoint());let o=ej(r.layout.layoutBox,s);if(t){const a=t(rj(o));this.hasMutatedConstraints=!!a,a&&(o=GD(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=bs(f=>{if(!Rm(f,t,this.currentDirection))return;let h=l&&l[f]||{};o&&(h={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,v={type:"inertia",velocity:i?e[f]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(f,v)});return Promise.all(u).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return i.start(jw(e,i,0,t))}stopAnimation(){bs(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){bs(t=>{const{drag:i}=this.getProps();if(!Rm(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-gn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Ku(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};bs(o=>{const a=this.getAxisMotionValue(o);if(a){const l=a.get();r[o]=tj({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),bs(o=>{if(!Rm(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(gn(l,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;cj.set(this.visualElement,this);const e=this.visualElement.current,t=mo(e,"pointerdown",l=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Ku(l)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),i();const o=fo(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(bs(f=>{const h=this.getAxisMotionValue(f);h&&(this.originPoint[f]+=l[f].translate,h.set(h.get()+l[f].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=L_,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Rm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function dj(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class hj extends Pa{constructor(e){super(e),this.removeGroupControls=Tn,this.removeListeners=Tn,this.controls=new fj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Tn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ob=n=>(e,t)=>{n&&rn.update(()=>n(e,t))};class pj extends Pa{constructor(){super(...arguments),this.removePointerDownListener=Tn}onPointerDown(e){this.session=new zD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Ob(e),onStart:Ob(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&rn.update(()=>r(s,o))}}}mount(){this.removePointerDownListener=mo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function mj(){const n=X.useContext(Pw);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=X.useId();return X.useEffect(()=>i(r),[]),!e&&t?[!1,()=>t&&t(r)]:[!0]}const tg={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Fb(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Rf={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(yt.test(n))n=parseFloat(n);else return n;const t=Fb(n,e.target.x),i=Fb(n,e.target.y);return`${t}% ${i}%`}},gj={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=Sa.parse(n);if(r.length>5)return i;const s=Sa.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const u=gn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),s(r)}};class vj extends $d.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;MW(yj),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),tg.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||rn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function XD(n){const[e,t]=mj(),i=X.useContext(VI);return $d.createElement(vj,{...n,layoutGroup:i,switchLayoutGroup:X.useContext(GI),isPresent:e,safeToRemove:t})}const yj={borderRadius:{...Rf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Rf,borderTopRightRadius:Rf,borderBottomLeftRadius:Rf,borderBottomRightRadius:Rf,boxShadow:gj},YD=["TopLeft","TopRight","BottomLeft","BottomRight"],xj=YD.length,kb=n=>typeof n=="string"?parseFloat(n):n,Bb=n=>typeof n=="number"||yt.test(n);function _j(n,e,t,i,r,s){r?(n.opacity=gn(0,t.opacity!==void 0?t.opacity:1,Sj(i)),n.opacityExit=gn(e.opacity!==void 0?e.opacity:1,0,wj(i))):s&&(n.opacity=gn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<xj;o++){const a=`border${YD[o]}Radius`;let l=zb(e,a),u=zb(t,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||Bb(l)===Bb(u)?(n[a]=Math.max(gn(kb(l),kb(u),i),0),(Fs.test(u)||Fs.test(l))&&(n[a]+="%")):n[a]=u}(e.rotate||t.rotate)&&(n.rotate=gn(e.rotate||0,t.rotate||0,i))}function zb(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Sj=qD(0,.5,Vw),wj=qD(.5,.95,Tn);function qD(n,e,t){return i=>i<n?0:i>e?1:t(Jd(n,e,i))}function Vb(n,e){n.min=e.min,n.max=e.max}function Gr(n,e){Vb(n.x,e.x),Vb(n.y,e.y)}function Gb(n,e,t,i,r){return n-=e,n=Hg(n,1/t,i),r!==void 0&&(n=Hg(n,1/r,i)),n}function Mj(n,e=0,t=1,i=.5,r,s=n,o=n){if(Fs.test(e)&&(e=parseFloat(e),e=gn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=gn(s.min,s.max,i);n===s&&(a-=e),n.min=Gb(n.min,e,t,a,r),n.max=Gb(n.max,e,t,a,r)}function Hb(n,e,[t,i,r],s,o){Mj(n,e[t],e[i],e[r],e.scale,s,o)}const Ej=["x","scaleX","originX"],Aj=["y","scaleY","originY"];function Wb(n,e,t,i){Hb(n.x,e,Ej,t?t.x:void 0,i?i.x:void 0),Hb(n.y,e,Aj,t?t.y:void 0,i?i.y:void 0)}function jb(n){return n.translate===0&&n.scale===1}function ZD(n){return jb(n.x)&&jb(n.y)}function Tj(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function JD(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function Xb(n){return Pr(n.x)/Pr(n.y)}class bj{constructor(){this.members=[]}add(e){Xw(this.members,e),e.scheduleRender()}remove(e){if(Yw(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Yb(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y;if((r||s)&&(i=`translate3d(${r}px, ${s}px, 0) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:l,rotateX:u,rotateY:f}=t;l&&(i+=`rotate(${l}deg) `),u&&(i+=`rotateX(${u}deg) `),f&&(i+=`rotateY(${f}deg) `)}const o=n.x.scale*e.x,a=n.y.scale*e.y;return(o!==1||a!==1)&&(i+=`scale(${o}, ${a})`),i||"none"}const Cj=(n,e)=>n.depth-e.depth;class Pj{constructor(){this.children=[],this.isDirty=!1}add(e){Xw(this.children,e),this.isDirty=!0}remove(e){Yw(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Cj),this.isDirty=!1,this.children.forEach(e)}}function Rj(n,e){const t=performance.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(Mo(i),n(s-e))};return rn.read(i,!0),()=>Mo(i)}function Lj(n){window.MotionDebug&&window.MotionDebug.record(n)}function Ij(n){return n instanceof SVGElement&&n.tagName!=="svg"}function Dj(n,e,t){const i=or(n)?n:Mc(n);return i.start(jw("",i,e,t)),i.animation}const qb=["","X","Y","Z"],Zb=1e3;let Uj=0;const ul={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function QD({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Uj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{ul.totalNodes=ul.resolvedTargetDeltas=ul.recalculatedProjection=0,this.nodes.forEach(Fj),this.nodes.forEach(Gj),this.nodes.forEach(Hj),this.nodes.forEach(kj),Lj(ul)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Pj)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new qw),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Ij(o),this.instance=o;const{layoutId:l,layout:u,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(u||l)&&(this.isLayoutDirty=!0),n){let h;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=Rj(p,250),tg.hasAnimatedSinceResize&&(tg.hasAnimatedSinceResize=!1,this.nodes.forEach(Qb))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||f.getDefaultTransition()||qj,{onLayoutAnimationStart:_,onLayoutAnimationComplete:g}=f.getProps(),x=!this.targetLayout||!JD(this.targetLayout,v)||m,S=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||p&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,S);const E={...ND(w,"layout"),onPlay:_,onComplete:g};(f.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else p||Qb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Mo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Wj),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const h=this.path[f];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Jb);return}this.isUpdating||this.nodes.forEach(zj),this.isUpdating=!1,this.nodes.forEach(Vj),this.nodes.forEach(Nj),this.nodes.forEach(Oj),this.clearAllSnapshots();const a=performance.now();ti.delta=_a(0,1e3/60,a-ti.timestamp),ti.timestamp=a,ti.isProcessing=!0,v1.update.process(ti),v1.preRender.process(ti),v1.render.process(ti),ti.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(Bj),this.sharedNodes.forEach(jj)}scheduleUpdateProjection(){rn.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){rn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Bn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:i(this.instance),offset:t(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!ZD(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;o&&(a||ll(this.latestValues)||f)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Zj(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Bn();const a=o.measureViewportBox(),{scroll:l}=this.root;return l&&(Jo(a.x,l.offset.x),Jo(a.y,l.offset.y)),a}removeElementScroll(o){const a=Bn();Gr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:f,options:h}=u;if(u!==this.root&&f&&h.layoutScroll){if(f.isRoot){Gr(a,o);const{scroll:p}=this.root;p&&(Jo(a.x,-p.offset.x),Jo(a.y,-p.offset.y))}Jo(a.x,f.offset.x),Jo(a.y,f.offset.y)}}return a}applyTransform(o,a=!1){const l=Bn();Gr(l,o);for(let u=0;u<this.path.length;u++){const f=this.path[u];!a&&f.options.layoutScroll&&f.scroll&&f!==f.root&&tc(l,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),ll(f.latestValues)&&tc(l,f.latestValues)}return ll(this.latestValues)&&tc(l,this.latestValues),l}removeTransform(o){const a=Bn();Gr(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!ll(u.latestValues))continue;I_(u.latestValues)&&u.updateSnapshot();const f=Bn(),h=u.measurePageBox();Gr(f,h),Wb(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return ll(this.latestValues)&&Wb(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ti.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=ti.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bn(),this.relativeTargetOrigin=Bn(),od(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Gr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Bn(),this.targetWithTransforms=Bn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Q9(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gr(this.target,this.layout.layoutBox),WD(this.target,this.targetDelta)):Gr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Bn(),this.relativeTargetOrigin=Bn(),od(this.relativeTargetOrigin,this.target,m.target),Gr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ul.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||I_(this.parent.latestValues)||HD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ti.timestamp&&(u=!1),u)return;const{layout:f,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||h))return;Gr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;oj(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:v}=a;if(!v){this.projectionTransform&&(this.projectionDelta=ec(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=ec(),this.projectionDeltaWithTransform=ec());const w=this.projectionTransform;sd(this.projectionDelta,this.layoutCorrected,v,this.latestValues),this.projectionTransform=Yb(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==p||this.treeScale.y!==m)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v)),ul.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},f={...this.latestValues},h=ec();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Bn(),m=l?l.source:void 0,v=this.layout?this.layout.source:void 0,w=m!==v,_=this.getStack(),g=!_||_.members.length<=1,x=!!(w&&!g&&this.options.crossfade===!0&&!this.path.some(Yj));this.animationProgress=0;let S;this.mixTargetDelta=E=>{const T=E/1e3;Kb(h.x,o.x,T),Kb(h.y,o.y,T),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(od(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Xj(this.relativeTarget,this.relativeTargetOrigin,p,T),S&&Tj(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=Bn()),Gr(S,this.relativeTarget)),w&&(this.animationValues=f,_j(f,u,this.latestValues,T,x,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Mo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=rn.update(()=>{tg.hasAnimatedSinceResize=!0,this.currentAnimation=Dj(0,Zb,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Zb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:f}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&KD(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Bn();const h=Pr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const p=Pr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Gr(a,l),tc(a,f),sd(this.projectionDeltaWithTransform,this.layoutCorrected,a,f)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new bj),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.rotate||l.rotateX||l.rotateY||l.rotateZ)&&(a=!0),!a)return;const u={};for(let f=0;f<qb.length;f++){const h="rotate"+qb[f];l[h]&&(u[h]=l[h],o.setStaticValue(h,0))}o.render();for(const f in u)o.setStaticValue(f,u[f]);o.scheduleRender()}getProjectionStyles(o={}){var a,l;const u={};if(!this.instance||this.isSVG)return u;if(this.isVisible)u.visibility="";else return{visibility:"hidden"};const f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=eg(o.pointerEvents)||"",u.transform=f?f(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=eg(o.pointerEvents)||""),this.hasProjected&&!ll(this.latestValues)&&(w.transform=f?f({},""):"none",this.hasProjected=!1),w}const p=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=Yb(this.projectionDeltaWithTransform,this.treeScale,p),f&&(u.transform=f(p,u.transform));const{x:m,y:v}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,h.animationValues?u.opacity=h===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=h===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const w in Og){if(p[w]===void 0)continue;const{correct:_,applyTo:g}=Og[w],x=u.transform==="none"?p[w]:_(p[w],h);if(g){const S=g.length;for(let E=0;E<S;E++)u[g[E]]=x}else u[w]=x}return this.options.layoutId&&(u.pointerEvents=h===this?eg(o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(Jb),this.root.sharedNodes.clear()}}}function Nj(n){n.updateLayout()}function Oj(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?bs(h=>{const p=o?t.measuredBox[h]:t.layoutBox[h],m=Pr(p);p.min=i[h].min,p.max=p.min+m}):KD(s,t.layoutBox,i)&&bs(h=>{const p=o?t.measuredBox[h]:t.layoutBox[h],m=Pr(i[h]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[h].max=n.relativeTarget[h].min+m)});const a=ec();sd(a,i,t.layoutBox);const l=ec();o?sd(l,n.applyTransform(r,!0),t.measuredBox):sd(l,i,t.layoutBox);const u=!ZD(a);let f=!1;if(!n.resumeFrom){const h=n.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const v=Bn();od(v,t.layoutBox,p.layoutBox);const w=Bn();od(w,i,m.layoutBox),JD(v,w)||(f=!0),h.options.layoutRoot&&(n.relativeTarget=w,n.relativeTargetOrigin=v,n.relativeParent=h)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function Fj(n){ul.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function kj(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Bj(n){n.clearSnapshot()}function Jb(n){n.clearMeasurements()}function zj(n){n.isLayoutDirty=!1}function Vj(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Qb(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Gj(n){n.resolveTargetDelta()}function Hj(n){n.calcProjection()}function Wj(n){n.resetRotation()}function jj(n){n.removeLeadSnapshot()}function Kb(n,e,t){n.translate=gn(e.translate,0,t),n.scale=gn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function $b(n,e,t,i){n.min=gn(e.min,t.min,i),n.max=gn(e.max,t.max,i)}function Xj(n,e,t,i){$b(n.x,e.x,t.x,i),$b(n.y,e.y,t.y,i)}function Yj(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const qj={duration:.45,ease:[.4,0,.1,1]},eC=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),tC=eC("applewebkit/")&&!eC("chrome/")?Math.round:Tn;function nC(n){n.min=tC(n.min),n.max=tC(n.max)}function Zj(n){nC(n.x),nC(n.y)}function KD(n,e,t){return n==="position"||n==="preserve-aspect"&&!R_(Xb(e),Xb(t),.2)}const Jj=QD({attachResizeListener:(n,e)=>fo(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),C1={current:void 0},$D=QD({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!C1.current){const n=new Jj({});n.mount(window),n.setOptions({layoutScroll:!0}),C1.current=n}return C1.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Qj={pan:{Feature:pj},drag:{Feature:hj,ProjectionNode:$D,MeasureLayout:XD}},Kj=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function $j(n){const e=Kj.exec(n);if(!e)return[,];const[,t,i]=e;return[t,i]}function U_(n,e,t=1){const[i,r]=$j(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return OD(o)?parseFloat(o):o}else return M_(r)?U_(r,e,t+1):r}function eX(n,{...e},t){const i=n.current;if(!(i instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(r=>{const s=r.get();if(!M_(s))return;const o=U_(s,i);o&&r.set(o)});for(const r in e){const s=e[r];if(!M_(s))continue;const o=U_(s,i);o&&(e[r]=o,t||(t={}),t[r]===void 0&&(t[r]=s))}return{target:e,transitionEnd:t}}const tX=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),eU=n=>tX.has(n),nX=n=>Object.keys(n).some(eU),iC=n=>n===Xl||n===yt,rC=(n,e)=>parseFloat(n.split(", ")[e]),sC=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/);if(r)return rC(r[1],e);{const s=i.match(/^matrix\((.+)\)$/);return s?rC(s[1],n):0}},iX=new Set(["x","y","z"]),rX=vh.filter(n=>!iX.has(n));function sX(n){const e=[];return rX.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Ec={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:sC(4,13),y:sC(5,14)};Ec.translateX=Ec.x;Ec.translateY=Ec.y;const oX=(n,e,t)=>{const i=e.measureViewportBox(),r=e.current,s=getComputedStyle(r),{display:o}=s,a={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(u=>{a[u]=Ec[u](i,s)}),e.render();const l=e.measureViewportBox();return t.forEach(u=>{const f=e.getValue(u);f&&f.jump(a[u]),n[u]=Ec[u](l,s)}),n},aX=(n,e,t={},i={})=>{e={...e},i={...i};const r=Object.keys(e).filter(eU);let s=[],o=!1;const a=[];if(r.forEach(l=>{const u=n.getValue(l);if(!n.hasValue(l))return;let f=t[l],h=Pf(f);const p=e[l];let m;if(kg(p)){const v=p.length,w=p[0]===null?1:0;f=p[w],h=Pf(f);for(let _=w;_<v&&p[_]!==null;_++)m?zw(Pf(p[_])===m):m=Pf(p[_])}else m=Pf(p);if(h!==m)if(iC(h)&&iC(m)){const v=u.get();typeof v=="string"&&u.set(parseFloat(v)),typeof p=="string"?e[l]=parseFloat(p):Array.isArray(p)&&m===yt&&(e[l]=p.map(parseFloat))}else h!=null&&h.transform&&(m!=null&&m.transform)&&(f===0||p===0)?f===0?u.set(m.transform(f)):e[l]=h.transform(p):(o||(s=sX(n),o=!0),a.push(l),i[l]=i[l]!==void 0?i[l]:e[l],u.jump(p))}),a.length){const l=a.indexOf("height")>=0?window.pageYOffset:null,u=oX(e,n,a);return s.length&&s.forEach(([f,h])=>{n.getValue(f).set(h)}),n.render(),W0&&l!==null&&window.scrollTo({top:l}),{target:u,transitionEnd:i}}else return{target:e,transitionEnd:i}};function lX(n,e,t,i){return nX(e)?aX(n,e,t,i):{target:e,transitionEnd:i}}const uX=(n,e,t,i)=>{const r=eX(n,e,i);return e=r.target,i=r.transitionEnd,lX(n,e,t,i)},N_={current:null},tU={current:!1};function cX(){if(tU.current=!0,!!W0)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>N_.current=n.matches;n.addListener(e),e()}else N_.current=!1}function fX(n,e,t){const{willChange:i}=e;for(const r in e){const s=e[r],o=t[r];if(or(s))n.addValue(r,s),Gg(i)&&i.add(r);else if(or(o))n.addValue(r,Mc(s,{owner:n})),Gg(i)&&i.remove(r);else if(o!==s)if(n.hasValue(r)){const a=n.getValue(r);!a.hasAnimated&&a.set(s)}else{const a=n.getStaticValue(r);n.addValue(r,Mc(a!==void 0?a:s,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const oC=new WeakMap,nU=Object.keys(Zd),dX=nU.length,aC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],hX=Lw.length;class pX{constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>rn.render(this.render,!1,!0);const{latestValues:a,renderState:l}=s;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=X0(t),this.isVariantNode=zI(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(t,{});for(const h in f){const p=f[h];a[h]!==void 0&&or(p)&&(p.set(a[h],!1),Gg(u)&&u.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,oC.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),tU.current||cX(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:N_.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){oC.delete(this.current),this.projection&&this.projection.unmount(),Mo(this.notifyUpdate),Mo(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const i=jl.has(e),r=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&rn.update(this.notifyUpdate,!1,!0),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},i,r,s){let o,a;for(let l=0;l<dX;l++){const u=nU[l],{isEnabled:f,Feature:h,ProjectionNode:p,MeasureLayout:m}=Zd[u];p&&(o=p),f(t)&&(!this.features[u]&&h&&(this.features[u]=new h(this)),m&&(a=m))}if(!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:l,layout:u,drag:f,dragConstraints:h,layoutScroll:p,layoutRoot:m}=t;this.projection.setOptions({layoutId:l,layout:u,alwaysMeasureLayout:!!f||h&&Ku(h),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:s,layoutScroll:p,layoutRoot:m})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Bn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<aC.length;i++){const r=aC[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s=e["on"+r];s&&(this.propEventSubscriptions[r]=this.on(r,s))}this.prevMotionValues=fX(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const i=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(i.initial=this.props.initial),i}const t={};for(let i=0;i<hX;i++){const r=Lw[i],s=this.props[r];(qd(s)||s===!1)&&(t[r]=s)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Mc(t,{owner:this}),this.addValue(e,i)),i}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props,r=typeof i=="string"||typeof i=="object"?(t=Bw(this.props,i))===null||t===void 0?void 0:t[e]:void 0;if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!or(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new qw),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class iU extends pX{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...i},{transformValues:r},s){let o=D9(i,e||{},this);if(r&&(t&&(t=r(t)),i&&(i=r(i)),o&&(o=r(o))),s){L9(this,i,o);const a=uX(this,i,o,t);t=a.transitionEnd,i=a.target}return{transition:e,transitionEnd:t,...i}}}function mX(n){return window.getComputedStyle(n)}class gX extends iU{readValueFromInstance(e,t){if(jl.has(t)){const i=Ww(t);return i&&i.default||0}else{const i=mX(e),r=(jI(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return jD(e,t)}build(e,t,i,r){Dw(e,t,i,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return kw(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;or(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,i,r){QI(e,t,i,r)}}class vX extends iU{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(jl.has(t)){const i=Ww(t);return i&&i.default||0}return t=KI.has(t)?t:Fw(t),e.getAttribute(t)}measureInstanceViewportBox(){return Bn()}scrapeMotionValuesFromProps(e,t){return eD(e,t)}build(e,t,i,r){Nw(e,t,i,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,i,r){$I(e,t,i,r)}mount(e){this.isSVGTag=Ow(e.tagName),super.mount(e)}}const yX=(n,e)=>Iw(n)?new vX(e,{enableHardwareAcceleration:!1}):new gX(e,{enableHardwareAcceleration:!0}),xX={layout:{ProjectionNode:$D,MeasureLayout:XD}},_X={...Y9,...h7,...Qj,...xX},zi=SW((n,e)=>e7(n,e,_X,yX)),hs={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",heroHeadText:"font-black text-white lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",heroSubText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",sectionHeadText:"text-white font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",sectionSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider"},SX=({text:n,color:e,delay:t=0})=>{const[i,r]=X.useState(""),[s,o]=X.useState(0);return X.useEffect(()=>{if(s<n.length){const a=setTimeout(()=>{r(l=>l+n[s]),o(l=>l+1)},1+t);return()=>clearTimeout(a)}},[s,n,t]),te.jsxs("span",{style:{color:e},children:[i,te.jsx(zi.span,{animate:{opacity:[1,0,1]},transition:{duration:.8,repeat:1/0},style:{color:e},children:"|"})]})},wX=()=>{const[n,e]=X.useState([]),t=[{id:1,code:`print("Hello Welcome
to this page")`,language:"Python",color:"#93C5FD",position:{left:"15%",bottom:"20%"},startDelay:0},{id:2,code:`System.out.println(
"Hello Welcome
to this page");`,language:"Java",color:"#6EE7B7",position:{left:"50%",bottom:"20%"},startDelay:1e3},{id:3,code:`console.log(
"Hello Welcome
to this page");`,language:"React",color:"#FCD34D",position:{left:"85%",bottom:"20%"},startDelay:2e3}];return X.useEffect(()=>{const i=t.map(r=>setTimeout(()=>{e(s=>[...s,r])},r.startDelay));return()=>{i.forEach(r=>clearTimeout(r))}},[]),te.jsx("div",{className:"absolute inset-0 pointer-events-none z-10",children:n.map(i=>te.jsx(zi.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"absolute",style:i.position,children:te.jsxs("div",{className:"bg-black/20 backdrop-blur-sm rounded-lg p-3 border",style:{borderColor:i.color},children:[te.jsx("div",{className:"text-sm font-mono whitespace-pre-line",style:{color:i.color},children:te.jsx(SX,{text:i.code,color:i.color,delay:i.startDelay})}),te.jsx("div",{className:"text-xs mt-1 opacity-70",style:{color:i.color},children:i.language})]})},i.id))})},lC=({text:n,speed:e=50,delay:t=0,lineByLine:i=!1})=>{const[r,s]=X.useState(""),[o,a]=X.useState(0),[l,u]=X.useState(!1);return X.useEffect(()=>{if(i){const f=n.split(" ");if(o<f.length){const h=setTimeout(()=>{s(p=>p+(o===0?"":" ")+f[o]),a(p=>p+1)},e+t);return()=>clearTimeout(h)}else o===f.length&&u(!0)}else if(o<n.length){const f=setTimeout(()=>{s(h=>h+n[o]),a(h=>h+1)},e+t);return()=>clearTimeout(f)}else o===n.length&&u(!0)},[o,n,e,t,i]),te.jsxs("span",{children:[r,!l&&te.jsx(zi.span,{animate:{opacity:[1,0,1]},transition:{duration:.8,repeat:1/0},className:"text-white",children:"|"})]})},MX=()=>te.jsxs("section",{className:"relative w-full h-screen mx-auto",children:[te.jsx("div",{className:`absolute inset-0 top-[120px]  max-w-7xl mx-auto ${hs.paddingX} flex flex-row items-start gap-5`,children:te.jsxs("div",{children:[te.jsx("h1",{className:"text-white text-4xl font-bold",children:te.jsx(lC,{text:"Hi, I'm Ravi",speed:1,delay:500})}),te.jsx("p",{className:"text-white mt-2 text-lg leading-relaxed max-w-2xl",children:te.jsx(lC,{text:"I design and build web applications from end to end  blending elegant user interfaces with solid full-stack engineering to deliver impactful digital experiences.",speed:100,delay:800,lineByLine:!0})})]})}),te.jsx(rW,{}),te.jsx(wX,{}),te.jsx("div",{className:"absolute xs:bottom-10 bottom-32 w-full flex justify-center items-center",children:te.jsx("a",{href:"#about",children:te.jsx("div",{className:"w-[35px] h-[64px] rounded-3xl border-4 border-secondary flex justify-center items-start p-2",children:te.jsx(zi.div,{animate:{y:[0,25,0]},transition:{duration:1.5,repeat:1/0,repeatType:"loop"},className:"w-3 h-3 rounded-full bg-secondary mb-1"})})})})]}),EX="/portfolio/assets/github-3b4e1609.png",AX="/portfolio/assets/menu-b5599218.svg",TX="/portfolio/assets/close-54702a70.svg",bX="/portfolio/assets/css-79a7f026.png",CX="/portfolio/assets/docker-602a695a.png",PX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAACXBIWXMAAAsTAAALEwEAmpwYAAANG0lEQVR4nO2dX6xcRR2AD9QYgpYElEDv3fltqdUSHtSISNWIiIE09vbuzMKa+GBq4p/4hoIGEx/qSxOiL1T62Adj4kN90gegSXnQxAdCIiYkloQKSKKQpo3c7szeikrXzPZCW3r39uzdc2bOzPm+5Jc0t7t7dn4z386cc+bMFAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQFs415cdVqtHrJZjzqgTToudhFEn/N/8//nXxP6eAHAJIy13Oi3HnZFxqdBy3L+HJAJEZLy/e5016og1cr60vGvh3+Pf6z+DSgQIzGhZLVgjz80q7hUia/XC6mCHUIEAgfDCWS2vzCvvJRK/zrkxQILyIjFA4vIiMUDi8iIxQOLyIjFA4vIiMUDi8iIxQOLyIjFA4vIiMUDi8iIxQOLyIjFA4vIiMUDi8iIxQOLyIjFA4vIiMbSe1OVFYmgtuciLxNBKnJE/xJaucomNeu1cr7s9dm4Baie3HpieGFoHEgMkDhIDJA4SAyQOEgMkDhIDNASn5YDV8vis70NigMg4LT++eFsFibnFBMngjPzoynujSIzE0Hhsv/vo9AkOSIzE0Fj8vrtXn6WExEgMjcMa9cPyUw2RGImhMVijfjD7fGEkRmKIjtXq4c1P+kdiJIZojLR8z+9wP9+TO0iMxBAcp+W788qLxDyKCBFwRr5TlbxIjMQQENeTb1st71QpLxIjMSQ2bJ4qsVE/m/V7+SVs/FI2l/8YqDeslmecVof9ebYPp9Uhq9VTTqtTdZahwlywPA80v+etSmJn5EVn5Aln5DPjorhm2mvHB4prR8uLd1stB61Wb8YWFYmhVlxPfSuUvPNcnd4M46Vt1zsjjzmj3oot6/RcqNfP9WVHiHxAZjit9oeWN7TEntGgs2i1PB9bViSGynB9+WYseecZTs/ZGx+NLesGueCcGMphtfq6NfLfRjTcgD3xeFBssUY9HbvM03PBcBqugjUyaIq8MSRe2Ss3Oi0vxy4zEsPMDI081DR5Y0g87KkvxS4vEkOyw+ZpMdTdfqhqndxHbkCZp/6gcU4MKfS8lzTYf9t9t90SqtZGpnNX7DIjMVwV36tZrf7T/MYqvwtdnc7IycbnRXNhq7WMTNekIK+PkVbfD50fp9UvY5e73I+b4hZT2xhp1bNavR278ZUWeHnx7tA5clqWYpcbieEKRj21LyV5fQwHt94cuipX9nV2xi43EsNlONPZY7U6F7uxzRrjwR0fDF2Vp5d3bY1d7pkl1pwTZ4vrd7/mr+bGbmSbEnhp2/Wh8+VnZsUu96YkNpwTZ4fT6oEUe953Y7W3oELn7MyenTfELvemJdb0xNmQurwTgXX386Hz5h/ji13uuSQ29MTJY42632pZjd2Y5m6MWj0S42Jf7HIjcYuxPflqDvJeEFh+Hzx/Wv0idrmRuKXYfvcr1sgoduOpTmD1dsiplH5ZnhRmYrmy+WM4nQ621703J3nfC61+GvJ2W/TyInH7GPbli06Ljd1Y6gl11hnZFiKPq4MdYrW8Er/M1Ybl6nRzmTzHmq28a6HVb0Llc70la3MIy3C6eZztyRecUcPYjSNIA9Tq4VB5pSeG2mmTvBcElv9Z3flGqKZFTwy1MTLd3WvnhtHFCiqx3yVCq59stIh7lSAxVI7fhcAZ+VdsmaKGlj8Ol+WOEM2L4TRUvORLc3cUCH6PWKtfj3Tnc3U3MXpimJvRg+qzyLu+zGVz6Iz81hn1Vy/krPlHYtg0rtf9tDNyJnav19Qoncc59x5iOA0zg7zVC4zEst4pCRuqVY0z2z9Fz1uPwEgsSFwn9sHFTzojp2MPT3MWGIkFietg2O/e3vSNqHMRGIkFiZE3bYGRWJC4Cs4ub99ltXojdo/WRoGRWJAYedMWGIkFiTfV8+qFT1gj/4zdk6UaVQqMxILEM8nbX/w48jZLYCQWJEbedHvgeR+CX2/apb+2Mdl/WKvDfuNyH06rQ1arp5xWp2KPYlyN+cgSvweP1fKP2JWSQ5TNechG69/jjLzojDzhnyDb6BHI8YHiWr+Rm9VysOm3Dy0SF8Vqf3s3x2VbchQ49DRDv52MM/JYkx9csW2edom86Qkco9GOBp1Fq+X52LK6huSjEZzbJ7f5gsdOfm5RNv+pDR/XeuOjsfPrGpKPqIyW1QLD5rQFjiLxl4sPOC3HY8vqNsiHb9tFzoz3d6+zRp6Lnexco2w9pDp8XNkrNzotL8fOs5uejz/H2Ao2GNaoI7GTnHOUrYdKG23gntjvvBE7z27jfBwpcn0g32p5J3aCc47SdVF1ow3cE0/uIzcg3269XBg5P9JyZ5EbTT5/ySVK10Utx+/sKYIuahg/31NDy/EiJ1LfLDqVKFsfNRz7ZKg1qt/FGvVq7HxvFFndWrL97qOxE9qGKFsfVR/XGvXzelvQOmXQ6lDsfDdtU/basFqOxU5oG6JsfVR93FFP7au3Ba1TBi1LsfO9Ufg2X+SC0+ql2AltQ5SujwyGi34OvWtAzqeGVi8VudCmzcdiRvn6qPa4p5d3bS0C44/pGpDz6aGGRS4gcN4CjwfFliIw/pguuqRtEZghdN4C33/Lh4rAJNADnyhygYtYeQvMObDkfRHLX1KP/4uYf5StjxqOvbfeFpTiVWiVz22ktVUZoic19yhbH5UfW6tD9bag9cqgnoyd79ZM5PAwlTJfgf2sqCIwjZ6JpTObSunxE7z9RO/oyc04ytZFHcf285OLQDR5LrTN9WEGD48T5iuwf0KoCESzn0ZSeT5O6OGB/nwFXut97qt/w7vOPbEldW19oN/Dkjr5CuyfSloZdG6qq+34z3ZG/hZbVNfWJXXeZXWwQ6yWV2InPbcom/96v4d61q9fVcfMK2vU07Fz7NaJdq5Muc6q/UQOAk/iaJVDySavSmnbtCLl+6EnrrYxlc17oIb9F7/2d87rQts29rzvB4nzFHgSWqzf++jMnp03zNou/PzqJu/MYJH3IgynMxX4YmN/0+93NDLd3X7/ow33RjLd3U3fG8m2edg8DSTOV+DLQqtTk4tRl+9OeHjtb43fndAi73QYTrdA4ITDMmy+OkiMwLFFdcg7H0hMDxxbWEfPi8ShG1rZjMcWIqWwDJvpiRE4vogOeePAcJoeGHkTB4kZQtPzJg4Scw7MsDlxkJiLWJzzJg4ScxWaC1aJw7TL99/qkHesVk+VzZ9/LZuty8X8MT0yPEh8YQE1a+RXK1p9bNb8+ff497Z9oUGLvPFos8RWq7/bXvfeeXPoP8N/VuzyIG9LaeM58eQB90H31qpyOFza9lGn1Z/alUPFw/hNoU09sV/p4tTg5g9XnUP/mf6zW5LD13iet2G0QWL/kPtqb0HVlUP/2U1+kB55Myf34fTQyEN159AaGWQrr2bY3Hiy7YkD7reT4z5WlmFzOuTYE1uj7g+VP6fVA1nlTtPzJkdmPfHJcVFcEyp3/lj+mFnIa7hglSwZ9cRPhM6d3/M3eXk1PW/y5CDxsCcPhs6bv2AWu9zIC1kMp4f97u2hq9IfM3a5NxuWYXN+pNwTn9ULHwmdr8nsrBTl1QybsyXVnriO3f6uhj9mcvIaLlhlT4o9sd8nKHSeTi/v2pqUvJqetzWk1hPH2AFvZV9nZzLyGnre1pGYxHtD58dpWWpAuZEXMhhOa3UodD06o56MXu6rhGXYDClI7B+4D11T1qhXY5cbeSGb4fTIdO4KVZ3+WI2Wl3NeSK0ntlqeCVVrVsux5uaBq82QqsRG7qu78ob9zj2xy4m8kKXE/rzUz5Cqq3pXBp2bmvoUEj0vZCGxM+rZOmZmjQfFFmvU0/HLh7yQ/4Wto+OlbddXVdH+s/xnNqBcVwQXrCDLntivILna396dt3pHg87iZJnaJpaRC1aQs8ROi7VaHj+zZ+cNs5bLz692Rh5zRr0VvRzICy0eTk+Wm7VaDo5Md/f4QHHttHL4//Ov8a9t8vKxDJuhdRK/F1qdmlyM0uqw7519TP594W+non8/5IVYNHo4nUFwzgu1g8TIC4mDxPS8kDhIzLAZEgeJOeeFxEFiLlhB4iAxV5shcZCYW0WQOEjMfV5IHCRmkgYkDhIzwwoSB4mZHgmJ03aJmdsMydNWiZEXsqFtEiMvZEdbJEZeyJbcJUZeyJ5cJUZeaA25SYy80DpykRh5obWkLjHyQutJVWLkBUhUYuQFSFRi5AVIVGLkBUhUYuQFSFRi5AVIVGLkBUhUYuQFSFRi5AVIVGLkBUhUYuQFSFRi5AVIVGLkBUhUYuQFCMxoWS1YI89VIO8L/geBCgQIzHh/9zpr1BFr5PzM4ho579/rP4OKA4jISMudTsvx0gJrOe7fQ6UBNIhzfdlhtXrEajnmjDrhtNhJGHXC/83/n39N7O8JAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFCE4v/t8177cNMPugAAAABJRU5ErkJggg==",RX="/portfolio/assets/html-92b76a73.png",LX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAACXBIWXMAAAsTAAALEwEAmpwYAAAOgElEQVR4nO2dCdCVZRXHz8Pnwi4groElmijuK6m4YCqJpZmJqJla40qGWjgYZZQL5p4GJZlboKKTGzoouWSAiQsuqONY42Q1LVrZYlpZnebcy51B6uO7977LeZ/7/H4z/wGGmfve5zznf577vu+ziAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtIW+JIqIQafkgKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyBKQQUAmUEJgkoBHHngKSGd8ARMVAMjIEpBBQCZQQmCSgEceeApIZ3wBExUAyMgSkEFAJlBCYJKARx54CkhnfAETFQDIyB/Sp+yKQJHwmlft+3l4kumiN62dmixx8WdJ9dg246LOjggUH79A4aQv3v79sg6Oab1P//pAlBL50iev9s0b8tq3bBkdTwDnjsisHA7zwj+v1viB62f9C+vbN9395rBx03JuhV00TfXFrF/kgM74DHriob+A8/EZ16YtChg7N9x+40oF/QyccGfXVhlfojMbwDHruqaOB3l4teMkV00IBijLuq1loz6PRJov94rgr9kRjeAY9dVTPwy/eJ7rZtOcZdVVtvHvSp2737IzG8DRC7qmTghdeWN+p2p769g94zEwNj4AqYMyYDz7tcdI0uX/PKCtn3mP01r/5IDG8DxK4qGPjumdUxr6yQvY6aezEGxsAVMGmVDWz3vAP7+xtWunnltGRu2f2RGN4GiF2eBranvttu4W9UWY3WHxL0tYcwMAaugFmrZuDzJ2e/fhkaN6a82WaSGt4GiF1eBv79Y6L9+/qbs1ndcCEGxsAVMGxVDDztZH9TtqIh64Ra0Sm+PxLD2wCxy8PANtNqw6H+pmxWgwcGvWZ6Wf2RGN4GiF0eBr732/nd+24/MugVU0WfuUP09cX11Ub259J5oldPE917l/oroXY//9hDgr6xpMz+SAxvA8QuDwNPOjq7cfv1qd+X/ufFnq9nr4J22LK1z990WKgtPyy/PxLD2wCxy8PANuc46/vZR29qfR3xxPE9f3ZXV9Azjwv61tNe/ZEY3gaIXWUb+O/PSs0kWa553ufba+u/losefuDqf44/eZt3fySGtwFiV9kGfnF+tmvarht/far99trIOmqz//3MGWeK/vP5KvRHYngHPHaVbeAHr8t2zQP2yD6pwh54NeZejx0d9JUFVeqPxPAOeOwq28C2cCHL9T57eD6zor46SfTa85p7CKal9kdieAc8dpVt4NuvzHZN28ius/sjMbwDHrvKNnDWd8AH7omBOwpvA8Susg38yA2S+f2v7VLZuf2RGN4Bj11lG9geGGW95qxzO7k/EsM74LGrbAPb6NmrV7Zrrjso6E/v79T+SAzvgMeusg1s2nJEtmuaRgwPtd08Oq8/EsM74LHLw8C2QCDrdU22Fc+NM6r3Kkgz9UdieAc8dnkY+KaL8t2Jw1YcPXZzp/RHYngHPHZ5GNiOTFlzjfwM3JAdZLZgduz9kRjeAY9dHgY2fXI1iwqyasetgt5yaTXmNmvL/ZEY3gGPXV4GtuWARRm4ITti1FYu/XZRTP2RGN4Bj11eBjbZrKqiTWxae62gnz406LN3xtAfieEd8NjlaeDn75LayYBlmHjl1UwPfLe6T64lNbwDHrs8DWz6+uk+e0NvNzLozZeI/vsF/z54b38khnfAY5e3gc1AB+9TvoEbsu19bruiSv2RGN4Bj13eBja9uVRqI6KXiUWCfvhD/mcDY+AKGCI2VcHApt8tzr7ZXVZ1dQX94gm+q50kNbwNELuqYmDTHx+X2mQMTxOLBN1qRNAnnDa3k9TwNkDsqpKBGycW2iiYdcVSVq3RFfSCM8p/Wi2p4W2A2FU1Azf0w+9JbSKG92h81MGhthUuBsbA7maNycAmO0zshMP8R+OD9irvvlhSw9sAsavKBl55G9j9Rvua+JCxobYxPAbGwO6mjc3ADc2fJbrLNn4mPuv44tsqqeFtgNgVk4EbWjRH9KP7Zjt1sB2FEGq7ahbbH4nhbYDYFaOBG3ruzvo9sh12VpaJN14/29EuPfdHYngbIHbFbOCVZ3JdeY7o+zcux8TnnlZcmyU1vJMndnWCgRt6d7norZeJ7jSqWAMP7B/0z08U1R+J4Z00sauTDLyyFl4rtfnNRZn4m18qqj8SwztRYlenGrghO+93/93zN/Do7Yppt6SGd4LErk43cEN3Xi26wbr5GbhXr6C/frSI/kgM78SIXakY2GR7Y+21c34mnnd5Ef2RGN5JEbtSMrDpradF99gxHwN/4YT82y6p4Z0QMcvm96ZmYNNrD0ntlMOsbT94HwyMgR0T+fXF1TSwLWIouu02LTJr27f5IAbGwE0m3M8flNrWqLboPa8kthP+sibxkQeFXN/jXnhGfXRcOq9YAy+Zm73t6w3BwBi4h0Sz0wVmnCnat3c9aU6ekF/S3Ped7El83Mfz+T7L737vQoVRmxW7DtemQ2Zte78+GBgD93CavW3vsuqE+rtn5pPENtplTeJTJ4bMo+75k6W2+fqqn33OScXeX2e9D+7qwsAYuJvXHXYEZ3erbQYPDPri/OwJvOdO2e8Dp3wm28buq5v2aNva2ESMIsxra3vt87O0vX9fDIyBV9kjeda5UjNoT8lj281kOaX+hXvy2VDdFhG0c1tgG7o3cyrDpsOCvrEkfwO/ujB7+zdaDwNj4BUJZXsS79riYvWhg4P+6Mb2Rp8xOYy+pjuuau3adj6RnR7YyjXGjs7/fvjqadkNvN1IDJy8gf+0VPRzx9Tvp9qd0jfp6FA7c7eZxH17mdQ2asvDvCZbk9vsqDt9UvvnAo/fO799qexzNt8ke9uPGIeBkzbw3ItFNxyaj5HsKfVJE0LtyfJfnnzvdWxr1JfvE71iqtR+kuZlXrumPYTqqZ3LfiC6fQ4nL9i+WLYBfNa4n35MddcFS2p4m7Bd/eyB7A9RVie7jx4xPOjwDetGK+Ia9hCsmbbuvkN+17T7zgWz24u5/QyffGx+3+XB6/LPC0kNbyNmkY2YRRm4DH3l1OYMvHiO5L5/1d671I8JbWanSNss/pZLpfZuOa/r9+1dzHtqSQ1vE2aRLUfLY06ul1o5DGzi+OJ+adi9qE12ue4CqW06d89M0RtnSO1khUP3C7ruoPyvO3E864GTN7Al9mVn+5yPm1X287yVY0dsAYFtReP9vfPSw9cXU9QlNbxH0awyE4wb45+QrcoKT6tttZ+x3t87D+00qrXihYE72MCm3/xYdP0h/onZrGwktddf7bT1xCP8v38VH17pCklqeJsvz3nPZe5vnEUXndV+O+09dB6vlLw0oeD1z5Ia3sbLU3d9q9hXS3nIJkBkffpqvzi2+IB/W1rVsA3yXc6JgTvMwCZ7elr2kSHNymZR5bVO95cP5zuppGj171vOod+SGt6GK0L2sKdPQZMvsuiqafkvKLCn2d7tkh5kSx3vb3PyCAZO0MAmq/Z2Do938jY07eRi7v1spZFNyvBun3SjQQPaWzCCgRMegRv61SP5rNnNIvs5bxMiimynzaf+8intL+goStuPDPrSveX2uaSGt8nKWCN8zfTm1gjnLZvBZBuil9XWx28t/lyjZrTWmkGnnljslj4YOBEDr7xLx6c+Vl8+WMaoa69L7Jplt9PmNl9/gc+9ca9eQT9xQNBXFvj1s6SGt7HKlu2kYdvt/L89pLLKfsIeMra1Oc5FydYP28O8Mu6P1xkQ9JQjQ23JpXe7JTW8A+4l2zvZTsjbd7f63lFZRh3bCcS2uPnFw/7t6u5p9SVT6mbOa7KLvdO1bXptR5F3ctooIA9JangHvAqyA65tIf9XJ4kefmDQnbcOtamZNrJYstpobffQm2xUX8NrezmbYefPqm/u7v39W5GZbdGc+t5hpx1VPx1hhy1DbWMEa2OjmA3oV//3ZsNDbfsgWz1kC/Bvv7K+Ftu7HdqNJDW8A46IgWJgDEwhoBAoIzBJQCGIOwckNbwDjoiBYmAMTCGgECgjMElAIYg7ByQ1vAOOiIFiYAxMIaAQKCMwSUAhiDsHJDW8A46IgWJgDEwhoBAoIzBJQCGIOwckNbwDjoiBYmAMTCGgECgjMElAIYg7ByQ1vAOOiIFiYAxMIaAQKCMwSUAhiDsHJDW8A46IgWJgDEwhoBBoiiMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEg+/BceiofdqS/+vQAAAABJRU5ErkJggg==",IX="/portfolio/assets/mongodb-54000b2b.png",rU="/portfolio/assets/nodejs-d83eb6dd.png",sU="/portfolio/assets/reactjs-966214a8.png",DX="/portfolio/assets/redux-171787ca.png",UX="/portfolio/assets/tailwind-6ece120d.png",NX="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAYAAAA+VemSAAAACXBIWXMAAAsTAAALEwEAmpwYAAANMUlEQVR4nO2d+48V9RXAv//Gtw/balttayOpjVZr06TPqLRJ09Q+09Yaa01sapNWKqiAqCiU+MJXfSGC+ADxQa1AK0WMogJW2L3syrIvdpcL+95ln7B7mu8Y7GaD9N7ZmXvuzPl8kvOLMXsvZ87nnLkz852vcwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsfDX7BaCHOSlBpw1tBNOkAOPwAhMI6AReCYwRUAjyHYNOGtoJ5wgBx6BEZhGQCPwTGCKgEaQ7Rpw1tBOOEEOPAIjMI2ARuCZwBQBjSDbNeCsoZ1wghx4BEZgGgGNwDOBKQIaQbZrwFlDO+EEOfAIjMA0AhqBZwJTBDSCbNeAs4Z2wgly4BEYgWkENALPBKYIaATZrgFnDe2EE+TAIzAC0whoBJ4JTBHQCLJdA84a2gknyIFHYASmEdAIPBOYIqARZLsGnDW0E06QA4/ACEwjoBF4JjBFQCPIdg04a2gnnCAHHoERmEZAI/BMYIqARpDtGnDW0E44QQ48AiMwjYBG4JnAFAGNINs14KyhnXCCHHgERmAaAY3AM4EpAhpBtmvAWUM74QQ58AiMwDQCGoFnAlMENIJs14CzhnbCCXLgERiBaQQ0As8EpghoBNmuAWcN7YQT5MAjMALTCGgEnglMEdAIsl0DzhraCSfIgUdgBKYR0Ag8E5gioBFkuwacNbQTTpADj8AITCOgEXgmMEVAI8h2DThraCecIAcegRGYRkAj8ExgioBGkO0acNbQTjhBDjwCIzCNgEbgmcAUAY0g2zXgrKGdcIIceARGYBoBjcAzgSkCGkG2a8BZQzvhBDnwCIzANAIagWcCUwQ0gmzXgLOGdsIJcuARGIFpBDQCzwSmCGgE2a4BZw3thBPkwCMwAtMIaASeCUwR0AiyXQPOGtoJJ8iBR2AEphHQCDwTmCKgEWS7Bpw1tBNOkAOPwAhMI6AReCYwRUAjyHYNOGtoJ5wgBx6BEZhGQCPwTGCKgEaQ7Rpw1tBOOEEOPALnW+Dm7jEBkYUbOiqW81mLCvKjBxrl6qcPyF83FeXJt3tk275BebdtWJq6xqJj0jt0TPqG34+uI0ej/7bv8Gj0/2ypH5BndvbKfVs7ZcGLHXLlE61y0d0N8vkFtUzgJNGWE4GrQ+ALltbL3Ofa5eXafin2j6faL/uGj8nOliFZub1b5jzbJrOXN8ip82oS+Xc4a2jLicB6Ap97a100XeuLo6LNsYnJaHqv3dUrf17XJucsrkNgBM4XSQl88fIG+fue/kiaamXVm90IjMD5YqYCn3dbnWzY3SeT1evtBzz0WhcCI3C+iCvwR+bsjk5Lh8YmJCvc9cphBEbgfBFH4NOuq4kuTGWNpZuKCIzAtgU+a1FB9rQPSxa5MebZhrOG9hXmUoL7wOULfPoNtZmVN3Dt+nYERmCbAn/8L3vk9f1HJMtc/fQBBEZgmwIv23xIss4Vq1sQGIHtCXzhXfuq+v5uqfxqRTMCI7A9gbc1DEoeuOTBRgRGYFsC/+zhJskL37unAYER2JbAm/cOVOy7tHSPyT9q+qNHHu/d2im3bSxGz1U/uK0zWoUUvktrT/xVZN++Yx8CI7Adgc++ZW+qv33D395U6JdLH2uWMxcWSpbrjPm10bLEIPiOliEp9SuG1VHcB87JfeCfPNQol61sTiX+8NSBxIo8rKZJ63uGCM8yf1iOwprbtAjPT4cGkcSxPHNhQf74zAF5s+nkt7m+HPPznDW05dSOLywsJFbobzUNqf070jh9Hj82Kb9/sjW173zB0nr527ZOOXKCZ7TDcYnzN501tAXSjjwIHB7cGBxNdqFCONX93er05PXTTrPDKXb/8LEPPj/uAn9nDW2BtCMPAn9tab0kzYo34i3n8zMUOVwQC5P/o3Pi/Q1nDW2BtCMPAoeHHpIknNKWc6HKJxxxL2CFcNbQFkg78iBwuDqdJC/u7lM/Lj5mOGtoJ1w78iDwPf8+LEnyp7Vt6sfFxwxnDe2Ea0ceBH709S5JknDbTvu4+JjhrKGdcO3Ig8BP7eiRJJkd8zFGXwXhrKGdcO3Ig8DPvtMrSfLrmCuBfBWEs4Z2wrUjDwKvfrNbkiQ8XKF9XHzMcNbQTrh25EHgIFzSOyeEV/JoHxsfI5w1tBOuHXkQOOnbSIGwF5L2sfExwllDO+HakQeBw0KHNAgbk2kfH19mOGtoJ1w78iBwWKWUFkHi8Ky19nHyJYazhnbCtSMPAoc4NHBU0mJX69BJlzL6KgpnDe2Ea0deBF6f8K2k6QyMTERrjk+5trqnsbOGdsK1Iy8Cp/U7eDphc+/wWWG/Je1j5xEYgfMi8Kfm1UjP0P/W06bN7rbhaBVUtYnsrKGdcO3Ii8Ah7t6S7KKGUgjbt1y2sjn2+l0ERmAEnrKZ2YleT1MJ6oujctWaVvUr1s4a2h1TO/I0gUOEV7tq0tw9Fu1FrHWxy1lDu+C0I28Cf3LunujtmNp09I3L9S90yCfmVlZkZw3tgtOOvAkc4uLlDdF7paqBtt7xaKfBj1Xo1NpZQ7vYtCOPAoeY+1y7VBP1xVH56UNNCIzACFyqxPe/muwqpSR4/t0+mXVTMi+JP1E4a2hPCu3I6wQ+HmGvompjYGRC5jybznu3nDW0C0w78i5weNDikYTfmZXk2y9PT3jdsbOGdoFpR94FnrpmuBo3/m7qGpPv3BlvJ0IERmAzAof4wX37pXMwvVVLcRken4i9off0cNbQLirtsCRwiHMW18n2xpPvDKjByPiE/PzhmV+ldtbQLijtsCZwiPDc8rzn22VI6bHLDyPcu/7lozOT2FlDu5i0w6LAx+PcW+vklbrktyWdCeFZ7m/e/h4CIzAClypy+P1ZODgi1UJz95h85nq2F2UCM4FLljisIpq7vj3VV/OUw+Pbu2NNYWcN7dM47bB8Cn2iCIsPwmqiorLIE5MiF91d/hYvzhraBaMdCHzivJx2XY3c/NLBir7lYzqvNRxBYARG4Jk0uPBbdMnGovQP64h84V3lPeThrKE9AbWDCVxank6fXyu3//OQDI5W9tbTk2XuEOGsoS2QdiBw+fkKq5wqtd64f/hYWS8FcNbQFkg7EDhe3r66pF42FSpzD/mSMh6zdNbQFkg7EHhm+fvNymbpPpLuFetlmw8hMAIjcFpNcNaigrz63mBqAoenxZjATGAmcIpnMqdcu0c27O5LReDGzlEERmAErsTTXBtr+xMXOFwwK3UHCGcN7d+g2sFv4GTz+bkFtan8Jj51XmnPRjtraAukHQicfE6XbT6UuMBfvLGAwAiMwJV6L3XShEbLBGYCM4ErIPCXbt6buMBh90UERmAEroDA5y+pT1Te8DK+Uj/bWaMSB7SaIw+/gc+7rS5662Slti/5fzH7nobEH6cs9bOdNbQPtnbkQeCvL3t/4r3dPDSj19EkFQs3dEiS1HaMlPzZzhraB1s78iTw8dPN8CL3M0u86JNGvHNgWJIkPCBS6mc7a2gLpB15E3jqy+Hu/Neh6L5sJb/LLx5pkqRZvuVwyZ/vrKEtkHbkVeCp+xA98GpndGEp7e9x1qKCtPeOS9L8dlULAiOwTYGnvmMqLAq49LHmkm/JlBPnL6lPZWPxycnSH+II4ayhUXDVFFYEnn56Hbb5vGJVi3z6uppE3p01mNKbOuqKpV/AQuAqEAqB0xd4KuGiV6FjRNa81RNt+fndO/eddMfAcKsqbM9y5ROt0etuwil6moTX+CAwE5gJXCZh25XwgvW9B0fk3bbhaBK29oxV7FU6x0+fwz1uBEZgBM4gbzTyWll+A/MbOLNcEmPLUWcN7d+g2mHxIlZep69HYH2hEBiBx45OyjdiPhLqrKEtkHYwgauPhRs6Yh9PZw1tgbQDgauLTYX+aANyBEZgBM4YO1uGogdDZtKQnTW0J6B2MIGrg+2NR+SM+TNfeOGsoS2QdiCwPuvf6S1r/yMERmAErgIGRiaizcSTbMjOGtoTUDvyMIG/cmtd9OhjVpiYFFm7q1fOvmVv4rlw1tAWSDvyIHCIcAr64wcb5d6tnbKjZaiizyyXSvhOz/+nT751R3qv/XHW0BZIO/Ii8PQIOxn88P79smRjUbbUD1R8Y+6p1LSPyOKXizLrpuQnLgJXQbEhcPo5CPdWw6L7yx9viXZOeGlPv9QXR2X06GTiK4hausdk3a5euWZdW9mriRCYCVxWEeR1Ape7Pej3722Qq9a0yvwXO6I1uCve6IpOd7e+NxhtHTo9Nu8diNYDh/duXf9CR7Q+ePbyBvnsDcm/7aOccNbQLh6CHHgERmAaAY3AM4EpAhpBtmvAWUM74QQ58AiMwDQCGoFnAlMENIJs14CzhnbCCXLgERiBaQQ0As8EpghoBNmuAWcN7YQT5MAjMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4bf4LtvMh68AvCz8AAAAASUVORK5CYII=",oU="/portfolio/assets/threejs-fe160e71.svg",aU="/portfolio/assets/java-5050b337.png",OX="/portfolio/assets/spring-0443db3a.svg",FX="/portfolio/assets/flexon-3712e2d5.png",kX="/portfolio/assets/dxc-6ed830da.png",BX="/portfolio/assets/bnp-ef9749e2.png",uC=[{id:"about",title:"About"},{id:"work",title:"Work"},{id:"contact",title:"Contact"}],zX=[{title:"Java Developer",icon:aU},{title:"React Developer",icon:sU},{title:"Software Engineer",icon:oU},{title:"Full Stack developer",icon:rU}],VX=[{name:"HTML 5",icon:RX},{name:"CSS 3",icon:bX},{name:"JavaScript",icon:LX},{name:"TypeScript",icon:NX},{name:"Java",icon:aU},{name:"Spring",icon:OX},{name:"React JS",icon:sU},{name:"Redux Toolkit",icon:DX},{name:"Tailwind CSS",icon:UX},{name:"Node JS",icon:rU},{name:"MongoDB",icon:IX},{name:"Three JS",icon:oU},{name:"git",icon:PX},{name:"docker",icon:CX}],GX=[{title:"Senior Software Developer",company_name:"Flexon Technologies Inc",icon:FX,iconBg:"#383E56",date:"January 2025 - Present",points:["Designed AI-driven recruitment workflows with transformer models (LLaMA 2, Gemma 2), reducing recruiter screening time by 40%","Built and deployed virtual interview agents using RAG pipelines on AWS SageMaker, enabling realistic candidate interactions with autoscaling and cost-efficient inference","Integrated PostgreSQL and S3 for ML input/output, ensuring fast queries and reliable analytics across thousands of records","Co-developed BotGuru.ai, an interview preparation platform delivering mock interview simulations and personalized coaching for job seekers","Implemented JPA ORM with MongoDB, optimizing database operations and managing 10,000+ records across datasets","Contributed to system design, defining clear service boundaries between ML inference, data ingestion, and reporting modules","Enhanced CI/CD workflows with GitHub Actions and Kubernetes, increasing deployment frequency from monthly to weekly with zero downtime","Improved React and Angular frontends with reusable components, cutting page load times to under 1.5 seconds"]},{title:"Application Development Analyst",company_name:"DXC Technology",icon:kX,iconBg:"#383E56",date:"March 2022 - August 2023",points:["Built Spring Boot microservices and React/Angular frontends for a platform with 100,000+ users","Improved security and API speed by 40% with JWT-based access control","Enhanced frontend with reusable components and faster rendering, cutting load times to <1.5s","Standardized error handling & logging, reducing debugging effort by 20%","Designed a recommendation engine (TF-IDF + collaborative filtering), boosting discovery by 25%","Migrated apps to Kubernetes clusters (25+ nodes), keeping downtime <1 hr/month","Optimized MySQL queries, reducing workflow execution by up to 2s","Delivered features in Agile sprints, collaborating with product owners"]},{title:"Software Engineer",company_name:"BNP Paribas",icon:BX,iconBg:"#E6DEDD",date:"August 2019 - January 2022",points:["Contributed to architecture and delivery of authentication services for distributed systems serving tens of thousands of users","Automated AWS provisioning (EC2, VPC, IAM, Route 53) and deployed services to EKS Kubernetes, improving reliability and reducing manual work","Implemented OAuth 2.0, OpenID Connect, and WebAuthn, cutting login times by 40% and strengthening authentication reliability","Built JWT-based scope-level access controls, enforcing granular API permissions across enterprise services","Set up CloudWatch and Prometheus monitoring, increasing uptime and real-time production visibility","Participated in Agile cycles and contributed to 500+ peer reviews, raising code quality and best practice adoption"]}],HX=[],WX=()=>{const[n,e]=X.useState(""),[t,i]=X.useState(!1),[r,s]=X.useState(!1),[o,a]=X.useState("");return X.useEffect(()=>{const l=()=>{window.scrollY>100?s(!0):s(!1)};return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]),X.useEffect(()=>{const l=()=>{const h=new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"});a(h)};l();const u=setInterval(l,1e3);return()=>clearInterval(u)},[]),te.jsx("nav",{className:`${hs.paddingX} w-full flex items-center py-5 fixed top-0 z-20 ${r?"bg-white/10 backdrop-blur-md":"bg-transparent"}`,children:te.jsxs("div",{className:"w-full flex justify-between items-center max-w-7xl mx-auto",children:[te.jsx(jF,{to:"/",className:"flex items-center gap-2",onClick:()=>{e(""),window.scrollTo(0,0)},children:te.jsxs("p",{className:"text-white text-[18px] font-bold cursor-pointer flex ",children:["Ravi ",te.jsx("span",{className:"sm:block hidden",children:" | Software developer"})]})}),te.jsxs("div",{className:"flex items-center gap-6",children:[te.jsx("div",{className:"text-white text-sm font-mono hidden md:block",children:o}),te.jsx("ul",{className:"list-none hidden sm:flex flex-row gap-10",children:uC.map(l=>te.jsx("li",{className:`${n===l.title?"text-white":"text-secondary"} hover:text-white text-[18px] font-medium cursor-pointer`,onClick:()=>e(l.title),children:te.jsx("a",{href:`#${l.id}`,children:l.title})},l.id))})]}),te.jsxs("div",{className:"sm:hidden flex flex-1 justify-end items-center",children:[te.jsx("img",{src:t?TX:AX,alt:"menu",className:"w-[28px] h-[28px] object-contain",onClick:()=>i(!t)}),te.jsx("div",{className:`${t?"flex":"hidden"} p-6 black-gradient absolute top-20 right-0 mx-4 my-2 min-w-[140px] z-10 rounded-xl`,children:te.jsx("ul",{className:"list-none flex justify-end items-start flex-1 flex-col gap-4",children:uC.map(l=>te.jsx("li",{className:`font-poppins font-medium cursor-pointer text-[16px] ${n===l.title?"text-white":"text-secondary"}`,onClick:()=>{i(!t),e(l.title)},children:te.jsx("a",{href:`#${l.id}`,children:l.title})},l.id))})})]})]})})};var jX=Object.defineProperty,XX=Object.defineProperties,YX=Object.getOwnPropertyDescriptors,cC=Object.getOwnPropertySymbols,qX=Object.prototype.hasOwnProperty,ZX=Object.prototype.propertyIsEnumerable,fC=(n,e,t)=>e in n?jX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Lf=(n,e)=>{for(var t in e||(e={}))qX.call(e,t)&&fC(n,t,e[t]);if(cC)for(var t of cC(e))ZX.call(e,t)&&fC(n,t,e[t]);return n},If=(n,e)=>XX(n,YX(e)),lU=class extends X.Component{constructor(n){super(n),this.ref=$d.createRef(),this.state={style:{}};const e={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},e,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(n=()=>{},e){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:If(Lf({},this.state.style),{willChange:"transform"})})),this.setTransition(),n(e)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:If(Lf({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(n=()=>{},e){return e.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.update.bind(this,e)),n(e)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:If(Lf({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:If(Lf({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(n=()=>{},e){return this.setTransition(),this.settings.reset&&this.reset(),n(e)}getValues(n){const e=(n.nativeEvent.clientX-this.left)/this.width,t=(n.nativeEvent.clientY-this.top)/this.height,i=Math.min(Math.max(e,0),1),r=Math.min(Math.max(t,0),1),s=(this.reverse*(this.settings.max/2-i*this.settings.max)).toFixed(2),o=(this.reverse*(r*this.settings.max-this.settings.max/2)).toFixed(2),a=i*100,l=r*100;return{tiltX:s,tiltY:o,percentageX:a,percentageY:l}}updateElementPosition(){const n=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=n.left,this.top=n.top}update(n){const e=this.getValues(n);this.setState(Object.assign({},this.state,{style:If(Lf({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:e.tiltY}deg) rotateY(${this.settings.axis==="y"?0:e.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const n=Object.assign({},this.props.style,this.state.style);return te.jsx("div",{style:n,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}};const Zw=n=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:n}}}),J0=(n,e,t,i)=>({hidden:{x:n==="left"?100:n==="right"?-100:0,y:n==="up"?100:n==="down"?-100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),dC=(n,e,t,i)=>({hidden:{x:n==="left"?"-100%":n==="right"?"100%":0,y:n==="up"||n==="down"?"100%":0},show:{x:0,y:0,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),JX=(n,e)=>({hidden:{},show:{transition:{staggerChildren:n,delayChildren:e||0}}}),Sh=(n,e)=>function(){return te.jsxs(zi.section,{variants:JX(),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${hs.padding} max-w-7xl mx-auto relative z-0`,children:[te.jsx("span",{className:"hash-span",id:e,children:""}),te.jsx(n,{})]})},QX=({index:n,title:e,icon:t})=>{const r=(s=>{switch(s){case 0:return{gradient:"from-orange-500/30 via-red-500/30 via-blue-500/30 to-white/30",shape:"rounded-[30px]",bgColor:"bg-gradient-to-br from-orange-200/10 via-red-200/10 via-blue-200/10 to-white/10",border:"border-2 border-orange-500/70",iconBg:"bg-gradient-to-r from-orange-200/20 via-red-200/20 via-blue-200/20 to-white/20"};case 1:return{gradient:"from-blue-300/30 to-cyan-300/30",shape:"rounded-[15px]",bgColor:"bg-gradient-to-br from-blue-200/10 to-cyan-200/10",border:"border-2 border-blue-300/40",iconBg:"bg-gradient-to-r from-blue-200/20 to-cyan-200/20"};case 2:return{gradient:"from-purple-300/30 to-pink-300/30",shape:"rounded-[25px]",bgColor:"bg-gradient-to-br from-purple-200/10 to-pink-200/10",border:"border-2 border-purple-300/40",iconBg:"bg-gradient-to-r from-purple-200/20 to-pink-200/20"};case 3:return{gradient:"from-green-300/30 to-emerald-300/30",shape:"rounded-[35px]",bgColor:"bg-gradient-to-br from-green-200/10 to-emerald-200/10",border:"border-2 border-green-300/40",iconBg:"bg-gradient-to-r from-green-200/20 to-emerald-200/20"};default:return{gradient:"from-gray-300/30 to-gray-400/30",shape:"rounded-[20px]",bgColor:"bg-gradient-to-br from-gray-200/10 to-gray-300/10",border:"border-2 border-gray-300/40",iconBg:"bg-gradient-to-r from-gray-200/20 to-gray-300/20"}}})(n);return te.jsx(lU,{className:"xs:w-[250px] w-full",children:te.jsx(zi.div,{variants:J0("right","spring",n*.5,.75),className:`w-full bg-gradient-to-r ${r.gradient} p-[2px] ${r.shape} shadow-card`,children:te.jsxs("div",{options:{max:45,scale:1,speed:450},className:`${r.bgColor} backdrop-blur-sm ${r.shape} py-5 px-12 min-h-[280px] flex justify-evenly items-center flex-col ${r.border}`,children:[te.jsx("div",{className:`p-4 rounded-full ${r.iconBg} shadow-lg border border-white/20`,children:te.jsx("img",{src:t,alt:e.toLowerCase().replace(" ","-"),className:"w-12 h-12 object-contain"})}),te.jsx("h3",{className:"text-white text-[20px] font-bold text-center",children:e})]})})})},KX=()=>te.jsxs(te.Fragment,{children:[te.jsxs(zi.div,{variants:Zw(),children:[te.jsx("p",{className:hs.sectionSubText,children:"Introduction"}),te.jsx("h2",{className:hs.sectionHeadText,children:"Overview."})]}),te.jsx(zi.p,{variants:J0("","",.1,1),className:"mt-4 text-secondary text-[17px] max-w-3xl leading-[30px]",children:" Hi, I'm a Java Full Stack Developer who loves building things that are both practical and smart. My toolkit includes Java, Spring Boot, React, Node.js, and Express.js, and lately I've been diving deep into the world of AI, LLMs, and RAG pipelines to bring intelligence into applications. I enjoy connecting the dots between robust backends, clean frontends, and AI-driven features that solve real-world problems. Whether it's designing APIs, crafting smooth UIs, or wiring up LLM-powered assistants with vector search and cloud deployment, I like turning complex tech into solutions people actually enjoy using. The kind of developer I am? A quick learner, a collaborator, and someone who'd rather ship something useful than get lost in buzzwords. If you're into building cool, scalable, and AI-enhanced systems, let's connect  I'm always up for creating something awesome. "}),te.jsx("div",{className:"mt-20 flex flex-wrap gap-10",children:zX.map((n,e)=>te.jsx(QX,{index:e,...n},n.title))})]}),$X=Sh(KX,"about"),eY=({technology:n,index:e})=>{const i=(r=>({"HTML 5":"#e34f26","CSS 3":"#1572b6",JavaScript:"#f7df1e",TypeScript:"#3178c6",Java:"#f89820",Spring:"#6DB33F","React JS":"#61dafb","Redux Toolkit":"#764abc","Tailwind CSS":"#06b6d4","Node JS":"#339933",MongoDB:"#47a248","Three JS":"#000000",git:"#f05032",docker:"#2496ed"})[r]||"#61dafb")(n.name);return te.jsx(zi.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:e*.1},whileHover:{scale:1.05,rotateY:5,transition:{duration:.3}},className:"group relative",children:te.jsxs("div",{className:"w-24 h-24 relative",children:[te.jsxs("div",{className:"w-full h-full rounded-2xl border-2 border-white/20 backdrop-blur-sm flex flex-col items-center justify-center p-3 transition-all duration-300 group-hover:border-white/40",style:{background:`linear-gradient(135deg, ${i}20 0%, ${i}10 100%)`,boxShadow:`0 8px 32px ${i}30, inset 0 1px 0 rgba(255, 255, 255, 0.1)`},children:[te.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mb-2 transition-all duration-300 group-hover:scale-110",style:{background:`linear-gradient(135deg, ${i} 0%, ${i}CC 100%)`,boxShadow:`0 4px 16px ${i}50`},children:te.jsx("img",{src:n.icon,alt:n.name,className:"w-8 h-8 object-contain filter brightness-0 invert"})}),te.jsx("span",{className:"text-xs font-semibold text-center leading-tight transition-colors duration-300",style:{color:i},children:n.name})]}),te.jsx("div",{className:"absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 blur-xl",style:{background:`radial-gradient(circle, ${i}40 0%, transparent 70%)`,transform:"scale(1.2)"}})]})})},tY=()=>te.jsx("div",{className:"flex flex-row flex-wrap justify-center gap-8",children:VX.map((n,e)=>te.jsx(eY,{technology:n,index:e},n.name))}),nY=Sh(tY,"");var Q0={},uU={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var i=[],r=0;r<arguments.length;r++){var s=arguments[r];if(s){var o=typeof s;if(o==="string"||o==="number")i.push(s);else if(Array.isArray(s)){if(s.length){var a=t.apply(null,s);a&&i.push(a)}}else if(o==="object"){if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]")){i.push(s.toString());continue}for(var l in s)e.call(s,l)&&s[l]&&i.push(l)}}}return i.join(" ")}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(uU);var cU=uU.exports;Q0.__esModule=!0;Q0.default=void 0;var iY=Jw(X),Wo=Jw(NI),rY=Jw(cU);function Jw(n){return n&&n.__esModule?n:{default:n}}const fU=({animate:n=!0,className:e="",layout:t="2-columns",lineColor:i="#FFF",children:r})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",i),iY.default.createElement("div",{className:(0,rY.default)(e,"vertical-timeline",{"vertical-timeline--animate":n,"vertical-timeline--two-columns":t==="2-columns","vertical-timeline--one-column-left":t==="1-column"||t==="1-column-left","vertical-timeline--one-column-right":t==="1-column-right"})},r));fU.propTypes={children:Wo.default.oneOfType([Wo.default.arrayOf(Wo.default.node),Wo.default.node]).isRequired,className:Wo.default.string,animate:Wo.default.bool,layout:Wo.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:Wo.default.string};var sY=fU;Q0.default=sY;var K0={};function O_(){return O_=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},O_.apply(this,arguments)}function oY(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,F_(n,e)}function F_(n,e){return F_=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},F_(n,e)}function aY(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var k_=new Map,Lm=new WeakMap,hC=0,dU=void 0;function lY(n){dU=n}function uY(n){return n?(Lm.has(n)||(hC+=1,Lm.set(n,hC.toString())),Lm.get(n)):"0"}function cY(n){return Object.keys(n).sort().filter(function(e){return n[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?uY(n.root):n[e])}).toString()}function fY(n){var e=cY(n),t=k_.get(e);if(!t){var i=new Map,r,s=new IntersectionObserver(function(o){o.forEach(function(a){var l,u=a.isIntersecting&&r.some(function(f){return a.intersectionRatio>=f});n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=u),(l=i.get(a.target))==null||l.forEach(function(f){f(u,a)})})},n);r=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:i},k_.set(e,t)}return t}function Qw(n,e,t,i){if(t===void 0&&(t={}),i===void 0&&(i=dU),typeof window.IntersectionObserver>"u"&&i!==void 0){var r=n.getBoundingClientRect();return e(i,{isIntersecting:i,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var s=fY(t),o=s.id,a=s.observer,l=s.elements,u=l.get(n)||[];return l.has(n)||l.set(n,u),u.push(e),a.observe(n),function(){u.splice(u.indexOf(e),1),u.length===0&&(l.delete(n),a.unobserve(n)),l.size===0&&(a.disconnect(),k_.delete(o))}}var dY=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function pC(n){return typeof n.children!="function"}var Wg=function(n){oY(e,n);function e(i){var r;return r=n.call(this,i)||this,r.node=null,r._unobserveCb=null,r.handleNode=function(s){r.node&&(r.unobserve(),!s&&!r.props.triggerOnce&&!r.props.skip&&r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=s||null,r.observeNode()},r.handleChange=function(s,o){s&&r.props.triggerOnce&&r.unobserve(),pC(r.props)||r.setState({inView:s,entry:o}),r.props.onChange&&r.props.onChange(s,o)},r.state={inView:!!i.initialInView,entry:void 0},r}var t=e.prototype;return t.componentDidUpdate=function(r){(r.rootMargin!==this.props.rootMargin||r.root!==this.props.root||r.threshold!==this.props.threshold||r.skip!==this.props.skip||r.trackVisibility!==this.props.trackVisibility||r.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var r=this.props,s=r.threshold,o=r.root,a=r.rootMargin,l=r.trackVisibility,u=r.delay,f=r.fallbackInView;this._unobserveCb=Qw(this.node,this.handleChange,{threshold:s,root:o,rootMargin:a,trackVisibility:l,delay:u},f)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!pC(this.props)){var r=this.state,s=r.inView,o=r.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var a=this.props,l=a.children,u=a.as,f=aY(a,dY);return X.createElement(u||"div",O_({ref:this.handleNode},f),l)},e}(X.Component);Wg.displayName="InView";Wg.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function hY(n){var e=n===void 0?{}:n,t=e.threshold,i=e.delay,r=e.trackVisibility,s=e.rootMargin,o=e.root,a=e.triggerOnce,l=e.skip,u=e.initialInView,f=e.fallbackInView,h=X.useRef(),p=X.useState({inView:!!u}),m=p[0],v=p[1],w=X.useCallback(function(g){h.current!==void 0&&(h.current(),h.current=void 0),!l&&g&&(h.current=Qw(g,function(x,S){v({inView:x,entry:S}),S.isIntersecting&&a&&h.current&&(h.current(),h.current=void 0)},{root:o,rootMargin:s,threshold:t,trackVisibility:r,delay:i},f))},[Array.isArray(t)?t.toString():t,o,s,a,l,r,f,i]);X.useEffect(function(){!h.current&&m.entry&&!a&&!l&&v({inView:!!u})});var _=[w,m.inView,m.entry];return _.ref=_[0],_.inView=_[1],_.entry=_[2],_}const pY=Object.freeze(Object.defineProperty({__proto__:null,InView:Wg,default:Wg,defaultFallbackInView:lY,observe:Qw,useInView:hY},Symbol.toStringTag,{value:"Module"})),mY=qU(pY);K0.__esModule=!0;K0.default=void 0;var jo=Kw(X),on=Kw(NI),Im=Kw(cU),gY=mY;function Kw(n){return n&&n.__esModule?n:{default:n}}const hU=({children:n="",className:e="",contentArrowStyle:t=null,contentStyle:i=null,date:r="",dateClassName:s="",icon:o=null,iconClassName:a="",iconOnClick:l=null,onTimelineElementClick:u=null,iconStyle:f=null,id:h="",position:p="",style:m=null,textClassName:v="",intersectionObserverProps:w={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:_=!1})=>jo.default.createElement(gY.InView,w,({inView:g,ref:x})=>jo.default.createElement("div",{ref:x,id:h,className:(0,Im.default)(e,"vertical-timeline-element",{"vertical-timeline-element--left":p==="left","vertical-timeline-element--right":p==="right","vertical-timeline-element--no-children":n===""}),style:m},jo.default.createElement(jo.default.Fragment,null,jo.default.createElement("span",{style:f,onClick:l,className:(0,Im.default)(a,"vertical-timeline-element-icon",{"bounce-in":g||_,"is-hidden":!(g||_)})},o),jo.default.createElement("div",{style:i,onClick:u,className:(0,Im.default)(v,"vertical-timeline-element-content",{"bounce-in":g||_,"is-hidden":!(g||_)})},jo.default.createElement("div",{style:t,className:"vertical-timeline-element-content-arrow"}),n,jo.default.createElement("span",{className:(0,Im.default)(s,"vertical-timeline-element-date")},r)))));hU.propTypes={children:on.default.oneOfType([on.default.arrayOf(on.default.node),on.default.node]),className:on.default.string,contentArrowStyle:on.default.shape({}),contentStyle:on.default.shape({}),date:on.default.node,dateClassName:on.default.string,icon:on.default.element,iconClassName:on.default.string,iconStyle:on.default.shape({}),iconOnClick:on.default.func,onTimelineElementClick:on.default.func,id:on.default.string,position:on.default.string,style:on.default.shape({}),textClassName:on.default.string,visible:on.default.bool,intersectionObserverProps:on.default.shape({root:on.default.object,rootMargin:on.default.string,threshold:on.default.number,triggerOnce:on.default.bool})};var vY=hU;K0.default=vY;var pU={VerticalTimeline:Q0.default,VerticalTimelineElement:K0.default};const yY=({experience:n})=>te.jsxs(pU.VerticalTimelineElement,{contentStyle:{background:"linear-gradient(135deg, #1d1836 0%, #2a1f4a 100%)",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"20px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.3)"},contentArrowStyle:{borderRight:"7px solid #2a1f4a",filter:"drop-shadow(0 0 10px rgba(255, 255, 255, 0.1))"},date:n.date,iconStyle:{background:`linear-gradient(135deg, ${n.iconBg} 0%, ${n.iconBg}CC 100%)`,boxShadow:"0 0 20px rgba(255, 255, 255, 0.2), inset 0 0 20px rgba(255, 255, 255, 0.1)",border:"2px solid rgba(255, 255, 255, 0.2)",borderRadius:"50%",transform:"scale(1.1)"},icon:te.jsxs("div",{className:"flex justify-center items-center w-full h-full relative",children:[te.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-full"}),te.jsx("img",{src:n.icon,alt:n.company_name,className:"w-[70%] h-[70%] object-contain relative z-10 filter drop-shadow-lg",style:{filter:"brightness(1.1) contrast(1.1) drop-shadow(0 0 10px rgba(255, 255, 255, 0.3))"}})]}),children:[te.jsxs("div",{children:[te.jsx("h3",{className:"text-white text-[24px] font-bold",children:n.title}),te.jsx("p",{className:"text-secondary text-[16px] font-semibold",style:{margin:0},children:n.company_name})]}),te.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:n.points.map((e,t)=>te.jsx("li",{className:"text-white-100 text-[14px] pl-1 tracking-wider",children:e},`experience-point-${t}`))})]}),xY=()=>te.jsxs(te.Fragment,{children:[te.jsxs(zi.div,{variants:Zw(),children:[te.jsx("p",{className:`${hs.sectionSubText} text-center`,children:"What I've built"}),te.jsx("h2",{className:`${hs.sectionHeadText} text-center`,children:"Work Experience."})]}),te.jsx("div",{className:"mt-20 flex flex-col",children:te.jsx(pU.VerticalTimeline,{children:GX.map((n,e)=>te.jsx(yY,{experience:n},`experience-${e}`))})})]}),_Y=Sh(xY,"work"),SY=({index:n,name:e,description:t,tags:i,image:r,source_code_link:s})=>te.jsx(zi.div,{variants:J0("up","spring",n*.5,.75),children:te.jsxs(lU,{options:{max:45,scale:1,speed:450},className:"bg-tertiary p-5 rounded-2xl sm:w-[360px] w-full",children:[te.jsxs("div",{className:"relative w-full h-[230px]",children:[te.jsx("img",{src:r,alt:"project_image",className:"w-full h-full object-cover rounded-2xl"}),te.jsx("div",{className:"absolute inset-0 flex justify-end m-3 card-img_hover",children:te.jsx("div",{onClick:()=>window.open(s,"_blank"),className:"black-gradient w-10 h-10 rounded-full flex justify-center items-center cursor-pointer",children:te.jsx("img",{src:EX,alt:"source code",className:"w-1/2 h-1/2 object-contain"})})})]}),te.jsxs("div",{className:"mt-5",children:[te.jsx("h3",{className:"text-white font-bold text-[24px]",children:e}),te.jsx("p",{className:"mt-2 text-secondary text-[14px]",children:t})]}),te.jsx("div",{className:"mt-4 flex flex-wrap gap-2",children:i.map(o=>te.jsxs("p",{className:`text-[14px] ${o.color}`,children:["#",o.name]},`${e}-${o.name}`))})]})}),wY=()=>te.jsxs(te.Fragment,{children:[te.jsxs(zi.div,{variants:Zw(),children:[te.jsx("p",{className:`${hs.sectionSubText} `,children:"My work"}),te.jsx("h2",{className:`${hs.sectionHeadText}`,children:"Projects."})]}),te.jsx("div",{className:"w-full flex",children:te.jsx(zi.p,{variants:J0("","",.1,1),className:"mt-3 text-secondary text-[17px] max-w-3xl leading-[30px]",children:"Here is a collection of projects that demonstrate my technical expertise and problem-solving skills in action. With live demos and code repositories, they reflect my ability to design, build, and scale solutions across diverse technologies."})}),te.jsx("div",{className:"mt-20 flex flex-wrap gap-7",children:HX.map((n,e)=>te.jsx(SY,{index:e,...n},`project-${e}`))})]}),MY=Sh(wY,""),Qd={_origin:"https://api.emailjs.com"},EY=(n,e="https://api.emailjs.com")=>{Qd._userID=n,Qd._origin=e},mU=(n,e,t)=>{if(!n)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class mC{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const gU=(n,e,t={})=>new Promise((i,r)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const a=new mC(o);a.status===200||a.text==="OK"?i(a):r(a)}),s.addEventListener("error",({target:o})=>{r(new mC(o))}),s.open("POST",Qd._origin+n,!0),Object.keys(t).forEach(o=>{s.setRequestHeader(o,t[o])}),s.send(e)}),AY=(n,e,t,i)=>{const r=i||Qd._userID;return mU(r,n,e),gU("/api/v1.0/email/send",JSON.stringify({lib_version:"3.11.0",user_id:r,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})},TY=n=>{let e;if(typeof n=="string"?e=document.querySelector(n):e=n,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},bY=(n,e,t,i)=>{const r=i||Qd._userID,s=TY(t);mU(r,n,e);const o=new FormData(s);return o.append("lib_version","3.11.0"),o.append("service_id",n),o.append("template_id",e),o.append("user_id",r),gU("/api/v1.0/email/send-form",o)},CY={init:EY,send:AY,sendForm:bY},PY=()=>{const n=X.useRef(),[e,t]=X.useState({name:"",email:"",message:""}),[i,r]=X.useState(!1),[s,o]=X.useState({name:"",email:"",message:""}),a=u=>{const{target:f}=u,{name:h,value:p}=f;t({...e,[h]:p}),s[h]&&o({...s,[h]:""})},l=u=>{u.preventDefault(),o({name:"",email:"",message:""});let f=!1;const h={name:"",email:"",message:""};if(e.name.trim()||(h.name="Please enter your name.",f=!0),e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(h.email="Please enter a valid email address.",f=!0):(h.email="Please enter your email address.",f=!0),e.message.trim()||(h.message="Please enter your message.",f=!0),f){o(h);return}r(!0),CY.send({}.VITE_APP_EMAILJS_SERVICE_ID,{}.VITE_APP_EMAILJS_TEMPLATE_ID,{from_name:e.name,to_name:"Ravi",from_email:e.email,to_email:"ravi@gmail.com",message:e.message},{}.VITE_APP_EMAILJS_PUBLIC_KEY).then(()=>{r(!1),alert("Thank you. I will get back to you as soon as possible."),t({name:"",email:"",message:""})},p=>{r(!1),console.error(p),alert("Ahh, something went wrong. Please try again.")})};return te.jsxs("div",{className:"xl:mt-12 flex xl:flex-row flex-col-reverse gap-10 overflow-hidden",children:[te.jsxs(zi.div,{variants:dC("left","tween",.2,1),className:"flex-[0.75] bg-black-100 p-8 rounded-2xl",children:[te.jsx("p",{className:hs.sectionSubText,children:"Get in touch"}),te.jsx("h3",{className:hs.sectionHeadText,children:"Contact."}),te.jsxs("form",{ref:n,onSubmit:l,className:"mt-8 flex flex-col gap-6",children:[te.jsxs("label",{className:"flex flex-col",children:[te.jsx("span",{className:"text-white font-medium mb-2",children:"Your Name"}),te.jsx("input",{type:"text",name:"name",value:e.name,onChange:a,placeholder:"What's your good name?",className:`bg-tertiary py-3 px-4 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium ${s.name?"border-2 border-red-500":""}`}),s.name&&te.jsx("div",{className:"mt-2 px-3 py-2 bg-red-500/20 border border-red-500/50 rounded-lg text-red-300 text-sm",children:s.name})]}),te.jsxs("label",{className:"flex flex-col",children:[te.jsx("span",{className:"text-white font-medium mb-2",children:"Your email"}),te.jsx("input",{type:"email",name:"email",value:e.email,onChange:a,placeholder:"What's your web address?",className:`bg-tertiary py-3 px-4 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium ${s.email?"border-2 border-red-500":""}`}),s.email&&te.jsx("div",{className:"mt-2 px-3 py-2 bg-red-500/20 border border-red-500/50 rounded-lg text-red-300 text-sm",children:s.email})]}),te.jsxs("label",{className:"flex flex-col",children:[te.jsx("span",{className:"text-white font-medium mb-2",children:"Your Message"}),te.jsx("textarea",{rows:5,name:"message",value:e.message,onChange:a,placeholder:"What you want to say?",className:`bg-tertiary py-3 px-4 placeholder:text-secondary text-white rounded-lg outline-none border-none font-medium ${s.message?"border-2 border-red-500":""}`}),s.message&&te.jsx("div",{className:"mt-2 px-3 py-2 bg-red-500/20 border border-red-500/50 rounded-lg text-red-300 text-sm",children:s.message})]}),te.jsx("button",{type:"submit",className:"bg-tertiary py-3 px-8 rounded-xl outline-none w-fit text-white font-bold shadow-md shadow-primary",children:i?"Sending...":"Send"})]})]}),te.jsx(zi.div,{variants:dC("right","tween",.2,1),className:"xl:flex-1 xl:h-auto md:h-[400px] h-[300px]",children:te.jsx(fW,{})})]})},RY=Sh(PY,"contact"),LY=()=>te.jsx(GF,{children:te.jsxs("div",{className:"relative z-0 bg-gradient-to-br from-gray-900 via-blue-900 to-indigo-900",children:[te.jsx("div",{className:"tech-particles"}),te.jsx("div",{className:"absolute inset-0 tech-grid opacity-40"}),te.jsx("div",{className:"circuit-pattern"}),te.jsx("div",{className:"tech-lines"}),te.jsx("div",{className:"holographic-overlay"}),te.jsxs("div",{className:"relative z-10",children:[te.jsx(WX,{}),te.jsx(MX,{})]}),te.jsx($X,{}),te.jsx(_Y,{}),te.jsx(nY,{}),te.jsx(MY,{}),te.jsxs("div",{className:"relative z-0",children:[te.jsx(RY,{}),te.jsx(eW,{})]})]})});P1.createRoot(document.getElementById("root")).render(te.jsx($d.StrictMode,{children:te.jsx(LY,{})}));
